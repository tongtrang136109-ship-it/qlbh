(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const f of c)if(f.type==="childList")for(const m of f.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&a(m)}).observe(document,{childList:!0,subtree:!0});function s(c){const f={};return c.integrity&&(f.integrity=c.integrity),c.referrerPolicy&&(f.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?f.credentials="include":c.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function a(c){if(c.ep)return;c.ep=!0;const f=s(c);fetch(c.href,f)}})();function _p(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var tc={exports:{}},La={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gh;function Fy(){if(Gh)return La;Gh=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function s(a,c,f){var m=null;if(f!==void 0&&(m=""+f),c.key!==void 0&&(m=""+c.key),"key"in c){f={};for(var x in c)x!=="key"&&(f[x]=c[x])}else f=c;return c=f.ref,{$$typeof:t,type:a,key:m,ref:c!==void 0?c:null,props:f}}return La.Fragment=e,La.jsx=s,La.jsxs=s,La}var zh;function Oy(){return zh||(zh=1,tc.exports=Fy()),tc.exports}var i=Oy(),nc={exports:{}},Ne={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fh;function Jy(){if(Fh)return Ne;Fh=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),m=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),k=Symbol.iterator;function w(T){return T===null||typeof T!="object"?null:(T=k&&T[k]||T["@@iterator"],typeof T=="function"?T:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,_={};function j(T,U,J){this.props=T,this.context=U,this.refs=_,this.updater=J||M}j.prototype.isReactComponent={},j.prototype.setState=function(T,U){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,U,"setState")},j.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function D(){}D.prototype=j.prototype;function I(T,U,J){this.props=T,this.context=U,this.refs=_,this.updater=J||M}var q=I.prototype=new D;q.constructor=I,A(q,j.prototype),q.isPureReactComponent=!0;var ee=Array.isArray;function se(){}var F={H:null,A:null,T:null,S:null},oe=Object.prototype.hasOwnProperty;function $(T,U,J){var G=J.ref;return{$$typeof:t,type:T,key:U,ref:G!==void 0?G:null,props:J}}function Z(T,U){return $(T.type,U,T.props)}function Q(T){return typeof T=="object"&&T!==null&&T.$$typeof===t}function O(T){var U={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(J){return U[J]})}var ue=/\/+/g;function me(T,U){return typeof T=="object"&&T!==null&&T.key!=null?O(""+T.key):U.toString(36)}function Te(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(se,se):(T.status="pending",T.then(function(U){T.status==="pending"&&(T.status="fulfilled",T.value=U)},function(U){T.status==="pending"&&(T.status="rejected",T.reason=U)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function E(T,U,J,G,de){var ge=typeof T;(ge==="undefined"||ge==="boolean")&&(T=null);var V=!1;if(T===null)V=!0;else switch(ge){case"bigint":case"string":case"number":V=!0;break;case"object":switch(T.$$typeof){case t:case e:V=!0;break;case v:return V=T._init,E(V(T._payload),U,J,G,de)}}if(V)return de=de(T),V=G===""?"."+me(T,0):G,ee(de)?(J="",V!=null&&(J=V.replace(ue,"$&/")+"/"),E(de,U,J,"",function(ne){return ne})):de!=null&&(Q(de)&&(de=Z(de,J+(de.key==null||T&&T.key===de.key?"":(""+de.key).replace(ue,"$&/")+"/")+V)),U.push(de)),1;V=0;var ae=G===""?".":G+":";if(ee(T))for(var xe=0;xe<T.length;xe++)G=T[xe],ge=ae+me(G,xe),V+=E(G,U,J,ge,de);else if(xe=w(T),typeof xe=="function")for(T=xe.call(T),xe=0;!(G=T.next()).done;)G=G.value,ge=ae+me(G,xe++),V+=E(G,U,J,ge,de);else if(ge==="object"){if(typeof T.then=="function")return E(Te(T),U,J,G,de);throw U=String(T),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.")}return V}function X(T,U,J){if(T==null)return T;var G=[],de=0;return E(T,G,"","",function(ge){return U.call(J,ge,de++)}),G}function re(T){if(T._status===-1){var U=T._result;U=U(),U.then(function(J){(T._status===0||T._status===-1)&&(T._status=1,T._result=J)},function(J){(T._status===0||T._status===-1)&&(T._status=2,T._result=J)}),T._status===-1&&(T._status=0,T._result=U)}if(T._status===1)return T._result.default;throw T._result}var ie=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var U=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(U))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)},ce={map:X,forEach:function(T,U,J){X(T,function(){U.apply(this,arguments)},J)},count:function(T){var U=0;return X(T,function(){U++}),U},toArray:function(T){return X(T,function(U){return U})||[]},only:function(T){if(!Q(T))throw Error("React.Children.only expected to receive a single React element child.");return T}};return Ne.Activity=b,Ne.Children=ce,Ne.Component=j,Ne.Fragment=s,Ne.Profiler=c,Ne.PureComponent=I,Ne.StrictMode=a,Ne.Suspense=g,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(T){return F.H.useMemoCache(T)}},Ne.cache=function(T){return function(){return T.apply(null,arguments)}},Ne.cacheSignal=function(){return null},Ne.cloneElement=function(T,U,J){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var G=A({},T.props),de=T.key;if(U!=null)for(ge in U.key!==void 0&&(de=""+U.key),U)!oe.call(U,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&U.ref===void 0||(G[ge]=U[ge]);var ge=arguments.length-2;if(ge===1)G.children=J;else if(1<ge){for(var V=Array(ge),ae=0;ae<ge;ae++)V[ae]=arguments[ae+2];G.children=V}return $(T.type,de,G)},Ne.createContext=function(T){return T={$$typeof:m,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:f,_context:T},T},Ne.createElement=function(T,U,J){var G,de={},ge=null;if(U!=null)for(G in U.key!==void 0&&(ge=""+U.key),U)oe.call(U,G)&&G!=="key"&&G!=="__self"&&G!=="__source"&&(de[G]=U[G]);var V=arguments.length-2;if(V===1)de.children=J;else if(1<V){for(var ae=Array(V),xe=0;xe<V;xe++)ae[xe]=arguments[xe+2];de.children=ae}if(T&&T.defaultProps)for(G in V=T.defaultProps,V)de[G]===void 0&&(de[G]=V[G]);return $(T,ge,de)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(T){return{$$typeof:x,render:T}},Ne.isValidElement=Q,Ne.lazy=function(T){return{$$typeof:v,_payload:{_status:-1,_result:T},_init:re}},Ne.memo=function(T,U){return{$$typeof:p,type:T,compare:U===void 0?null:U}},Ne.startTransition=function(T){var U=F.T,J={};F.T=J;try{var G=T(),de=F.S;de!==null&&de(J,G),typeof G=="object"&&G!==null&&typeof G.then=="function"&&G.then(se,ie)}catch(ge){ie(ge)}finally{U!==null&&J.types!==null&&(U.types=J.types),F.T=U}},Ne.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},Ne.use=function(T){return F.H.use(T)},Ne.useActionState=function(T,U,J){return F.H.useActionState(T,U,J)},Ne.useCallback=function(T,U){return F.H.useCallback(T,U)},Ne.useContext=function(T){return F.H.useContext(T)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(T,U){return F.H.useDeferredValue(T,U)},Ne.useEffect=function(T,U){return F.H.useEffect(T,U)},Ne.useEffectEvent=function(T){return F.H.useEffectEvent(T)},Ne.useId=function(){return F.H.useId()},Ne.useImperativeHandle=function(T,U,J){return F.H.useImperativeHandle(T,U,J)},Ne.useInsertionEffect=function(T,U){return F.H.useInsertionEffect(T,U)},Ne.useLayoutEffect=function(T,U){return F.H.useLayoutEffect(T,U)},Ne.useMemo=function(T,U){return F.H.useMemo(T,U)},Ne.useOptimistic=function(T,U){return F.H.useOptimistic(T,U)},Ne.useReducer=function(T,U,J){return F.H.useReducer(T,U,J)},Ne.useRef=function(T){return F.H.useRef(T)},Ne.useState=function(T){return F.H.useState(T)},Ne.useSyncExternalStore=function(T,U,J){return F.H.useSyncExternalStore(T,U,J)},Ne.useTransition=function(){return F.H.useTransition()},Ne.version="19.2.0",Ne}var Oh;function Ec(){return Oh||(Oh=1,nc.exports=Jy()),nc.exports}var N=Ec();const On=_p(N);var lc={exports:{}},Pa={},sc={exports:{}},ac={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jh;function Yy(){return Jh||(Jh=1,(function(t){function e(E,X){var re=E.length;E.push(X);e:for(;0<re;){var ie=re-1>>>1,ce=E[ie];if(0<c(ce,X))E[ie]=X,E[re]=ce,re=ie;else break e}}function s(E){return E.length===0?null:E[0]}function a(E){if(E.length===0)return null;var X=E[0],re=E.pop();if(re!==X){E[0]=re;e:for(var ie=0,ce=E.length,T=ce>>>1;ie<T;){var U=2*(ie+1)-1,J=E[U],G=U+1,de=E[G];if(0>c(J,re))G<ce&&0>c(de,J)?(E[ie]=de,E[G]=re,ie=G):(E[ie]=J,E[U]=re,ie=U);else if(G<ce&&0>c(de,re))E[ie]=de,E[G]=re,ie=G;else break e}}return X}function c(E,X){var re=E.sortIndex-X.sortIndex;return re!==0?re:E.id-X.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;t.unstable_now=function(){return f.now()}}else{var m=Date,x=m.now();t.unstable_now=function(){return m.now()-x}}var g=[],p=[],v=1,b=null,k=3,w=!1,M=!1,A=!1,_=!1,j=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function q(E){for(var X=s(p);X!==null;){if(X.callback===null)a(p);else if(X.startTime<=E)a(p),X.sortIndex=X.expirationTime,e(g,X);else break;X=s(p)}}function ee(E){if(A=!1,q(E),!M)if(s(g)!==null)M=!0,se||(se=!0,O());else{var X=s(p);X!==null&&Te(ee,X.startTime-E)}}var se=!1,F=-1,oe=5,$=-1;function Z(){return _?!0:!(t.unstable_now()-$<oe)}function Q(){if(_=!1,se){var E=t.unstable_now();$=E;var X=!0;try{e:{M=!1,A&&(A=!1,D(F),F=-1),w=!0;var re=k;try{t:{for(q(E),b=s(g);b!==null&&!(b.expirationTime>E&&Z());){var ie=b.callback;if(typeof ie=="function"){b.callback=null,k=b.priorityLevel;var ce=ie(b.expirationTime<=E);if(E=t.unstable_now(),typeof ce=="function"){b.callback=ce,q(E),X=!0;break t}b===s(g)&&a(g),q(E)}else a(g);b=s(g)}if(b!==null)X=!0;else{var T=s(p);T!==null&&Te(ee,T.startTime-E),X=!1}}break e}finally{b=null,k=re,w=!1}X=void 0}}finally{X?O():se=!1}}}var O;if(typeof I=="function")O=function(){I(Q)};else if(typeof MessageChannel<"u"){var ue=new MessageChannel,me=ue.port2;ue.port1.onmessage=Q,O=function(){me.postMessage(null)}}else O=function(){j(Q,0)};function Te(E,X){F=j(function(){E(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(E){E.callback=null},t.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):oe=0<E?Math.floor(1e3/E):5},t.unstable_getCurrentPriorityLevel=function(){return k},t.unstable_next=function(E){switch(k){case 1:case 2:case 3:var X=3;break;default:X=k}var re=k;k=X;try{return E()}finally{k=re}},t.unstable_requestPaint=function(){_=!0},t.unstable_runWithPriority=function(E,X){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var re=k;k=E;try{return X()}finally{k=re}},t.unstable_scheduleCallback=function(E,X,re){var ie=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?ie+re:ie):re=ie,E){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=re+ce,E={id:v++,callback:X,priorityLevel:E,startTime:re,expirationTime:ce,sortIndex:-1},re>ie?(E.sortIndex=re,e(p,E),s(g)===null&&E===s(p)&&(A?(D(F),F=-1):A=!0,Te(ee,re-ie))):(E.sortIndex=ce,e(g,E),M||w||(M=!0,se||(se=!0,O()))),E},t.unstable_shouldYield=Z,t.unstable_wrapCallback=function(E){var X=k;return function(){var re=k;k=X;try{return E.apply(this,arguments)}finally{k=re}}}})(ac)),ac}var Yh;function Ky(){return Yh||(Yh=1,sc.exports=Yy()),sc.exports}var oc={exports:{}},Et={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kh;function $y(){if(Kh)return Et;Kh=1;var t=Ec();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var a={d:{f:s,r:function(){throw Error(e(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},c=Symbol.for("react.portal");function f(g,p,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:b==null?null:""+b,children:g,containerInfo:p,implementation:v}}var m=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function x(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Et.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Et.createPortal=function(g,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return f(g,p,null,v)},Et.flushSync=function(g){var p=m.T,v=a.p;try{if(m.T=null,a.p=2,g)return g()}finally{m.T=p,a.p=v,a.d.f()}},Et.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,a.d.C(g,p))},Et.prefetchDNS=function(g){typeof g=="string"&&a.d.D(g)},Et.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var v=p.as,b=x(v,p.crossOrigin),k=typeof p.integrity=="string"?p.integrity:void 0,w=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?a.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:b,integrity:k,fetchPriority:w}):v==="script"&&a.d.X(g,{crossOrigin:b,integrity:k,fetchPriority:w,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Et.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=x(p.as,p.crossOrigin);a.d.M(g,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&a.d.M(g)},Et.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,b=x(v,p.crossOrigin);a.d.L(g,v,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Et.preloadModule=function(g,p){if(typeof g=="string")if(p){var v=x(p.as,p.crossOrigin);a.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else a.d.m(g)},Et.requestFormReset=function(g){a.d.r(g)},Et.unstable_batchedUpdates=function(g,p){return g(p)},Et.useFormState=function(g,p,v){return m.H.useFormState(g,p,v)},Et.useFormStatus=function(){return m.H.useHostTransitionStatus()},Et.version="19.2.0",Et}var $h;function Xy(){if($h)return oc.exports;$h=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),oc.exports=$y(),oc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xh;function Qy(){if(Xh)return Pa;Xh=1;var t=Ky(),e=Ec(),s=Xy();function a(n){var l="https://react.dev/errors/"+n;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)l+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function f(n){var l=n,o=n;if(n.alternate)for(;l.return;)l=l.return;else{n=l;do l=n,(l.flags&4098)!==0&&(o=l.return),n=l.return;while(n)}return l.tag===3?o:null}function m(n){if(n.tag===13){var l=n.memoizedState;if(l===null&&(n=n.alternate,n!==null&&(l=n.memoizedState)),l!==null)return l.dehydrated}return null}function x(n){if(n.tag===31){var l=n.memoizedState;if(l===null&&(n=n.alternate,n!==null&&(l=n.memoizedState)),l!==null)return l.dehydrated}return null}function g(n){if(f(n)!==n)throw Error(a(188))}function p(n){var l=n.alternate;if(!l){if(l=f(n),l===null)throw Error(a(188));return l!==n?null:n}for(var o=n,d=l;;){var h=o.return;if(h===null)break;var y=h.alternate;if(y===null){if(d=h.return,d!==null){o=d;continue}break}if(h.child===y.child){for(y=h.child;y;){if(y===o)return g(h),n;if(y===d)return g(h),l;y=y.sibling}throw Error(a(188))}if(o.return!==d.return)o=h,d=y;else{for(var C=!1,S=h.child;S;){if(S===o){C=!0,o=h,d=y;break}if(S===d){C=!0,d=h,o=y;break}S=S.sibling}if(!C){for(S=y.child;S;){if(S===o){C=!0,o=y,d=h;break}if(S===d){C=!0,d=y,o=h;break}S=S.sibling}if(!C)throw Error(a(189))}}if(o.alternate!==d)throw Error(a(190))}if(o.tag!==3)throw Error(a(188));return o.stateNode.current===o?n:l}function v(n){var l=n.tag;if(l===5||l===26||l===27||l===6)return n;for(n=n.child;n!==null;){if(l=v(n),l!==null)return l;n=n.sibling}return null}var b=Object.assign,k=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),M=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),I=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),oe=Symbol.for("react.lazy"),$=Symbol.for("react.activity"),Z=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function O(n){return n===null||typeof n!="object"?null:(n=Q&&n[Q]||n["@@iterator"],typeof n=="function"?n:null)}var ue=Symbol.for("react.client.reference");function me(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===ue?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case A:return"Fragment";case j:return"Profiler";case _:return"StrictMode";case ee:return"Suspense";case se:return"SuspenseList";case $:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case M:return"Portal";case I:return n.displayName||"Context";case D:return(n._context.displayName||"Context")+".Consumer";case q:var l=n.render;return n=n.displayName,n||(n=l.displayName||l.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case F:return l=n.displayName||null,l!==null?l:me(n.type)||"Memo";case oe:l=n._payload,n=n._init;try{return me(n(l))}catch{}}return null}var Te=Array.isArray,E=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},ie=[],ce=-1;function T(n){return{current:n}}function U(n){0>ce||(n.current=ie[ce],ie[ce]=null,ce--)}function J(n,l){ce++,ie[ce]=n.current,n.current=l}var G=T(null),de=T(null),ge=T(null),V=T(null);function ae(n,l){switch(J(ge,l),J(de,n),J(G,null),l.nodeType){case 9:case 11:n=(n=l.documentElement)&&(n=n.namespaceURI)?dh(n):0;break;default:if(n=l.tagName,l=l.namespaceURI)l=dh(l),n=fh(l,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}U(G),J(G,n)}function xe(){U(G),U(de),U(ge)}function ne(n){n.memoizedState!==null&&J(V,n);var l=G.current,o=fh(l,n.type);l!==o&&(J(de,n),J(G,o))}function be(n){de.current===n&&(U(G),U(de)),V.current===n&&(U(V),Da._currentValue=re)}var we,rt;function He(n){if(we===void 0)try{throw Error()}catch(o){var l=o.stack.trim().match(/\n( *(at )?)/);we=l&&l[1]||"",rt=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+we+n+rt}var pt=!1;function vt(n,l){if(!n||pt)return"";pt=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(l){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(Y){var z=Y}Reflect.construct(n,[],le)}else{try{le.call()}catch(Y){z=Y}n.call(le.prototype)}}else{try{throw Error()}catch(Y){z=Y}(le=n())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(Y){if(Y&&z&&typeof Y.stack=="string")return[Y.stack,z.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=d.DetermineComponentFrameRoot(),C=y[0],S=y[1];if(C&&S){var R=C.split(`
`),B=S.split(`
`);for(h=d=0;d<R.length&&!R[d].includes("DetermineComponentFrameRoot");)d++;for(;h<B.length&&!B[h].includes("DetermineComponentFrameRoot");)h++;if(d===R.length||h===B.length)for(d=R.length-1,h=B.length-1;1<=d&&0<=h&&R[d]!==B[h];)h--;for(;1<=d&&0<=h;d--,h--)if(R[d]!==B[h]){if(d!==1||h!==1)do if(d--,h--,0>h||R[d]!==B[h]){var W=`
`+R[d].replace(" at new "," at ");return n.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",n.displayName)),W}while(1<=d&&0<=h);break}}}finally{pt=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?He(o):""}function ze(n,l){switch(n.tag){case 26:case 27:case 5:return He(n.type);case 16:return He("Lazy");case 13:return n.child!==l&&l!==null?He("Suspense Fallback"):He("Suspense");case 19:return He("SuspenseList");case 0:case 15:return vt(n.type,!1);case 11:return vt(n.type.render,!1);case 1:return vt(n.type,!0);case 31:return He("Activity");default:return""}}function nt(n){try{var l="",o=null;do l+=ze(n,o),o=n,n=n.return;while(n);return l}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var St=Object.prototype.hasOwnProperty,Cl=t.unstable_scheduleCallback,Kn=t.unstable_cancelCallback,Jl=t.unstable_shouldYield,$a=t.unstable_requestPaint,wt=t.unstable_now,Bi=t.unstable_getCurrentPriorityLevel,Xa=t.unstable_ImmediatePriority,Qa=t.unstable_UserBlockingPriority,Cn=t.unstable_NormalPriority,Fs=t.unstable_LowPriority,Za=t.unstable_IdlePriority,Gi=t.log,zi=t.unstable_setDisableYieldValue,Tl=null,At=null;function rn(n){if(typeof Gi=="function"&&zi(n),At&&typeof At.setStrictMode=="function")try{At.setStrictMode(Tl,n)}catch{}}var K=Math.clz32?Math.clz32:Me,fe=Math.log,Fe=Math.LN2;function Me(n){return n>>>=0,n===0?32:31-(fe(n)/Fe|0)|0}var Ue=256,Ce=262144,je=4194304;function at(n){var l=n&42;if(l!==0)return l;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Oe(n,l,o){var d=n.pendingLanes;if(d===0)return 0;var h=0,y=n.suspendedLanes,C=n.pingedLanes;n=n.warmLanes;var S=d&134217727;return S!==0?(d=S&~y,d!==0?h=at(d):(C&=S,C!==0?h=at(C):o||(o=S&~n,o!==0&&(h=at(o))))):(S=d&~y,S!==0?h=at(S):C!==0?h=at(C):o||(o=d&~n,o!==0&&(h=at(o)))),h===0?0:l!==0&&l!==h&&(l&y)===0&&(y=h&-h,o=l&-l,y>=o||y===32&&(o&4194048)!==0)?l:h}function We(n,l){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&l)===0}function Os(n,l){switch(n){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tn(){var n=je;return je<<=1,(je&62914560)===0&&(je=4194304),n}function Nl(n){for(var l=[],o=0;31>o;o++)l.push(n);return l}function Js(n,l){n.pendingLanes|=l,l!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Dg(n,l,o,d,h,y){var C=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var S=n.entanglements,R=n.expirationTimes,B=n.hiddenUpdates;for(o=C&~o;0<o;){var W=31-K(o),le=1<<W;S[W]=0,R[W]=-1;var z=B[W];if(z!==null)for(B[W]=null,W=0;W<z.length;W++){var Y=z[W];Y!==null&&(Y.lane&=-536870913)}o&=~le}d!==0&&Jc(n,d,0),y!==0&&h===0&&n.tag!==0&&(n.suspendedLanes|=y&~(C&~l))}function Jc(n,l,o){n.pendingLanes|=l,n.suspendedLanes&=~l;var d=31-K(l);n.entangledLanes|=l,n.entanglements[d]=n.entanglements[d]|1073741824|o&261930}function Yc(n,l){var o=n.entangledLanes|=l;for(n=n.entanglements;o;){var d=31-K(o),h=1<<d;h&l|n[d]&l&&(n[d]|=l),o&=~h}}function Kc(n,l){var o=l&-l;return o=(o&42)!==0?1:Fi(o),(o&(n.suspendedLanes|l))!==0?0:o}function Fi(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Oi(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function $c(){var n=X.p;return n!==0?n:(n=window.event,n===void 0?32:Uh(n.type))}function Xc(n,l){var o=X.p;try{return X.p=n,l()}finally{X.p=o}}var $n=Math.random().toString(36).slice(2),bt="__reactFiber$"+$n,Rt="__reactProps$"+$n,Yl="__reactContainer$"+$n,Ji="__reactEvents$"+$n,Ig="__reactListeners$"+$n,jg="__reactHandles$"+$n,Qc="__reactResources$"+$n,Ys="__reactMarker$"+$n;function Yi(n){delete n[bt],delete n[Rt],delete n[Ji],delete n[Ig],delete n[jg]}function Kl(n){var l=n[bt];if(l)return l;for(var o=n.parentNode;o;){if(l=o[Yl]||o[bt]){if(o=l.alternate,l.child!==null||o!==null&&o.child!==null)for(n=vh(n);n!==null;){if(o=n[bt])return o;n=vh(n)}return l}n=o,o=n.parentNode}return null}function $l(n){if(n=n[bt]||n[Yl]){var l=n.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return n}return null}function Ks(n){var l=n.tag;if(l===5||l===26||l===27||l===6)return n.stateNode;throw Error(a(33))}function Xl(n){var l=n[Qc];return l||(l=n[Qc]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function gt(n){n[Ys]=!0}var Zc=new Set,Wc={};function Sl(n,l){Ql(n,l),Ql(n+"Capture",l)}function Ql(n,l){for(Wc[n]=l,n=0;n<l.length;n++)Zc.add(l[n])}var Ug=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ed={},td={};function Lg(n){return St.call(td,n)?!0:St.call(ed,n)?!1:Ug.test(n)?td[n]=!0:(ed[n]=!0,!1)}function Wa(n,l,o){if(Lg(l))if(o===null)n.removeAttribute(l);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(l);return;case"boolean":var d=l.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){n.removeAttribute(l);return}}n.setAttribute(l,""+o)}}function eo(n,l,o){if(o===null)n.removeAttribute(l);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(l);return}n.setAttribute(l,""+o)}}function Nn(n,l,o,d){if(d===null)n.removeAttribute(o);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(l,o,""+d)}}function Yt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function nd(n){var l=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Pg(n,l,o){var d=Object.getOwnPropertyDescriptor(n.constructor.prototype,l);if(!n.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var h=d.get,y=d.set;return Object.defineProperty(n,l,{configurable:!0,get:function(){return h.call(this)},set:function(C){o=""+C,y.call(this,C)}}),Object.defineProperty(n,l,{enumerable:d.enumerable}),{getValue:function(){return o},setValue:function(C){o=""+C},stopTracking:function(){n._valueTracker=null,delete n[l]}}}}function Ki(n){if(!n._valueTracker){var l=nd(n)?"checked":"value";n._valueTracker=Pg(n,l,""+n[l])}}function ld(n){if(!n)return!1;var l=n._valueTracker;if(!l)return!0;var o=l.getValue(),d="";return n&&(d=nd(n)?n.checked?"true":"false":n.value),n=d,n!==o?(l.setValue(n),!0):!1}function to(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Vg=/[\n"\\]/g;function Kt(n){return n.replace(Vg,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function $i(n,l,o,d,h,y,C,S){n.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?n.type=C:n.removeAttribute("type"),l!=null?C==="number"?(l===0&&n.value===""||n.value!=l)&&(n.value=""+Yt(l)):n.value!==""+Yt(l)&&(n.value=""+Yt(l)):C!=="submit"&&C!=="reset"||n.removeAttribute("value"),l!=null?Xi(n,C,Yt(l)):o!=null?Xi(n,C,Yt(o)):d!=null&&n.removeAttribute("value"),h==null&&y!=null&&(n.defaultChecked=!!y),h!=null&&(n.checked=h&&typeof h!="function"&&typeof h!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?n.name=""+Yt(S):n.removeAttribute("name")}function sd(n,l,o,d,h,y,C,S){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(n.type=y),l!=null||o!=null){if(!(y!=="submit"&&y!=="reset"||l!=null)){Ki(n);return}o=o!=null?""+Yt(o):"",l=l!=null?""+Yt(l):o,S||l===n.value||(n.value=l),n.defaultValue=l}d=d??h,d=typeof d!="function"&&typeof d!="symbol"&&!!d,n.checked=S?n.checked:!!d,n.defaultChecked=!!d,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(n.name=C),Ki(n)}function Xi(n,l,o){l==="number"&&to(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Zl(n,l,o,d){if(n=n.options,l){l={};for(var h=0;h<o.length;h++)l["$"+o[h]]=!0;for(o=0;o<n.length;o++)h=l.hasOwnProperty("$"+n[o].value),n[o].selected!==h&&(n[o].selected=h),h&&d&&(n[o].defaultSelected=!0)}else{for(o=""+Yt(o),l=null,h=0;h<n.length;h++){if(n[h].value===o){n[h].selected=!0,d&&(n[h].defaultSelected=!0);return}l!==null||n[h].disabled||(l=n[h])}l!==null&&(l.selected=!0)}}function ad(n,l,o){if(l!=null&&(l=""+Yt(l),l!==n.value&&(n.value=l),o==null)){n.defaultValue!==l&&(n.defaultValue=l);return}n.defaultValue=o!=null?""+Yt(o):""}function od(n,l,o,d){if(l==null){if(d!=null){if(o!=null)throw Error(a(92));if(Te(d)){if(1<d.length)throw Error(a(93));d=d[0]}o=d}o==null&&(o=""),l=o}o=Yt(l),n.defaultValue=o,d=n.textContent,d===o&&d!==""&&d!==null&&(n.value=d),Ki(n)}function Wl(n,l){if(l){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=l;return}}n.textContent=l}var qg=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function id(n,l,o){var d=l.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?d?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="":d?n.setProperty(l,o):typeof o!="number"||o===0||qg.has(l)?l==="float"?n.cssFloat=o:n[l]=(""+o).trim():n[l]=o+"px"}function rd(n,l,o){if(l!=null&&typeof l!="object")throw Error(a(62));if(n=n.style,o!=null){for(var d in o)!o.hasOwnProperty(d)||l!=null&&l.hasOwnProperty(d)||(d.indexOf("--")===0?n.setProperty(d,""):d==="float"?n.cssFloat="":n[d]="");for(var h in l)d=l[h],l.hasOwnProperty(h)&&o[h]!==d&&id(n,h,d)}else for(var y in l)l.hasOwnProperty(y)&&id(n,y,l[y])}function Qi(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Bg=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function no(n){return Bg.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Sn(){}var Zi=null;function Wi(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var es=null,ts=null;function ud(n){var l=$l(n);if(l&&(n=l.stateNode)){var o=n[Rt]||null;e:switch(n=l.stateNode,l.type){case"input":if($i(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),l=o.name,o.type==="radio"&&l!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Kt(""+l)+'"][type="radio"]'),l=0;l<o.length;l++){var d=o[l];if(d!==n&&d.form===n.form){var h=d[Rt]||null;if(!h)throw Error(a(90));$i(d,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(l=0;l<o.length;l++)d=o[l],d.form===n.form&&ld(d)}break e;case"textarea":ad(n,o.value,o.defaultValue);break e;case"select":l=o.value,l!=null&&Zl(n,!!o.multiple,l,!1)}}}var er=!1;function cd(n,l,o){if(er)return n(l,o);er=!0;try{var d=n(l);return d}finally{if(er=!1,(es!==null||ts!==null)&&(Fo(),es&&(l=es,n=ts,ts=es=null,ud(l),n)))for(l=0;l<n.length;l++)ud(n[l])}}function $s(n,l){var o=n.stateNode;if(o===null)return null;var d=o[Rt]||null;if(d===null)return null;o=d[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(n=n.type,d=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!d;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(a(231,l,typeof o));return o}var wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),tr=!1;if(wn)try{var Xs={};Object.defineProperty(Xs,"passive",{get:function(){tr=!0}}),window.addEventListener("test",Xs,Xs),window.removeEventListener("test",Xs,Xs)}catch{tr=!1}var Xn=null,nr=null,lo=null;function dd(){if(lo)return lo;var n,l=nr,o=l.length,d,h="value"in Xn?Xn.value:Xn.textContent,y=h.length;for(n=0;n<o&&l[n]===h[n];n++);var C=o-n;for(d=1;d<=C&&l[o-d]===h[y-d];d++);return lo=h.slice(n,1<d?1-d:void 0)}function so(n){var l=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&l===13&&(n=13)):n=l,n===10&&(n=13),32<=n||n===13?n:0}function ao(){return!0}function fd(){return!1}function Dt(n){function l(o,d,h,y,C){this._reactName=o,this._targetInst=h,this.type=d,this.nativeEvent=y,this.target=C,this.currentTarget=null;for(var S in n)n.hasOwnProperty(S)&&(o=n[S],this[S]=o?o(y):y[S]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?ao:fd,this.isPropagationStopped=fd,this}return b(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=ao)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=ao)},persist:function(){},isPersistent:ao}),l}var wl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oo=Dt(wl),Qs=b({},wl,{view:0,detail:0}),Gg=Dt(Qs),lr,sr,Zs,io=b({},Qs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:or,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Zs&&(Zs&&n.type==="mousemove"?(lr=n.screenX-Zs.screenX,sr=n.screenY-Zs.screenY):sr=lr=0,Zs=n),lr)},movementY:function(n){return"movementY"in n?n.movementY:sr}}),md=Dt(io),zg=b({},io,{dataTransfer:0}),Fg=Dt(zg),Og=b({},Qs,{relatedTarget:0}),ar=Dt(Og),Jg=b({},wl,{animationName:0,elapsedTime:0,pseudoElement:0}),Yg=Dt(Jg),Kg=b({},wl,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),$g=Dt(Kg),Xg=b({},wl,{data:0}),hd=Dt(Xg),Qg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ex(n){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(n):(n=Wg[n])?!!l[n]:!1}function or(){return ex}var tx=b({},Qs,{key:function(n){if(n.key){var l=Qg[n.key]||n.key;if(l!=="Unidentified")return l}return n.type==="keypress"?(n=so(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Zg[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:or,charCode:function(n){return n.type==="keypress"?so(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?so(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),nx=Dt(tx),lx=b({},io,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pd=Dt(lx),sx=b({},Qs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:or}),ax=Dt(sx),ox=b({},wl,{propertyName:0,elapsedTime:0,pseudoElement:0}),ix=Dt(ox),rx=b({},io,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),ux=Dt(rx),cx=b({},wl,{newState:0,oldState:0}),dx=Dt(cx),fx=[9,13,27,32],ir=wn&&"CompositionEvent"in window,Ws=null;wn&&"documentMode"in document&&(Ws=document.documentMode);var mx=wn&&"TextEvent"in window&&!Ws,gd=wn&&(!ir||Ws&&8<Ws&&11>=Ws),xd=" ",yd=!1;function vd(n,l){switch(n){case"keyup":return fx.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bd(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ns=!1;function hx(n,l){switch(n){case"compositionend":return bd(l);case"keypress":return l.which!==32?null:(yd=!0,xd);case"textInput":return n=l.data,n===xd&&yd?null:n;default:return null}}function px(n,l){if(ns)return n==="compositionend"||!ir&&vd(n,l)?(n=dd(),lo=nr=Xn=null,ns=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return gd&&l.locale!=="ko"?null:l.data;default:return null}}var gx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kd(n){var l=n&&n.nodeName&&n.nodeName.toLowerCase();return l==="input"?!!gx[n.type]:l==="textarea"}function Cd(n,l,o,d){es?ts?ts.push(d):ts=[d]:es=d,l=Qo(l,"onChange"),0<l.length&&(o=new oo("onChange","change",null,o,d),n.push({event:o,listeners:l}))}var ea=null,ta=null;function xx(n){ah(n,0)}function ro(n){var l=Ks(n);if(ld(l))return n}function Td(n,l){if(n==="change")return l}var Nd=!1;if(wn){var rr;if(wn){var ur="oninput"in document;if(!ur){var Sd=document.createElement("div");Sd.setAttribute("oninput","return;"),ur=typeof Sd.oninput=="function"}rr=ur}else rr=!1;Nd=rr&&(!document.documentMode||9<document.documentMode)}function wd(){ea&&(ea.detachEvent("onpropertychange",Ed),ta=ea=null)}function Ed(n){if(n.propertyName==="value"&&ro(ta)){var l=[];Cd(l,ta,n,Wi(n)),cd(xx,l)}}function yx(n,l,o){n==="focusin"?(wd(),ea=l,ta=o,ea.attachEvent("onpropertychange",Ed)):n==="focusout"&&wd()}function vx(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ro(ta)}function bx(n,l){if(n==="click")return ro(l)}function kx(n,l){if(n==="input"||n==="change")return ro(l)}function Cx(n,l){return n===l&&(n!==0||1/n===1/l)||n!==n&&l!==l}var qt=typeof Object.is=="function"?Object.is:Cx;function na(n,l){if(qt(n,l))return!0;if(typeof n!="object"||n===null||typeof l!="object"||l===null)return!1;var o=Object.keys(n),d=Object.keys(l);if(o.length!==d.length)return!1;for(d=0;d<o.length;d++){var h=o[d];if(!St.call(l,h)||!qt(n[h],l[h]))return!1}return!0}function Md(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Ad(n,l){var o=Md(n);n=0;for(var d;o;){if(o.nodeType===3){if(d=n+o.textContent.length,n<=l&&d>=l)return{node:o,offset:l-n};n=d}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Md(o)}}function _d(n,l){return n&&l?n===l?!0:n&&n.nodeType===3?!1:l&&l.nodeType===3?_d(n,l.parentNode):"contains"in n?n.contains(l):n.compareDocumentPosition?!!(n.compareDocumentPosition(l)&16):!1:!1}function Rd(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var l=to(n.document);l instanceof n.HTMLIFrameElement;){try{var o=typeof l.contentWindow.location.href=="string"}catch{o=!1}if(o)n=l.contentWindow;else break;l=to(n.document)}return l}function cr(n){var l=n&&n.nodeName&&n.nodeName.toLowerCase();return l&&(l==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||l==="textarea"||n.contentEditable==="true")}var Tx=wn&&"documentMode"in document&&11>=document.documentMode,ls=null,dr=null,la=null,fr=!1;function Dd(n,l,o){var d=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;fr||ls==null||ls!==to(d)||(d=ls,"selectionStart"in d&&cr(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),la&&na(la,d)||(la=d,d=Qo(dr,"onSelect"),0<d.length&&(l=new oo("onSelect","select",null,l,o),n.push({event:l,listeners:d}),l.target=ls)))}function El(n,l){var o={};return o[n.toLowerCase()]=l.toLowerCase(),o["Webkit"+n]="webkit"+l,o["Moz"+n]="moz"+l,o}var ss={animationend:El("Animation","AnimationEnd"),animationiteration:El("Animation","AnimationIteration"),animationstart:El("Animation","AnimationStart"),transitionrun:El("Transition","TransitionRun"),transitionstart:El("Transition","TransitionStart"),transitioncancel:El("Transition","TransitionCancel"),transitionend:El("Transition","TransitionEnd")},mr={},Id={};wn&&(Id=document.createElement("div").style,"AnimationEvent"in window||(delete ss.animationend.animation,delete ss.animationiteration.animation,delete ss.animationstart.animation),"TransitionEvent"in window||delete ss.transitionend.transition);function Ml(n){if(mr[n])return mr[n];if(!ss[n])return n;var l=ss[n],o;for(o in l)if(l.hasOwnProperty(o)&&o in Id)return mr[n]=l[o];return n}var jd=Ml("animationend"),Ud=Ml("animationiteration"),Ld=Ml("animationstart"),Nx=Ml("transitionrun"),Sx=Ml("transitionstart"),wx=Ml("transitioncancel"),Pd=Ml("transitionend"),Vd=new Map,hr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");hr.push("scrollEnd");function un(n,l){Vd.set(n,l),Sl(l,[n])}var uo=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},$t=[],as=0,pr=0;function co(){for(var n=as,l=pr=as=0;l<n;){var o=$t[l];$t[l++]=null;var d=$t[l];$t[l++]=null;var h=$t[l];$t[l++]=null;var y=$t[l];if($t[l++]=null,d!==null&&h!==null){var C=d.pending;C===null?h.next=h:(h.next=C.next,C.next=h),d.pending=h}y!==0&&qd(o,h,y)}}function fo(n,l,o,d){$t[as++]=n,$t[as++]=l,$t[as++]=o,$t[as++]=d,pr|=d,n.lanes|=d,n=n.alternate,n!==null&&(n.lanes|=d)}function gr(n,l,o,d){return fo(n,l,o,d),mo(n)}function Al(n,l){return fo(n,null,null,l),mo(n)}function qd(n,l,o){n.lanes|=o;var d=n.alternate;d!==null&&(d.lanes|=o);for(var h=!1,y=n.return;y!==null;)y.childLanes|=o,d=y.alternate,d!==null&&(d.childLanes|=o),y.tag===22&&(n=y.stateNode,n===null||n._visibility&1||(h=!0)),n=y,y=y.return;return n.tag===3?(y=n.stateNode,h&&l!==null&&(h=31-K(o),n=y.hiddenUpdates,d=n[h],d===null?n[h]=[l]:d.push(l),l.lane=o|536870912),y):null}function mo(n){if(50<Sa)throw Sa=0,Su=null,Error(a(185));for(var l=n.return;l!==null;)n=l,l=n.return;return n.tag===3?n.stateNode:null}var os={};function Ex(n,l,o,d){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ht(n,l,o,d){return new Ex(n,l,o,d)}function xr(n){return n=n.prototype,!(!n||!n.isReactComponent)}function En(n,l){var o=n.alternate;return o===null?(o=Ht(n.tag,l,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=l,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,l=n.dependencies,o.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function Hd(n,l){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=l,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,l=o.dependencies,n.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),n}function ho(n,l,o,d,h,y){var C=0;if(d=n,typeof n=="function")xr(n)&&(C=1);else if(typeof n=="string")C=Dy(n,o,G.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case $:return n=Ht(31,o,l,h),n.elementType=$,n.lanes=y,n;case A:return _l(o.children,h,y,l);case _:C=8,h|=24;break;case j:return n=Ht(12,o,l,h|2),n.elementType=j,n.lanes=y,n;case ee:return n=Ht(13,o,l,h),n.elementType=ee,n.lanes=y,n;case se:return n=Ht(19,o,l,h),n.elementType=se,n.lanes=y,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case I:C=10;break e;case D:C=9;break e;case q:C=11;break e;case F:C=14;break e;case oe:C=16,d=null;break e}C=29,o=Error(a(130,n===null?"null":typeof n,"")),d=null}return l=Ht(C,o,l,h),l.elementType=n,l.type=d,l.lanes=y,l}function _l(n,l,o,d){return n=Ht(7,n,d,l),n.lanes=o,n}function yr(n,l,o){return n=Ht(6,n,null,l),n.lanes=o,n}function Bd(n){var l=Ht(18,null,null,0);return l.stateNode=n,l}function vr(n,l,o){return l=Ht(4,n.children!==null?n.children:[],n.key,l),l.lanes=o,l.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},l}var Gd=new WeakMap;function Xt(n,l){if(typeof n=="object"&&n!==null){var o=Gd.get(n);return o!==void 0?o:(l={value:n,source:l,stack:nt(l)},Gd.set(n,l),l)}return{value:n,source:l,stack:nt(l)}}var is=[],rs=0,po=null,sa=0,Qt=[],Zt=0,Qn=null,gn=1,xn="";function Mn(n,l){is[rs++]=sa,is[rs++]=po,po=n,sa=l}function zd(n,l,o){Qt[Zt++]=gn,Qt[Zt++]=xn,Qt[Zt++]=Qn,Qn=n;var d=gn;n=xn;var h=32-K(d)-1;d&=~(1<<h),o+=1;var y=32-K(l)+h;if(30<y){var C=h-h%5;y=(d&(1<<C)-1).toString(32),d>>=C,h-=C,gn=1<<32-K(l)+h|o<<h|d,xn=y+n}else gn=1<<y|o<<h|d,xn=n}function br(n){n.return!==null&&(Mn(n,1),zd(n,1,0))}function kr(n){for(;n===po;)po=is[--rs],is[rs]=null,sa=is[--rs],is[rs]=null;for(;n===Qn;)Qn=Qt[--Zt],Qt[Zt]=null,xn=Qt[--Zt],Qt[Zt]=null,gn=Qt[--Zt],Qt[Zt]=null}function Fd(n,l){Qt[Zt++]=gn,Qt[Zt++]=xn,Qt[Zt++]=Qn,gn=l.id,xn=l.overflow,Qn=n}var kt=null,Xe=null,Ie=!1,Zn=null,Wt=!1,Cr=Error(a(519));function Wn(n){var l=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw aa(Xt(l,n)),Cr}function Od(n){var l=n.stateNode,o=n.type,d=n.memoizedProps;switch(l[bt]=n,l[Rt]=d,o){case"dialog":_e("cancel",l),_e("close",l);break;case"iframe":case"object":case"embed":_e("load",l);break;case"video":case"audio":for(o=0;o<Ea.length;o++)_e(Ea[o],l);break;case"source":_e("error",l);break;case"img":case"image":case"link":_e("error",l),_e("load",l);break;case"details":_e("toggle",l);break;case"input":_e("invalid",l),sd(l,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":_e("invalid",l);break;case"textarea":_e("invalid",l),od(l,d.value,d.defaultValue,d.children)}o=d.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||l.textContent===""+o||d.suppressHydrationWarning===!0||uh(l.textContent,o)?(d.popover!=null&&(_e("beforetoggle",l),_e("toggle",l)),d.onScroll!=null&&_e("scroll",l),d.onScrollEnd!=null&&_e("scrollend",l),d.onClick!=null&&(l.onclick=Sn),l=!0):l=!1,l||Wn(n,!0)}function Jd(n){for(kt=n.return;kt;)switch(kt.tag){case 5:case 31:case 13:Wt=!1;return;case 27:case 3:Wt=!0;return;default:kt=kt.return}}function us(n){if(n!==kt)return!1;if(!Ie)return Jd(n),Ie=!0,!1;var l=n.tag,o;if((o=l!==3&&l!==27)&&((o=l===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Hu(n.type,n.memoizedProps)),o=!o),o&&Xe&&Wn(n),Jd(n),l===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));Xe=yh(n)}else if(l===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));Xe=yh(n)}else l===27?(l=Xe,ml(n.type)?(n=Ou,Ou=null,Xe=n):Xe=l):Xe=kt?tn(n.stateNode.nextSibling):null;return!0}function Rl(){Xe=kt=null,Ie=!1}function Tr(){var n=Zn;return n!==null&&(Lt===null?Lt=n:Lt.push.apply(Lt,n),Zn=null),n}function aa(n){Zn===null?Zn=[n]:Zn.push(n)}var Nr=T(null),Dl=null,An=null;function el(n,l,o){J(Nr,l._currentValue),l._currentValue=o}function _n(n){n._currentValue=Nr.current,U(Nr)}function Sr(n,l,o){for(;n!==null;){var d=n.alternate;if((n.childLanes&l)!==l?(n.childLanes|=l,d!==null&&(d.childLanes|=l)):d!==null&&(d.childLanes&l)!==l&&(d.childLanes|=l),n===o)break;n=n.return}}function wr(n,l,o,d){var h=n.child;for(h!==null&&(h.return=n);h!==null;){var y=h.dependencies;if(y!==null){var C=h.child;y=y.firstContext;e:for(;y!==null;){var S=y;y=h;for(var R=0;R<l.length;R++)if(S.context===l[R]){y.lanes|=o,S=y.alternate,S!==null&&(S.lanes|=o),Sr(y.return,o,n),d||(C=null);break e}y=S.next}}else if(h.tag===18){if(C=h.return,C===null)throw Error(a(341));C.lanes|=o,y=C.alternate,y!==null&&(y.lanes|=o),Sr(C,o,n),C=null}else C=h.child;if(C!==null)C.return=h;else for(C=h;C!==null;){if(C===n){C=null;break}if(h=C.sibling,h!==null){h.return=C.return,C=h;break}C=C.return}h=C}}function cs(n,l,o,d){n=null;for(var h=l,y=!1;h!==null;){if(!y){if((h.flags&524288)!==0)y=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var C=h.alternate;if(C===null)throw Error(a(387));if(C=C.memoizedProps,C!==null){var S=h.type;qt(h.pendingProps.value,C.value)||(n!==null?n.push(S):n=[S])}}else if(h===V.current){if(C=h.alternate,C===null)throw Error(a(387));C.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(n!==null?n.push(Da):n=[Da])}h=h.return}n!==null&&wr(l,n,o,d),l.flags|=262144}function go(n){for(n=n.firstContext;n!==null;){if(!qt(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Il(n){Dl=n,An=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Ct(n){return Yd(Dl,n)}function xo(n,l){return Dl===null&&Il(n),Yd(n,l)}function Yd(n,l){var o=l._currentValue;if(l={context:l,memoizedValue:o,next:null},An===null){if(n===null)throw Error(a(308));An=l,n.dependencies={lanes:0,firstContext:l},n.flags|=524288}else An=An.next=l;return o}var Mx=typeof AbortController<"u"?AbortController:function(){var n=[],l=this.signal={aborted:!1,addEventListener:function(o,d){n.push(d)}};this.abort=function(){l.aborted=!0,n.forEach(function(o){return o()})}},Ax=t.unstable_scheduleCallback,_x=t.unstable_NormalPriority,ut={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Er(){return{controller:new Mx,data:new Map,refCount:0}}function oa(n){n.refCount--,n.refCount===0&&Ax(_x,function(){n.controller.abort()})}var ia=null,Mr=0,ds=0,fs=null;function Rx(n,l){if(ia===null){var o=ia=[];Mr=0,ds=Ru(),fs={status:"pending",value:void 0,then:function(d){o.push(d)}}}return Mr++,l.then(Kd,Kd),l}function Kd(){if(--Mr===0&&ia!==null){fs!==null&&(fs.status="fulfilled");var n=ia;ia=null,ds=0,fs=null;for(var l=0;l<n.length;l++)(0,n[l])()}}function Dx(n,l){var o=[],d={status:"pending",value:null,reason:null,then:function(h){o.push(h)}};return n.then(function(){d.status="fulfilled",d.value=l;for(var h=0;h<o.length;h++)(0,o[h])(l)},function(h){for(d.status="rejected",d.reason=h,h=0;h<o.length;h++)(0,o[h])(void 0)}),d}var $d=E.S;E.S=function(n,l){Im=wt(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&Rx(n,l),$d!==null&&$d(n,l)};var jl=T(null);function Ar(){var n=jl.current;return n!==null?n:$e.pooledCache}function yo(n,l){l===null?J(jl,jl.current):J(jl,l.pool)}function Xd(){var n=Ar();return n===null?null:{parent:ut._currentValue,pool:n}}var ms=Error(a(460)),_r=Error(a(474)),vo=Error(a(542)),bo={then:function(){}};function Qd(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Zd(n,l,o){switch(o=n[o],o===void 0?n.push(l):o!==l&&(l.then(Sn,Sn),l=o),l.status){case"fulfilled":return l.value;case"rejected":throw n=l.reason,ef(n),n;default:if(typeof l.status=="string")l.then(Sn,Sn);else{if(n=$e,n!==null&&100<n.shellSuspendCounter)throw Error(a(482));n=l,n.status="pending",n.then(function(d){if(l.status==="pending"){var h=l;h.status="fulfilled",h.value=d}},function(d){if(l.status==="pending"){var h=l;h.status="rejected",h.reason=d}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw n=l.reason,ef(n),n}throw Ll=l,ms}}function Ul(n){try{var l=n._init;return l(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Ll=o,ms):o}}var Ll=null;function Wd(){if(Ll===null)throw Error(a(459));var n=Ll;return Ll=null,n}function ef(n){if(n===ms||n===vo)throw Error(a(483))}var hs=null,ra=0;function ko(n){var l=ra;return ra+=1,hs===null&&(hs=[]),Zd(hs,n,l)}function ua(n,l){l=l.props.ref,n.ref=l!==void 0?l:null}function Co(n,l){throw l.$$typeof===k?Error(a(525)):(n=Object.prototype.toString.call(l),Error(a(31,n==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":n)))}function tf(n){function l(P,L){if(n){var H=P.deletions;H===null?(P.deletions=[L],P.flags|=16):H.push(L)}}function o(P,L){if(!n)return null;for(;L!==null;)l(P,L),L=L.sibling;return null}function d(P){for(var L=new Map;P!==null;)P.key!==null?L.set(P.key,P):L.set(P.index,P),P=P.sibling;return L}function h(P,L){return P=En(P,L),P.index=0,P.sibling=null,P}function y(P,L,H){return P.index=H,n?(H=P.alternate,H!==null?(H=H.index,H<L?(P.flags|=67108866,L):H):(P.flags|=67108866,L)):(P.flags|=1048576,L)}function C(P){return n&&P.alternate===null&&(P.flags|=67108866),P}function S(P,L,H,te){return L===null||L.tag!==6?(L=yr(H,P.mode,te),L.return=P,L):(L=h(L,H),L.return=P,L)}function R(P,L,H,te){var ve=H.type;return ve===A?W(P,L,H.props.children,te,H.key):L!==null&&(L.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===oe&&Ul(ve)===L.type)?(L=h(L,H.props),ua(L,H),L.return=P,L):(L=ho(H.type,H.key,H.props,null,P.mode,te),ua(L,H),L.return=P,L)}function B(P,L,H,te){return L===null||L.tag!==4||L.stateNode.containerInfo!==H.containerInfo||L.stateNode.implementation!==H.implementation?(L=vr(H,P.mode,te),L.return=P,L):(L=h(L,H.children||[]),L.return=P,L)}function W(P,L,H,te,ve){return L===null||L.tag!==7?(L=_l(H,P.mode,te,ve),L.return=P,L):(L=h(L,H),L.return=P,L)}function le(P,L,H){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=yr(""+L,P.mode,H),L.return=P,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case w:return H=ho(L.type,L.key,L.props,null,P.mode,H),ua(H,L),H.return=P,H;case M:return L=vr(L,P.mode,H),L.return=P,L;case oe:return L=Ul(L),le(P,L,H)}if(Te(L)||O(L))return L=_l(L,P.mode,H,null),L.return=P,L;if(typeof L.then=="function")return le(P,ko(L),H);if(L.$$typeof===I)return le(P,xo(P,L),H);Co(P,L)}return null}function z(P,L,H,te){var ve=L!==null?L.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return ve!==null?null:S(P,L,""+H,te);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case w:return H.key===ve?R(P,L,H,te):null;case M:return H.key===ve?B(P,L,H,te):null;case oe:return H=Ul(H),z(P,L,H,te)}if(Te(H)||O(H))return ve!==null?null:W(P,L,H,te,null);if(typeof H.then=="function")return z(P,L,ko(H),te);if(H.$$typeof===I)return z(P,L,xo(P,H),te);Co(P,H)}return null}function Y(P,L,H,te,ve){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return P=P.get(H)||null,S(L,P,""+te,ve);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case w:return P=P.get(te.key===null?H:te.key)||null,R(L,P,te,ve);case M:return P=P.get(te.key===null?H:te.key)||null,B(L,P,te,ve);case oe:return te=Ul(te),Y(P,L,H,te,ve)}if(Te(te)||O(te))return P=P.get(H)||null,W(L,P,te,ve,null);if(typeof te.then=="function")return Y(P,L,H,ko(te),ve);if(te.$$typeof===I)return Y(P,L,H,xo(L,te),ve);Co(L,te)}return null}function he(P,L,H,te){for(var ve=null,Le=null,ye=L,Ee=L=0,De=null;ye!==null&&Ee<H.length;Ee++){ye.index>Ee?(De=ye,ye=null):De=ye.sibling;var Pe=z(P,ye,H[Ee],te);if(Pe===null){ye===null&&(ye=De);break}n&&ye&&Pe.alternate===null&&l(P,ye),L=y(Pe,L,Ee),Le===null?ve=Pe:Le.sibling=Pe,Le=Pe,ye=De}if(Ee===H.length)return o(P,ye),Ie&&Mn(P,Ee),ve;if(ye===null){for(;Ee<H.length;Ee++)ye=le(P,H[Ee],te),ye!==null&&(L=y(ye,L,Ee),Le===null?ve=ye:Le.sibling=ye,Le=ye);return Ie&&Mn(P,Ee),ve}for(ye=d(ye);Ee<H.length;Ee++)De=Y(ye,P,Ee,H[Ee],te),De!==null&&(n&&De.alternate!==null&&ye.delete(De.key===null?Ee:De.key),L=y(De,L,Ee),Le===null?ve=De:Le.sibling=De,Le=De);return n&&ye.forEach(function(yl){return l(P,yl)}),Ie&&Mn(P,Ee),ve}function ke(P,L,H,te){if(H==null)throw Error(a(151));for(var ve=null,Le=null,ye=L,Ee=L=0,De=null,Pe=H.next();ye!==null&&!Pe.done;Ee++,Pe=H.next()){ye.index>Ee?(De=ye,ye=null):De=ye.sibling;var yl=z(P,ye,Pe.value,te);if(yl===null){ye===null&&(ye=De);break}n&&ye&&yl.alternate===null&&l(P,ye),L=y(yl,L,Ee),Le===null?ve=yl:Le.sibling=yl,Le=yl,ye=De}if(Pe.done)return o(P,ye),Ie&&Mn(P,Ee),ve;if(ye===null){for(;!Pe.done;Ee++,Pe=H.next())Pe=le(P,Pe.value,te),Pe!==null&&(L=y(Pe,L,Ee),Le===null?ve=Pe:Le.sibling=Pe,Le=Pe);return Ie&&Mn(P,Ee),ve}for(ye=d(ye);!Pe.done;Ee++,Pe=H.next())Pe=Y(ye,P,Ee,Pe.value,te),Pe!==null&&(n&&Pe.alternate!==null&&ye.delete(Pe.key===null?Ee:Pe.key),L=y(Pe,L,Ee),Le===null?ve=Pe:Le.sibling=Pe,Le=Pe);return n&&ye.forEach(function(zy){return l(P,zy)}),Ie&&Mn(P,Ee),ve}function Ke(P,L,H,te){if(typeof H=="object"&&H!==null&&H.type===A&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case w:e:{for(var ve=H.key;L!==null;){if(L.key===ve){if(ve=H.type,ve===A){if(L.tag===7){o(P,L.sibling),te=h(L,H.props.children),te.return=P,P=te;break e}}else if(L.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===oe&&Ul(ve)===L.type){o(P,L.sibling),te=h(L,H.props),ua(te,H),te.return=P,P=te;break e}o(P,L);break}else l(P,L);L=L.sibling}H.type===A?(te=_l(H.props.children,P.mode,te,H.key),te.return=P,P=te):(te=ho(H.type,H.key,H.props,null,P.mode,te),ua(te,H),te.return=P,P=te)}return C(P);case M:e:{for(ve=H.key;L!==null;){if(L.key===ve)if(L.tag===4&&L.stateNode.containerInfo===H.containerInfo&&L.stateNode.implementation===H.implementation){o(P,L.sibling),te=h(L,H.children||[]),te.return=P,P=te;break e}else{o(P,L);break}else l(P,L);L=L.sibling}te=vr(H,P.mode,te),te.return=P,P=te}return C(P);case oe:return H=Ul(H),Ke(P,L,H,te)}if(Te(H))return he(P,L,H,te);if(O(H)){if(ve=O(H),typeof ve!="function")throw Error(a(150));return H=ve.call(H),ke(P,L,H,te)}if(typeof H.then=="function")return Ke(P,L,ko(H),te);if(H.$$typeof===I)return Ke(P,L,xo(P,H),te);Co(P,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,L!==null&&L.tag===6?(o(P,L.sibling),te=h(L,H),te.return=P,P=te):(o(P,L),te=yr(H,P.mode,te),te.return=P,P=te),C(P)):o(P,L)}return function(P,L,H,te){try{ra=0;var ve=Ke(P,L,H,te);return hs=null,ve}catch(ye){if(ye===ms||ye===vo)throw ye;var Le=Ht(29,ye,null,P.mode);return Le.lanes=te,Le.return=P,Le}finally{}}}var Pl=tf(!0),nf=tf(!1),tl=!1;function Rr(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Dr(n,l){n=n.updateQueue,l.updateQueue===n&&(l.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function nl(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function ll(n,l,o){var d=n.updateQueue;if(d===null)return null;if(d=d.shared,(qe&2)!==0){var h=d.pending;return h===null?l.next=l:(l.next=h.next,h.next=l),d.pending=l,l=mo(n),qd(n,null,o),l}return fo(n,d,l,o),mo(n)}function ca(n,l,o){if(l=l.updateQueue,l!==null&&(l=l.shared,(o&4194048)!==0)){var d=l.lanes;d&=n.pendingLanes,o|=d,l.lanes=o,Yc(n,o)}}function Ir(n,l){var o=n.updateQueue,d=n.alternate;if(d!==null&&(d=d.updateQueue,o===d)){var h=null,y=null;if(o=o.firstBaseUpdate,o!==null){do{var C={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};y===null?h=y=C:y=y.next=C,o=o.next}while(o!==null);y===null?h=y=l:y=y.next=l}else h=y=l;o={baseState:d.baseState,firstBaseUpdate:h,lastBaseUpdate:y,shared:d.shared,callbacks:d.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=l:n.next=l,o.lastBaseUpdate=l}var jr=!1;function da(){if(jr){var n=fs;if(n!==null)throw n}}function fa(n,l,o,d){jr=!1;var h=n.updateQueue;tl=!1;var y=h.firstBaseUpdate,C=h.lastBaseUpdate,S=h.shared.pending;if(S!==null){h.shared.pending=null;var R=S,B=R.next;R.next=null,C===null?y=B:C.next=B,C=R;var W=n.alternate;W!==null&&(W=W.updateQueue,S=W.lastBaseUpdate,S!==C&&(S===null?W.firstBaseUpdate=B:S.next=B,W.lastBaseUpdate=R))}if(y!==null){var le=h.baseState;C=0,W=B=R=null,S=y;do{var z=S.lane&-536870913,Y=z!==S.lane;if(Y?(Re&z)===z:(d&z)===z){z!==0&&z===ds&&(jr=!0),W!==null&&(W=W.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var he=n,ke=S;z=l;var Ke=o;switch(ke.tag){case 1:if(he=ke.payload,typeof he=="function"){le=he.call(Ke,le,z);break e}le=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=ke.payload,z=typeof he=="function"?he.call(Ke,le,z):he,z==null)break e;le=b({},le,z);break e;case 2:tl=!0}}z=S.callback,z!==null&&(n.flags|=64,Y&&(n.flags|=8192),Y=h.callbacks,Y===null?h.callbacks=[z]:Y.push(z))}else Y={lane:z,tag:S.tag,payload:S.payload,callback:S.callback,next:null},W===null?(B=W=Y,R=le):W=W.next=Y,C|=z;if(S=S.next,S===null){if(S=h.shared.pending,S===null)break;Y=S,S=Y.next,Y.next=null,h.lastBaseUpdate=Y,h.shared.pending=null}}while(!0);W===null&&(R=le),h.baseState=R,h.firstBaseUpdate=B,h.lastBaseUpdate=W,y===null&&(h.shared.lanes=0),rl|=C,n.lanes=C,n.memoizedState=le}}function lf(n,l){if(typeof n!="function")throw Error(a(191,n));n.call(l)}function sf(n,l){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)lf(o[n],l)}var ps=T(null),To=T(0);function af(n,l){n=qn,J(To,n),J(ps,l),qn=n|l.baseLanes}function Ur(){J(To,qn),J(ps,ps.current)}function Lr(){qn=To.current,U(ps),U(To)}var Bt=T(null),en=null;function sl(n){var l=n.alternate;J(ot,ot.current&1),J(Bt,n),en===null&&(l===null||ps.current!==null||l.memoizedState!==null)&&(en=n)}function Pr(n){J(ot,ot.current),J(Bt,n),en===null&&(en=n)}function of(n){n.tag===22?(J(ot,ot.current),J(Bt,n),en===null&&(en=n)):al()}function al(){J(ot,ot.current),J(Bt,Bt.current)}function Gt(n){U(Bt),en===n&&(en=null),U(ot)}var ot=T(0);function No(n){for(var l=n;l!==null;){if(l.tag===13){var o=l.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||zu(o)||Fu(o)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===n)break;for(;l.sibling===null;){if(l.return===null||l.return===n)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Rn=0,Se=null,Je=null,ct=null,So=!1,gs=!1,Vl=!1,wo=0,ma=0,xs=null,Ix=0;function lt(){throw Error(a(321))}function Vr(n,l){if(l===null)return!1;for(var o=0;o<l.length&&o<n.length;o++)if(!qt(n[o],l[o]))return!1;return!0}function qr(n,l,o,d,h,y){return Rn=y,Se=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,E.H=n===null||n.memoizedState===null?Ff:eu,Vl=!1,y=o(d,h),Vl=!1,gs&&(y=uf(l,o,d,h)),rf(n),y}function rf(n){E.H=ga;var l=Je!==null&&Je.next!==null;if(Rn=0,ct=Je=Se=null,So=!1,ma=0,xs=null,l)throw Error(a(300));n===null||dt||(n=n.dependencies,n!==null&&go(n)&&(dt=!0))}function uf(n,l,o,d){Se=n;var h=0;do{if(gs&&(xs=null),ma=0,gs=!1,25<=h)throw Error(a(301));if(h+=1,ct=Je=null,n.updateQueue!=null){var y=n.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}E.H=Of,y=l(o,d)}while(gs);return y}function jx(){var n=E.H,l=n.useState()[0];return l=typeof l.then=="function"?ha(l):l,n=n.useState()[0],(Je!==null?Je.memoizedState:null)!==n&&(Se.flags|=1024),l}function Hr(){var n=wo!==0;return wo=0,n}function Br(n,l,o){l.updateQueue=n.updateQueue,l.flags&=-2053,n.lanes&=~o}function Gr(n){if(So){for(n=n.memoizedState;n!==null;){var l=n.queue;l!==null&&(l.pending=null),n=n.next}So=!1}Rn=0,ct=Je=Se=null,gs=!1,ma=wo=0,xs=null}function _t(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ct===null?Se.memoizedState=ct=n:ct=ct.next=n,ct}function it(){if(Je===null){var n=Se.alternate;n=n!==null?n.memoizedState:null}else n=Je.next;var l=ct===null?Se.memoizedState:ct.next;if(l!==null)ct=l,Je=n;else{if(n===null)throw Se.alternate===null?Error(a(467)):Error(a(310));Je=n,n={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},ct===null?Se.memoizedState=ct=n:ct=ct.next=n}return ct}function Eo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ha(n){var l=ma;return ma+=1,xs===null&&(xs=[]),n=Zd(xs,n,l),l=Se,(ct===null?l.memoizedState:ct.next)===null&&(l=l.alternate,E.H=l===null||l.memoizedState===null?Ff:eu),n}function Mo(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return ha(n);if(n.$$typeof===I)return Ct(n)}throw Error(a(438,String(n)))}function zr(n){var l=null,o=Se.updateQueue;if(o!==null&&(l=o.memoCache),l==null){var d=Se.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(l={data:d.data.map(function(h){return h.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),o===null&&(o=Eo(),Se.updateQueue=o),o.memoCache=l,o=l.data[l.index],o===void 0)for(o=l.data[l.index]=Array(n),d=0;d<n;d++)o[d]=Z;return l.index++,o}function Dn(n,l){return typeof l=="function"?l(n):l}function Ao(n){var l=it();return Fr(l,Je,n)}function Fr(n,l,o){var d=n.queue;if(d===null)throw Error(a(311));d.lastRenderedReducer=o;var h=n.baseQueue,y=d.pending;if(y!==null){if(h!==null){var C=h.next;h.next=y.next,y.next=C}l.baseQueue=h=y,d.pending=null}if(y=n.baseState,h===null)n.memoizedState=y;else{l=h.next;var S=C=null,R=null,B=l,W=!1;do{var le=B.lane&-536870913;if(le!==B.lane?(Re&le)===le:(Rn&le)===le){var z=B.revertLane;if(z===0)R!==null&&(R=R.next={lane:0,revertLane:0,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),le===ds&&(W=!0);else if((Rn&z)===z){B=B.next,z===ds&&(W=!0);continue}else le={lane:0,revertLane:B.revertLane,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},R===null?(S=R=le,C=y):R=R.next=le,Se.lanes|=z,rl|=z;le=B.action,Vl&&o(y,le),y=B.hasEagerState?B.eagerState:o(y,le)}else z={lane:le,revertLane:B.revertLane,gesture:B.gesture,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},R===null?(S=R=z,C=y):R=R.next=z,Se.lanes|=le,rl|=le;B=B.next}while(B!==null&&B!==l);if(R===null?C=y:R.next=S,!qt(y,n.memoizedState)&&(dt=!0,W&&(o=fs,o!==null)))throw o;n.memoizedState=y,n.baseState=C,n.baseQueue=R,d.lastRenderedState=y}return h===null&&(d.lanes=0),[n.memoizedState,d.dispatch]}function Or(n){var l=it(),o=l.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=n;var d=o.dispatch,h=o.pending,y=l.memoizedState;if(h!==null){o.pending=null;var C=h=h.next;do y=n(y,C.action),C=C.next;while(C!==h);qt(y,l.memoizedState)||(dt=!0),l.memoizedState=y,l.baseQueue===null&&(l.baseState=y),o.lastRenderedState=y}return[y,d]}function cf(n,l,o){var d=Se,h=it(),y=Ie;if(y){if(o===void 0)throw Error(a(407));o=o()}else o=l();var C=!qt((Je||h).memoizedState,o);if(C&&(h.memoizedState=o,dt=!0),h=h.queue,Kr(mf.bind(null,d,h,n),[n]),h.getSnapshot!==l||C||ct!==null&&ct.memoizedState.tag&1){if(d.flags|=2048,ys(9,{destroy:void 0},ff.bind(null,d,h,o,l),null),$e===null)throw Error(a(349));y||(Rn&127)!==0||df(d,l,o)}return o}function df(n,l,o){n.flags|=16384,n={getSnapshot:l,value:o},l=Se.updateQueue,l===null?(l=Eo(),Se.updateQueue=l,l.stores=[n]):(o=l.stores,o===null?l.stores=[n]:o.push(n))}function ff(n,l,o,d){l.value=o,l.getSnapshot=d,hf(l)&&pf(n)}function mf(n,l,o){return o(function(){hf(l)&&pf(n)})}function hf(n){var l=n.getSnapshot;n=n.value;try{var o=l();return!qt(n,o)}catch{return!0}}function pf(n){var l=Al(n,2);l!==null&&Pt(l,n,2)}function Jr(n){var l=_t();if(typeof n=="function"){var o=n;if(n=o(),Vl){rn(!0);try{o()}finally{rn(!1)}}}return l.memoizedState=l.baseState=n,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dn,lastRenderedState:n},l}function gf(n,l,o,d){return n.baseState=o,Fr(n,Je,typeof d=="function"?d:Dn)}function Ux(n,l,o,d,h){if(Do(n))throw Error(a(485));if(n=l.action,n!==null){var y={payload:h,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){y.listeners.push(C)}};E.T!==null?o(!0):y.isTransition=!1,d(y),o=l.pending,o===null?(y.next=l.pending=y,xf(l,y)):(y.next=o.next,l.pending=o.next=y)}}function xf(n,l){var o=l.action,d=l.payload,h=n.state;if(l.isTransition){var y=E.T,C={};E.T=C;try{var S=o(h,d),R=E.S;R!==null&&R(C,S),yf(n,l,S)}catch(B){Yr(n,l,B)}finally{y!==null&&C.types!==null&&(y.types=C.types),E.T=y}}else try{y=o(h,d),yf(n,l,y)}catch(B){Yr(n,l,B)}}function yf(n,l,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(d){vf(n,l,d)},function(d){return Yr(n,l,d)}):vf(n,l,o)}function vf(n,l,o){l.status="fulfilled",l.value=o,bf(l),n.state=o,l=n.pending,l!==null&&(o=l.next,o===l?n.pending=null:(o=o.next,l.next=o,xf(n,o)))}function Yr(n,l,o){var d=n.pending;if(n.pending=null,d!==null){d=d.next;do l.status="rejected",l.reason=o,bf(l),l=l.next;while(l!==d)}n.action=null}function bf(n){n=n.listeners;for(var l=0;l<n.length;l++)(0,n[l])()}function kf(n,l){return l}function Cf(n,l){if(Ie){var o=$e.formState;if(o!==null){e:{var d=Se;if(Ie){if(Xe){t:{for(var h=Xe,y=Wt;h.nodeType!==8;){if(!y){h=null;break t}if(h=tn(h.nextSibling),h===null){h=null;break t}}y=h.data,h=y==="F!"||y==="F"?h:null}if(h){Xe=tn(h.nextSibling),d=h.data==="F!";break e}}Wn(d)}d=!1}d&&(l=o[0])}}return o=_t(),o.memoizedState=o.baseState=l,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:kf,lastRenderedState:l},o.queue=d,o=Bf.bind(null,Se,d),d.dispatch=o,d=Jr(!1),y=Wr.bind(null,Se,!1,d.queue),d=_t(),h={state:l,dispatch:null,action:n,pending:null},d.queue=h,o=Ux.bind(null,Se,h,y,o),h.dispatch=o,d.memoizedState=n,[l,o,!1]}function Tf(n){var l=it();return Nf(l,Je,n)}function Nf(n,l,o){if(l=Fr(n,l,kf)[0],n=Ao(Dn)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var d=ha(l)}catch(C){throw C===ms?vo:C}else d=l;l=it();var h=l.queue,y=h.dispatch;return o!==l.memoizedState&&(Se.flags|=2048,ys(9,{destroy:void 0},Lx.bind(null,h,o),null)),[d,y,n]}function Lx(n,l){n.action=l}function Sf(n){var l=it(),o=Je;if(o!==null)return Nf(l,o,n);it(),l=l.memoizedState,o=it();var d=o.queue.dispatch;return o.memoizedState=n,[l,d,!1]}function ys(n,l,o,d){return n={tag:n,create:o,deps:d,inst:l,next:null},l=Se.updateQueue,l===null&&(l=Eo(),Se.updateQueue=l),o=l.lastEffect,o===null?l.lastEffect=n.next=n:(d=o.next,o.next=n,n.next=d,l.lastEffect=n),n}function wf(){return it().memoizedState}function _o(n,l,o,d){var h=_t();Se.flags|=n,h.memoizedState=ys(1|l,{destroy:void 0},o,d===void 0?null:d)}function Ro(n,l,o,d){var h=it();d=d===void 0?null:d;var y=h.memoizedState.inst;Je!==null&&d!==null&&Vr(d,Je.memoizedState.deps)?h.memoizedState=ys(l,y,o,d):(Se.flags|=n,h.memoizedState=ys(1|l,y,o,d))}function Ef(n,l){_o(8390656,8,n,l)}function Kr(n,l){Ro(2048,8,n,l)}function Px(n){Se.flags|=4;var l=Se.updateQueue;if(l===null)l=Eo(),Se.updateQueue=l,l.events=[n];else{var o=l.events;o===null?l.events=[n]:o.push(n)}}function Mf(n){var l=it().memoizedState;return Px({ref:l,nextImpl:n}),function(){if((qe&2)!==0)throw Error(a(440));return l.impl.apply(void 0,arguments)}}function Af(n,l){return Ro(4,2,n,l)}function _f(n,l){return Ro(4,4,n,l)}function Rf(n,l){if(typeof l=="function"){n=n();var o=l(n);return function(){typeof o=="function"?o():l(null)}}if(l!=null)return n=n(),l.current=n,function(){l.current=null}}function Df(n,l,o){o=o!=null?o.concat([n]):null,Ro(4,4,Rf.bind(null,l,n),o)}function $r(){}function If(n,l){var o=it();l=l===void 0?null:l;var d=o.memoizedState;return l!==null&&Vr(l,d[1])?d[0]:(o.memoizedState=[n,l],n)}function jf(n,l){var o=it();l=l===void 0?null:l;var d=o.memoizedState;if(l!==null&&Vr(l,d[1]))return d[0];if(d=n(),Vl){rn(!0);try{n()}finally{rn(!1)}}return o.memoizedState=[d,l],d}function Xr(n,l,o){return o===void 0||(Rn&1073741824)!==0&&(Re&261930)===0?n.memoizedState=l:(n.memoizedState=o,n=Um(),Se.lanes|=n,rl|=n,o)}function Uf(n,l,o,d){return qt(o,l)?o:ps.current!==null?(n=Xr(n,o,d),qt(n,l)||(dt=!0),n):(Rn&42)===0||(Rn&1073741824)!==0&&(Re&261930)===0?(dt=!0,n.memoizedState=o):(n=Um(),Se.lanes|=n,rl|=n,l)}function Lf(n,l,o,d,h){var y=X.p;X.p=y!==0&&8>y?y:8;var C=E.T,S={};E.T=S,Wr(n,!1,l,o);try{var R=h(),B=E.S;if(B!==null&&B(S,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var W=Dx(R,d);pa(n,l,W,Ot(n))}else pa(n,l,d,Ot(n))}catch(le){pa(n,l,{then:function(){},status:"rejected",reason:le},Ot())}finally{X.p=y,C!==null&&S.types!==null&&(C.types=S.types),E.T=C}}function Vx(){}function Qr(n,l,o,d){if(n.tag!==5)throw Error(a(476));var h=Pf(n).queue;Lf(n,h,l,re,o===null?Vx:function(){return Vf(n),o(d)})}function Pf(n){var l=n.memoizedState;if(l!==null)return l;l={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dn,lastRenderedState:re},next:null};var o={};return l.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dn,lastRenderedState:o},next:null},n.memoizedState=l,n=n.alternate,n!==null&&(n.memoizedState=l),l}function Vf(n){var l=Pf(n);l.next===null&&(l=n.alternate.memoizedState),pa(n,l.next.queue,{},Ot())}function Zr(){return Ct(Da)}function qf(){return it().memoizedState}function Hf(){return it().memoizedState}function qx(n){for(var l=n.return;l!==null;){switch(l.tag){case 24:case 3:var o=Ot();n=nl(o);var d=ll(l,n,o);d!==null&&(Pt(d,l,o),ca(d,l,o)),l={cache:Er()},n.payload=l;return}l=l.return}}function Hx(n,l,o){var d=Ot();o={lane:d,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Do(n)?Gf(l,o):(o=gr(n,l,o,d),o!==null&&(Pt(o,n,d),zf(o,l,d)))}function Bf(n,l,o){var d=Ot();pa(n,l,o,d)}function pa(n,l,o,d){var h={lane:d,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Do(n))Gf(l,h);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=l.lastRenderedReducer,y!==null))try{var C=l.lastRenderedState,S=y(C,o);if(h.hasEagerState=!0,h.eagerState=S,qt(S,C))return fo(n,l,h,0),$e===null&&co(),!1}catch{}finally{}if(o=gr(n,l,h,d),o!==null)return Pt(o,n,d),zf(o,l,d),!0}return!1}function Wr(n,l,o,d){if(d={lane:2,revertLane:Ru(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Do(n)){if(l)throw Error(a(479))}else l=gr(n,o,d,2),l!==null&&Pt(l,n,2)}function Do(n){var l=n.alternate;return n===Se||l!==null&&l===Se}function Gf(n,l){gs=So=!0;var o=n.pending;o===null?l.next=l:(l.next=o.next,o.next=l),n.pending=l}function zf(n,l,o){if((o&4194048)!==0){var d=l.lanes;d&=n.pendingLanes,o|=d,l.lanes=o,Yc(n,o)}}var ga={readContext:Ct,use:Mo,useCallback:lt,useContext:lt,useEffect:lt,useImperativeHandle:lt,useLayoutEffect:lt,useInsertionEffect:lt,useMemo:lt,useReducer:lt,useRef:lt,useState:lt,useDebugValue:lt,useDeferredValue:lt,useTransition:lt,useSyncExternalStore:lt,useId:lt,useHostTransitionStatus:lt,useFormState:lt,useActionState:lt,useOptimistic:lt,useMemoCache:lt,useCacheRefresh:lt};ga.useEffectEvent=lt;var Ff={readContext:Ct,use:Mo,useCallback:function(n,l){return _t().memoizedState=[n,l===void 0?null:l],n},useContext:Ct,useEffect:Ef,useImperativeHandle:function(n,l,o){o=o!=null?o.concat([n]):null,_o(4194308,4,Rf.bind(null,l,n),o)},useLayoutEffect:function(n,l){return _o(4194308,4,n,l)},useInsertionEffect:function(n,l){_o(4,2,n,l)},useMemo:function(n,l){var o=_t();l=l===void 0?null:l;var d=n();if(Vl){rn(!0);try{n()}finally{rn(!1)}}return o.memoizedState=[d,l],d},useReducer:function(n,l,o){var d=_t();if(o!==void 0){var h=o(l);if(Vl){rn(!0);try{o(l)}finally{rn(!1)}}}else h=l;return d.memoizedState=d.baseState=h,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:h},d.queue=n,n=n.dispatch=Hx.bind(null,Se,n),[d.memoizedState,n]},useRef:function(n){var l=_t();return n={current:n},l.memoizedState=n},useState:function(n){n=Jr(n);var l=n.queue,o=Bf.bind(null,Se,l);return l.dispatch=o,[n.memoizedState,o]},useDebugValue:$r,useDeferredValue:function(n,l){var o=_t();return Xr(o,n,l)},useTransition:function(){var n=Jr(!1);return n=Lf.bind(null,Se,n.queue,!0,!1),_t().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,l,o){var d=Se,h=_t();if(Ie){if(o===void 0)throw Error(a(407));o=o()}else{if(o=l(),$e===null)throw Error(a(349));(Re&127)!==0||df(d,l,o)}h.memoizedState=o;var y={value:o,getSnapshot:l};return h.queue=y,Ef(mf.bind(null,d,y,n),[n]),d.flags|=2048,ys(9,{destroy:void 0},ff.bind(null,d,y,o,l),null),o},useId:function(){var n=_t(),l=$e.identifierPrefix;if(Ie){var o=xn,d=gn;o=(d&~(1<<32-K(d)-1)).toString(32)+o,l="_"+l+"R_"+o,o=wo++,0<o&&(l+="H"+o.toString(32)),l+="_"}else o=Ix++,l="_"+l+"r_"+o.toString(32)+"_";return n.memoizedState=l},useHostTransitionStatus:Zr,useFormState:Cf,useActionState:Cf,useOptimistic:function(n){var l=_t();l.memoizedState=l.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=o,l=Wr.bind(null,Se,!0,o),o.dispatch=l,[n,l]},useMemoCache:zr,useCacheRefresh:function(){return _t().memoizedState=qx.bind(null,Se)},useEffectEvent:function(n){var l=_t(),o={impl:n};return l.memoizedState=o,function(){if((qe&2)!==0)throw Error(a(440));return o.impl.apply(void 0,arguments)}}},eu={readContext:Ct,use:Mo,useCallback:If,useContext:Ct,useEffect:Kr,useImperativeHandle:Df,useInsertionEffect:Af,useLayoutEffect:_f,useMemo:jf,useReducer:Ao,useRef:wf,useState:function(){return Ao(Dn)},useDebugValue:$r,useDeferredValue:function(n,l){var o=it();return Uf(o,Je.memoizedState,n,l)},useTransition:function(){var n=Ao(Dn)[0],l=it().memoizedState;return[typeof n=="boolean"?n:ha(n),l]},useSyncExternalStore:cf,useId:qf,useHostTransitionStatus:Zr,useFormState:Tf,useActionState:Tf,useOptimistic:function(n,l){var o=it();return gf(o,Je,n,l)},useMemoCache:zr,useCacheRefresh:Hf};eu.useEffectEvent=Mf;var Of={readContext:Ct,use:Mo,useCallback:If,useContext:Ct,useEffect:Kr,useImperativeHandle:Df,useInsertionEffect:Af,useLayoutEffect:_f,useMemo:jf,useReducer:Or,useRef:wf,useState:function(){return Or(Dn)},useDebugValue:$r,useDeferredValue:function(n,l){var o=it();return Je===null?Xr(o,n,l):Uf(o,Je.memoizedState,n,l)},useTransition:function(){var n=Or(Dn)[0],l=it().memoizedState;return[typeof n=="boolean"?n:ha(n),l]},useSyncExternalStore:cf,useId:qf,useHostTransitionStatus:Zr,useFormState:Sf,useActionState:Sf,useOptimistic:function(n,l){var o=it();return Je!==null?gf(o,Je,n,l):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:zr,useCacheRefresh:Hf};Of.useEffectEvent=Mf;function tu(n,l,o,d){l=n.memoizedState,o=o(d,l),o=o==null?l:b({},l,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var nu={enqueueSetState:function(n,l,o){n=n._reactInternals;var d=Ot(),h=nl(d);h.payload=l,o!=null&&(h.callback=o),l=ll(n,h,d),l!==null&&(Pt(l,n,d),ca(l,n,d))},enqueueReplaceState:function(n,l,o){n=n._reactInternals;var d=Ot(),h=nl(d);h.tag=1,h.payload=l,o!=null&&(h.callback=o),l=ll(n,h,d),l!==null&&(Pt(l,n,d),ca(l,n,d))},enqueueForceUpdate:function(n,l){n=n._reactInternals;var o=Ot(),d=nl(o);d.tag=2,l!=null&&(d.callback=l),l=ll(n,d,o),l!==null&&(Pt(l,n,o),ca(l,n,o))}};function Jf(n,l,o,d,h,y,C){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(d,y,C):l.prototype&&l.prototype.isPureReactComponent?!na(o,d)||!na(h,y):!0}function Yf(n,l,o,d){n=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(o,d),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(o,d),l.state!==n&&nu.enqueueReplaceState(l,l.state,null)}function ql(n,l){var o=l;if("ref"in l){o={};for(var d in l)d!=="ref"&&(o[d]=l[d])}if(n=n.defaultProps){o===l&&(o=b({},o));for(var h in n)o[h]===void 0&&(o[h]=n[h])}return o}function Kf(n){uo(n)}function $f(n){console.error(n)}function Xf(n){uo(n)}function Io(n,l){try{var o=n.onUncaughtError;o(l.value,{componentStack:l.stack})}catch(d){setTimeout(function(){throw d})}}function Qf(n,l,o){try{var d=n.onCaughtError;d(o.value,{componentStack:o.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function lu(n,l,o){return o=nl(o),o.tag=3,o.payload={element:null},o.callback=function(){Io(n,l)},o}function Zf(n){return n=nl(n),n.tag=3,n}function Wf(n,l,o,d){var h=o.type.getDerivedStateFromError;if(typeof h=="function"){var y=d.value;n.payload=function(){return h(y)},n.callback=function(){Qf(l,o,d)}}var C=o.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(n.callback=function(){Qf(l,o,d),typeof h!="function"&&(ul===null?ul=new Set([this]):ul.add(this));var S=d.stack;this.componentDidCatch(d.value,{componentStack:S!==null?S:""})})}function Bx(n,l,o,d,h){if(o.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(l=o.alternate,l!==null&&cs(l,o,h,!0),o=Bt.current,o!==null){switch(o.tag){case 31:case 13:return en===null?Oo():o.alternate===null&&st===0&&(st=3),o.flags&=-257,o.flags|=65536,o.lanes=h,d===bo?o.flags|=16384:(l=o.updateQueue,l===null?o.updateQueue=new Set([d]):l.add(d),Mu(n,d,h)),!1;case 22:return o.flags|=65536,d===bo?o.flags|=16384:(l=o.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([d])},o.updateQueue=l):(o=l.retryQueue,o===null?l.retryQueue=new Set([d]):o.add(d)),Mu(n,d,h)),!1}throw Error(a(435,o.tag))}return Mu(n,d,h),Oo(),!1}if(Ie)return l=Bt.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=h,d!==Cr&&(n=Error(a(422),{cause:d}),aa(Xt(n,o)))):(d!==Cr&&(l=Error(a(423),{cause:d}),aa(Xt(l,o))),n=n.current.alternate,n.flags|=65536,h&=-h,n.lanes|=h,d=Xt(d,o),h=lu(n.stateNode,d,h),Ir(n,h),st!==4&&(st=2)),!1;var y=Error(a(520),{cause:d});if(y=Xt(y,o),Na===null?Na=[y]:Na.push(y),st!==4&&(st=2),l===null)return!0;d=Xt(d,o),o=l;do{switch(o.tag){case 3:return o.flags|=65536,n=h&-h,o.lanes|=n,n=lu(o.stateNode,d,n),Ir(o,n),!1;case 1:if(l=o.type,y=o.stateNode,(o.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ul===null||!ul.has(y))))return o.flags|=65536,h&=-h,o.lanes|=h,h=Zf(h),Wf(h,n,o,d),Ir(o,h),!1}o=o.return}while(o!==null);return!1}var su=Error(a(461)),dt=!1;function Tt(n,l,o,d){l.child=n===null?nf(l,null,o,d):Pl(l,n.child,o,d)}function em(n,l,o,d,h){o=o.render;var y=l.ref;if("ref"in d){var C={};for(var S in d)S!=="ref"&&(C[S]=d[S])}else C=d;return Il(l),d=qr(n,l,o,C,y,h),S=Hr(),n!==null&&!dt?(Br(n,l,h),In(n,l,h)):(Ie&&S&&br(l),l.flags|=1,Tt(n,l,d,h),l.child)}function tm(n,l,o,d,h){if(n===null){var y=o.type;return typeof y=="function"&&!xr(y)&&y.defaultProps===void 0&&o.compare===null?(l.tag=15,l.type=y,nm(n,l,y,d,h)):(n=ho(o.type,null,d,l,l.mode,h),n.ref=l.ref,n.return=l,l.child=n)}if(y=n.child,!fu(n,h)){var C=y.memoizedProps;if(o=o.compare,o=o!==null?o:na,o(C,d)&&n.ref===l.ref)return In(n,l,h)}return l.flags|=1,n=En(y,d),n.ref=l.ref,n.return=l,l.child=n}function nm(n,l,o,d,h){if(n!==null){var y=n.memoizedProps;if(na(y,d)&&n.ref===l.ref)if(dt=!1,l.pendingProps=d=y,fu(n,h))(n.flags&131072)!==0&&(dt=!0);else return l.lanes=n.lanes,In(n,l,h)}return au(n,l,o,d,h)}function lm(n,l,o,d){var h=d.children,y=n!==null?n.memoizedState:null;if(n===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((l.flags&128)!==0){if(y=y!==null?y.baseLanes|o:o,n!==null){for(d=l.child=n.child,h=0;d!==null;)h=h|d.lanes|d.childLanes,d=d.sibling;d=h&~y}else d=0,l.child=null;return sm(n,l,y,o,d)}if((o&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},n!==null&&yo(l,y!==null?y.cachePool:null),y!==null?af(l,y):Ur(),of(l);else return d=l.lanes=536870912,sm(n,l,y!==null?y.baseLanes|o:o,o,d)}else y!==null?(yo(l,y.cachePool),af(l,y),al(),l.memoizedState=null):(n!==null&&yo(l,null),Ur(),al());return Tt(n,l,h,o),l.child}function xa(n,l){return n!==null&&n.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function sm(n,l,o,d,h){var y=Ar();return y=y===null?null:{parent:ut._currentValue,pool:y},l.memoizedState={baseLanes:o,cachePool:y},n!==null&&yo(l,null),Ur(),of(l),n!==null&&cs(n,l,d,!0),l.childLanes=h,null}function jo(n,l){return l=Lo({mode:l.mode,children:l.children},n.mode),l.ref=n.ref,n.child=l,l.return=n,l}function am(n,l,o){return Pl(l,n.child,null,o),n=jo(l,l.pendingProps),n.flags|=2,Gt(l),l.memoizedState=null,n}function Gx(n,l,o){var d=l.pendingProps,h=(l.flags&128)!==0;if(l.flags&=-129,n===null){if(Ie){if(d.mode==="hidden")return n=jo(l,d),l.lanes=536870912,xa(null,n);if(Pr(l),(n=Xe)?(n=xh(n,Wt),n=n!==null&&n.data==="&"?n:null,n!==null&&(l.memoizedState={dehydrated:n,treeContext:Qn!==null?{id:gn,overflow:xn}:null,retryLane:536870912,hydrationErrors:null},o=Bd(n),o.return=l,l.child=o,kt=l,Xe=null)):n=null,n===null)throw Wn(l);return l.lanes=536870912,null}return jo(l,d)}var y=n.memoizedState;if(y!==null){var C=y.dehydrated;if(Pr(l),h)if(l.flags&256)l.flags&=-257,l=am(n,l,o);else if(l.memoizedState!==null)l.child=n.child,l.flags|=128,l=null;else throw Error(a(558));else if(dt||cs(n,l,o,!1),h=(o&n.childLanes)!==0,dt||h){if(d=$e,d!==null&&(C=Kc(d,o),C!==0&&C!==y.retryLane))throw y.retryLane=C,Al(n,C),Pt(d,n,C),su;Oo(),l=am(n,l,o)}else n=y.treeContext,Xe=tn(C.nextSibling),kt=l,Ie=!0,Zn=null,Wt=!1,n!==null&&Fd(l,n),l=jo(l,d),l.flags|=4096;return l}return n=En(n.child,{mode:d.mode,children:d.children}),n.ref=l.ref,l.child=n,n.return=l,n}function Uo(n,l){var o=l.ref;if(o===null)n!==null&&n.ref!==null&&(l.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(a(284));(n===null||n.ref!==o)&&(l.flags|=4194816)}}function au(n,l,o,d,h){return Il(l),o=qr(n,l,o,d,void 0,h),d=Hr(),n!==null&&!dt?(Br(n,l,h),In(n,l,h)):(Ie&&d&&br(l),l.flags|=1,Tt(n,l,o,h),l.child)}function om(n,l,o,d,h,y){return Il(l),l.updateQueue=null,o=uf(l,d,o,h),rf(n),d=Hr(),n!==null&&!dt?(Br(n,l,y),In(n,l,y)):(Ie&&d&&br(l),l.flags|=1,Tt(n,l,o,y),l.child)}function im(n,l,o,d,h){if(Il(l),l.stateNode===null){var y=os,C=o.contextType;typeof C=="object"&&C!==null&&(y=Ct(C)),y=new o(d,y),l.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=nu,l.stateNode=y,y._reactInternals=l,y=l.stateNode,y.props=d,y.state=l.memoizedState,y.refs={},Rr(l),C=o.contextType,y.context=typeof C=="object"&&C!==null?Ct(C):os,y.state=l.memoizedState,C=o.getDerivedStateFromProps,typeof C=="function"&&(tu(l,o,C,d),y.state=l.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(C=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),C!==y.state&&nu.enqueueReplaceState(y,y.state,null),fa(l,d,y,h),da(),y.state=l.memoizedState),typeof y.componentDidMount=="function"&&(l.flags|=4194308),d=!0}else if(n===null){y=l.stateNode;var S=l.memoizedProps,R=ql(o,S);y.props=R;var B=y.context,W=o.contextType;C=os,typeof W=="object"&&W!==null&&(C=Ct(W));var le=o.getDerivedStateFromProps;W=typeof le=="function"||typeof y.getSnapshotBeforeUpdate=="function",S=l.pendingProps!==S,W||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(S||B!==C)&&Yf(l,y,d,C),tl=!1;var z=l.memoizedState;y.state=z,fa(l,d,y,h),da(),B=l.memoizedState,S||z!==B||tl?(typeof le=="function"&&(tu(l,o,le,d),B=l.memoizedState),(R=tl||Jf(l,o,R,d,z,B,C))?(W||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(l.flags|=4194308)):(typeof y.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=d,l.memoizedState=B),y.props=d,y.state=B,y.context=C,d=R):(typeof y.componentDidMount=="function"&&(l.flags|=4194308),d=!1)}else{y=l.stateNode,Dr(n,l),C=l.memoizedProps,W=ql(o,C),y.props=W,le=l.pendingProps,z=y.context,B=o.contextType,R=os,typeof B=="object"&&B!==null&&(R=Ct(B)),S=o.getDerivedStateFromProps,(B=typeof S=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(C!==le||z!==R)&&Yf(l,y,d,R),tl=!1,z=l.memoizedState,y.state=z,fa(l,d,y,h),da();var Y=l.memoizedState;C!==le||z!==Y||tl||n!==null&&n.dependencies!==null&&go(n.dependencies)?(typeof S=="function"&&(tu(l,o,S,d),Y=l.memoizedState),(W=tl||Jf(l,o,W,d,z,Y,R)||n!==null&&n.dependencies!==null&&go(n.dependencies))?(B||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(d,Y,R),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(d,Y,R)),typeof y.componentDidUpdate=="function"&&(l.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof y.componentDidUpdate!="function"||C===n.memoizedProps&&z===n.memoizedState||(l.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&z===n.memoizedState||(l.flags|=1024),l.memoizedProps=d,l.memoizedState=Y),y.props=d,y.state=Y,y.context=R,d=W):(typeof y.componentDidUpdate!="function"||C===n.memoizedProps&&z===n.memoizedState||(l.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&z===n.memoizedState||(l.flags|=1024),d=!1)}return y=d,Uo(n,l),d=(l.flags&128)!==0,y||d?(y=l.stateNode,o=d&&typeof o.getDerivedStateFromError!="function"?null:y.render(),l.flags|=1,n!==null&&d?(l.child=Pl(l,n.child,null,h),l.child=Pl(l,null,o,h)):Tt(n,l,o,h),l.memoizedState=y.state,n=l.child):n=In(n,l,h),n}function rm(n,l,o,d){return Rl(),l.flags|=256,Tt(n,l,o,d),l.child}var ou={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function iu(n){return{baseLanes:n,cachePool:Xd()}}function ru(n,l,o){return n=n!==null?n.childLanes&~o:0,l&&(n|=Ft),n}function um(n,l,o){var d=l.pendingProps,h=!1,y=(l.flags&128)!==0,C;if((C=y)||(C=n!==null&&n.memoizedState===null?!1:(ot.current&2)!==0),C&&(h=!0,l.flags&=-129),C=(l.flags&32)!==0,l.flags&=-33,n===null){if(Ie){if(h?sl(l):al(),(n=Xe)?(n=xh(n,Wt),n=n!==null&&n.data!=="&"?n:null,n!==null&&(l.memoizedState={dehydrated:n,treeContext:Qn!==null?{id:gn,overflow:xn}:null,retryLane:536870912,hydrationErrors:null},o=Bd(n),o.return=l,l.child=o,kt=l,Xe=null)):n=null,n===null)throw Wn(l);return Fu(n)?l.lanes=32:l.lanes=536870912,null}var S=d.children;return d=d.fallback,h?(al(),h=l.mode,S=Lo({mode:"hidden",children:S},h),d=_l(d,h,o,null),S.return=l,d.return=l,S.sibling=d,l.child=S,d=l.child,d.memoizedState=iu(o),d.childLanes=ru(n,C,o),l.memoizedState=ou,xa(null,d)):(sl(l),uu(l,S))}var R=n.memoizedState;if(R!==null&&(S=R.dehydrated,S!==null)){if(y)l.flags&256?(sl(l),l.flags&=-257,l=cu(n,l,o)):l.memoizedState!==null?(al(),l.child=n.child,l.flags|=128,l=null):(al(),S=d.fallback,h=l.mode,d=Lo({mode:"visible",children:d.children},h),S=_l(S,h,o,null),S.flags|=2,d.return=l,S.return=l,d.sibling=S,l.child=d,Pl(l,n.child,null,o),d=l.child,d.memoizedState=iu(o),d.childLanes=ru(n,C,o),l.memoizedState=ou,l=xa(null,d));else if(sl(l),Fu(S)){if(C=S.nextSibling&&S.nextSibling.dataset,C)var B=C.dgst;C=B,d=Error(a(419)),d.stack="",d.digest=C,aa({value:d,source:null,stack:null}),l=cu(n,l,o)}else if(dt||cs(n,l,o,!1),C=(o&n.childLanes)!==0,dt||C){if(C=$e,C!==null&&(d=Kc(C,o),d!==0&&d!==R.retryLane))throw R.retryLane=d,Al(n,d),Pt(C,n,d),su;zu(S)||Oo(),l=cu(n,l,o)}else zu(S)?(l.flags|=192,l.child=n.child,l=null):(n=R.treeContext,Xe=tn(S.nextSibling),kt=l,Ie=!0,Zn=null,Wt=!1,n!==null&&Fd(l,n),l=uu(l,d.children),l.flags|=4096);return l}return h?(al(),S=d.fallback,h=l.mode,R=n.child,B=R.sibling,d=En(R,{mode:"hidden",children:d.children}),d.subtreeFlags=R.subtreeFlags&65011712,B!==null?S=En(B,S):(S=_l(S,h,o,null),S.flags|=2),S.return=l,d.return=l,d.sibling=S,l.child=d,xa(null,d),d=l.child,S=n.child.memoizedState,S===null?S=iu(o):(h=S.cachePool,h!==null?(R=ut._currentValue,h=h.parent!==R?{parent:R,pool:R}:h):h=Xd(),S={baseLanes:S.baseLanes|o,cachePool:h}),d.memoizedState=S,d.childLanes=ru(n,C,o),l.memoizedState=ou,xa(n.child,d)):(sl(l),o=n.child,n=o.sibling,o=En(o,{mode:"visible",children:d.children}),o.return=l,o.sibling=null,n!==null&&(C=l.deletions,C===null?(l.deletions=[n],l.flags|=16):C.push(n)),l.child=o,l.memoizedState=null,o)}function uu(n,l){return l=Lo({mode:"visible",children:l},n.mode),l.return=n,n.child=l}function Lo(n,l){return n=Ht(22,n,null,l),n.lanes=0,n}function cu(n,l,o){return Pl(l,n.child,null,o),n=uu(l,l.pendingProps.children),n.flags|=2,l.memoizedState=null,n}function cm(n,l,o){n.lanes|=l;var d=n.alternate;d!==null&&(d.lanes|=l),Sr(n.return,l,o)}function du(n,l,o,d,h,y){var C=n.memoizedState;C===null?n.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:d,tail:o,tailMode:h,treeForkCount:y}:(C.isBackwards=l,C.rendering=null,C.renderingStartTime=0,C.last=d,C.tail=o,C.tailMode=h,C.treeForkCount=y)}function dm(n,l,o){var d=l.pendingProps,h=d.revealOrder,y=d.tail;d=d.children;var C=ot.current,S=(C&2)!==0;if(S?(C=C&1|2,l.flags|=128):C&=1,J(ot,C),Tt(n,l,d,o),d=Ie?sa:0,!S&&n!==null&&(n.flags&128)!==0)e:for(n=l.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&cm(n,o,l);else if(n.tag===19)cm(n,o,l);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===l)break e;for(;n.sibling===null;){if(n.return===null||n.return===l)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(h){case"forwards":for(o=l.child,h=null;o!==null;)n=o.alternate,n!==null&&No(n)===null&&(h=o),o=o.sibling;o=h,o===null?(h=l.child,l.child=null):(h=o.sibling,o.sibling=null),du(l,!1,h,o,y,d);break;case"backwards":case"unstable_legacy-backwards":for(o=null,h=l.child,l.child=null;h!==null;){if(n=h.alternate,n!==null&&No(n)===null){l.child=h;break}n=h.sibling,h.sibling=o,o=h,h=n}du(l,!0,o,null,y,d);break;case"together":du(l,!1,null,null,void 0,d);break;default:l.memoizedState=null}return l.child}function In(n,l,o){if(n!==null&&(l.dependencies=n.dependencies),rl|=l.lanes,(o&l.childLanes)===0)if(n!==null){if(cs(n,l,o,!1),(o&l.childLanes)===0)return null}else return null;if(n!==null&&l.child!==n.child)throw Error(a(153));if(l.child!==null){for(n=l.child,o=En(n,n.pendingProps),l.child=o,o.return=l;n.sibling!==null;)n=n.sibling,o=o.sibling=En(n,n.pendingProps),o.return=l;o.sibling=null}return l.child}function fu(n,l){return(n.lanes&l)!==0?!0:(n=n.dependencies,!!(n!==null&&go(n)))}function zx(n,l,o){switch(l.tag){case 3:ae(l,l.stateNode.containerInfo),el(l,ut,n.memoizedState.cache),Rl();break;case 27:case 5:ne(l);break;case 4:ae(l,l.stateNode.containerInfo);break;case 10:el(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,Pr(l),null;break;case 13:var d=l.memoizedState;if(d!==null)return d.dehydrated!==null?(sl(l),l.flags|=128,null):(o&l.child.childLanes)!==0?um(n,l,o):(sl(l),n=In(n,l,o),n!==null?n.sibling:null);sl(l);break;case 19:var h=(n.flags&128)!==0;if(d=(o&l.childLanes)!==0,d||(cs(n,l,o,!1),d=(o&l.childLanes)!==0),h){if(d)return dm(n,l,o);l.flags|=128}if(h=l.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),J(ot,ot.current),d)break;return null;case 22:return l.lanes=0,lm(n,l,o,l.pendingProps);case 24:el(l,ut,n.memoizedState.cache)}return In(n,l,o)}function fm(n,l,o){if(n!==null)if(n.memoizedProps!==l.pendingProps)dt=!0;else{if(!fu(n,o)&&(l.flags&128)===0)return dt=!1,zx(n,l,o);dt=(n.flags&131072)!==0}else dt=!1,Ie&&(l.flags&1048576)!==0&&zd(l,sa,l.index);switch(l.lanes=0,l.tag){case 16:e:{var d=l.pendingProps;if(n=Ul(l.elementType),l.type=n,typeof n=="function")xr(n)?(d=ql(n,d),l.tag=1,l=im(null,l,n,d,o)):(l.tag=0,l=au(null,l,n,d,o));else{if(n!=null){var h=n.$$typeof;if(h===q){l.tag=11,l=em(null,l,n,d,o);break e}else if(h===F){l.tag=14,l=tm(null,l,n,d,o);break e}}throw l=me(n)||n,Error(a(306,l,""))}}return l;case 0:return au(n,l,l.type,l.pendingProps,o);case 1:return d=l.type,h=ql(d,l.pendingProps),im(n,l,d,h,o);case 3:e:{if(ae(l,l.stateNode.containerInfo),n===null)throw Error(a(387));d=l.pendingProps;var y=l.memoizedState;h=y.element,Dr(n,l),fa(l,d,null,o);var C=l.memoizedState;if(d=C.cache,el(l,ut,d),d!==y.cache&&wr(l,[ut],o,!0),da(),d=C.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:C.cache},l.updateQueue.baseState=y,l.memoizedState=y,l.flags&256){l=rm(n,l,d,o);break e}else if(d!==h){h=Xt(Error(a(424)),l),aa(h),l=rm(n,l,d,o);break e}else{switch(n=l.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Xe=tn(n.firstChild),kt=l,Ie=!0,Zn=null,Wt=!0,o=nf(l,null,d,o),l.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Rl(),d===h){l=In(n,l,o);break e}Tt(n,l,d,o)}l=l.child}return l;case 26:return Uo(n,l),n===null?(o=Th(l.type,null,l.pendingProps,null))?l.memoizedState=o:Ie||(o=l.type,n=l.pendingProps,d=Zo(ge.current).createElement(o),d[bt]=l,d[Rt]=n,Nt(d,o,n),gt(d),l.stateNode=d):l.memoizedState=Th(l.type,n.memoizedProps,l.pendingProps,n.memoizedState),null;case 27:return ne(l),n===null&&Ie&&(d=l.stateNode=bh(l.type,l.pendingProps,ge.current),kt=l,Wt=!0,h=Xe,ml(l.type)?(Ou=h,Xe=tn(d.firstChild)):Xe=h),Tt(n,l,l.pendingProps.children,o),Uo(n,l),n===null&&(l.flags|=4194304),l.child;case 5:return n===null&&Ie&&((h=d=Xe)&&(d=vy(d,l.type,l.pendingProps,Wt),d!==null?(l.stateNode=d,kt=l,Xe=tn(d.firstChild),Wt=!1,h=!0):h=!1),h||Wn(l)),ne(l),h=l.type,y=l.pendingProps,C=n!==null?n.memoizedProps:null,d=y.children,Hu(h,y)?d=null:C!==null&&Hu(h,C)&&(l.flags|=32),l.memoizedState!==null&&(h=qr(n,l,jx,null,null,o),Da._currentValue=h),Uo(n,l),Tt(n,l,d,o),l.child;case 6:return n===null&&Ie&&((n=o=Xe)&&(o=by(o,l.pendingProps,Wt),o!==null?(l.stateNode=o,kt=l,Xe=null,n=!0):n=!1),n||Wn(l)),null;case 13:return um(n,l,o);case 4:return ae(l,l.stateNode.containerInfo),d=l.pendingProps,n===null?l.child=Pl(l,null,d,o):Tt(n,l,d,o),l.child;case 11:return em(n,l,l.type,l.pendingProps,o);case 7:return Tt(n,l,l.pendingProps,o),l.child;case 8:return Tt(n,l,l.pendingProps.children,o),l.child;case 12:return Tt(n,l,l.pendingProps.children,o),l.child;case 10:return d=l.pendingProps,el(l,l.type,d.value),Tt(n,l,d.children,o),l.child;case 9:return h=l.type._context,d=l.pendingProps.children,Il(l),h=Ct(h),d=d(h),l.flags|=1,Tt(n,l,d,o),l.child;case 14:return tm(n,l,l.type,l.pendingProps,o);case 15:return nm(n,l,l.type,l.pendingProps,o);case 19:return dm(n,l,o);case 31:return Gx(n,l,o);case 22:return lm(n,l,o,l.pendingProps);case 24:return Il(l),d=Ct(ut),n===null?(h=Ar(),h===null&&(h=$e,y=Er(),h.pooledCache=y,y.refCount++,y!==null&&(h.pooledCacheLanes|=o),h=y),l.memoizedState={parent:d,cache:h},Rr(l),el(l,ut,h)):((n.lanes&o)!==0&&(Dr(n,l),fa(l,null,null,o),da()),h=n.memoizedState,y=l.memoizedState,h.parent!==d?(h={parent:d,cache:d},l.memoizedState=h,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=h),el(l,ut,d)):(d=y.cache,el(l,ut,d),d!==h.cache&&wr(l,[ut],o,!0))),Tt(n,l,l.pendingProps.children,o),l.child;case 29:throw l.pendingProps}throw Error(a(156,l.tag))}function jn(n){n.flags|=4}function mu(n,l,o,d,h){if((l=(n.mode&32)!==0)&&(l=!1),l){if(n.flags|=16777216,(h&335544128)===h)if(n.stateNode.complete)n.flags|=8192;else if(qm())n.flags|=8192;else throw Ll=bo,_r}else n.flags&=-16777217}function mm(n,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Mh(l))if(qm())n.flags|=8192;else throw Ll=bo,_r}function Po(n,l){l!==null&&(n.flags|=4),n.flags&16384&&(l=n.tag!==22?Tn():536870912,n.lanes|=l,Cs|=l)}function ya(n,l){if(!Ie)switch(n.tailMode){case"hidden":l=n.tail;for(var o=null;l!==null;)l.alternate!==null&&(o=l),l=l.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var d=null;o!==null;)o.alternate!==null&&(d=o),o=o.sibling;d===null?l||n.tail===null?n.tail=null:n.tail.sibling=null:d.sibling=null}}function Qe(n){var l=n.alternate!==null&&n.alternate.child===n.child,o=0,d=0;if(l)for(var h=n.child;h!==null;)o|=h.lanes|h.childLanes,d|=h.subtreeFlags&65011712,d|=h.flags&65011712,h.return=n,h=h.sibling;else for(h=n.child;h!==null;)o|=h.lanes|h.childLanes,d|=h.subtreeFlags,d|=h.flags,h.return=n,h=h.sibling;return n.subtreeFlags|=d,n.childLanes=o,l}function Fx(n,l,o){var d=l.pendingProps;switch(kr(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qe(l),null;case 1:return Qe(l),null;case 3:return o=l.stateNode,d=null,n!==null&&(d=n.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),_n(ut),xe(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(us(l)?jn(l):n===null||n.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Tr())),Qe(l),null;case 26:var h=l.type,y=l.memoizedState;return n===null?(jn(l),y!==null?(Qe(l),mm(l,y)):(Qe(l),mu(l,h,null,d,o))):y?y!==n.memoizedState?(jn(l),Qe(l),mm(l,y)):(Qe(l),l.flags&=-16777217):(n=n.memoizedProps,n!==d&&jn(l),Qe(l),mu(l,h,n,d,o)),null;case 27:if(be(l),o=ge.current,h=l.type,n!==null&&l.stateNode!=null)n.memoizedProps!==d&&jn(l);else{if(!d){if(l.stateNode===null)throw Error(a(166));return Qe(l),null}n=G.current,us(l)?Od(l):(n=bh(h,d,o),l.stateNode=n,jn(l))}return Qe(l),null;case 5:if(be(l),h=l.type,n!==null&&l.stateNode!=null)n.memoizedProps!==d&&jn(l);else{if(!d){if(l.stateNode===null)throw Error(a(166));return Qe(l),null}if(y=G.current,us(l))Od(l);else{var C=Zo(ge.current);switch(y){case 1:y=C.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:y=C.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":y=C.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":y=C.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":y=C.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof d.is=="string"?C.createElement("select",{is:d.is}):C.createElement("select"),d.multiple?y.multiple=!0:d.size&&(y.size=d.size);break;default:y=typeof d.is=="string"?C.createElement(h,{is:d.is}):C.createElement(h)}}y[bt]=l,y[Rt]=d;e:for(C=l.child;C!==null;){if(C.tag===5||C.tag===6)y.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===l)break e;for(;C.sibling===null;){if(C.return===null||C.return===l)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}l.stateNode=y;e:switch(Nt(y,h,d),h){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&jn(l)}}return Qe(l),mu(l,l.type,n===null?null:n.memoizedProps,l.pendingProps,o),null;case 6:if(n&&l.stateNode!=null)n.memoizedProps!==d&&jn(l);else{if(typeof d!="string"&&l.stateNode===null)throw Error(a(166));if(n=ge.current,us(l)){if(n=l.stateNode,o=l.memoizedProps,d=null,h=kt,h!==null)switch(h.tag){case 27:case 5:d=h.memoizedProps}n[bt]=l,n=!!(n.nodeValue===o||d!==null&&d.suppressHydrationWarning===!0||uh(n.nodeValue,o)),n||Wn(l,!0)}else n=Zo(n).createTextNode(d),n[bt]=l,l.stateNode=n}return Qe(l),null;case 31:if(o=l.memoizedState,n===null||n.memoizedState!==null){if(d=us(l),o!==null){if(n===null){if(!d)throw Error(a(318));if(n=l.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(557));n[bt]=l}else Rl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Qe(l),n=!1}else o=Tr(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return l.flags&256?(Gt(l),l):(Gt(l),null);if((l.flags&128)!==0)throw Error(a(558))}return Qe(l),null;case 13:if(d=l.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(h=us(l),d!==null&&d.dehydrated!==null){if(n===null){if(!h)throw Error(a(318));if(h=l.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(a(317));h[bt]=l}else Rl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Qe(l),h=!1}else h=Tr(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=h),h=!0;if(!h)return l.flags&256?(Gt(l),l):(Gt(l),null)}return Gt(l),(l.flags&128)!==0?(l.lanes=o,l):(o=d!==null,n=n!==null&&n.memoizedState!==null,o&&(d=l.child,h=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(h=d.alternate.memoizedState.cachePool.pool),y=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(y=d.memoizedState.cachePool.pool),y!==h&&(d.flags|=2048)),o!==n&&o&&(l.child.flags|=8192),Po(l,l.updateQueue),Qe(l),null);case 4:return xe(),n===null&&Uu(l.stateNode.containerInfo),Qe(l),null;case 10:return _n(l.type),Qe(l),null;case 19:if(U(ot),d=l.memoizedState,d===null)return Qe(l),null;if(h=(l.flags&128)!==0,y=d.rendering,y===null)if(h)ya(d,!1);else{if(st!==0||n!==null&&(n.flags&128)!==0)for(n=l.child;n!==null;){if(y=No(n),y!==null){for(l.flags|=128,ya(d,!1),n=y.updateQueue,l.updateQueue=n,Po(l,n),l.subtreeFlags=0,n=o,o=l.child;o!==null;)Hd(o,n),o=o.sibling;return J(ot,ot.current&1|2),Ie&&Mn(l,d.treeForkCount),l.child}n=n.sibling}d.tail!==null&&wt()>Go&&(l.flags|=128,h=!0,ya(d,!1),l.lanes=4194304)}else{if(!h)if(n=No(y),n!==null){if(l.flags|=128,h=!0,n=n.updateQueue,l.updateQueue=n,Po(l,n),ya(d,!0),d.tail===null&&d.tailMode==="hidden"&&!y.alternate&&!Ie)return Qe(l),null}else 2*wt()-d.renderingStartTime>Go&&o!==536870912&&(l.flags|=128,h=!0,ya(d,!1),l.lanes=4194304);d.isBackwards?(y.sibling=l.child,l.child=y):(n=d.last,n!==null?n.sibling=y:l.child=y,d.last=y)}return d.tail!==null?(n=d.tail,d.rendering=n,d.tail=n.sibling,d.renderingStartTime=wt(),n.sibling=null,o=ot.current,J(ot,h?o&1|2:o&1),Ie&&Mn(l,d.treeForkCount),n):(Qe(l),null);case 22:case 23:return Gt(l),Lr(),d=l.memoizedState!==null,n!==null?n.memoizedState!==null!==d&&(l.flags|=8192):d&&(l.flags|=8192),d?(o&536870912)!==0&&(l.flags&128)===0&&(Qe(l),l.subtreeFlags&6&&(l.flags|=8192)):Qe(l),o=l.updateQueue,o!==null&&Po(l,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==o&&(l.flags|=2048),n!==null&&U(jl),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),l.memoizedState.cache!==o&&(l.flags|=2048),_n(ut),Qe(l),null;case 25:return null;case 30:return null}throw Error(a(156,l.tag))}function Ox(n,l){switch(kr(l),l.tag){case 1:return n=l.flags,n&65536?(l.flags=n&-65537|128,l):null;case 3:return _n(ut),xe(),n=l.flags,(n&65536)!==0&&(n&128)===0?(l.flags=n&-65537|128,l):null;case 26:case 27:case 5:return be(l),null;case 31:if(l.memoizedState!==null){if(Gt(l),l.alternate===null)throw Error(a(340));Rl()}return n=l.flags,n&65536?(l.flags=n&-65537|128,l):null;case 13:if(Gt(l),n=l.memoizedState,n!==null&&n.dehydrated!==null){if(l.alternate===null)throw Error(a(340));Rl()}return n=l.flags,n&65536?(l.flags=n&-65537|128,l):null;case 19:return U(ot),null;case 4:return xe(),null;case 10:return _n(l.type),null;case 22:case 23:return Gt(l),Lr(),n!==null&&U(jl),n=l.flags,n&65536?(l.flags=n&-65537|128,l):null;case 24:return _n(ut),null;case 25:return null;default:return null}}function hm(n,l){switch(kr(l),l.tag){case 3:_n(ut),xe();break;case 26:case 27:case 5:be(l);break;case 4:xe();break;case 31:l.memoizedState!==null&&Gt(l);break;case 13:Gt(l);break;case 19:U(ot);break;case 10:_n(l.type);break;case 22:case 23:Gt(l),Lr(),n!==null&&U(jl);break;case 24:_n(ut)}}function va(n,l){try{var o=l.updateQueue,d=o!==null?o.lastEffect:null;if(d!==null){var h=d.next;o=h;do{if((o.tag&n)===n){d=void 0;var y=o.create,C=o.inst;d=y(),C.destroy=d}o=o.next}while(o!==h)}}catch(S){Ge(l,l.return,S)}}function ol(n,l,o){try{var d=l.updateQueue,h=d!==null?d.lastEffect:null;if(h!==null){var y=h.next;d=y;do{if((d.tag&n)===n){var C=d.inst,S=C.destroy;if(S!==void 0){C.destroy=void 0,h=l;var R=o,B=S;try{B()}catch(W){Ge(h,R,W)}}}d=d.next}while(d!==y)}}catch(W){Ge(l,l.return,W)}}function pm(n){var l=n.updateQueue;if(l!==null){var o=n.stateNode;try{sf(l,o)}catch(d){Ge(n,n.return,d)}}}function gm(n,l,o){o.props=ql(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(d){Ge(n,l,d)}}function ba(n,l){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var d=n.stateNode;break;case 30:d=n.stateNode;break;default:d=n.stateNode}typeof o=="function"?n.refCleanup=o(d):o.current=d}}catch(h){Ge(n,l,h)}}function yn(n,l){var o=n.ref,d=n.refCleanup;if(o!==null)if(typeof d=="function")try{d()}catch(h){Ge(n,l,h)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(h){Ge(n,l,h)}else o.current=null}function xm(n){var l=n.type,o=n.memoizedProps,d=n.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":o.autoFocus&&d.focus();break e;case"img":o.src?d.src=o.src:o.srcSet&&(d.srcset=o.srcSet)}}catch(h){Ge(n,n.return,h)}}function hu(n,l,o){try{var d=n.stateNode;my(d,n.type,o,l),d[Rt]=l}catch(h){Ge(n,n.return,h)}}function ym(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&ml(n.type)||n.tag===4}function pu(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||ym(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&ml(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function gu(n,l,o){var d=n.tag;if(d===5||d===6)n=n.stateNode,l?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,l):(l=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,l.appendChild(n),o=o._reactRootContainer,o!=null||l.onclick!==null||(l.onclick=Sn));else if(d!==4&&(d===27&&ml(n.type)&&(o=n.stateNode,l=null),n=n.child,n!==null))for(gu(n,l,o),n=n.sibling;n!==null;)gu(n,l,o),n=n.sibling}function Vo(n,l,o){var d=n.tag;if(d===5||d===6)n=n.stateNode,l?o.insertBefore(n,l):o.appendChild(n);else if(d!==4&&(d===27&&ml(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Vo(n,l,o),n=n.sibling;n!==null;)Vo(n,l,o),n=n.sibling}function vm(n){var l=n.stateNode,o=n.memoizedProps;try{for(var d=n.type,h=l.attributes;h.length;)l.removeAttributeNode(h[0]);Nt(l,d,o),l[bt]=n,l[Rt]=o}catch(y){Ge(n,n.return,y)}}var Un=!1,ft=!1,xu=!1,bm=typeof WeakSet=="function"?WeakSet:Set,xt=null;function Jx(n,l){if(n=n.containerInfo,Vu=ai,n=Rd(n),cr(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var d=o.getSelection&&o.getSelection();if(d&&d.rangeCount!==0){o=d.anchorNode;var h=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{o.nodeType,y.nodeType}catch{o=null;break e}var C=0,S=-1,R=-1,B=0,W=0,le=n,z=null;t:for(;;){for(var Y;le!==o||h!==0&&le.nodeType!==3||(S=C+h),le!==y||d!==0&&le.nodeType!==3||(R=C+d),le.nodeType===3&&(C+=le.nodeValue.length),(Y=le.firstChild)!==null;)z=le,le=Y;for(;;){if(le===n)break t;if(z===o&&++B===h&&(S=C),z===y&&++W===d&&(R=C),(Y=le.nextSibling)!==null)break;le=z,z=le.parentNode}le=Y}o=S===-1||R===-1?null:{start:S,end:R}}else o=null}o=o||{start:0,end:0}}else o=null;for(qu={focusedElem:n,selectionRange:o},ai=!1,xt=l;xt!==null;)if(l=xt,n=l.child,(l.subtreeFlags&1028)!==0&&n!==null)n.return=l,xt=n;else for(;xt!==null;){switch(l=xt,y=l.alternate,n=l.flags,l.tag){case 0:if((n&4)!==0&&(n=l.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)h=n[o],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&y!==null){n=void 0,o=l,h=y.memoizedProps,y=y.memoizedState,d=o.stateNode;try{var he=ql(o.type,h);n=d.getSnapshotBeforeUpdate(he,y),d.__reactInternalSnapshotBeforeUpdate=n}catch(ke){Ge(o,o.return,ke)}}break;case 3:if((n&1024)!==0){if(n=l.stateNode.containerInfo,o=n.nodeType,o===9)Gu(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Gu(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(a(163))}if(n=l.sibling,n!==null){n.return=l.return,xt=n;break}xt=l.return}}function km(n,l,o){var d=o.flags;switch(o.tag){case 0:case 11:case 15:Pn(n,o),d&4&&va(5,o);break;case 1:if(Pn(n,o),d&4)if(n=o.stateNode,l===null)try{n.componentDidMount()}catch(C){Ge(o,o.return,C)}else{var h=ql(o.type,l.memoizedProps);l=l.memoizedState;try{n.componentDidUpdate(h,l,n.__reactInternalSnapshotBeforeUpdate)}catch(C){Ge(o,o.return,C)}}d&64&&pm(o),d&512&&ba(o,o.return);break;case 3:if(Pn(n,o),d&64&&(n=o.updateQueue,n!==null)){if(l=null,o.child!==null)switch(o.child.tag){case 27:case 5:l=o.child.stateNode;break;case 1:l=o.child.stateNode}try{sf(n,l)}catch(C){Ge(o,o.return,C)}}break;case 27:l===null&&d&4&&vm(o);case 26:case 5:Pn(n,o),l===null&&d&4&&xm(o),d&512&&ba(o,o.return);break;case 12:Pn(n,o);break;case 31:Pn(n,o),d&4&&Nm(n,o);break;case 13:Pn(n,o),d&4&&Sm(n,o),d&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=ty.bind(null,o),ky(n,o))));break;case 22:if(d=o.memoizedState!==null||Un,!d){l=l!==null&&l.memoizedState!==null||ft,h=Un;var y=ft;Un=d,(ft=l)&&!y?Vn(n,o,(o.subtreeFlags&8772)!==0):Pn(n,o),Un=h,ft=y}break;case 30:break;default:Pn(n,o)}}function Cm(n){var l=n.alternate;l!==null&&(n.alternate=null,Cm(l)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(l=n.stateNode,l!==null&&Yi(l)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var et=null,It=!1;function Ln(n,l,o){for(o=o.child;o!==null;)Tm(n,l,o),o=o.sibling}function Tm(n,l,o){if(At&&typeof At.onCommitFiberUnmount=="function")try{At.onCommitFiberUnmount(Tl,o)}catch{}switch(o.tag){case 26:ft||yn(o,l),Ln(n,l,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:ft||yn(o,l);var d=et,h=It;ml(o.type)&&(et=o.stateNode,It=!1),Ln(n,l,o),Aa(o.stateNode),et=d,It=h;break;case 5:ft||yn(o,l);case 6:if(d=et,h=It,et=null,Ln(n,l,o),et=d,It=h,et!==null)if(It)try{(et.nodeType===9?et.body:et.nodeName==="HTML"?et.ownerDocument.body:et).removeChild(o.stateNode)}catch(y){Ge(o,l,y)}else try{et.removeChild(o.stateNode)}catch(y){Ge(o,l,y)}break;case 18:et!==null&&(It?(n=et,ph(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),_s(n)):ph(et,o.stateNode));break;case 4:d=et,h=It,et=o.stateNode.containerInfo,It=!0,Ln(n,l,o),et=d,It=h;break;case 0:case 11:case 14:case 15:ol(2,o,l),ft||ol(4,o,l),Ln(n,l,o);break;case 1:ft||(yn(o,l),d=o.stateNode,typeof d.componentWillUnmount=="function"&&gm(o,l,d)),Ln(n,l,o);break;case 21:Ln(n,l,o);break;case 22:ft=(d=ft)||o.memoizedState!==null,Ln(n,l,o),ft=d;break;default:Ln(n,l,o)}}function Nm(n,l){if(l.memoizedState===null&&(n=l.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{_s(n)}catch(o){Ge(l,l.return,o)}}}function Sm(n,l){if(l.memoizedState===null&&(n=l.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{_s(n)}catch(o){Ge(l,l.return,o)}}function Yx(n){switch(n.tag){case 31:case 13:case 19:var l=n.stateNode;return l===null&&(l=n.stateNode=new bm),l;case 22:return n=n.stateNode,l=n._retryCache,l===null&&(l=n._retryCache=new bm),l;default:throw Error(a(435,n.tag))}}function qo(n,l){var o=Yx(n);l.forEach(function(d){if(!o.has(d)){o.add(d);var h=ny.bind(null,n,d);d.then(h,h)}})}function jt(n,l){var o=l.deletions;if(o!==null)for(var d=0;d<o.length;d++){var h=o[d],y=n,C=l,S=C;e:for(;S!==null;){switch(S.tag){case 27:if(ml(S.type)){et=S.stateNode,It=!1;break e}break;case 5:et=S.stateNode,It=!1;break e;case 3:case 4:et=S.stateNode.containerInfo,It=!0;break e}S=S.return}if(et===null)throw Error(a(160));Tm(y,C,h),et=null,It=!1,y=h.alternate,y!==null&&(y.return=null),h.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)wm(l,n),l=l.sibling}var cn=null;function wm(n,l){var o=n.alternate,d=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:jt(l,n),Ut(n),d&4&&(ol(3,n,n.return),va(3,n),ol(5,n,n.return));break;case 1:jt(l,n),Ut(n),d&512&&(ft||o===null||yn(o,o.return)),d&64&&Un&&(n=n.updateQueue,n!==null&&(d=n.callbacks,d!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?d:o.concat(d))));break;case 26:var h=cn;if(jt(l,n),Ut(n),d&512&&(ft||o===null||yn(o,o.return)),d&4){var y=o!==null?o.memoizedState:null;if(d=n.memoizedState,o===null)if(d===null)if(n.stateNode===null){e:{d=n.type,o=n.memoizedProps,h=h.ownerDocument||h;t:switch(d){case"title":y=h.getElementsByTagName("title")[0],(!y||y[Ys]||y[bt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=h.createElement(d),h.head.insertBefore(y,h.querySelector("head > title"))),Nt(y,d,o),y[bt]=n,gt(y),d=y;break e;case"link":var C=wh("link","href",h).get(d+(o.href||""));if(C){for(var S=0;S<C.length;S++)if(y=C[S],y.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&y.getAttribute("rel")===(o.rel==null?null:o.rel)&&y.getAttribute("title")===(o.title==null?null:o.title)&&y.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){C.splice(S,1);break t}}y=h.createElement(d),Nt(y,d,o),h.head.appendChild(y);break;case"meta":if(C=wh("meta","content",h).get(d+(o.content||""))){for(S=0;S<C.length;S++)if(y=C[S],y.getAttribute("content")===(o.content==null?null:""+o.content)&&y.getAttribute("name")===(o.name==null?null:o.name)&&y.getAttribute("property")===(o.property==null?null:o.property)&&y.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&y.getAttribute("charset")===(o.charSet==null?null:o.charSet)){C.splice(S,1);break t}}y=h.createElement(d),Nt(y,d,o),h.head.appendChild(y);break;default:throw Error(a(468,d))}y[bt]=n,gt(y),d=y}n.stateNode=d}else Eh(h,n.type,n.stateNode);else n.stateNode=Sh(h,d,n.memoizedProps);else y!==d?(y===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):y.count--,d===null?Eh(h,n.type,n.stateNode):Sh(h,d,n.memoizedProps)):d===null&&n.stateNode!==null&&hu(n,n.memoizedProps,o.memoizedProps)}break;case 27:jt(l,n),Ut(n),d&512&&(ft||o===null||yn(o,o.return)),o!==null&&d&4&&hu(n,n.memoizedProps,o.memoizedProps);break;case 5:if(jt(l,n),Ut(n),d&512&&(ft||o===null||yn(o,o.return)),n.flags&32){h=n.stateNode;try{Wl(h,"")}catch(he){Ge(n,n.return,he)}}d&4&&n.stateNode!=null&&(h=n.memoizedProps,hu(n,h,o!==null?o.memoizedProps:h)),d&1024&&(xu=!0);break;case 6:if(jt(l,n),Ut(n),d&4){if(n.stateNode===null)throw Error(a(162));d=n.memoizedProps,o=n.stateNode;try{o.nodeValue=d}catch(he){Ge(n,n.return,he)}}break;case 3:if(ti=null,h=cn,cn=Wo(l.containerInfo),jt(l,n),cn=h,Ut(n),d&4&&o!==null&&o.memoizedState.isDehydrated)try{_s(l.containerInfo)}catch(he){Ge(n,n.return,he)}xu&&(xu=!1,Em(n));break;case 4:d=cn,cn=Wo(n.stateNode.containerInfo),jt(l,n),Ut(n),cn=d;break;case 12:jt(l,n),Ut(n);break;case 31:jt(l,n),Ut(n),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,qo(n,d)));break;case 13:jt(l,n),Ut(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Bo=wt()),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,qo(n,d)));break;case 22:h=n.memoizedState!==null;var R=o!==null&&o.memoizedState!==null,B=Un,W=ft;if(Un=B||h,ft=W||R,jt(l,n),ft=W,Un=B,Ut(n),d&8192)e:for(l=n.stateNode,l._visibility=h?l._visibility&-2:l._visibility|1,h&&(o===null||R||Un||ft||Hl(n)),o=null,l=n;;){if(l.tag===5||l.tag===26){if(o===null){R=o=l;try{if(y=R.stateNode,h)C=y.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{S=R.stateNode;var le=R.memoizedProps.style,z=le!=null&&le.hasOwnProperty("display")?le.display:null;S.style.display=z==null||typeof z=="boolean"?"":(""+z).trim()}}catch(he){Ge(R,R.return,he)}}}else if(l.tag===6){if(o===null){R=l;try{R.stateNode.nodeValue=h?"":R.memoizedProps}catch(he){Ge(R,R.return,he)}}}else if(l.tag===18){if(o===null){R=l;try{var Y=R.stateNode;h?gh(Y,!0):gh(R.stateNode,!1)}catch(he){Ge(R,R.return,he)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===n)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===n)break e;for(;l.sibling===null;){if(l.return===null||l.return===n)break e;o===l&&(o=null),l=l.return}o===l&&(o=null),l.sibling.return=l.return,l=l.sibling}d&4&&(d=n.updateQueue,d!==null&&(o=d.retryQueue,o!==null&&(d.retryQueue=null,qo(n,o))));break;case 19:jt(l,n),Ut(n),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,qo(n,d)));break;case 30:break;case 21:break;default:jt(l,n),Ut(n)}}function Ut(n){var l=n.flags;if(l&2){try{for(var o,d=n.return;d!==null;){if(ym(d)){o=d;break}d=d.return}if(o==null)throw Error(a(160));switch(o.tag){case 27:var h=o.stateNode,y=pu(n);Vo(n,y,h);break;case 5:var C=o.stateNode;o.flags&32&&(Wl(C,""),o.flags&=-33);var S=pu(n);Vo(n,S,C);break;case 3:case 4:var R=o.stateNode.containerInfo,B=pu(n);gu(n,B,R);break;default:throw Error(a(161))}}catch(W){Ge(n,n.return,W)}n.flags&=-3}l&4096&&(n.flags&=-4097)}function Em(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var l=n;Em(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),n=n.sibling}}function Pn(n,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)km(n,l.alternate,l),l=l.sibling}function Hl(n){for(n=n.child;n!==null;){var l=n;switch(l.tag){case 0:case 11:case 14:case 15:ol(4,l,l.return),Hl(l);break;case 1:yn(l,l.return);var o=l.stateNode;typeof o.componentWillUnmount=="function"&&gm(l,l.return,o),Hl(l);break;case 27:Aa(l.stateNode);case 26:case 5:yn(l,l.return),Hl(l);break;case 22:l.memoizedState===null&&Hl(l);break;case 30:Hl(l);break;default:Hl(l)}n=n.sibling}}function Vn(n,l,o){for(o=o&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var d=l.alternate,h=n,y=l,C=y.flags;switch(y.tag){case 0:case 11:case 15:Vn(h,y,o),va(4,y);break;case 1:if(Vn(h,y,o),d=y,h=d.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(B){Ge(d,d.return,B)}if(d=y,h=d.updateQueue,h!==null){var S=d.stateNode;try{var R=h.shared.hiddenCallbacks;if(R!==null)for(h.shared.hiddenCallbacks=null,h=0;h<R.length;h++)lf(R[h],S)}catch(B){Ge(d,d.return,B)}}o&&C&64&&pm(y),ba(y,y.return);break;case 27:vm(y);case 26:case 5:Vn(h,y,o),o&&d===null&&C&4&&xm(y),ba(y,y.return);break;case 12:Vn(h,y,o);break;case 31:Vn(h,y,o),o&&C&4&&Nm(h,y);break;case 13:Vn(h,y,o),o&&C&4&&Sm(h,y);break;case 22:y.memoizedState===null&&Vn(h,y,o),ba(y,y.return);break;case 30:break;default:Vn(h,y,o)}l=l.sibling}}function yu(n,l){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(n=l.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&oa(o))}function vu(n,l){n=null,l.alternate!==null&&(n=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==n&&(l.refCount++,n!=null&&oa(n))}function dn(n,l,o,d){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Mm(n,l,o,d),l=l.sibling}function Mm(n,l,o,d){var h=l.flags;switch(l.tag){case 0:case 11:case 15:dn(n,l,o,d),h&2048&&va(9,l);break;case 1:dn(n,l,o,d);break;case 3:dn(n,l,o,d),h&2048&&(n=null,l.alternate!==null&&(n=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==n&&(l.refCount++,n!=null&&oa(n)));break;case 12:if(h&2048){dn(n,l,o,d),n=l.stateNode;try{var y=l.memoizedProps,C=y.id,S=y.onPostCommit;typeof S=="function"&&S(C,l.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(R){Ge(l,l.return,R)}}else dn(n,l,o,d);break;case 31:dn(n,l,o,d);break;case 13:dn(n,l,o,d);break;case 23:break;case 22:y=l.stateNode,C=l.alternate,l.memoizedState!==null?y._visibility&2?dn(n,l,o,d):ka(n,l):y._visibility&2?dn(n,l,o,d):(y._visibility|=2,vs(n,l,o,d,(l.subtreeFlags&10256)!==0||!1)),h&2048&&yu(C,l);break;case 24:dn(n,l,o,d),h&2048&&vu(l.alternate,l);break;default:dn(n,l,o,d)}}function vs(n,l,o,d,h){for(h=h&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var y=n,C=l,S=o,R=d,B=C.flags;switch(C.tag){case 0:case 11:case 15:vs(y,C,S,R,h),va(8,C);break;case 23:break;case 22:var W=C.stateNode;C.memoizedState!==null?W._visibility&2?vs(y,C,S,R,h):ka(y,C):(W._visibility|=2,vs(y,C,S,R,h)),h&&B&2048&&yu(C.alternate,C);break;case 24:vs(y,C,S,R,h),h&&B&2048&&vu(C.alternate,C);break;default:vs(y,C,S,R,h)}l=l.sibling}}function ka(n,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var o=n,d=l,h=d.flags;switch(d.tag){case 22:ka(o,d),h&2048&&yu(d.alternate,d);break;case 24:ka(o,d),h&2048&&vu(d.alternate,d);break;default:ka(o,d)}l=l.sibling}}var Ca=8192;function bs(n,l,o){if(n.subtreeFlags&Ca)for(n=n.child;n!==null;)Am(n,l,o),n=n.sibling}function Am(n,l,o){switch(n.tag){case 26:bs(n,l,o),n.flags&Ca&&n.memoizedState!==null&&Iy(o,cn,n.memoizedState,n.memoizedProps);break;case 5:bs(n,l,o);break;case 3:case 4:var d=cn;cn=Wo(n.stateNode.containerInfo),bs(n,l,o),cn=d;break;case 22:n.memoizedState===null&&(d=n.alternate,d!==null&&d.memoizedState!==null?(d=Ca,Ca=16777216,bs(n,l,o),Ca=d):bs(n,l,o));break;default:bs(n,l,o)}}function _m(n){var l=n.alternate;if(l!==null&&(n=l.child,n!==null)){l.child=null;do l=n.sibling,n.sibling=null,n=l;while(n!==null)}}function Ta(n){var l=n.deletions;if((n.flags&16)!==0){if(l!==null)for(var o=0;o<l.length;o++){var d=l[o];xt=d,Dm(d,n)}_m(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Rm(n),n=n.sibling}function Rm(n){switch(n.tag){case 0:case 11:case 15:Ta(n),n.flags&2048&&ol(9,n,n.return);break;case 3:Ta(n);break;case 12:Ta(n);break;case 22:var l=n.stateNode;n.memoizedState!==null&&l._visibility&2&&(n.return===null||n.return.tag!==13)?(l._visibility&=-3,Ho(n)):Ta(n);break;default:Ta(n)}}function Ho(n){var l=n.deletions;if((n.flags&16)!==0){if(l!==null)for(var o=0;o<l.length;o++){var d=l[o];xt=d,Dm(d,n)}_m(n)}for(n=n.child;n!==null;){switch(l=n,l.tag){case 0:case 11:case 15:ol(8,l,l.return),Ho(l);break;case 22:o=l.stateNode,o._visibility&2&&(o._visibility&=-3,Ho(l));break;default:Ho(l)}n=n.sibling}}function Dm(n,l){for(;xt!==null;){var o=xt;switch(o.tag){case 0:case 11:case 15:ol(8,o,l);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var d=o.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:oa(o.memoizedState.cache)}if(d=o.child,d!==null)d.return=o,xt=d;else e:for(o=n;xt!==null;){d=xt;var h=d.sibling,y=d.return;if(Cm(d),d===o){xt=null;break e}if(h!==null){h.return=y,xt=h;break e}xt=y}}}var Kx={getCacheForType:function(n){var l=Ct(ut),o=l.data.get(n);return o===void 0&&(o=n(),l.data.set(n,o)),o},cacheSignal:function(){return Ct(ut).controller.signal}},$x=typeof WeakMap=="function"?WeakMap:Map,qe=0,$e=null,Ae=null,Re=0,Be=0,zt=null,il=!1,ks=!1,bu=!1,qn=0,st=0,rl=0,Bl=0,ku=0,Ft=0,Cs=0,Na=null,Lt=null,Cu=!1,Bo=0,Im=0,Go=1/0,zo=null,ul=null,mt=0,cl=null,Ts=null,Hn=0,Tu=0,Nu=null,jm=null,Sa=0,Su=null;function Ot(){return(qe&2)!==0&&Re!==0?Re&-Re:E.T!==null?Ru():$c()}function Um(){if(Ft===0)if((Re&536870912)===0||Ie){var n=Ce;Ce<<=1,(Ce&3932160)===0&&(Ce=262144),Ft=n}else Ft=536870912;return n=Bt.current,n!==null&&(n.flags|=32),Ft}function Pt(n,l,o){(n===$e&&(Be===2||Be===9)||n.cancelPendingCommit!==null)&&(Ns(n,0),dl(n,Re,Ft,!1)),Js(n,o),((qe&2)===0||n!==$e)&&(n===$e&&((qe&2)===0&&(Bl|=o),st===4&&dl(n,Re,Ft,!1)),vn(n))}function Lm(n,l,o){if((qe&6)!==0)throw Error(a(327));var d=!o&&(l&127)===0&&(l&n.expiredLanes)===0||We(n,l),h=d?Zx(n,l):Eu(n,l,!0),y=d;do{if(h===0){ks&&!d&&dl(n,l,0,!1);break}else{if(o=n.current.alternate,y&&!Xx(o)){h=Eu(n,l,!1),y=!1;continue}if(h===2){if(y=l,n.errorRecoveryDisabledLanes&y)var C=0;else C=n.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){l=C;e:{var S=n;h=Na;var R=S.current.memoizedState.isDehydrated;if(R&&(Ns(S,C).flags|=256),C=Eu(S,C,!1),C!==2){if(bu&&!R){S.errorRecoveryDisabledLanes|=y,Bl|=y,h=4;break e}y=Lt,Lt=h,y!==null&&(Lt===null?Lt=y:Lt.push.apply(Lt,y))}h=C}if(y=!1,h!==2)continue}}if(h===1){Ns(n,0),dl(n,l,0,!0);break}e:{switch(d=n,y=h,y){case 0:case 1:throw Error(a(345));case 4:if((l&4194048)!==l)break;case 6:dl(d,l,Ft,!il);break e;case 2:Lt=null;break;case 3:case 5:break;default:throw Error(a(329))}if((l&62914560)===l&&(h=Bo+300-wt(),10<h)){if(dl(d,l,Ft,!il),Oe(d,0,!0)!==0)break e;Hn=l,d.timeoutHandle=mh(Pm.bind(null,d,o,Lt,zo,Cu,l,Ft,Bl,Cs,il,y,"Throttled",-0,0),h);break e}Pm(d,o,Lt,zo,Cu,l,Ft,Bl,Cs,il,y,null,-0,0)}}break}while(!0);vn(n)}function Pm(n,l,o,d,h,y,C,S,R,B,W,le,z,Y){if(n.timeoutHandle=-1,le=l.subtreeFlags,le&8192||(le&16785408)===16785408){le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Sn},Am(l,y,le);var he=(y&62914560)===y?Bo-wt():(y&4194048)===y?Im-wt():0;if(he=jy(le,he),he!==null){Hn=y,n.cancelPendingCommit=he(Om.bind(null,n,l,y,o,d,h,C,S,R,W,le,null,z,Y)),dl(n,y,C,!B);return}}Om(n,l,y,o,d,h,C,S,R)}function Xx(n){for(var l=n;;){var o=l.tag;if((o===0||o===11||o===15)&&l.flags&16384&&(o=l.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var d=0;d<o.length;d++){var h=o[d],y=h.getSnapshot;h=h.value;try{if(!qt(y(),h))return!1}catch{return!1}}if(o=l.child,l.subtreeFlags&16384&&o!==null)o.return=l,l=o;else{if(l===n)break;for(;l.sibling===null;){if(l.return===null||l.return===n)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function dl(n,l,o,d){l&=~ku,l&=~Bl,n.suspendedLanes|=l,n.pingedLanes&=~l,d&&(n.warmLanes|=l),d=n.expirationTimes;for(var h=l;0<h;){var y=31-K(h),C=1<<y;d[y]=-1,h&=~C}o!==0&&Jc(n,o,l)}function Fo(){return(qe&6)===0?(wa(0),!1):!0}function wu(){if(Ae!==null){if(Be===0)var n=Ae.return;else n=Ae,An=Dl=null,Gr(n),hs=null,ra=0,n=Ae;for(;n!==null;)hm(n.alternate,n),n=n.return;Ae=null}}function Ns(n,l){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,gy(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),Hn=0,wu(),$e=n,Ae=o=En(n.current,null),Re=l,Be=0,zt=null,il=!1,ks=We(n,l),bu=!1,Cs=Ft=ku=Bl=rl=st=0,Lt=Na=null,Cu=!1,(l&8)!==0&&(l|=l&32);var d=n.entangledLanes;if(d!==0)for(n=n.entanglements,d&=l;0<d;){var h=31-K(d),y=1<<h;l|=n[h],d&=~y}return qn=l,co(),o}function Vm(n,l){Se=null,E.H=ga,l===ms||l===vo?(l=Wd(),Be=3):l===_r?(l=Wd(),Be=4):Be=l===su?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,zt=l,Ae===null&&(st=1,Io(n,Xt(l,n.current)))}function qm(){var n=Bt.current;return n===null?!0:(Re&4194048)===Re?en===null:(Re&62914560)===Re||(Re&536870912)!==0?n===en:!1}function Hm(){var n=E.H;return E.H=ga,n===null?ga:n}function Bm(){var n=E.A;return E.A=Kx,n}function Oo(){st=4,il||(Re&4194048)!==Re&&Bt.current!==null||(ks=!0),(rl&134217727)===0&&(Bl&134217727)===0||$e===null||dl($e,Re,Ft,!1)}function Eu(n,l,o){var d=qe;qe|=2;var h=Hm(),y=Bm();($e!==n||Re!==l)&&(zo=null,Ns(n,l)),l=!1;var C=st;e:do try{if(Be!==0&&Ae!==null){var S=Ae,R=zt;switch(Be){case 8:wu(),C=6;break e;case 3:case 2:case 9:case 6:Bt.current===null&&(l=!0);var B=Be;if(Be=0,zt=null,Ss(n,S,R,B),o&&ks){C=0;break e}break;default:B=Be,Be=0,zt=null,Ss(n,S,R,B)}}Qx(),C=st;break}catch(W){Vm(n,W)}while(!0);return l&&n.shellSuspendCounter++,An=Dl=null,qe=d,E.H=h,E.A=y,Ae===null&&($e=null,Re=0,co()),C}function Qx(){for(;Ae!==null;)Gm(Ae)}function Zx(n,l){var o=qe;qe|=2;var d=Hm(),h=Bm();$e!==n||Re!==l?(zo=null,Go=wt()+500,Ns(n,l)):ks=We(n,l);e:do try{if(Be!==0&&Ae!==null){l=Ae;var y=zt;t:switch(Be){case 1:Be=0,zt=null,Ss(n,l,y,1);break;case 2:case 9:if(Qd(y)){Be=0,zt=null,zm(l);break}l=function(){Be!==2&&Be!==9||$e!==n||(Be=7),vn(n)},y.then(l,l);break e;case 3:Be=7;break e;case 4:Be=5;break e;case 7:Qd(y)?(Be=0,zt=null,zm(l)):(Be=0,zt=null,Ss(n,l,y,7));break;case 5:var C=null;switch(Ae.tag){case 26:C=Ae.memoizedState;case 5:case 27:var S=Ae;if(C?Mh(C):S.stateNode.complete){Be=0,zt=null;var R=S.sibling;if(R!==null)Ae=R;else{var B=S.return;B!==null?(Ae=B,Jo(B)):Ae=null}break t}}Be=0,zt=null,Ss(n,l,y,5);break;case 6:Be=0,zt=null,Ss(n,l,y,6);break;case 8:wu(),st=6;break e;default:throw Error(a(462))}}Wx();break}catch(W){Vm(n,W)}while(!0);return An=Dl=null,E.H=d,E.A=h,qe=o,Ae!==null?0:($e=null,Re=0,co(),st)}function Wx(){for(;Ae!==null&&!Jl();)Gm(Ae)}function Gm(n){var l=fm(n.alternate,n,qn);n.memoizedProps=n.pendingProps,l===null?Jo(n):Ae=l}function zm(n){var l=n,o=l.alternate;switch(l.tag){case 15:case 0:l=om(o,l,l.pendingProps,l.type,void 0,Re);break;case 11:l=om(o,l,l.pendingProps,l.type.render,l.ref,Re);break;case 5:Gr(l);default:hm(o,l),l=Ae=Hd(l,qn),l=fm(o,l,qn)}n.memoizedProps=n.pendingProps,l===null?Jo(n):Ae=l}function Ss(n,l,o,d){An=Dl=null,Gr(l),hs=null,ra=0;var h=l.return;try{if(Bx(n,h,l,o,Re)){st=1,Io(n,Xt(o,n.current)),Ae=null;return}}catch(y){if(h!==null)throw Ae=h,y;st=1,Io(n,Xt(o,n.current)),Ae=null;return}l.flags&32768?(Ie||d===1?n=!0:ks||(Re&536870912)!==0?n=!1:(il=n=!0,(d===2||d===9||d===3||d===6)&&(d=Bt.current,d!==null&&d.tag===13&&(d.flags|=16384))),Fm(l,n)):Jo(l)}function Jo(n){var l=n;do{if((l.flags&32768)!==0){Fm(l,il);return}n=l.return;var o=Fx(l.alternate,l,qn);if(o!==null){Ae=o;return}if(l=l.sibling,l!==null){Ae=l;return}Ae=l=n}while(l!==null);st===0&&(st=5)}function Fm(n,l){do{var o=Ox(n.alternate,n);if(o!==null){o.flags&=32767,Ae=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!l&&(n=n.sibling,n!==null)){Ae=n;return}Ae=n=o}while(n!==null);st=6,Ae=null}function Om(n,l,o,d,h,y,C,S,R){n.cancelPendingCommit=null;do Yo();while(mt!==0);if((qe&6)!==0)throw Error(a(327));if(l!==null){if(l===n.current)throw Error(a(177));if(y=l.lanes|l.childLanes,y|=pr,Dg(n,o,y,C,S,R),n===$e&&(Ae=$e=null,Re=0),Ts=l,cl=n,Hn=o,Tu=y,Nu=h,jm=d,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,ly(Cn,function(){return Xm(),null})):(n.callbackNode=null,n.callbackPriority=0),d=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||d){d=E.T,E.T=null,h=X.p,X.p=2,C=qe,qe|=4;try{Jx(n,l,o)}finally{qe=C,X.p=h,E.T=d}}mt=1,Jm(),Ym(),Km()}}function Jm(){if(mt===1){mt=0;var n=cl,l=Ts,o=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||o){o=E.T,E.T=null;var d=X.p;X.p=2;var h=qe;qe|=4;try{wm(l,n);var y=qu,C=Rd(n.containerInfo),S=y.focusedElem,R=y.selectionRange;if(C!==S&&S&&S.ownerDocument&&_d(S.ownerDocument.documentElement,S)){if(R!==null&&cr(S)){var B=R.start,W=R.end;if(W===void 0&&(W=B),"selectionStart"in S)S.selectionStart=B,S.selectionEnd=Math.min(W,S.value.length);else{var le=S.ownerDocument||document,z=le&&le.defaultView||window;if(z.getSelection){var Y=z.getSelection(),he=S.textContent.length,ke=Math.min(R.start,he),Ke=R.end===void 0?ke:Math.min(R.end,he);!Y.extend&&ke>Ke&&(C=Ke,Ke=ke,ke=C);var P=Ad(S,ke),L=Ad(S,Ke);if(P&&L&&(Y.rangeCount!==1||Y.anchorNode!==P.node||Y.anchorOffset!==P.offset||Y.focusNode!==L.node||Y.focusOffset!==L.offset)){var H=le.createRange();H.setStart(P.node,P.offset),Y.removeAllRanges(),ke>Ke?(Y.addRange(H),Y.extend(L.node,L.offset)):(H.setEnd(L.node,L.offset),Y.addRange(H))}}}}for(le=[],Y=S;Y=Y.parentNode;)Y.nodeType===1&&le.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<le.length;S++){var te=le[S];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}ai=!!Vu,qu=Vu=null}finally{qe=h,X.p=d,E.T=o}}n.current=l,mt=2}}function Ym(){if(mt===2){mt=0;var n=cl,l=Ts,o=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||o){o=E.T,E.T=null;var d=X.p;X.p=2;var h=qe;qe|=4;try{km(n,l.alternate,l)}finally{qe=h,X.p=d,E.T=o}}mt=3}}function Km(){if(mt===4||mt===3){mt=0,$a();var n=cl,l=Ts,o=Hn,d=jm;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?mt=5:(mt=0,Ts=cl=null,$m(n,n.pendingLanes));var h=n.pendingLanes;if(h===0&&(ul=null),Oi(o),l=l.stateNode,At&&typeof At.onCommitFiberRoot=="function")try{At.onCommitFiberRoot(Tl,l,void 0,(l.current.flags&128)===128)}catch{}if(d!==null){l=E.T,h=X.p,X.p=2,E.T=null;try{for(var y=n.onRecoverableError,C=0;C<d.length;C++){var S=d[C];y(S.value,{componentStack:S.stack})}}finally{E.T=l,X.p=h}}(Hn&3)!==0&&Yo(),vn(n),h=n.pendingLanes,(o&261930)!==0&&(h&42)!==0?n===Su?Sa++:(Sa=0,Su=n):Sa=0,wa(0)}}function $m(n,l){(n.pooledCacheLanes&=l)===0&&(l=n.pooledCache,l!=null&&(n.pooledCache=null,oa(l)))}function Yo(){return Jm(),Ym(),Km(),Xm()}function Xm(){if(mt!==5)return!1;var n=cl,l=Tu;Tu=0;var o=Oi(Hn),d=E.T,h=X.p;try{X.p=32>o?32:o,E.T=null,o=Nu,Nu=null;var y=cl,C=Hn;if(mt=0,Ts=cl=null,Hn=0,(qe&6)!==0)throw Error(a(331));var S=qe;if(qe|=4,Rm(y.current),Mm(y,y.current,C,o),qe=S,wa(0,!1),At&&typeof At.onPostCommitFiberRoot=="function")try{At.onPostCommitFiberRoot(Tl,y)}catch{}return!0}finally{X.p=h,E.T=d,$m(n,l)}}function Qm(n,l,o){l=Xt(o,l),l=lu(n.stateNode,l,2),n=ll(n,l,2),n!==null&&(Js(n,2),vn(n))}function Ge(n,l,o){if(n.tag===3)Qm(n,n,o);else for(;l!==null;){if(l.tag===3){Qm(l,n,o);break}else if(l.tag===1){var d=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(ul===null||!ul.has(d))){n=Xt(o,n),o=Zf(2),d=ll(l,o,2),d!==null&&(Wf(o,d,l,n),Js(d,2),vn(d));break}}l=l.return}}function Mu(n,l,o){var d=n.pingCache;if(d===null){d=n.pingCache=new $x;var h=new Set;d.set(l,h)}else h=d.get(l),h===void 0&&(h=new Set,d.set(l,h));h.has(o)||(bu=!0,h.add(o),n=ey.bind(null,n,l,o),l.then(n,n))}function ey(n,l,o){var d=n.pingCache;d!==null&&d.delete(l),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,$e===n&&(Re&o)===o&&(st===4||st===3&&(Re&62914560)===Re&&300>wt()-Bo?(qe&2)===0&&Ns(n,0):ku|=o,Cs===Re&&(Cs=0)),vn(n)}function Zm(n,l){l===0&&(l=Tn()),n=Al(n,l),n!==null&&(Js(n,l),vn(n))}function ty(n){var l=n.memoizedState,o=0;l!==null&&(o=l.retryLane),Zm(n,o)}function ny(n,l){var o=0;switch(n.tag){case 31:case 13:var d=n.stateNode,h=n.memoizedState;h!==null&&(o=h.retryLane);break;case 19:d=n.stateNode;break;case 22:d=n.stateNode._retryCache;break;default:throw Error(a(314))}d!==null&&d.delete(l),Zm(n,o)}function ly(n,l){return Cl(n,l)}var Ko=null,ws=null,Au=!1,$o=!1,_u=!1,fl=0;function vn(n){n!==ws&&n.next===null&&(ws===null?Ko=ws=n:ws=ws.next=n),$o=!0,Au||(Au=!0,ay())}function wa(n,l){if(!_u&&$o){_u=!0;do for(var o=!1,d=Ko;d!==null;){if(n!==0){var h=d.pendingLanes;if(h===0)var y=0;else{var C=d.suspendedLanes,S=d.pingedLanes;y=(1<<31-K(42|n)+1)-1,y&=h&~(C&~S),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(o=!0,nh(d,y))}else y=Re,y=Oe(d,d===$e?y:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(y&3)===0||We(d,y)||(o=!0,nh(d,y));d=d.next}while(o);_u=!1}}function sy(){Wm()}function Wm(){$o=Au=!1;var n=0;fl!==0&&py()&&(n=fl);for(var l=wt(),o=null,d=Ko;d!==null;){var h=d.next,y=eh(d,l);y===0?(d.next=null,o===null?Ko=h:o.next=h,h===null&&(ws=o)):(o=d,(n!==0||(y&3)!==0)&&($o=!0)),d=h}mt!==0&&mt!==5||wa(n),fl!==0&&(fl=0)}function eh(n,l){for(var o=n.suspendedLanes,d=n.pingedLanes,h=n.expirationTimes,y=n.pendingLanes&-62914561;0<y;){var C=31-K(y),S=1<<C,R=h[C];R===-1?((S&o)===0||(S&d)!==0)&&(h[C]=Os(S,l)):R<=l&&(n.expiredLanes|=S),y&=~S}if(l=$e,o=Re,o=Oe(n,n===l?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),d=n.callbackNode,o===0||n===l&&(Be===2||Be===9)||n.cancelPendingCommit!==null)return d!==null&&d!==null&&Kn(d),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||We(n,o)){if(l=o&-o,l===n.callbackPriority)return l;switch(d!==null&&Kn(d),Oi(o)){case 2:case 8:o=Qa;break;case 32:o=Cn;break;case 268435456:o=Za;break;default:o=Cn}return d=th.bind(null,n),o=Cl(o,d),n.callbackPriority=l,n.callbackNode=o,l}return d!==null&&d!==null&&Kn(d),n.callbackPriority=2,n.callbackNode=null,2}function th(n,l){if(mt!==0&&mt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Yo()&&n.callbackNode!==o)return null;var d=Re;return d=Oe(n,n===$e?d:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),d===0?null:(Lm(n,d,l),eh(n,wt()),n.callbackNode!=null&&n.callbackNode===o?th.bind(null,n):null)}function nh(n,l){if(Yo())return null;Lm(n,l,!0)}function ay(){xy(function(){(qe&6)!==0?Cl(Xa,sy):Wm()})}function Ru(){if(fl===0){var n=ds;n===0&&(n=Ue,Ue<<=1,(Ue&261888)===0&&(Ue=256)),fl=n}return fl}function lh(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:no(""+n)}function sh(n,l){var o=l.ownerDocument.createElement("input");return o.name=l.name,o.value=l.value,n.id&&o.setAttribute("form",n.id),l.parentNode.insertBefore(o,l),n=new FormData(n),o.parentNode.removeChild(o),n}function oy(n,l,o,d,h){if(l==="submit"&&o&&o.stateNode===h){var y=lh((h[Rt]||null).action),C=d.submitter;C&&(l=(l=C[Rt]||null)?lh(l.formAction):C.getAttribute("formAction"),l!==null&&(y=l,C=null));var S=new oo("action","action",null,d,h);n.push({event:S,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(fl!==0){var R=C?sh(h,C):new FormData(h);Qr(o,{pending:!0,data:R,method:h.method,action:y},null,R)}}else typeof y=="function"&&(S.preventDefault(),R=C?sh(h,C):new FormData(h),Qr(o,{pending:!0,data:R,method:h.method,action:y},y,R))},currentTarget:h}]})}}for(var Du=0;Du<hr.length;Du++){var Iu=hr[Du],iy=Iu.toLowerCase(),ry=Iu[0].toUpperCase()+Iu.slice(1);un(iy,"on"+ry)}un(jd,"onAnimationEnd"),un(Ud,"onAnimationIteration"),un(Ld,"onAnimationStart"),un("dblclick","onDoubleClick"),un("focusin","onFocus"),un("focusout","onBlur"),un(Nx,"onTransitionRun"),un(Sx,"onTransitionStart"),un(wx,"onTransitionCancel"),un(Pd,"onTransitionEnd"),Ql("onMouseEnter",["mouseout","mouseover"]),Ql("onMouseLeave",["mouseout","mouseover"]),Ql("onPointerEnter",["pointerout","pointerover"]),Ql("onPointerLeave",["pointerout","pointerover"]),Sl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Sl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Sl("onBeforeInput",["compositionend","keypress","textInput","paste"]),Sl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Sl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Sl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ea="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uy=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ea));function ah(n,l){l=(l&4)!==0;for(var o=0;o<n.length;o++){var d=n[o],h=d.event;d=d.listeners;e:{var y=void 0;if(l)for(var C=d.length-1;0<=C;C--){var S=d[C],R=S.instance,B=S.currentTarget;if(S=S.listener,R!==y&&h.isPropagationStopped())break e;y=S,h.currentTarget=B;try{y(h)}catch(W){uo(W)}h.currentTarget=null,y=R}else for(C=0;C<d.length;C++){if(S=d[C],R=S.instance,B=S.currentTarget,S=S.listener,R!==y&&h.isPropagationStopped())break e;y=S,h.currentTarget=B;try{y(h)}catch(W){uo(W)}h.currentTarget=null,y=R}}}}function _e(n,l){var o=l[Ji];o===void 0&&(o=l[Ji]=new Set);var d=n+"__bubble";o.has(d)||(oh(l,n,2,!1),o.add(d))}function ju(n,l,o){var d=0;l&&(d|=4),oh(o,n,d,l)}var Xo="_reactListening"+Math.random().toString(36).slice(2);function Uu(n){if(!n[Xo]){n[Xo]=!0,Zc.forEach(function(o){o!=="selectionchange"&&(uy.has(o)||ju(o,!1,n),ju(o,!0,n))});var l=n.nodeType===9?n:n.ownerDocument;l===null||l[Xo]||(l[Xo]=!0,ju("selectionchange",!1,l))}}function oh(n,l,o,d){switch(Uh(l)){case 2:var h=Py;break;case 8:h=Vy;break;default:h=Xu}o=h.bind(null,l,o,n),h=void 0,!tr||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(h=!0),d?h!==void 0?n.addEventListener(l,o,{capture:!0,passive:h}):n.addEventListener(l,o,!0):h!==void 0?n.addEventListener(l,o,{passive:h}):n.addEventListener(l,o,!1)}function Lu(n,l,o,d,h){var y=d;if((l&1)===0&&(l&2)===0&&d!==null)e:for(;;){if(d===null)return;var C=d.tag;if(C===3||C===4){var S=d.stateNode.containerInfo;if(S===h)break;if(C===4)for(C=d.return;C!==null;){var R=C.tag;if((R===3||R===4)&&C.stateNode.containerInfo===h)return;C=C.return}for(;S!==null;){if(C=Kl(S),C===null)return;if(R=C.tag,R===5||R===6||R===26||R===27){d=y=C;continue e}S=S.parentNode}}d=d.return}cd(function(){var B=y,W=Wi(o),le=[];e:{var z=Vd.get(n);if(z!==void 0){var Y=oo,he=n;switch(n){case"keypress":if(so(o)===0)break e;case"keydown":case"keyup":Y=nx;break;case"focusin":he="focus",Y=ar;break;case"focusout":he="blur",Y=ar;break;case"beforeblur":case"afterblur":Y=ar;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=md;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=Fg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=ax;break;case jd:case Ud:case Ld:Y=Yg;break;case Pd:Y=ix;break;case"scroll":case"scrollend":Y=Gg;break;case"wheel":Y=ux;break;case"copy":case"cut":case"paste":Y=$g;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=pd;break;case"toggle":case"beforetoggle":Y=dx}var ke=(l&4)!==0,Ke=!ke&&(n==="scroll"||n==="scrollend"),P=ke?z!==null?z+"Capture":null:z;ke=[];for(var L=B,H;L!==null;){var te=L;if(H=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||H===null||P===null||(te=$s(L,P),te!=null&&ke.push(Ma(L,te,H))),Ke)break;L=L.return}0<ke.length&&(z=new Y(z,he,null,o,W),le.push({event:z,listeners:ke}))}}if((l&7)===0){e:{if(z=n==="mouseover"||n==="pointerover",Y=n==="mouseout"||n==="pointerout",z&&o!==Zi&&(he=o.relatedTarget||o.fromElement)&&(Kl(he)||he[Yl]))break e;if((Y||z)&&(z=W.window===W?W:(z=W.ownerDocument)?z.defaultView||z.parentWindow:window,Y?(he=o.relatedTarget||o.toElement,Y=B,he=he?Kl(he):null,he!==null&&(Ke=f(he),ke=he.tag,he!==Ke||ke!==5&&ke!==27&&ke!==6)&&(he=null)):(Y=null,he=B),Y!==he)){if(ke=md,te="onMouseLeave",P="onMouseEnter",L="mouse",(n==="pointerout"||n==="pointerover")&&(ke=pd,te="onPointerLeave",P="onPointerEnter",L="pointer"),Ke=Y==null?z:Ks(Y),H=he==null?z:Ks(he),z=new ke(te,L+"leave",Y,o,W),z.target=Ke,z.relatedTarget=H,te=null,Kl(W)===B&&(ke=new ke(P,L+"enter",he,o,W),ke.target=H,ke.relatedTarget=Ke,te=ke),Ke=te,Y&&he)t:{for(ke=cy,P=Y,L=he,H=0,te=P;te;te=ke(te))H++;te=0;for(var ve=L;ve;ve=ke(ve))te++;for(;0<H-te;)P=ke(P),H--;for(;0<te-H;)L=ke(L),te--;for(;H--;){if(P===L||L!==null&&P===L.alternate){ke=P;break t}P=ke(P),L=ke(L)}ke=null}else ke=null;Y!==null&&ih(le,z,Y,ke,!1),he!==null&&Ke!==null&&ih(le,Ke,he,ke,!0)}}e:{if(z=B?Ks(B):window,Y=z.nodeName&&z.nodeName.toLowerCase(),Y==="select"||Y==="input"&&z.type==="file")var Le=Td;else if(kd(z))if(Nd)Le=kx;else{Le=vx;var ye=yx}else Y=z.nodeName,!Y||Y.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?B&&Qi(B.elementType)&&(Le=Td):Le=bx;if(Le&&(Le=Le(n,B))){Cd(le,Le,o,W);break e}ye&&ye(n,z,B),n==="focusout"&&B&&z.type==="number"&&B.memoizedProps.value!=null&&Xi(z,"number",z.value)}switch(ye=B?Ks(B):window,n){case"focusin":(kd(ye)||ye.contentEditable==="true")&&(ls=ye,dr=B,la=null);break;case"focusout":la=dr=ls=null;break;case"mousedown":fr=!0;break;case"contextmenu":case"mouseup":case"dragend":fr=!1,Dd(le,o,W);break;case"selectionchange":if(Tx)break;case"keydown":case"keyup":Dd(le,o,W)}var Ee;if(ir)e:{switch(n){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else ns?vd(n,o)&&(De="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(De="onCompositionStart");De&&(gd&&o.locale!=="ko"&&(ns||De!=="onCompositionStart"?De==="onCompositionEnd"&&ns&&(Ee=dd()):(Xn=W,nr="value"in Xn?Xn.value:Xn.textContent,ns=!0)),ye=Qo(B,De),0<ye.length&&(De=new hd(De,n,null,o,W),le.push({event:De,listeners:ye}),Ee?De.data=Ee:(Ee=bd(o),Ee!==null&&(De.data=Ee)))),(Ee=mx?hx(n,o):px(n,o))&&(De=Qo(B,"onBeforeInput"),0<De.length&&(ye=new hd("onBeforeInput","beforeinput",null,o,W),le.push({event:ye,listeners:De}),ye.data=Ee)),oy(le,n,B,o,W)}ah(le,l)})}function Ma(n,l,o){return{instance:n,listener:l,currentTarget:o}}function Qo(n,l){for(var o=l+"Capture",d=[];n!==null;){var h=n,y=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||y===null||(h=$s(n,o),h!=null&&d.unshift(Ma(n,h,y)),h=$s(n,l),h!=null&&d.push(Ma(n,h,y))),n.tag===3)return d;n=n.return}return[]}function cy(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function ih(n,l,o,d,h){for(var y=l._reactName,C=[];o!==null&&o!==d;){var S=o,R=S.alternate,B=S.stateNode;if(S=S.tag,R!==null&&R===d)break;S!==5&&S!==26&&S!==27||B===null||(R=B,h?(B=$s(o,y),B!=null&&C.unshift(Ma(o,B,R))):h||(B=$s(o,y),B!=null&&C.push(Ma(o,B,R)))),o=o.return}C.length!==0&&n.push({event:l,listeners:C})}var dy=/\r\n?/g,fy=/\u0000|\uFFFD/g;function rh(n){return(typeof n=="string"?n:""+n).replace(dy,`
`).replace(fy,"")}function uh(n,l){return l=rh(l),rh(n)===l}function Ye(n,l,o,d,h,y){switch(o){case"children":typeof d=="string"?l==="body"||l==="textarea"&&d===""||Wl(n,d):(typeof d=="number"||typeof d=="bigint")&&l!=="body"&&Wl(n,""+d);break;case"className":eo(n,"class",d);break;case"tabIndex":eo(n,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":eo(n,o,d);break;case"style":rd(n,d,y);break;case"data":if(l!=="object"){eo(n,"data",d);break}case"src":case"href":if(d===""&&(l!=="a"||o!=="href")){n.removeAttribute(o);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){n.removeAttribute(o);break}d=no(""+d),n.setAttribute(o,d);break;case"action":case"formAction":if(typeof d=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(o==="formAction"?(l!=="input"&&Ye(n,l,"name",h.name,h,null),Ye(n,l,"formEncType",h.formEncType,h,null),Ye(n,l,"formMethod",h.formMethod,h,null),Ye(n,l,"formTarget",h.formTarget,h,null)):(Ye(n,l,"encType",h.encType,h,null),Ye(n,l,"method",h.method,h,null),Ye(n,l,"target",h.target,h,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){n.removeAttribute(o);break}d=no(""+d),n.setAttribute(o,d);break;case"onClick":d!=null&&(n.onclick=Sn);break;case"onScroll":d!=null&&_e("scroll",n);break;case"onScrollEnd":d!=null&&_e("scrollend",n);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(a(61));if(o=d.__html,o!=null){if(h.children!=null)throw Error(a(60));n.innerHTML=o}}break;case"multiple":n.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":n.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){n.removeAttribute("xlink:href");break}o=no(""+d),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(o,""+d):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":d===!0?n.setAttribute(o,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(o,d):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?n.setAttribute(o,d):n.removeAttribute(o);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?n.removeAttribute(o):n.setAttribute(o,d);break;case"popover":_e("beforetoggle",n),_e("toggle",n),Wa(n,"popover",d);break;case"xlinkActuate":Nn(n,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Nn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Nn(n,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Nn(n,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Nn(n,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Nn(n,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Nn(n,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Nn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Nn(n,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Wa(n,"is",d);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Hg.get(o)||o,Wa(n,o,d))}}function Pu(n,l,o,d,h,y){switch(o){case"style":rd(n,d,y);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(a(61));if(o=d.__html,o!=null){if(h.children!=null)throw Error(a(60));n.innerHTML=o}}break;case"children":typeof d=="string"?Wl(n,d):(typeof d=="number"||typeof d=="bigint")&&Wl(n,""+d);break;case"onScroll":d!=null&&_e("scroll",n);break;case"onScrollEnd":d!=null&&_e("scrollend",n);break;case"onClick":d!=null&&(n.onclick=Sn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Wc.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(h=o.endsWith("Capture"),l=o.slice(2,h?o.length-7:void 0),y=n[Rt]||null,y=y!=null?y[o]:null,typeof y=="function"&&n.removeEventListener(l,y,h),typeof d=="function")){typeof y!="function"&&y!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(l,d,h);break e}o in n?n[o]=d:d===!0?n.setAttribute(o,""):Wa(n,o,d)}}}function Nt(n,l,o){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_e("error",n),_e("load",n);var d=!1,h=!1,y;for(y in o)if(o.hasOwnProperty(y)){var C=o[y];if(C!=null)switch(y){case"src":d=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,l));default:Ye(n,l,y,C,o,null)}}h&&Ye(n,l,"srcSet",o.srcSet,o,null),d&&Ye(n,l,"src",o.src,o,null);return;case"input":_e("invalid",n);var S=y=C=h=null,R=null,B=null;for(d in o)if(o.hasOwnProperty(d)){var W=o[d];if(W!=null)switch(d){case"name":h=W;break;case"type":C=W;break;case"checked":R=W;break;case"defaultChecked":B=W;break;case"value":y=W;break;case"defaultValue":S=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(a(137,l));break;default:Ye(n,l,d,W,o,null)}}sd(n,y,S,R,B,C,h,!1);return;case"select":_e("invalid",n),d=C=y=null;for(h in o)if(o.hasOwnProperty(h)&&(S=o[h],S!=null))switch(h){case"value":y=S;break;case"defaultValue":C=S;break;case"multiple":d=S;default:Ye(n,l,h,S,o,null)}l=y,o=C,n.multiple=!!d,l!=null?Zl(n,!!d,l,!1):o!=null&&Zl(n,!!d,o,!0);return;case"textarea":_e("invalid",n),y=h=d=null;for(C in o)if(o.hasOwnProperty(C)&&(S=o[C],S!=null))switch(C){case"value":d=S;break;case"defaultValue":h=S;break;case"children":y=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(a(91));break;default:Ye(n,l,C,S,o,null)}od(n,d,h,y);return;case"option":for(R in o)if(o.hasOwnProperty(R)&&(d=o[R],d!=null))switch(R){case"selected":n.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Ye(n,l,R,d,o,null)}return;case"dialog":_e("beforetoggle",n),_e("toggle",n),_e("cancel",n),_e("close",n);break;case"iframe":case"object":_e("load",n);break;case"video":case"audio":for(d=0;d<Ea.length;d++)_e(Ea[d],n);break;case"image":_e("error",n),_e("load",n);break;case"details":_e("toggle",n);break;case"embed":case"source":case"link":_e("error",n),_e("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in o)if(o.hasOwnProperty(B)&&(d=o[B],d!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,l));default:Ye(n,l,B,d,o,null)}return;default:if(Qi(l)){for(W in o)o.hasOwnProperty(W)&&(d=o[W],d!==void 0&&Pu(n,l,W,d,o,void 0));return}}for(S in o)o.hasOwnProperty(S)&&(d=o[S],d!=null&&Ye(n,l,S,d,o,null))}function my(n,l,o,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,y=null,C=null,S=null,R=null,B=null,W=null;for(Y in o){var le=o[Y];if(o.hasOwnProperty(Y)&&le!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":R=le;default:d.hasOwnProperty(Y)||Ye(n,l,Y,null,d,le)}}for(var z in d){var Y=d[z];if(le=o[z],d.hasOwnProperty(z)&&(Y!=null||le!=null))switch(z){case"type":y=Y;break;case"name":h=Y;break;case"checked":B=Y;break;case"defaultChecked":W=Y;break;case"value":C=Y;break;case"defaultValue":S=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(a(137,l));break;default:Y!==le&&Ye(n,l,z,Y,d,le)}}$i(n,C,S,R,B,W,y,h);return;case"select":Y=C=S=z=null;for(y in o)if(R=o[y],o.hasOwnProperty(y)&&R!=null)switch(y){case"value":break;case"multiple":Y=R;default:d.hasOwnProperty(y)||Ye(n,l,y,null,d,R)}for(h in d)if(y=d[h],R=o[h],d.hasOwnProperty(h)&&(y!=null||R!=null))switch(h){case"value":z=y;break;case"defaultValue":S=y;break;case"multiple":C=y;default:y!==R&&Ye(n,l,h,y,d,R)}l=S,o=C,d=Y,z!=null?Zl(n,!!o,z,!1):!!d!=!!o&&(l!=null?Zl(n,!!o,l,!0):Zl(n,!!o,o?[]:"",!1));return;case"textarea":Y=z=null;for(S in o)if(h=o[S],o.hasOwnProperty(S)&&h!=null&&!d.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:Ye(n,l,S,null,d,h)}for(C in d)if(h=d[C],y=o[C],d.hasOwnProperty(C)&&(h!=null||y!=null))switch(C){case"value":z=h;break;case"defaultValue":Y=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(a(91));break;default:h!==y&&Ye(n,l,C,h,d,y)}ad(n,z,Y);return;case"option":for(var he in o)if(z=o[he],o.hasOwnProperty(he)&&z!=null&&!d.hasOwnProperty(he))switch(he){case"selected":n.selected=!1;break;default:Ye(n,l,he,null,d,z)}for(R in d)if(z=d[R],Y=o[R],d.hasOwnProperty(R)&&z!==Y&&(z!=null||Y!=null))switch(R){case"selected":n.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:Ye(n,l,R,z,d,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ke in o)z=o[ke],o.hasOwnProperty(ke)&&z!=null&&!d.hasOwnProperty(ke)&&Ye(n,l,ke,null,d,z);for(B in d)if(z=d[B],Y=o[B],d.hasOwnProperty(B)&&z!==Y&&(z!=null||Y!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(a(137,l));break;default:Ye(n,l,B,z,d,Y)}return;default:if(Qi(l)){for(var Ke in o)z=o[Ke],o.hasOwnProperty(Ke)&&z!==void 0&&!d.hasOwnProperty(Ke)&&Pu(n,l,Ke,void 0,d,z);for(W in d)z=d[W],Y=o[W],!d.hasOwnProperty(W)||z===Y||z===void 0&&Y===void 0||Pu(n,l,W,z,d,Y);return}}for(var P in o)z=o[P],o.hasOwnProperty(P)&&z!=null&&!d.hasOwnProperty(P)&&Ye(n,l,P,null,d,z);for(le in d)z=d[le],Y=o[le],!d.hasOwnProperty(le)||z===Y||z==null&&Y==null||Ye(n,l,le,z,d,Y)}function ch(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function hy(){if(typeof performance.getEntriesByType=="function"){for(var n=0,l=0,o=performance.getEntriesByType("resource"),d=0;d<o.length;d++){var h=o[d],y=h.transferSize,C=h.initiatorType,S=h.duration;if(y&&S&&ch(C)){for(C=0,S=h.responseEnd,d+=1;d<o.length;d++){var R=o[d],B=R.startTime;if(B>S)break;var W=R.transferSize,le=R.initiatorType;W&&ch(le)&&(R=R.responseEnd,C+=W*(R<S?1:(S-B)/(R-B)))}if(--d,l+=8*(y+C)/(h.duration/1e3),n++,10<n)break}}if(0<n)return l/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Vu=null,qu=null;function Zo(n){return n.nodeType===9?n:n.ownerDocument}function dh(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function fh(n,l){if(n===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&l==="foreignObject"?0:n}function Hu(n,l){return n==="textarea"||n==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Bu=null;function py(){var n=window.event;return n&&n.type==="popstate"?n===Bu?!1:(Bu=n,!0):(Bu=null,!1)}var mh=typeof setTimeout=="function"?setTimeout:void 0,gy=typeof clearTimeout=="function"?clearTimeout:void 0,hh=typeof Promise=="function"?Promise:void 0,xy=typeof queueMicrotask=="function"?queueMicrotask:typeof hh<"u"?function(n){return hh.resolve(null).then(n).catch(yy)}:mh;function yy(n){setTimeout(function(){throw n})}function ml(n){return n==="head"}function ph(n,l){var o=l,d=0;do{var h=o.nextSibling;if(n.removeChild(o),h&&h.nodeType===8)if(o=h.data,o==="/$"||o==="/&"){if(d===0){n.removeChild(h),_s(l);return}d--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")d++;else if(o==="html")Aa(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,Aa(o);for(var y=o.firstChild;y;){var C=y.nextSibling,S=y.nodeName;y[Ys]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&y.rel.toLowerCase()==="stylesheet"||o.removeChild(y),y=C}}else o==="body"&&Aa(n.ownerDocument.body);o=h}while(o);_s(l)}function gh(n,l){var o=n;n=0;do{var d=o.nextSibling;if(o.nodeType===1?l?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(l?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),d&&d.nodeType===8)if(o=d.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=d}while(o)}function Gu(n){var l=n.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var o=l;switch(l=l.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Gu(o),Yi(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function vy(n,l,o,d){for(;n.nodeType===1;){var h=o;if(n.nodeName.toLowerCase()!==l.toLowerCase()){if(!d&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(d){if(!n[Ys])switch(l){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(y=n.getAttribute("rel"),y==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(y!==h.rel||n.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||n.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||n.getAttribute("title")!==(h.title==null?null:h.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(y=n.getAttribute("src"),(y!==(h.src==null?null:h.src)||n.getAttribute("type")!==(h.type==null?null:h.type)||n.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&y&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(l==="input"&&n.type==="hidden"){var y=h.name==null?null:""+h.name;if(h.type==="hidden"&&n.getAttribute("name")===y)return n}else return n;if(n=tn(n.nextSibling),n===null)break}return null}function by(n,l,o){if(l==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=tn(n.nextSibling),n===null))return null;return n}function xh(n,l){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!l||(n=tn(n.nextSibling),n===null))return null;return n}function zu(n){return n.data==="$?"||n.data==="$~"}function Fu(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function ky(n,l){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=l;else if(n.data!=="$?"||o.readyState!=="loading")l();else{var d=function(){l(),o.removeEventListener("DOMContentLoaded",d)};o.addEventListener("DOMContentLoaded",d),n._reactRetry=d}}function tn(n){for(;n!=null;n=n.nextSibling){var l=n.nodeType;if(l===1||l===3)break;if(l===8){if(l=n.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return n}var Ou=null;function yh(n){n=n.nextSibling;for(var l=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(l===0)return tn(n.nextSibling);l--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||l++}n=n.nextSibling}return null}function vh(n){n=n.previousSibling;for(var l=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(l===0)return n;l--}else o!=="/$"&&o!=="/&"||l++}n=n.previousSibling}return null}function bh(n,l,o){switch(l=Zo(o),n){case"html":if(n=l.documentElement,!n)throw Error(a(452));return n;case"head":if(n=l.head,!n)throw Error(a(453));return n;case"body":if(n=l.body,!n)throw Error(a(454));return n;default:throw Error(a(451))}}function Aa(n){for(var l=n.attributes;l.length;)n.removeAttributeNode(l[0]);Yi(n)}var nn=new Map,kh=new Set;function Wo(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Bn=X.d;X.d={f:Cy,r:Ty,D:Ny,C:Sy,L:wy,m:Ey,X:Ay,S:My,M:_y};function Cy(){var n=Bn.f(),l=Fo();return n||l}function Ty(n){var l=$l(n);l!==null&&l.tag===5&&l.type==="form"?Vf(l):Bn.r(n)}var Es=typeof document>"u"?null:document;function Ch(n,l,o){var d=Es;if(d&&typeof l=="string"&&l){var h=Kt(l);h='link[rel="'+n+'"][href="'+h+'"]',typeof o=="string"&&(h+='[crossorigin="'+o+'"]'),kh.has(h)||(kh.add(h),n={rel:n,crossOrigin:o,href:l},d.querySelector(h)===null&&(l=d.createElement("link"),Nt(l,"link",n),gt(l),d.head.appendChild(l)))}}function Ny(n){Bn.D(n),Ch("dns-prefetch",n,null)}function Sy(n,l){Bn.C(n,l),Ch("preconnect",n,l)}function wy(n,l,o){Bn.L(n,l,o);var d=Es;if(d&&n&&l){var h='link[rel="preload"][as="'+Kt(l)+'"]';l==="image"&&o&&o.imageSrcSet?(h+='[imagesrcset="'+Kt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(h+='[imagesizes="'+Kt(o.imageSizes)+'"]')):h+='[href="'+Kt(n)+'"]';var y=h;switch(l){case"style":y=Ms(n);break;case"script":y=As(n)}nn.has(y)||(n=b({rel:"preload",href:l==="image"&&o&&o.imageSrcSet?void 0:n,as:l},o),nn.set(y,n),d.querySelector(h)!==null||l==="style"&&d.querySelector(_a(y))||l==="script"&&d.querySelector(Ra(y))||(l=d.createElement("link"),Nt(l,"link",n),gt(l),d.head.appendChild(l)))}}function Ey(n,l){Bn.m(n,l);var o=Es;if(o&&n){var d=l&&typeof l.as=="string"?l.as:"script",h='link[rel="modulepreload"][as="'+Kt(d)+'"][href="'+Kt(n)+'"]',y=h;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=As(n)}if(!nn.has(y)&&(n=b({rel:"modulepreload",href:n},l),nn.set(y,n),o.querySelector(h)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Ra(y)))return}d=o.createElement("link"),Nt(d,"link",n),gt(d),o.head.appendChild(d)}}}function My(n,l,o){Bn.S(n,l,o);var d=Es;if(d&&n){var h=Xl(d).hoistableStyles,y=Ms(n);l=l||"default";var C=h.get(y);if(!C){var S={loading:0,preload:null};if(C=d.querySelector(_a(y)))S.loading=5;else{n=b({rel:"stylesheet",href:n,"data-precedence":l},o),(o=nn.get(y))&&Ju(n,o);var R=C=d.createElement("link");gt(R),Nt(R,"link",n),R._p=new Promise(function(B,W){R.onload=B,R.onerror=W}),R.addEventListener("load",function(){S.loading|=1}),R.addEventListener("error",function(){S.loading|=2}),S.loading|=4,ei(C,l,d)}C={type:"stylesheet",instance:C,count:1,state:S},h.set(y,C)}}}function Ay(n,l){Bn.X(n,l);var o=Es;if(o&&n){var d=Xl(o).hoistableScripts,h=As(n),y=d.get(h);y||(y=o.querySelector(Ra(h)),y||(n=b({src:n,async:!0},l),(l=nn.get(h))&&Yu(n,l),y=o.createElement("script"),gt(y),Nt(y,"link",n),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},d.set(h,y))}}function _y(n,l){Bn.M(n,l);var o=Es;if(o&&n){var d=Xl(o).hoistableScripts,h=As(n),y=d.get(h);y||(y=o.querySelector(Ra(h)),y||(n=b({src:n,async:!0,type:"module"},l),(l=nn.get(h))&&Yu(n,l),y=o.createElement("script"),gt(y),Nt(y,"link",n),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},d.set(h,y))}}function Th(n,l,o,d){var h=(h=ge.current)?Wo(h):null;if(!h)throw Error(a(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(l=Ms(o.href),o=Xl(h).hoistableStyles,d=o.get(l),d||(d={type:"style",instance:null,count:0,state:null},o.set(l,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=Ms(o.href);var y=Xl(h).hoistableStyles,C=y.get(n);if(C||(h=h.ownerDocument||h,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(n,C),(y=h.querySelector(_a(n)))&&!y._p&&(C.instance=y,C.state.loading=5),nn.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},nn.set(n,o),y||Ry(h,n,o,C.state))),l&&d===null)throw Error(a(528,""));return C}if(l&&d!==null)throw Error(a(529,""));return null;case"script":return l=o.async,o=o.src,typeof o=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=As(o),o=Xl(h).hoistableScripts,d=o.get(l),d||(d={type:"script",instance:null,count:0,state:null},o.set(l,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,n))}}function Ms(n){return'href="'+Kt(n)+'"'}function _a(n){return'link[rel="stylesheet"]['+n+"]"}function Nh(n){return b({},n,{"data-precedence":n.precedence,precedence:null})}function Ry(n,l,o,d){n.querySelector('link[rel="preload"][as="style"]['+l+"]")?d.loading=1:(l=n.createElement("link"),d.preload=l,l.addEventListener("load",function(){return d.loading|=1}),l.addEventListener("error",function(){return d.loading|=2}),Nt(l,"link",o),gt(l),n.head.appendChild(l))}function As(n){return'[src="'+Kt(n)+'"]'}function Ra(n){return"script[async]"+n}function Sh(n,l,o){if(l.count++,l.instance===null)switch(l.type){case"style":var d=n.querySelector('style[data-href~="'+Kt(o.href)+'"]');if(d)return l.instance=d,gt(d),d;var h=b({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return d=(n.ownerDocument||n).createElement("style"),gt(d),Nt(d,"style",h),ei(d,o.precedence,n),l.instance=d;case"stylesheet":h=Ms(o.href);var y=n.querySelector(_a(h));if(y)return l.state.loading|=4,l.instance=y,gt(y),y;d=Nh(o),(h=nn.get(h))&&Ju(d,h),y=(n.ownerDocument||n).createElement("link"),gt(y);var C=y;return C._p=new Promise(function(S,R){C.onload=S,C.onerror=R}),Nt(y,"link",d),l.state.loading|=4,ei(y,o.precedence,n),l.instance=y;case"script":return y=As(o.src),(h=n.querySelector(Ra(y)))?(l.instance=h,gt(h),h):(d=o,(h=nn.get(y))&&(d=b({},o),Yu(d,h)),n=n.ownerDocument||n,h=n.createElement("script"),gt(h),Nt(h,"link",d),n.head.appendChild(h),l.instance=h);case"void":return null;default:throw Error(a(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(d=l.instance,l.state.loading|=4,ei(d,o.precedence,n));return l.instance}function ei(n,l,o){for(var d=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=d.length?d[d.length-1]:null,y=h,C=0;C<d.length;C++){var S=d[C];if(S.dataset.precedence===l)y=S;else if(y!==h)break}y?y.parentNode.insertBefore(n,y.nextSibling):(l=o.nodeType===9?o.head:o,l.insertBefore(n,l.firstChild))}function Ju(n,l){n.crossOrigin==null&&(n.crossOrigin=l.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=l.referrerPolicy),n.title==null&&(n.title=l.title)}function Yu(n,l){n.crossOrigin==null&&(n.crossOrigin=l.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=l.referrerPolicy),n.integrity==null&&(n.integrity=l.integrity)}var ti=null;function wh(n,l,o){if(ti===null){var d=new Map,h=ti=new Map;h.set(o,d)}else h=ti,d=h.get(o),d||(d=new Map,h.set(o,d));if(d.has(n))return d;for(d.set(n,null),o=o.getElementsByTagName(n),h=0;h<o.length;h++){var y=o[h];if(!(y[Ys]||y[bt]||n==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var C=y.getAttribute(l)||"";C=n+C;var S=d.get(C);S?S.push(y):d.set(C,[y])}}return d}function Eh(n,l,o){n=n.ownerDocument||n,n.head.insertBefore(o,l==="title"?n.querySelector("head > title"):null)}function Dy(n,l,o){if(o===1||l.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return n=l.disabled,typeof l.precedence=="string"&&n==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function Mh(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function Iy(n,l,o,d){if(o.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var h=Ms(d.href),y=l.querySelector(_a(h));if(y){l=y._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(n.count++,n=ni.bind(n),l.then(n,n)),o.state.loading|=4,o.instance=y,gt(y);return}y=l.ownerDocument||l,d=Nh(d),(h=nn.get(h))&&Ju(d,h),y=y.createElement("link"),gt(y);var C=y;C._p=new Promise(function(S,R){C.onload=S,C.onerror=R}),Nt(y,"link",d),o.instance=y}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,l),(l=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=ni.bind(n),l.addEventListener("load",o),l.addEventListener("error",o))}}var Ku=0;function jy(n,l){return n.stylesheets&&n.count===0&&si(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var d=setTimeout(function(){if(n.stylesheets&&si(n,n.stylesheets),n.unsuspend){var y=n.unsuspend;n.unsuspend=null,y()}},6e4+l);0<n.imgBytes&&Ku===0&&(Ku=62500*hy());var h=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&si(n,n.stylesheets),n.unsuspend)){var y=n.unsuspend;n.unsuspend=null,y()}},(n.imgBytes>Ku?50:800)+l);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(d),clearTimeout(h)}}:null}function ni(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)si(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var li=null;function si(n,l){n.stylesheets=null,n.unsuspend!==null&&(n.count++,li=new Map,l.forEach(Uy,n),li=null,ni.call(n))}function Uy(n,l){if(!(l.state.loading&4)){var o=li.get(n);if(o)var d=o.get(null);else{o=new Map,li.set(n,o);for(var h=n.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<h.length;y++){var C=h[y];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(o.set(C.dataset.precedence,C),d=C)}d&&o.set(null,d)}h=l.instance,C=h.getAttribute("data-precedence"),y=o.get(C)||d,y===d&&o.set(null,h),o.set(C,h),this.count++,d=ni.bind(this),h.addEventListener("load",d),h.addEventListener("error",d),y?y.parentNode.insertBefore(h,y.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(h,n.firstChild)),l.state.loading|=4}}var Da={$$typeof:I,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function Ly(n,l,o,d,h,y,C,S,R){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Nl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nl(0),this.hiddenUpdates=Nl(null),this.identifierPrefix=d,this.onUncaughtError=h,this.onCaughtError=y,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function Ah(n,l,o,d,h,y,C,S,R,B,W,le){return n=new Ly(n,l,o,C,R,B,W,le,S),l=1,y===!0&&(l|=24),y=Ht(3,null,null,l),n.current=y,y.stateNode=n,l=Er(),l.refCount++,n.pooledCache=l,l.refCount++,y.memoizedState={element:d,isDehydrated:o,cache:l},Rr(y),n}function _h(n){return n?(n=os,n):os}function Rh(n,l,o,d,h,y){h=_h(h),d.context===null?d.context=h:d.pendingContext=h,d=nl(l),d.payload={element:o},y=y===void 0?null:y,y!==null&&(d.callback=y),o=ll(n,d,l),o!==null&&(Pt(o,n,l),ca(o,n,l))}function Dh(n,l){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<l?o:l}}function $u(n,l){Dh(n,l),(n=n.alternate)&&Dh(n,l)}function Ih(n){if(n.tag===13||n.tag===31){var l=Al(n,67108864);l!==null&&Pt(l,n,67108864),$u(n,67108864)}}function jh(n){if(n.tag===13||n.tag===31){var l=Ot();l=Fi(l);var o=Al(n,l);o!==null&&Pt(o,n,l),$u(n,l)}}var ai=!0;function Py(n,l,o,d){var h=E.T;E.T=null;var y=X.p;try{X.p=2,Xu(n,l,o,d)}finally{X.p=y,E.T=h}}function Vy(n,l,o,d){var h=E.T;E.T=null;var y=X.p;try{X.p=8,Xu(n,l,o,d)}finally{X.p=y,E.T=h}}function Xu(n,l,o,d){if(ai){var h=Qu(d);if(h===null)Lu(n,l,d,oi,o),Lh(n,d);else if(Hy(h,n,l,o,d))d.stopPropagation();else if(Lh(n,d),l&4&&-1<qy.indexOf(n)){for(;h!==null;){var y=$l(h);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var C=at(y.pendingLanes);if(C!==0){var S=y;for(S.pendingLanes|=2,S.entangledLanes|=2;C;){var R=1<<31-K(C);S.entanglements[1]|=R,C&=~R}vn(y),(qe&6)===0&&(Go=wt()+500,wa(0))}}break;case 31:case 13:S=Al(y,2),S!==null&&Pt(S,y,2),Fo(),$u(y,2)}if(y=Qu(d),y===null&&Lu(n,l,d,oi,o),y===h)break;h=y}h!==null&&d.stopPropagation()}else Lu(n,l,d,null,o)}}function Qu(n){return n=Wi(n),Zu(n)}var oi=null;function Zu(n){if(oi=null,n=Kl(n),n!==null){var l=f(n);if(l===null)n=null;else{var o=l.tag;if(o===13){if(n=m(l),n!==null)return n;n=null}else if(o===31){if(n=x(l),n!==null)return n;n=null}else if(o===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;n=null}else l!==n&&(n=null)}}return oi=n,null}function Uh(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Bi()){case Xa:return 2;case Qa:return 8;case Cn:case Fs:return 32;case Za:return 268435456;default:return 32}default:return 32}}var Wu=!1,hl=null,pl=null,gl=null,Ia=new Map,ja=new Map,xl=[],qy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Lh(n,l){switch(n){case"focusin":case"focusout":hl=null;break;case"dragenter":case"dragleave":pl=null;break;case"mouseover":case"mouseout":gl=null;break;case"pointerover":case"pointerout":Ia.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":ja.delete(l.pointerId)}}function Ua(n,l,o,d,h,y){return n===null||n.nativeEvent!==y?(n={blockedOn:l,domEventName:o,eventSystemFlags:d,nativeEvent:y,targetContainers:[h]},l!==null&&(l=$l(l),l!==null&&Ih(l)),n):(n.eventSystemFlags|=d,l=n.targetContainers,h!==null&&l.indexOf(h)===-1&&l.push(h),n)}function Hy(n,l,o,d,h){switch(l){case"focusin":return hl=Ua(hl,n,l,o,d,h),!0;case"dragenter":return pl=Ua(pl,n,l,o,d,h),!0;case"mouseover":return gl=Ua(gl,n,l,o,d,h),!0;case"pointerover":var y=h.pointerId;return Ia.set(y,Ua(Ia.get(y)||null,n,l,o,d,h)),!0;case"gotpointercapture":return y=h.pointerId,ja.set(y,Ua(ja.get(y)||null,n,l,o,d,h)),!0}return!1}function Ph(n){var l=Kl(n.target);if(l!==null){var o=f(l);if(o!==null){if(l=o.tag,l===13){if(l=m(o),l!==null){n.blockedOn=l,Xc(n.priority,function(){jh(o)});return}}else if(l===31){if(l=x(o),l!==null){n.blockedOn=l,Xc(n.priority,function(){jh(o)});return}}else if(l===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ii(n){if(n.blockedOn!==null)return!1;for(var l=n.targetContainers;0<l.length;){var o=Qu(n.nativeEvent);if(o===null){o=n.nativeEvent;var d=new o.constructor(o.type,o);Zi=d,o.target.dispatchEvent(d),Zi=null}else return l=$l(o),l!==null&&Ih(l),n.blockedOn=o,!1;l.shift()}return!0}function Vh(n,l,o){ii(n)&&o.delete(l)}function By(){Wu=!1,hl!==null&&ii(hl)&&(hl=null),pl!==null&&ii(pl)&&(pl=null),gl!==null&&ii(gl)&&(gl=null),Ia.forEach(Vh),ja.forEach(Vh)}function ri(n,l){n.blockedOn===l&&(n.blockedOn=null,Wu||(Wu=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,By)))}var ui=null;function qh(n){ui!==n&&(ui=n,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){ui===n&&(ui=null);for(var l=0;l<n.length;l+=3){var o=n[l],d=n[l+1],h=n[l+2];if(typeof d!="function"){if(Zu(d||o)===null)continue;break}var y=$l(o);y!==null&&(n.splice(l,3),l-=3,Qr(y,{pending:!0,data:h,method:o.method,action:d},d,h))}}))}function _s(n){function l(R){return ri(R,n)}hl!==null&&ri(hl,n),pl!==null&&ri(pl,n),gl!==null&&ri(gl,n),Ia.forEach(l),ja.forEach(l);for(var o=0;o<xl.length;o++){var d=xl[o];d.blockedOn===n&&(d.blockedOn=null)}for(;0<xl.length&&(o=xl[0],o.blockedOn===null);)Ph(o),o.blockedOn===null&&xl.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(d=0;d<o.length;d+=3){var h=o[d],y=o[d+1],C=h[Rt]||null;if(typeof y=="function")C||qh(o);else if(C){var S=null;if(y&&y.hasAttribute("formAction")){if(h=y,C=y[Rt]||null)S=C.formAction;else if(Zu(h)!==null)continue}else S=C.action;typeof S=="function"?o[d+1]=S:(o.splice(d,3),d-=3),qh(o)}}}function Hh(){function n(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(C){return h=C})},focusReset:"manual",scroll:"manual"})}function l(){h!==null&&(h(),h=null),d||setTimeout(o,20)}function o(){if(!d&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,h=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(o,100),function(){d=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),h!==null&&(h(),h=null)}}}function ec(n){this._internalRoot=n}ci.prototype.render=ec.prototype.render=function(n){var l=this._internalRoot;if(l===null)throw Error(a(409));var o=l.current,d=Ot();Rh(o,d,n,l,null,null)},ci.prototype.unmount=ec.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var l=n.containerInfo;Rh(n.current,2,null,n,null,null),Fo(),l[Yl]=null}};function ci(n){this._internalRoot=n}ci.prototype.unstable_scheduleHydration=function(n){if(n){var l=$c();n={blockedOn:null,target:n,priority:l};for(var o=0;o<xl.length&&l!==0&&l<xl[o].priority;o++);xl.splice(o,0,n),o===0&&Ph(n)}};var Bh=e.version;if(Bh!=="19.2.0")throw Error(a(527,Bh,"19.2.0"));X.findDOMNode=function(n){var l=n._reactInternals;if(l===void 0)throw typeof n.render=="function"?Error(a(188)):(n=Object.keys(n).join(","),Error(a(268,n)));return n=p(l),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var Gy={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:E,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var di=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!di.isDisabled&&di.supportsFiber)try{Tl=di.inject(Gy),At=di}catch{}}return Pa.createRoot=function(n,l){if(!c(n))throw Error(a(299));var o=!1,d="",h=Kf,y=$f,C=Xf;return l!=null&&(l.unstable_strictMode===!0&&(o=!0),l.identifierPrefix!==void 0&&(d=l.identifierPrefix),l.onUncaughtError!==void 0&&(h=l.onUncaughtError),l.onCaughtError!==void 0&&(y=l.onCaughtError),l.onRecoverableError!==void 0&&(C=l.onRecoverableError)),l=Ah(n,1,!1,null,null,o,d,null,h,y,C,Hh),n[Yl]=l.current,Uu(n),new ec(l)},Pa.hydrateRoot=function(n,l,o){if(!c(n))throw Error(a(299));var d=!1,h="",y=Kf,C=$f,S=Xf,R=null;return o!=null&&(o.unstable_strictMode===!0&&(d=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(C=o.onCaughtError),o.onRecoverableError!==void 0&&(S=o.onRecoverableError),o.formState!==void 0&&(R=o.formState)),l=Ah(n,1,!0,l,o??null,d,h,R,y,C,S,Hh),l.context=_h(null),o=l.current,d=Ot(),d=Fi(d),h=nl(d),h.callback=null,ll(o,h,d),o=d,l.current.lanes=o,Js(l,o),vn(l),n[Yl]=l.current,Uu(n),new ci(l)},Pa.version="19.2.0",Pa}var Qh;function Zy(){if(Qh)return lc.exports;Qh=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),lc.exports=Qy(),lc.exports}var Wy=Zy();const ev=_p(Wy);/**
 * react-router v7.9.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Zh="popstate";function tv(t={}){function e(c,f){let{pathname:m="/",search:x="",hash:g=""}=zl(c.location.hash.substring(1));return!m.startsWith("/")&&!m.startsWith(".")&&(m="/"+m),hc("",{pathname:m,search:x,hash:g},f.state&&f.state.usr||null,f.state&&f.state.key||"default")}function s(c,f){let m=c.document.querySelector("base"),x="";if(m&&m.getAttribute("href")){let g=c.location.href,p=g.indexOf("#");x=p===-1?g:g.slice(0,p)}return x+"#"+(typeof f=="string"?f:Oa(f))}function a(c,f){an(c.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(f)})`)}return lv(e,s,a,t)}function tt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function an(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function nv(){return Math.random().toString(36).substring(2,10)}function Wh(t,e){return{usr:t.state,key:t.key,idx:e}}function hc(t,e,s=null,a){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?zl(e):e,state:s,key:e&&e.key||a||nv()}}function Oa({pathname:t="/",search:e="",hash:s=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function zl(t){let e={};if(t){let s=t.indexOf("#");s>=0&&(e.hash=t.substring(s),t=t.substring(0,s));let a=t.indexOf("?");a>=0&&(e.search=t.substring(a),t=t.substring(0,a)),t&&(e.pathname=t)}return e}function lv(t,e,s,a={}){let{window:c=document.defaultView,v5Compat:f=!1}=a,m=c.history,x="POP",g=null,p=v();p==null&&(p=0,m.replaceState({...m.state,idx:p},""));function v(){return(m.state||{idx:null}).idx}function b(){x="POP";let _=v(),j=_==null?null:_-p;p=_,g&&g({action:x,location:A.location,delta:j})}function k(_,j){x="PUSH";let D=hc(A.location,_,j);s&&s(D,_),p=v()+1;let I=Wh(D,p),q=A.createHref(D);try{m.pushState(I,"",q)}catch(ee){if(ee instanceof DOMException&&ee.name==="DataCloneError")throw ee;c.location.assign(q)}f&&g&&g({action:x,location:A.location,delta:1})}function w(_,j){x="REPLACE";let D=hc(A.location,_,j);s&&s(D,_),p=v();let I=Wh(D,p),q=A.createHref(D);m.replaceState(I,"",q),f&&g&&g({action:x,location:A.location,delta:0})}function M(_){return sv(_)}let A={get action(){return x},get location(){return t(c,m)},listen(_){if(g)throw new Error("A history only accepts one active listener");return c.addEventListener(Zh,b),g=_,()=>{c.removeEventListener(Zh,b),g=null}},createHref(_){return e(c,_)},createURL:M,encodeLocation(_){let j=M(_);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:k,replace:w,go(_){return m.go(_)}};return A}function sv(t,e=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),tt(s,"No window.location.(origin|href) available to create URL");let a=typeof t=="string"?t:Oa(t);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=s+a),new URL(a,s)}function Rp(t,e,s="/"){return av(t,e,s,!1)}function av(t,e,s,a){let c=typeof e=="string"?zl(e):e,f=Fn(c.pathname||"/",s);if(f==null)return null;let m=Dp(t);ov(m);let x=null;for(let g=0;x==null&&g<m.length;++g){let p=xv(f);x=pv(m[g],p,a)}return x}function Dp(t,e=[],s=[],a="",c=!1){let f=(m,x,g=c,p)=>{let v={relativePath:p===void 0?m.path||"":p,caseSensitive:m.caseSensitive===!0,childrenIndex:x,route:m};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(a)&&g)return;tt(v.relativePath.startsWith(a),`Absolute route path "${v.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(a.length)}let b=zn([a,v.relativePath]),k=s.concat(v);m.children&&m.children.length>0&&(tt(m.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),Dp(m.children,e,k,b,g)),!(m.path==null&&!m.index)&&e.push({path:b,score:mv(b,m.index),routesMeta:k})};return t.forEach((m,x)=>{var g;if(m.path===""||!((g=m.path)!=null&&g.includes("?")))f(m,x);else for(let p of Ip(m.path))f(m,x,!0,p)}),e}function Ip(t){let e=t.split("/");if(e.length===0)return[];let[s,...a]=e,c=s.endsWith("?"),f=s.replace(/\?$/,"");if(a.length===0)return c?[f,""]:[f];let m=Ip(a.join("/")),x=[];return x.push(...m.map(g=>g===""?f:[f,g].join("/"))),c&&x.push(...m),x.map(g=>t.startsWith("/")&&g===""?"/":g)}function ov(t){t.sort((e,s)=>e.score!==s.score?s.score-e.score:hv(e.routesMeta.map(a=>a.childrenIndex),s.routesMeta.map(a=>a.childrenIndex)))}var iv=/^:[\w-]+$/,rv=3,uv=2,cv=1,dv=10,fv=-2,e0=t=>t==="*";function mv(t,e){let s=t.split("/"),a=s.length;return s.some(e0)&&(a+=fv),e&&(a+=uv),s.filter(c=>!e0(c)).reduce((c,f)=>c+(iv.test(f)?rv:f===""?cv:dv),a)}function hv(t,e){return t.length===e.length&&t.slice(0,-1).every((a,c)=>a===e[c])?t[t.length-1]-e[e.length-1]:0}function pv(t,e,s=!1){let{routesMeta:a}=t,c={},f="/",m=[];for(let x=0;x<a.length;++x){let g=a[x],p=x===a.length-1,v=f==="/"?e:e.slice(f.length)||"/",b=Ei({path:g.relativePath,caseSensitive:g.caseSensitive,end:p},v),k=g.route;if(!b&&p&&s&&!a[a.length-1].route.index&&(b=Ei({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},v)),!b)return null;Object.assign(c,b.params),m.push({params:c,pathname:zn([f,b.pathname]),pathnameBase:kv(zn([f,b.pathnameBase])),route:k}),b.pathnameBase!=="/"&&(f=zn([f,b.pathnameBase]))}return m}function Ei(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,a]=gv(t.path,t.caseSensitive,t.end),c=e.match(s);if(!c)return null;let f=c[0],m=f.replace(/(.)\/+$/,"$1"),x=c.slice(1);return{params:a.reduce((p,{paramName:v,isOptional:b},k)=>{if(v==="*"){let M=x[k]||"";m=f.slice(0,f.length-M.length).replace(/(.)\/+$/,"$1")}const w=x[k];return b&&!w?p[v]=void 0:p[v]=(w||"").replace(/%2F/g,"/"),p},{}),pathname:f,pathnameBase:m,pattern:t}}function gv(t,e=!1,s=!0){an(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let a=[],c="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(m,x,g)=>(a.push({paramName:x,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(a.push({paramName:"*"}),c+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?c+="\\/*$":t!==""&&t!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,e?void 0:"i"),a]}function xv(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return an(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Fn(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,a=t.charAt(s);return a&&a!=="/"?null:t.slice(s)||"/"}function yv(t,e="/"){let{pathname:s,search:a="",hash:c=""}=typeof t=="string"?zl(t):t;return{pathname:s?s.startsWith("/")?s:vv(s,e):e,search:Cv(a),hash:Tv(c)}}function vv(t,e){let s=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(c=>{c===".."?s.length>1&&s.pop():c!=="."&&s.push(c)}),s.length>1?s.join("/"):"/"}function ic(t,e,s,a){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function bv(t){return t.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function Mc(t){let e=bv(t);return e.map((s,a)=>a===e.length-1?s.pathname:s.pathnameBase)}function Ac(t,e,s,a=!1){let c;typeof t=="string"?c=zl(t):(c={...t},tt(!c.pathname||!c.pathname.includes("?"),ic("?","pathname","search",c)),tt(!c.pathname||!c.pathname.includes("#"),ic("#","pathname","hash",c)),tt(!c.search||!c.search.includes("#"),ic("#","search","hash",c)));let f=t===""||c.pathname==="",m=f?"/":c.pathname,x;if(m==null)x=s;else{let b=e.length-1;if(!a&&m.startsWith("..")){let k=m.split("/");for(;k[0]==="..";)k.shift(),b-=1;c.pathname=k.join("/")}x=b>=0?e[b]:"/"}let g=yv(c,x),p=m&&m!=="/"&&m.endsWith("/"),v=(f||m===".")&&s.endsWith("/");return!g.pathname.endsWith("/")&&(p||v)&&(g.pathname+="/"),g}var zn=t=>t.join("/").replace(/\/\/+/g,"/"),kv=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Cv=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Tv=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Nv(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var jp=["POST","PUT","PATCH","DELETE"];new Set(jp);var Sv=["GET",...jp];new Set(Sv);var Vs=N.createContext(null);Vs.displayName="DataRouter";var ji=N.createContext(null);ji.displayName="DataRouterState";N.createContext(!1);var Up=N.createContext({isTransitioning:!1});Up.displayName="ViewTransition";var wv=N.createContext(new Map);wv.displayName="Fetchers";var Ev=N.createContext(null);Ev.displayName="Await";var hn=N.createContext(null);hn.displayName="Navigation";var Ja=N.createContext(null);Ja.displayName="Location";var kn=N.createContext({outlet:null,matches:[],isDataRoute:!1});kn.displayName="Route";var _c=N.createContext(null);_c.displayName="RouteError";function Mv(t,{relative:e}={}){tt(qs(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:a}=N.useContext(hn),{hash:c,pathname:f,search:m}=Ya(t,{relative:e}),x=f;return s!=="/"&&(x=f==="/"?s:zn([s,f])),a.createHref({pathname:x,search:m,hash:c})}function qs(){return N.useContext(Ja)!=null}function Jn(){return tt(qs(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(Ja).location}var Lp="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Pp(t){N.useContext(hn).static||N.useLayoutEffect(t)}function Rc(){let{isDataRoute:t}=N.useContext(kn);return t?Bv():Av()}function Av(){tt(qs(),"useNavigate() may be used only in the context of a <Router> component.");let t=N.useContext(Vs),{basename:e,navigator:s}=N.useContext(hn),{matches:a}=N.useContext(kn),{pathname:c}=Jn(),f=JSON.stringify(Mc(a)),m=N.useRef(!1);return Pp(()=>{m.current=!0}),N.useCallback((g,p={})=>{if(an(m.current,Lp),!m.current)return;if(typeof g=="number"){s.go(g);return}let v=Ac(g,JSON.parse(f),c,p.relative==="path");t==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:zn([e,v.pathname])),(p.replace?s.replace:s.push)(v,p.state,p)},[e,s,f,c,t])}N.createContext(null);function Ya(t,{relative:e}={}){let{matches:s}=N.useContext(kn),{pathname:a}=Jn(),c=JSON.stringify(Mc(s));return N.useMemo(()=>Ac(t,JSON.parse(c),a,e==="path"),[t,c,a,e])}function _v(t,e){return Vp(t,e)}function Vp(t,e,s,a,c){var D;tt(qs(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:f}=N.useContext(hn),{matches:m}=N.useContext(kn),x=m[m.length-1],g=x?x.params:{},p=x?x.pathname:"/",v=x?x.pathnameBase:"/",b=x&&x.route;{let I=b&&b.path||"";qp(p,!b||I.endsWith("*")||I.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${I}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${I}"> to <Route path="${I==="/"?"*":`${I}/*`}">.`)}let k=Jn(),w;if(e){let I=typeof e=="string"?zl(e):e;tt(v==="/"||((D=I.pathname)==null?void 0:D.startsWith(v)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${I.pathname}" was given in the \`location\` prop.`),w=I}else w=k;let M=w.pathname||"/",A=M;if(v!=="/"){let I=v.replace(/^\//,"").split("/");A="/"+M.replace(/^\//,"").split("/").slice(I.length).join("/")}let _=Rp(t,{pathname:A});an(b||_!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),an(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=Uv(_&&_.map(I=>Object.assign({},I,{params:Object.assign({},g,I.params),pathname:zn([v,f.encodeLocation?f.encodeLocation(I.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?v:zn([v,f.encodeLocation?f.encodeLocation(I.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:I.pathnameBase])})),m,s,a,c);return e&&j?N.createElement(Ja.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},j):j}function Rv(){let t=Hv(),e=Nv(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,a="rgba(200,200,200, 0.5)",c={padding:"0.5rem",backgroundColor:a},f={padding:"2px 4px",backgroundColor:a},m=null;return console.error("Error handled by React Router default ErrorBoundary:",t),m=N.createElement(N.Fragment,null,N.createElement("p",null,"💿 Hey developer 👋"),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:f},"ErrorBoundary")," or"," ",N.createElement("code",{style:f},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),s?N.createElement("pre",{style:c},s):null,m)}var Dv=N.createElement(Rv,null),Iv=class extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?N.createElement(kn.Provider,{value:this.props.routeContext},N.createElement(_c.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function jv({routeContext:t,match:e,children:s}){let a=N.useContext(Vs);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),N.createElement(kn.Provider,{value:t},s)}function Uv(t,e=[],s=null,a=null,c=null){if(t==null){if(!s)return null;if(s.errors)t=s.matches;else if(e.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let f=t,m=s==null?void 0:s.errors;if(m!=null){let p=f.findIndex(v=>v.route.id&&(m==null?void 0:m[v.route.id])!==void 0);tt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(m).join(",")}`),f=f.slice(0,Math.min(f.length,p+1))}let x=!1,g=-1;if(s)for(let p=0;p<f.length;p++){let v=f[p];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(g=p),v.route.id){let{loaderData:b,errors:k}=s,w=v.route.loader&&!b.hasOwnProperty(v.route.id)&&(!k||k[v.route.id]===void 0);if(v.route.lazy||w){x=!0,g>=0?f=f.slice(0,g+1):f=[f[0]];break}}}return f.reduceRight((p,v,b)=>{let k,w=!1,M=null,A=null;s&&(k=m&&v.route.id?m[v.route.id]:void 0,M=v.route.errorElement||Dv,x&&(g<0&&b===0?(qp("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,A=null):g===b&&(w=!0,A=v.route.hydrateFallbackElement||null)));let _=e.concat(f.slice(0,b+1)),j=()=>{let D;return k?D=M:w?D=A:v.route.Component?D=N.createElement(v.route.Component,null):v.route.element?D=v.route.element:D=p,N.createElement(jv,{match:v,routeContext:{outlet:p,matches:_,isDataRoute:s!=null},children:D})};return s&&(v.route.ErrorBoundary||v.route.errorElement||b===0)?N.createElement(Iv,{location:s.location,revalidation:s.revalidation,component:M,error:k,children:j(),routeContext:{outlet:null,matches:_,isDataRoute:!0},unstable_onError:a}):j()},null)}function Dc(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Lv(t){let e=N.useContext(Vs);return tt(e,Dc(t)),e}function Pv(t){let e=N.useContext(ji);return tt(e,Dc(t)),e}function Vv(t){let e=N.useContext(kn);return tt(e,Dc(t)),e}function Ic(t){let e=Vv(t),s=e.matches[e.matches.length-1];return tt(s.route.id,`${t} can only be used on routes that contain a unique "id"`),s.route.id}function qv(){return Ic("useRouteId")}function Hv(){var a;let t=N.useContext(_c),e=Pv("useRouteError"),s=Ic("useRouteError");return t!==void 0?t:(a=e.errors)==null?void 0:a[s]}function Bv(){let{router:t}=Lv("useNavigate"),e=Ic("useNavigate"),s=N.useRef(!1);return Pp(()=>{s.current=!0}),N.useCallback(async(c,f={})=>{an(s.current,Lp),s.current&&(typeof c=="number"?t.navigate(c):await t.navigate(c,{fromRouteId:e,...f}))},[t,e])}var t0={};function qp(t,e,s){!e&&!t0[t]&&(t0[t]=!0,an(!1,s))}N.memo(Gv);function Gv({routes:t,future:e,state:s,unstable_onError:a}){return Vp(t,void 0,s,a,e)}function zv({to:t,replace:e,state:s,relative:a}){tt(qs(),"<Navigate> may be used only in the context of a <Router> component.");let{static:c}=N.useContext(hn);an(!c,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:f}=N.useContext(kn),{pathname:m}=Jn(),x=Rc(),g=Ac(t,Mc(f),m,a==="path"),p=JSON.stringify(g);return N.useEffect(()=>{x(JSON.parse(p),{replace:e,state:s,relative:a})},[x,p,a,e,s]),null}function Jt(t){tt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Fv({basename:t="/",children:e=null,location:s,navigationType:a="POP",navigator:c,static:f=!1}){tt(!qs(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let m=t.replace(/^\/*/,"/"),x=N.useMemo(()=>({basename:m,navigator:c,static:f,future:{}}),[m,c,f]);typeof s=="string"&&(s=zl(s));let{pathname:g="/",search:p="",hash:v="",state:b=null,key:k="default"}=s,w=N.useMemo(()=>{let M=Fn(g,m);return M==null?null:{location:{pathname:M,search:p,hash:v,state:b,key:k},navigationType:a}},[m,g,p,v,b,k,a]);return an(w!=null,`<Router basename="${m}"> is not able to match the URL "${g}${p}${v}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:N.createElement(hn.Provider,{value:x},N.createElement(Ja.Provider,{children:e,value:w}))}function Ov({children:t,location:e}){return _v(pc(t),e)}function pc(t,e=[]){let s=[];return N.Children.forEach(t,(a,c)=>{if(!N.isValidElement(a))return;let f=[...e,c];if(a.type===N.Fragment){s.push.apply(s,pc(a.props.children,f));return}tt(a.type===Jt,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),tt(!a.props.index||!a.props.children,"An index route cannot have child routes.");let m={id:a.props.id||f.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,middleware:a.props.middleware,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(m.children=pc(a.props.children,f)),s.push(m)}),s}var Ti="get",Ni="application/x-www-form-urlencoded";function Ui(t){return t!=null&&typeof t.tagName=="string"}function Jv(t){return Ui(t)&&t.tagName.toLowerCase()==="button"}function Yv(t){return Ui(t)&&t.tagName.toLowerCase()==="form"}function Kv(t){return Ui(t)&&t.tagName.toLowerCase()==="input"}function $v(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Xv(t,e){return t.button===0&&(!e||e==="_self")&&!$v(t)}var fi=null;function Qv(){if(fi===null)try{new FormData(document.createElement("form"),0),fi=!1}catch{fi=!0}return fi}var Zv=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function rc(t){return t!=null&&!Zv.has(t)?(an(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ni}"`),null):t}function Wv(t,e){let s,a,c,f,m;if(Yv(t)){let x=t.getAttribute("action");a=x?Fn(x,e):null,s=t.getAttribute("method")||Ti,c=rc(t.getAttribute("enctype"))||Ni,f=new FormData(t)}else if(Jv(t)||Kv(t)&&(t.type==="submit"||t.type==="image")){let x=t.form;if(x==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=t.getAttribute("formaction")||x.getAttribute("action");if(a=g?Fn(g,e):null,s=t.getAttribute("formmethod")||x.getAttribute("method")||Ti,c=rc(t.getAttribute("formenctype"))||rc(x.getAttribute("enctype"))||Ni,f=new FormData(x,t),!Qv()){let{name:p,type:v,value:b}=t;if(v==="image"){let k=p?`${p}.`:"";f.append(`${k}x`,"0"),f.append(`${k}y`,"0")}else p&&f.append(p,b)}}else{if(Ui(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=Ti,a=null,c=Ni,m=t}return f&&c==="text/plain"&&(m=f,f=void 0),{action:a,method:s.toLowerCase(),encType:c,formData:f,body:m}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function jc(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function eb(t,e,s){let a=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return a.pathname==="/"?a.pathname=`_root.${s}`:e&&Fn(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.${s}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${s}`,a}async function tb(t,e){if(t.id in e)return e[t.id];try{let s=await import(t.module);return e[t.id]=s,s}catch(s){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function nb(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function lb(t,e,s){let a=await Promise.all(t.map(async c=>{let f=e.routes[c.route.id];if(f){let m=await tb(f,s);return m.links?m.links():[]}return[]}));return ib(a.flat(1).filter(nb).filter(c=>c.rel==="stylesheet"||c.rel==="preload").map(c=>c.rel==="stylesheet"?{...c,rel:"prefetch",as:"style"}:{...c,rel:"prefetch"}))}function n0(t,e,s,a,c,f){let m=(g,p)=>s[p]?g.route.id!==s[p].route.id:!0,x=(g,p)=>{var v;return s[p].pathname!==g.pathname||((v=s[p].route.path)==null?void 0:v.endsWith("*"))&&s[p].params["*"]!==g.params["*"]};return f==="assets"?e.filter((g,p)=>m(g,p)||x(g,p)):f==="data"?e.filter((g,p)=>{var b;let v=a.routes[g.route.id];if(!v||!v.hasLoader)return!1;if(m(g,p)||x(g,p))return!0;if(g.route.shouldRevalidate){let k=g.route.shouldRevalidate({currentUrl:new URL(c.pathname+c.search+c.hash,window.origin),currentParams:((b=s[0])==null?void 0:b.params)||{},nextUrl:new URL(t,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof k=="boolean")return k}return!0}):[]}function sb(t,e,{includeHydrateFallback:s}={}){return ab(t.map(a=>{let c=e.routes[a.route.id];if(!c)return[];let f=[c.module];return c.clientActionModule&&(f=f.concat(c.clientActionModule)),c.clientLoaderModule&&(f=f.concat(c.clientLoaderModule)),s&&c.hydrateFallbackModule&&(f=f.concat(c.hydrateFallbackModule)),c.imports&&(f=f.concat(c.imports)),f}).flat(1))}function ab(t){return[...new Set(t)]}function ob(t){let e={},s=Object.keys(t).sort();for(let a of s)e[a]=t[a];return e}function ib(t,e){let s=new Set;return new Set(e),t.reduce((a,c)=>{let f=JSON.stringify(ob(c));return s.has(f)||(s.add(f),a.push({key:f,link:c})),a},[])}function Hp(){let t=N.useContext(Vs);return jc(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function rb(){let t=N.useContext(ji);return jc(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Uc=N.createContext(void 0);Uc.displayName="FrameworkContext";function Bp(){let t=N.useContext(Uc);return jc(t,"You must render this element inside a <HydratedRouter> element"),t}function ub(t,e){let s=N.useContext(Uc),[a,c]=N.useState(!1),[f,m]=N.useState(!1),{onFocus:x,onBlur:g,onMouseEnter:p,onMouseLeave:v,onTouchStart:b}=e,k=N.useRef(null);N.useEffect(()=>{if(t==="render"&&m(!0),t==="viewport"){let A=j=>{j.forEach(D=>{m(D.isIntersecting)})},_=new IntersectionObserver(A,{threshold:.5});return k.current&&_.observe(k.current),()=>{_.disconnect()}}},[t]),N.useEffect(()=>{if(a){let A=setTimeout(()=>{m(!0)},100);return()=>{clearTimeout(A)}}},[a]);let w=()=>{c(!0)},M=()=>{c(!1),m(!1)};return s?t!=="intent"?[f,k,{}]:[f,k,{onFocus:Va(x,w),onBlur:Va(g,M),onMouseEnter:Va(p,w),onMouseLeave:Va(v,M),onTouchStart:Va(b,w)}]:[!1,k,{}]}function Va(t,e){return s=>{t&&t(s),s.defaultPrevented||e(s)}}function cb({page:t,...e}){let{router:s}=Hp(),a=N.useMemo(()=>Rp(s.routes,t,s.basename),[s.routes,t,s.basename]);return a?N.createElement(fb,{page:t,matches:a,...e}):null}function db(t){let{manifest:e,routeModules:s}=Bp(),[a,c]=N.useState([]);return N.useEffect(()=>{let f=!1;return lb(t,e,s).then(m=>{f||c(m)}),()=>{f=!0}},[t,e,s]),a}function fb({page:t,matches:e,...s}){let a=Jn(),{manifest:c,routeModules:f}=Bp(),{basename:m}=Hp(),{loaderData:x,matches:g}=rb(),p=N.useMemo(()=>n0(t,e,g,c,a,"data"),[t,e,g,c,a]),v=N.useMemo(()=>n0(t,e,g,c,a,"assets"),[t,e,g,c,a]),b=N.useMemo(()=>{if(t===a.pathname+a.search+a.hash)return[];let M=new Set,A=!1;if(e.forEach(j=>{var I;let D=c.routes[j.route.id];!D||!D.hasLoader||(!p.some(q=>q.route.id===j.route.id)&&j.route.id in x&&((I=f[j.route.id])!=null&&I.shouldRevalidate)||D.hasClientLoader?A=!0:M.add(j.route.id))}),M.size===0)return[];let _=eb(t,m,"data");return A&&M.size>0&&_.searchParams.set("_routes",e.filter(j=>M.has(j.route.id)).map(j=>j.route.id).join(",")),[_.pathname+_.search]},[m,x,a,c,p,e,t,f]),k=N.useMemo(()=>sb(v,c),[v,c]),w=db(v);return N.createElement(N.Fragment,null,b.map(M=>N.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...s})),k.map(M=>N.createElement("link",{key:M,rel:"modulepreload",href:M,...s})),w.map(({key:M,link:A})=>N.createElement("link",{key:M,nonce:s.nonce,...A})))}function mb(...t){return e=>{t.forEach(s=>{typeof s=="function"?s(e):s!=null&&(s.current=e)})}}var Gp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Gp&&(window.__reactRouterVersion="7.9.3")}catch{}function hb({basename:t,children:e,window:s}){let a=N.useRef();a.current==null&&(a.current=tv({window:s,v5Compat:!0}));let c=a.current,[f,m]=N.useState({action:c.action,location:c.location}),x=N.useCallback(g=>{N.startTransition(()=>m(g))},[m]);return N.useLayoutEffect(()=>c.listen(x),[c,x]),N.createElement(Fv,{basename:t,children:e,location:f.location,navigationType:f.action,navigator:c})}var zp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Li=N.forwardRef(function({onClick:e,discover:s="render",prefetch:a="none",relative:c,reloadDocument:f,replace:m,state:x,target:g,to:p,preventScrollReset:v,viewTransition:b,...k},w){let{basename:M}=N.useContext(hn),A=typeof p=="string"&&zp.test(p),_,j=!1;if(typeof p=="string"&&A&&(_=p,Gp))try{let $=new URL(window.location.href),Z=p.startsWith("//")?new URL($.protocol+p):new URL(p),Q=Fn(Z.pathname,M);Z.origin===$.origin&&Q!=null?p=Q+Z.search+Z.hash:j=!0}catch{an(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let D=Mv(p,{relative:c}),[I,q,ee]=ub(a,k),se=xb(p,{replace:m,state:x,target:g,preventScrollReset:v,relative:c,viewTransition:b});function F($){e&&e($),$.defaultPrevented||se($)}let oe=N.createElement("a",{...k,...ee,href:_||D,onClick:j||f?e:F,ref:mb(w,q),target:g,"data-discover":!A&&s==="render"?"true":void 0});return I&&!A?N.createElement(N.Fragment,null,oe,N.createElement(cb,{page:D})):oe});Li.displayName="Link";var Fp=N.forwardRef(function({"aria-current":e="page",caseSensitive:s=!1,className:a="",end:c=!1,style:f,to:m,viewTransition:x,children:g,...p},v){let b=Ya(m,{relative:p.relative}),k=Jn(),w=N.useContext(ji),{navigator:M,basename:A}=N.useContext(hn),_=w!=null&&Cb(b)&&x===!0,j=M.encodeLocation?M.encodeLocation(b).pathname:b.pathname,D=k.pathname,I=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;s||(D=D.toLowerCase(),I=I?I.toLowerCase():null,j=j.toLowerCase()),I&&A&&(I=Fn(I,A)||I);const q=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let ee=D===j||!c&&D.startsWith(j)&&D.charAt(q)==="/",se=I!=null&&(I===j||!c&&I.startsWith(j)&&I.charAt(j.length)==="/"),F={isActive:ee,isPending:se,isTransitioning:_},oe=ee?e:void 0,$;typeof a=="function"?$=a(F):$=[a,ee?"active":null,se?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let Z=typeof f=="function"?f(F):f;return N.createElement(Li,{...p,"aria-current":oe,className:$,ref:v,style:Z,to:m,viewTransition:x},typeof g=="function"?g(F):g)});Fp.displayName="NavLink";var pb=N.forwardRef(({discover:t="render",fetcherKey:e,navigate:s,reloadDocument:a,replace:c,state:f,method:m=Ti,action:x,onSubmit:g,relative:p,preventScrollReset:v,viewTransition:b,...k},w)=>{let M=bb(),A=kb(x,{relative:p}),_=m.toLowerCase()==="get"?"get":"post",j=typeof x=="string"&&zp.test(x),D=I=>{if(g&&g(I),I.defaultPrevented)return;I.preventDefault();let q=I.nativeEvent.submitter,ee=(q==null?void 0:q.getAttribute("formmethod"))||m;M(q||I.currentTarget,{fetcherKey:e,method:ee,navigate:s,replace:c,state:f,relative:p,preventScrollReset:v,viewTransition:b})};return N.createElement("form",{ref:w,method:_,action:A,onSubmit:a?g:D,...k,"data-discover":!j&&t==="render"?"true":void 0})});pb.displayName="Form";function gb(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Op(t){let e=N.useContext(Vs);return tt(e,gb(t)),e}function xb(t,{target:e,replace:s,state:a,preventScrollReset:c,relative:f,viewTransition:m}={}){let x=Rc(),g=Jn(),p=Ya(t,{relative:f});return N.useCallback(v=>{if(Xv(v,e)){v.preventDefault();let b=s!==void 0?s:Oa(g)===Oa(p);x(t,{replace:b,state:a,preventScrollReset:c,relative:f,viewTransition:m})}},[g,x,p,s,a,e,t,c,f,m])}var yb=0,vb=()=>`__${String(++yb)}__`;function bb(){let{router:t}=Op("useSubmit"),{basename:e}=N.useContext(hn),s=qv();return N.useCallback(async(a,c={})=>{let{action:f,method:m,encType:x,formData:g,body:p}=Wv(a,e);if(c.navigate===!1){let v=c.fetcherKey||vb();await t.fetch(v,s,c.action||f,{preventScrollReset:c.preventScrollReset,formData:g,body:p,formMethod:c.method||m,formEncType:c.encType||x,flushSync:c.flushSync})}else await t.navigate(c.action||f,{preventScrollReset:c.preventScrollReset,formData:g,body:p,formMethod:c.method||m,formEncType:c.encType||x,replace:c.replace,state:c.state,fromRouteId:s,flushSync:c.flushSync,viewTransition:c.viewTransition})},[t,e,s])}function kb(t,{relative:e}={}){let{basename:s}=N.useContext(hn),a=N.useContext(kn);tt(a,"useFormAction must be used inside a RouteContext");let[c]=a.matches.slice(-1),f={...Ya(t||".",{relative:e})},m=Jn();if(t==null){f.search=m.search;let x=new URLSearchParams(f.search),g=x.getAll("index");if(g.some(v=>v==="")){x.delete("index"),g.filter(b=>b).forEach(b=>x.append("index",b));let v=x.toString();f.search=v?`?${v}`:""}}return(!t||t===".")&&c.route.index&&(f.search=f.search?f.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(f.pathname=f.pathname==="/"?s:zn([s,f.pathname])),Oa(f)}function Cb(t,{relative:e}={}){let s=N.useContext(Up);tt(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=Op("useViewTransitionState"),c=Ya(t,{relative:e});if(!s.isTransitioning)return!1;let f=Fn(s.currentLocation.pathname,a)||s.currentLocation.pathname,m=Fn(s.nextLocation.pathname,a)||s.nextLocation.pathname;return Ei(c.pathname,m)!=null||Ei(c.pathname,f)!=null}const Tb=t=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...t,children:[i.jsx("title",{children:"Bảng điều khiển"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M3 14h18m-9-4v8m-7 0h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})]}),Ga=t=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...t,children:[i.jsx("title",{children:"Quản lý Dịch vụ"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),ln=t=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...t,children:[i.jsx("title",{children:"Quản lý Kho"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-14L4 7m0 10l8 4m-8-4v-10"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10l8 4 8-4V7L12 3 4 7z"})]}),Mi=t=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...t,children:[i.jsx("title",{children:"Quản lý Khách hàng"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm6-11a4 4 0 11-8 0 4 4 0 018 0z"})]}),gc=t=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...t,children:[i.jsx("title",{children:"Trợ lý AI"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.293 2.293a1 1 0 010 1.414L11.414 15.5a1 1 0 01-1.414 0L7.707 13.207a1 1 0 010-1.414L10 9.5M15 17l2.293 2.293a1 1 0 010 1.414L15 23.5a1 1 0 01-1.414 0l-2.293-2.293a1 1 0 010-1.414L13.5 17"})]}),Nb=t=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...t,children:[i.jsx("title",{children:"Lịch sử Xuất/Nhập Kho"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16l-4-4m0 0l4-4m-4 4h18m-7 8l4-4m0 0l-4-4m4 4H3"})]}),Ps=t=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...t,children:[i.jsx("title",{children:"Bán hàng"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})]}),yt=t=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...t,children:[i.jsx("title",{children:"Thêm mới"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})]}),Sb=t=>i.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",...t,children:[i.jsx("title",{children:"Đang tải..."}),i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),bl=t=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[i.jsx("title",{children:"Chỉnh sửa / Xử lý"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})]}),fn=t=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[i.jsx("title",{children:"Xóa"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})]}),wb=t=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[i.jsx("title",{children:"Tùy chọn khác"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 12.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 18.75a.75.75 0 110-1.5.75.75 0 010 1.5z"})]}),Eb=t=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[i.jsx("title",{children:"Sắp xếp"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})]}),l0=t=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[i.jsx("title",{children:"Tài liệu / Biên nhận"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})]}),Jp=t=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[i.jsx("title",{children:"Doanh thu"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18.75a60.07 60.07 0 0115.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 013 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 00-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 01-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 003 15h-.75M15 10.5a3 3 0 11-6 0 3 3 0 016 0zm3 0h.008v.008H18V10.5zm-12 0h.008v.008H6V10.5z"})]}),Mb=t=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[i.jsx("title",{children:"Quản lý Thu Chi"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21v-8.25M15.75 21v-8.25M8.25 21v-8.25M3 9l9-6 9 6m-1.5 12V10.332A48.36 48.36 0 0 0 12 9.75c-2.551 0-5.056.2-7.5.582V21M3 21h18M12 6.75h.008v.008H12V6.75Z"})]}),Yp=t=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[i.jsx("title",{children:"Sử dụng Camera"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.776 48.776 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]}),Kp=t=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[i.jsx("title",{children:"Tải lên"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 16.5V9.75m0 0l-3.75 3.75M12 9.75l3.75 3.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),Lc=t=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[i.jsx("title",{children:"Mở rộng / Thu gọn"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})]}),Pi=t=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...t,children:[i.jsx("title",{children:"Xuất Kho / Trừ"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 12H6"})]}),Ai=t=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[i.jsx("title",{children:"In hóa đơn"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0110.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0l.229 2.523a1.125 1.125 0 01-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0021 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 00-1.913-.247M6.34 18H5.25A2.25 2.25 0 013 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 011.913-.247m10.5 0a48.536 48.536 0 00-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5zm-3 0h.008v.008H15V10.5z"})]}),Ab=t=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[i.jsx("title",{children:"Quản lý Nhân viên"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 003.741-.479 3 3 0 00-4.682-2.72m-7.5-2.962a3.75 3.75 0 100-7.5 3.75 3.75 0 000 7.5zM10.5 18.75a9.094 9.094 0 013.741-.479 3 3 0 01-4.682-2.72m-7.5-2.962a3.75 3.75 0 100-7.5 3.75 3.75 0 000 7.5z"})]}),Pc=t=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[i.jsx("title",{children:"Cài đặt"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.438.995s.145.755.438.995l1.003.827c.48.398.665 1.043.26 1.431l-1.296 2.247a1.125 1.125 0 01-1.37.49l-1.217-.456c-.354-.133-.75-.072-1.075.124a6.57 6.57 0 01-.22.127c-.331.183-.581.495-.645.87l-.213 1.281c-.09.543-.56.94-1.11.94h-2.593c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.063-.374-.313-.686-.645-.87a6.52 6.52 0 01-.22-.127c-.324-.196-.72-.257-1.075-.124l-1.217.456a1.125 1.125 0 01-1.37-.49l-1.296-2.247a1.125 1.125 0 01.26-1.431l1.003-.827c.293-.24.438.613.438.995s-.145-.755-.438-.995l-1.003-.827a1.125 1.125 0 01-.26-1.431l1.296-2.247a1.125 1.125 0 011.37.49l1.217.456c.354.133.75.072 1.075-.124.073-.044.146-.087.22-.127.332-.183.582-.495.645-.87l.213-1.281z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),Vc=t=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[i.jsx("title",{children:"Báo cáo"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z"})]}),_b=t=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[i.jsx("title",{children:"Tải xuống"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})]}),Rb=t=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[i.jsx("title",{children:"Báo cáo Tồn kho"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 3v11.25A2.25 2.25 0 006 16.5h2.25M3.75 3h-1.5m1.5 0h16.5m0 0h1.5m-1.5 0v11.25A2.25 2.25 0 0118 16.5h-2.25m-7.5 0h7.5m-7.5 0l-1.125-1.5M12 16.5v2.25m0 0l1.125-1.5m-1.125 1.5H9.75m4.5 0H12m4.5 0H12m2.25-4.5h-4.5m4.5 0l-1.125-1.5M14.25 12l1.125-1.5m-1.125 1.5H12m4.5 0H12m2.25-4.5h-4.5m4.5 0l-1.125-1.5M14.25 7.5l1.125-1.5m-1.125 1.5H12"})]}),_i=t=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[i.jsx("title",{children:"Thời gian"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})]}),za=t=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[i.jsx("title",{children:"Cảnh báo"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})]}),on=t=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[i.jsx("title",{children:"Đóng"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})]}),Db=t=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[i.jsx("title",{children:"Đăng xuất"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0-3-3m0 0-3-3m3 3H9"})]}),mn=t=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[i.jsx("title",{children:"Quay lại"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3"})]}),s0=t=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[i.jsx("title",{children:"Phiếu chi"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75l3 3m0 0l3-3m-3 3v-7.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),a0=t=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[i.jsx("title",{children:"Phiếu thu"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 11.25l-3-3m0 0l-3 3m3-3v7.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),Ib=t=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[i.jsx("title",{children:"Báo cáo theo danh mục"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6a7.5 7.5 0 107.5 7.5h-7.5V6z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 10.5H21A7.5 7.5 0 0013.5 3v7.5z"})]}),jb=t=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[i.jsx("title",{children:"Phân quyền"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.286zm0 13.036h.008v.008h-.008v-.008z"})]}),Ub=t=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[i.jsx("title",{children:"Chọn cột hiển thị"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5M5.25 4.5h13.5a2.25 2.25 0 012.25 2.25v10.5a2.25 2.25 0 01-2.25 2.25H5.25a2.25 2.25 0 01-2.25-2.25V6.75a2.25 2.25 0 012.25-2.25z"})]}),o0=t=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[i.jsx("title",{children:"Hoàn thành"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),Lb=t=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[i.jsx("title",{children:"Sáng"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"})]}),Pb=t=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[i.jsx("title",{children:"Tối"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25c0 5.385 4.365 9.75 9.75 9.75 2.572 0 4.92-.99 6.697-2.648z"})]}),Vb=t=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[i.jsx("title",{children:"Hệ thống"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17.25v1.007a3 3 0 01-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0115 18.257V17.25m6-12V15a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 15V5.25A2.25 2.25 0 015.25 3h13.5A2.25 2.25 0 0121 5.25z"})]}),qb=t=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[i.jsx("title",{children:"Cảnh báo/Nhắc nhở"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0"})]}),Hb=({to:t,icon:e,label:s,onClick:a})=>{const c="bg-sky-600 text-white",f="text-slate-300 hover:bg-sky-800 hover:text-white dark:text-slate-300 dark:hover:bg-slate-700";return i.jsxs(Fp,{to:t,onClick:a,className:({isActive:m})=>`flex items-center px-4 py-3 my-1 rounded-lg transition-colors duration-200 ${m?c:f}`,children:[e,i.jsx("span",{className:"ml-4 font-medium",children:s})]})},Bb=({settings:t,onSave:e,onClose:s})=>{const[a,c]=N.useState(t),f=N.useId(),m=b=>{const{name:k,value:w}=b.target;c(M=>({...M,[k]:w}))},x=(b,k)=>{const w=[...a.branches];w[b].name=k,c(M=>({...M,branches:w}))},g=()=>{const b={id:`branch_${Date.now()}`,name:"Chi nhánh mới"};c(k=>({...k,branches:[...k.branches,b]}))},p=b=>{if(a.branches.length<=1){alert("Phải có ít nhất một chi nhánh.");return}const k=a.branches.filter((w,M)=>M!==b);c(w=>({...w,branches:k}))},v=()=>{e(a),s()};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-lg shadow-xl w-full max-w-2xl transform transition-all max-h-[90vh] flex flex-col",children:[i.jsx("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:"Cài đặt Cửa hàng"})}),i.jsxs("div",{className:"p-6 overflow-y-auto space-y-6",children:[i.jsxs("fieldset",{className:"space-y-4",children:[i.jsx("legend",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300 border-b border-slate-200 dark:border-slate-600 pb-2 w-full",children:"Thông tin chung"}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:`${f}-name`,className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Tên cửa hàng"}),i.jsx("input",{id:`${f}-name`,type:"text",name:"name",value:a.name,onChange:m,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 text-slate-900 dark:text-slate-100"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:`${f}-address`,className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Địa chỉ"}),i.jsx("input",{id:`${f}-address`,type:"text",name:"address",value:a.address,onChange:m,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 text-slate-900 dark:text-slate-100"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:`${f}-phone`,className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Số điện thoại"}),i.jsx("input",{id:`${f}-phone`,type:"text",name:"phone",value:a.phone,onChange:m,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 text-slate-900 dark:text-slate-100"})]})]}),i.jsxs("fieldset",{className:"space-y-4",children:[i.jsx("legend",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300 border-b border-slate-200 dark:border-slate-600 pb-2 w-full",children:"Thông tin thanh toán"}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:`${f}-bankName`,className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Ngân hàng"}),i.jsx("input",{id:`${f}-bankName`,type:"text",name:"bankName",value:a.bankName,onChange:m,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 text-slate-900 dark:text-slate-100"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:`${f}-bankAccountNumber`,className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Số tài khoản"}),i.jsx("input",{id:`${f}-bankAccountNumber`,type:"text",name:"bankAccountNumber",value:a.bankAccountNumber,onChange:m,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 text-slate-900 dark:text-slate-100"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:`${f}-bankAccountHolder`,className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Chủ tài khoản"}),i.jsx("input",{id:`${f}-bankAccountHolder`,type:"text",name:"bankAccountHolder",value:a.bankAccountHolder,onChange:m,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 text-slate-900 dark:text-slate-100"})]})]}),i.jsxs("fieldset",{className:"space-y-3",children:[i.jsx("legend",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300 border-b border-slate-200 dark:border-slate-600 pb-2 w-full",children:"Quản lý Chi nhánh"}),a.branches.map((b,k)=>i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"text",value:b.name,onChange:w=>x(k,w.target.value),className:"block w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 text-slate-900 dark:text-slate-100"}),i.jsx("button",{type:"button",onClick:()=>p(k),className:"p-2 text-red-500 hover:bg-red-100 dark:hover:bg-red-900/50 rounded-md",children:i.jsx(fn,{className:"w-5 h-5"})})]},b.id)),i.jsxs("button",{type:"button",onClick:g,className:"flex items-center text-sm text-sky-600 dark:text-sky-400 font-medium hover:text-sky-800 dark:hover:text-sky-300",children:[i.jsx(yt,{className:"w-4 h-4 mr-1"})," Thêm chi nhánh"]})]})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 px-6 py-4 flex justify-end space-x-3 mt-auto border-t border-slate-200 dark:border-slate-700",children:[i.jsxs("button",{type:"button",onClick:s,className:"flex items-center gap-2 bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-600",children:[i.jsx(mn,{className:"w-5 h-5"}),"Trở về"]}),i.jsx("button",{type:"button",onClick:v,className:"bg-sky-600 text-white font-semibold py-2 px-4 rounded-lg shadow-sm hover:bg-sky-700 transition-colors",children:"Lưu Cài đặt"})]})]})})},Gb=({theme:t,setTheme:e})=>{const s=[{name:"light",icon:i.jsx(Lb,{className:"w-5 h-5"})},{name:"dark",icon:i.jsx(Pb,{className:"w-5 h-5"})},{name:"system",icon:i.jsx(Vb,{className:"w-5 h-5"})}];return i.jsx("div",{className:"flex items-center bg-slate-700 p-1 rounded-lg",children:s.map(a=>i.jsx("button",{onClick:()=>e(a.name),className:`flex-1 p-2 rounded-md flex justify-center items-center transition-colors text-sm capitalize ${t===a.name?"bg-sky-600 text-white shadow":"text-slate-400 hover:bg-slate-600 hover:text-slate-200"}`,"aria-label":`Switch to ${a.name} theme`,title:`Chế độ ${a.name==="light"?"Sáng":a.name==="dark"?"Tối":"Hệ thống"}`,children:a.icon},a.name))})},zb=({currentUser:t,users:e,departments:s,setCurrentUser:a,storeSettings:c,setStoreSettings:f,isOpen:m,setIsOpen:x,onLogout:g,currentBranchId:p,setCurrentBranchId:v,theme:b,setTheme:k})=>{const[w,M]=N.useState(!1),A=F=>{const oe=e.find($=>$.id===F.target.value);oe&&a(oe)},_=F=>{v(F.target.value)};N.useId();const j=t.departmentIds.map(F=>s.find(oe=>oe.id===F)).filter(F=>!!F),D=j.some(F=>F.name==="Quản trị"),I=j.some(F=>F.name==="Kỹ thuật viên"),q=()=>D?"Admin":I?"Kỹ thuật viên":"Nhân viên Bán hàng",ee={all:[{to:"/dashboard",icon:i.jsx(Tb,{}),label:"Bảng điều khiển"}],Admin:[{to:"/services",icon:i.jsx(Ga,{}),label:"Quản lý Dịch vụ"},{to:"/sales",icon:i.jsx(Ps,{}),label:"Bán hàng"},{to:"/inventory",icon:i.jsx(ln,{}),label:"Quản lý Kho"},{to:"/customers",icon:i.jsx(Mi,{}),label:"Khách hàng"},{to:"/cashflow",icon:i.jsx(Mb,{}),label:"Quản lý Thu Chi"},{to:"/reports/revenue",icon:i.jsx(Vc,{className:"h-6 w-6"}),label:"Báo cáo Doanh thu"},{to:"/reports/inventory",icon:i.jsx(Rb,{className:"h-6 w-6"}),label:"Báo cáo Tồn kho"},{to:"/users",icon:i.jsx(Ab,{className:"h-6 w-6"}),label:"Nhân viên"},{to:"/ai-assistant",icon:i.jsx(gc,{}),label:"Trợ lý AI"}],"Kỹ thuật viên":[{to:"/services",icon:i.jsx(Ga,{}),label:"Quản lý Dịch vụ"},{to:"/inventory",icon:i.jsx(ln,{}),label:"Quản lý Kho"},{to:"/ai-assistant",icon:i.jsx(gc,{}),label:"Trợ lý AI"}],"Nhân viên Bán hàng":[{to:"/sales",icon:i.jsx(Ps,{}),label:"Bán hàng"},{to:"/inventory",icon:i.jsx(ln,{}),label:"Quản lý Kho"},{to:"/customers",icon:i.jsx(Mi,{}),label:"Khách hàng"}]},se=[...ee.all,...ee[q()]||[]];return i.jsxs("aside",{className:`flex flex-col w-64 bg-slate-900 text-white h-full fixed lg:static inset-y-0 left-0 z-40
        transform transition-transform duration-300 ease-in-out lg:translate-x-0
        ${m?"translate-x-0":"-translate-x-full"}`,children:[w&&i.jsx(Bb,{settings:c,onSave:f,onClose:()=>M(!1)}),i.jsxs("div",{className:"flex items-center justify-between h-16 border-b border-slate-700/50 px-4",children:[i.jsxs("button",{onClick:()=>D&&M(!0),disabled:!D,className:`flex items-center w-full text-left overflow-hidden p-2 rounded-md ${D?"hover:bg-slate-700 cursor-pointer":"cursor-default"}`,children:[i.jsx(Ga,{className:"w-8 h-8 text-sky-400 flex-shrink-0"}),i.jsx("h1",{className:"text-xl font-bold ml-2 truncate",title:c.name,children:c.name}),D&&i.jsx(Pc,{className:"w-5 h-5 ml-auto text-slate-400 flex-shrink-0"})]}),i.jsx("button",{onClick:()=>x(!1),className:"lg:hidden text-slate-400 hover:text-white p-2 -mr-2",children:i.jsx(on,{className:"w-6 h-6"})})]}),i.jsxs("div",{className:"px-4 py-4 border-b border-slate-700/50",children:[i.jsx("label",{htmlFor:"branch-switcher",className:"block text-sm font-medium text-slate-400 mb-2",children:"Chi nhánh làm việc:"}),i.jsx("select",{id:"branch-switcher",value:p,onChange:_,className:"w-full p-2 bg-slate-700 border border-slate-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-sky-500",children:c.branches.map(F=>i.jsx("option",{value:F.id,children:F.name},F.id))})]}),i.jsx("nav",{className:"flex-1 px-2 py-4 overflow-y-auto",children:se.map(F=>i.jsx(Hb,{to:F.to,icon:F.icon,label:F.label,onClick:()=>x(!1)},F.to))}),i.jsxs("div",{className:"mt-auto p-2 space-y-2",children:[i.jsx("div",{className:"px-2 py-2",children:i.jsx(Gb,{theme:b,setTheme:k})}),i.jsx("div",{className:"px-2 py-2 border-t border-slate-700/50",children:i.jsxs("button",{onClick:g,className:"flex items-center w-full px-4 py-3 my-1 rounded-lg text-slate-300 hover:bg-red-600 hover:text-white transition-colors duration-200",children:[i.jsx(Db,{className:"h-6 w-6"}),i.jsx("span",{className:"ml-4 font-medium",children:"Đăng xuất"})]})}),i.jsxs("div",{className:"px-2 pb-2 border-t border-slate-700/50",children:[i.jsx("label",{htmlFor:"user-switcher",className:"block text-sm font-medium text-slate-400 mb-2 pt-4 px-2",children:"Chuyển đổi tài khoản:"}),i.jsx("select",{id:"user-switcher",value:t.id,onChange:A,className:"w-full p-2 bg-slate-700 border border-slate-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-sky-500",children:e.map(F=>{var oe;return i.jsxs("option",{value:F.id,children:[F.name," (",((oe=j.find($=>F.departmentIds.includes($.id)))==null?void 0:oe.name)||"Chưa phân quyền",")"]},F.id)})})]})]})]})},mi=({icon:t,title:e,value:s,color:a,linkTo:c})=>{const f=i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-xl shadow-sm flex items-center h-full border border-slate-200/60 dark:border-slate-700",children:[i.jsx("div",{className:`p-4 rounded-full ${a}`,children:On.cloneElement(t,{className:"w-7 h-7 text-white"})}),i.jsxs("div",{className:"ml-4",children:[i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 font-medium",children:e}),i.jsx("p",{className:"text-xl sm:text-2xl font-bold text-slate-800 dark:text-slate-100",children:s})]})]});return c?i.jsx(Li,{to:c,className:"hover:opacity-90 transition-opacity duration-200",children:f}):f},Fb=({workOrders:t,customers:e,parts:s,currentBranchId:a})=>{const c={dailyRevenue:85e5,servicesToday:12},f=N.useMemo(()=>t.filter(v=>v.branchId===a&&v.status==="Trả máy").reduce((v,b)=>v+b.total,0),[t,a]),m=N.useMemo(()=>s.filter(p=>(p.stock[a]||0)>0&&(p.stock[a]||0)<5).length,[s,a]),x=[{id:1,icon:i.jsx(Ga,{className:"w-5 h-5 text-sky-500"}),text:"Hoàn thành sửa xe cho khách hàng Nguyễn Văn A.",time:"10 phút trước"},{id:2,icon:i.jsx(ln,{className:"w-5 h-5 text-green-500"}),text:"Nhập thêm 20 bugi NGK.",time:"1 giờ trước"},{id:3,icon:i.jsx(Mi,{className:"w-5 h-5 text-violet-500"}),text:"Khách hàng Trần Thị B đặt lịch thay nhớt.",time:"3 giờ trước"}],g=N.useMemo(()=>{const v=new Map;return t.forEach(b=>{if(b.customerPhone&&b.odometerReading){const k=v.get(b.customerPhone)||0;b.odometerReading>k&&v.set(b.customerPhone,b.odometerReading)}}),e.map(b=>{if(!b.lastServiceOdometer||!b.phone)return null;const k=v.get(b.phone);if(!k||k<=b.lastServiceOdometer)return null;const w=k-b.lastServiceOdometer;return w>=1500?{...b,latestOdometer:k,kmSinceChange:w,kmOverdue:w-1500}:null}).filter(b=>b!==null).sort((b,k)=>k.kmOverdue-b.kmOverdue)},[e,t]);return i.jsxs("div",{className:"space-y-8",children:[i.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-800 dark:text-slate-100",children:"Bảng điều khiển"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(mi,{icon:i.jsx(Jp,{}),title:"Doanh thu hôm nay",value:`${c.dailyRevenue.toLocaleString("vi-VN")} ₫`,color:"bg-sky-500"}),i.jsx(mi,{icon:i.jsx(Mi,{}),title:"Lượt khách hôm nay",value:c.servicesToday.toString(),color:"bg-green-500"}),i.jsx(mi,{icon:i.jsx(ln,{}),title:"Phụ tùng sắp hết",value:m.toString(),color:"bg-amber-500",linkTo:"/inventory"}),i.jsx(mi,{icon:i.jsx(Vc,{}),title:"Tổng doanh thu DV (Chi nhánh)",value:`${f.toLocaleString("vi-VN")} ₫`,color:"bg-violet-500",linkTo:"/reports/revenue"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200/60 dark:border-slate-700",children:[i.jsxs("h2",{className:"text-lg sm:text-xl font-semibold text-slate-700 dark:text-slate-100 mb-4 flex items-center",children:[i.jsx(qb,{className:"w-6 h-6 mr-3 text-orange-500"}),"Khách hàng cần nhắc nhở"]}),g.length>0?i.jsx("ul",{className:"space-y-3 max-h-96 overflow-y-auto",children:g.map(p=>{var v;return i.jsxs("li",{className:"p-3 rounded-lg bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-500/30",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-100",children:p.name}),i.jsx("a",{href:`tel:${p.phone}`,className:"text-sm text-sky-600 dark:text-sky-400 hover:underline",children:p.phone})]}),i.jsxs("span",{className:"text-sm font-bold text-red-600 dark:text-red-400 bg-red-100 dark:bg-red-500/20 px-2.5 py-1 rounded-full",children:["Quá ",p.kmOverdue.toLocaleString("vi-VN")," km"]})]}),i.jsxs("div",{className:"mt-2 pt-2 border-t border-orange-200 dark:border-orange-500/30 text-xs text-slate-600 dark:text-slate-400 space-y-1",children:[i.jsxs("p",{children:["Lần thay nhớt cuối: ",i.jsx("strong",{children:p.lastServiceDate})," lúc ",i.jsxs("strong",{children:[(v=p.lastServiceOdometer)==null?void 0:v.toLocaleString("vi-VN")," km"]})]}),i.jsxs("p",{children:["Lần ghé gần nhất: ",i.jsxs("strong",{children:[p.latestOdometer.toLocaleString("vi-VN")," km"]})," (đã đi ",p.kmSinceChange.toLocaleString("vi-VN")," km)"]})]})]},p.id)})}):i.jsx("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:i.jsx("p",{children:"Hiện không có khách hàng nào đến hạn thay nhớt."})})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200/60 dark:border-slate-700",children:[i.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-slate-700 dark:text-slate-100 mb-4",children:"Hoạt động gần đây"}),i.jsx("ul",{className:"space-y-4",children:x.map(p=>i.jsxs("li",{className:"flex items-start space-x-4",children:[i.jsx("div",{className:"flex-shrink-0 mt-1 bg-slate-100 dark:bg-slate-700 p-2 rounded-full",children:p.icon}),i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-800 dark:text-slate-200",children:p.text}),i.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-400 mt-1 flex items-center",children:[i.jsx(_i,{className:"w-3 h-3 mr-1.5"}),p.time]})]})]},p.id))})]})]})]})},kl=({currentPage:t,totalPages:e,onPageChange:s,itemsPerPage:a,totalItems:c})=>{if(e<=1)return null;const f=[],m=5,x=Math.floor(m/2);if(e<=m+2)for(let v=1;v<=e;v++)f.push(v);else if(t<=x+1){for(let v=1;v<=m;v++)f.push(v);f.push("..."),f.push(e)}else if(t>=e-x){f.push(1),f.push("...");for(let v=e-m+1;v<=e;v++)f.push(v)}else{f.push(1),f.push("...");for(let v=t-(x-1);v<=t+(x-1);v++)f.push(v);f.push("..."),f.push(e)}const g=(t-1)*a+1,p=Math.min(g+a-1,c);return i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mt-6 text-sm text-slate-600 dark:text-slate-400",children:[i.jsxs("div",{className:"mb-2 sm:mb-0",children:["Hiển thị ",i.jsx("strong",{children:g}),"-",i.jsx("strong",{children:p})," trên ",i.jsx("strong",{children:c})," kết quả"]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("button",{onClick:()=>s(t-1),disabled:t===1,className:"px-3 py-1.5 border rounded-md disabled:opacity-50 disabled:cursor-not-allowed bg-white dark:bg-slate-800 border-slate-300 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700","aria-label":"Trang trước",children:"«"}),f.map((v,b)=>i.jsx(On.Fragment,{children:v==="..."?i.jsx("span",{className:"px-3 py-1.5",children:"..."}):i.jsx("button",{onClick:()=>s(v),className:`px-3 py-1.5 border rounded-md ${t===v?"bg-sky-600 text-white border-sky-600":"bg-white dark:bg-slate-800 border-slate-300 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700"}`,"aria-label":`Trang ${v}`,"aria-current":t===v?"page":void 0,children:v})},b)),i.jsx("button",{onClick:()=>s(t+1),disabled:t===e,className:"px-3 py-1.5 border rounded-md disabled:opacity-50 disabled:cursor-not-allowed bg-white dark:bg-slate-800 border-slate-300 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700","aria-label":"Trang sau",children:"»"})]})]})},ht=t=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(t),Ob=({isOpen:t,onClose:e,onSave:s,initialName:a=""})=>{const[c,f]=N.useState({name:a,phone:"",vehicle:"",licensePlate:"",lastServiceOdometer:void 0});On.useEffect(()=>{t&&f({name:a,phone:"",vehicle:"",licensePlate:"",lastServiceOdometer:void 0})},[t,a]);const m=g=>{const{name:p,value:v,type:b}=g.target;f(k=>({...k,[p]:b==="number"?v===""?void 0:parseInt(v,10):v}))},x=g=>{g.preventDefault();const p={id:`C${Date.now()}`,...c,loyaltyPoints:0,lastServiceDate:c.lastServiceOdometer?new Date().toISOString().split("T")[0]:void 0};s(p)};return t?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-[60] flex justify-center items-center p-4",children:i.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-lg shadow-xl w-full max-w-lg",children:i.jsxs("form",{onSubmit:x,children:[i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-slate-800 dark:text-slate-100 mb-6",children:"Thêm Khách hàng mới"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"new-customer-name",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Tên khách hàng (*)"}),i.jsx("input",{id:"new-customer-name",type:"text",name:"name",value:c.name,onChange:m,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 text-slate-900 dark:text-slate-100",required:!0,autoFocus:!0})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"new-customer-phone",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Số điện thoại (*)"}),i.jsx("input",{id:"new-customer-phone",type:"text",name:"phone",value:c.phone,onChange:m,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 text-slate-900 dark:text-slate-100",required:!0})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"new-customer-vehicle",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Dòng xe"}),i.jsx("input",{id:"new-customer-vehicle",type:"text",name:"vehicle",value:c.vehicle,onChange:m,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 text-slate-900 dark:text-slate-100"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"new-customer-licensePlate",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Biển số xe"}),i.jsx("input",{id:"new-customer-licensePlate",type:"text",name:"licensePlate",value:c.licensePlate,onChange:m,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 text-slate-900 dark:text-slate-100"})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"new-customer-odometer",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Số ODO (km)"}),i.jsx("input",{id:"new-customer-odometer",type:"number",name:"lastServiceOdometer",value:c.lastServiceOdometer||"",onChange:m,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 text-slate-900 dark:text-slate-100"})]})]})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 px-6 py-4 flex justify-end space-x-3 border-t border-slate-200 dark:border-slate-700",children:[i.jsxs("button",{type:"button",onClick:e,className:"flex items-center gap-2 bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-600",children:[i.jsx(mn,{className:"w-5 h-5"}),"Trở về"]}),i.jsx("button",{type:"submit",className:"bg-sky-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-sky-700",children:"Lưu"})]})]})})}):null},Jb=({isOpen:t,onClose:e,onSave:s,workOrder:a,parts:c,currentBranchId:f,customers:m,setCustomers:x})=>{var de,ge;const[g,p]=N.useState(()=>a?{...a}:{customerName:"",customerPhone:"",vehicleModel:"",licensePlate:"",issueDescription:"",technicianName:"",status:"Tiếp nhận",laborCost:0,partsUsed:[],quotationItems:[],notes:"",branchId:f,discount:0,odometerReading:0,serviceTypes:[]}),[v,b]=N.useState(""),[k,w]=N.useState(!1),[M,A]=N.useState(!1),[_,j]=N.useState({description:"",quantity:1,unitPrice:0}),D=N.useRef(null),[I,q]=N.useState(["customerInfo"]),ee=["Thay nhớt","Bảo dưỡng định kỳ","Sửa chữa chung","Tân trang"],se=V=>{q(ae=>ae.includes(V)?ae.filter(xe=>xe!==V):[...ae,V])},F=({title:V,id:ae,children:xe})=>{const ne=I.includes(ae);return i.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:[i.jsxs("button",{type:"button",onClick:()=>se(ae),className:"w-full flex justify-between items-center p-4 bg-slate-50/50 dark:bg-slate-800/50 hover:bg-slate-100/50 dark:hover:bg-slate-700/50 transition-colors",children:[i.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-200",children:V}),i.jsx(Lc,{className:`w-6 h-6 text-slate-500 dark:text-slate-400 transition-transform ${ne?"rotate-180":""}`})]}),ne&&i.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700",children:xe})]})},oe=V=>{switch(V){case"Tiếp nhận":return"bg-slate-200 text-slate-800 border-slate-300 dark:bg-slate-700 dark:text-slate-200 dark:border-slate-600";case"Đang sửa":return"bg-sky-100 text-sky-800 border-sky-300 dark:bg-sky-900/50 dark:text-sky-300 dark:border-sky-700";case"Đã sửa xong":return"bg-amber-100 text-amber-800 border-amber-300 dark:bg-amber-900/50 dark:text-amber-300 dark:border-amber-700";case"Trả máy":return"bg-green-100 text-green-800 border-green-300 dark:bg-green-900/50 dark:text-green-300 dark:border-green-700";default:return"bg-slate-100 text-slate-800 border-slate-300 dark:bg-slate-700 dark:text-slate-200 dark:border-slate-600"}};N.useEffect(()=>{p(a?{...a,quotationItems:a.quotationItems||[],serviceTypes:a.serviceTypes||[]}:{customerName:"",customerPhone:"",vehicleModel:"",licensePlate:"",issueDescription:"",technicianName:"",status:"Tiếp nhận",laborCost:0,partsUsed:[],quotationItems:[],notes:"",branchId:f,discount:0,odometerReading:0,serviceTypes:[]}),b(a?a.customerName:""),q(a?["customerInfo","issueDetails","serviceDetails","quotationItems","partsUsed"]:["customerInfo"])},[a,f,t]),N.useEffect(()=>{if(a||window.innerWidth>=1024)return;const V=new Set(I);let ae=!1;V.has("customerInfo")&&g.customerName&&g.vehicleModel&&!V.has("issueDetails")&&(V.add("issueDetails"),ae=!0),V.has("issueDetails")&&g.issueDescription&&!V.has("serviceDetails")&&(V.add("serviceDetails"),ae=!0),V.has("serviceDetails")&&g.technicianName&&!V.has("partsUsed")&&(V.add("partsUsed"),V.add("quotationItems"),ae=!0),ae&&q(Array.from(V))},[g,a,I]),N.useEffect(()=>{const V=ae=>{D.current&&!D.current.contains(ae.target)&&w(!1)};return document.addEventListener("mousedown",V),()=>document.removeEventListener("mousedown",V)},[]);const $=N.useMemo(()=>v?m.filter(V=>V.name.toLowerCase().includes(v.toLowerCase())||V.phone.includes(v)):[],[m,v]),Z=V=>{p(ae=>({...ae,customerName:V.name,customerPhone:V.phone,vehicleModel:V.vehicle,licensePlate:V.licensePlate,odometerReading:V.lastServiceOdometer})),b(V.name),w(!1)},Q=V=>{x(ae=>[V,...ae]),Z(V),A(!1)},O=V=>{const{name:ae,value:xe}=V.target;p(ne=>({...ne,[ae]:ae==="laborCost"||ae==="discount"||ae==="odometerReading"?parseFloat(xe)||0:xe}))},ue=V=>{p(ae=>{const xe=ae.serviceTypes||[],ne=xe.includes(V)?xe.filter(be=>be!==V):[...xe,V];return{...ae,serviceTypes:ne}})},me=V=>{V&&p(ae=>{var be,we;if((be=ae.partsUsed)==null?void 0:be.find(rt=>rt.partId===V.id))return{...ae,partsUsed:(we=ae.partsUsed)==null?void 0:we.map(rt=>rt.partId===V.id?{...rt,quantity:rt.quantity+1}:rt)};const ne={partId:V.id,partName:V.name,sku:V.sku,quantity:1,price:V.sellingPrice};return{...ae,partsUsed:[...ae.partsUsed||[],ne]}})},Te=V=>{p(ae=>{var xe;return{...ae,partsUsed:(xe=ae.partsUsed)==null?void 0:xe.filter(ne=>ne.partId!==V)}})},E=(V,ae)=>{p(xe=>{var ne;return{...xe,partsUsed:(ne=xe.partsUsed)==null?void 0:ne.map(be=>be.partId===V?{...be,quantity:ae}:be).filter(be=>be.quantity>0)}})},X=()=>{if(!_.description.trim()||!_.unitPrice||_.unitPrice<=0||!_.quantity||_.quantity<=0){alert("Vui lòng điền đầy đủ thông tin hợp lệ cho mục báo giá.");return}const V={id:`Q-${Date.now()}`,description:_.description,quantity:_.quantity,unitPrice:_.unitPrice};p(ae=>({...ae,quotationItems:[...ae.quotationItems||[],V]})),j({description:"",quantity:1,unitPrice:0})},re=V=>{p(ae=>({...ae,quotationItems:(ae.quotationItems||[]).filter(xe=>xe.id!==V)}))},ie=(V,ae,xe)=>{p(ne=>({...ne,quotationItems:(ne.quotationItems||[]).map(be=>be.id===V?{...be,[ae]:xe}:be)}))},ce=N.useMemo(()=>{var V;return((V=g.partsUsed)==null?void 0:V.reduce((ae,xe)=>ae+xe.price*xe.quantity,0))||0},[g.partsUsed]),T=N.useMemo(()=>{var V;return((V=g.quotationItems)==null?void 0:V.reduce((ae,xe)=>ae+xe.unitPrice*xe.quantity,0))||0},[g.quotationItems]),U=(g.laborCost||0)+ce+T-(g.discount||0),J=V=>{V.preventDefault();const ae={id:(a==null?void 0:a.id)||`S${String(Math.floor(Math.random()*900)+100)}`,creationDate:(a==null?void 0:a.creationDate)||new Date().toISOString().split("T")[0],...g,branchId:g.branchId||f,total:U};s(ae)};if(!t)return null;const G=()=>i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-200 lg:hidden",children:"Thông tin Khách hàng & Xe"}),i.jsxs("div",{ref:D,children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:["Khách hàng ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsxs("div",{className:"relative mt-1",children:[i.jsxs("div",{className:"flex",children:[i.jsx("input",{type:"text",placeholder:"Tìm hoặc thêm khách hàng...",value:v,onChange:V=>{b(V.target.value),w(!0),p(ae=>({...ae,customerName:V.target.value,customerPhone:"",vehicleModel:"",licensePlate:""}))},onFocus:()=>w(!0),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-l-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 dark:bg-slate-800 dark:text-slate-100",required:!0}),i.jsx("button",{type:"button",onClick:()=>A(!0),className:"p-2 border-t border-b border-r border-slate-300 dark:border-slate-600 rounded-r-md h-[42px] bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600",title:"Thêm khách hàng mới",children:i.jsx(yt,{})})]}),k&&i.jsx("div",{className:"absolute z-20 w-full bg-white dark:bg-slate-800 border dark:border-slate-600 rounded-md mt-1 shadow-lg max-h-60 overflow-y-auto",children:$.length>0?$.map(V=>i.jsxs("div",{onClick:()=>Z(V),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 cursor-pointer text-sm",children:[i.jsx("p",{className:"font-semibold dark:text-slate-200",children:V.name}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:V.phone})]},V.id)):i.jsx("div",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"Không tìm thấy khách hàng."})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"wo-vehicleModel",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Dòng xe"}),i.jsx("input",{id:"wo-vehicleModel",type:"text",name:"vehicleModel",value:g.vehicleModel,onChange:O,placeholder:"Honda Air Blade",className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 text-slate-900 dark:text-slate-100",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"wo-licensePlate",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Biển số xe"}),i.jsx("input",{id:"wo-licensePlate",type:"text",name:"licensePlate",value:g.licensePlate,onChange:O,placeholder:"59-A1 123.45",className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 text-slate-900 dark:text-slate-100"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"wo-odometerReading",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Số ODO (km)"}),i.jsx("input",{id:"wo-odometerReading",type:"number",name:"odometerReading",value:g.odometerReading||"",onChange:O,placeholder:"15000",className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 text-slate-900 dark:text-slate-100"})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-200 lg:hidden",children:"Sự cố & Dịch vụ"}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"wo-issueDescription",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Mô tả sự cố"}),i.jsx("textarea",{id:"wo-issueDescription",name:"issueDescription",value:g.issueDescription,onChange:O,placeholder:"Bảo dưỡng định kỳ, thay nhớt...",rows:3,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 text-slate-900 dark:text-slate-100",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Loại hình dịch vụ"}),i.jsx("div",{className:"flex flex-wrap gap-x-4 gap-y-2",children:ee.map(V=>{var ae;return i.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer text-slate-700 dark:text-slate-200",children:[i.jsx("input",{type:"checkbox",checked:((ae=g.serviceTypes)==null?void 0:ae.includes(V))||!1,onChange:()=>ue(V),className:"rounded text-sky-600 focus:ring-sky-500"}),i.jsx("span",{children:V})]},V)})})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-200 lg:hidden",children:"Chi tiết Kỹ thuật"}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"wo-status",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Trạng thái"}),i.jsxs("select",{id:"wo-status",name:"status",value:g.status,onChange:O,className:`mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sky-500 font-semibold transition-colors ${oe(g.status)} dark:bg-transparent`,children:[i.jsx("option",{value:"Tiếp nhận",children:"Tiếp nhận"}),i.jsx("option",{value:"Đang sửa",children:"Đang sửa"}),i.jsx("option",{value:"Đã sửa xong",children:"Đã sửa xong"}),i.jsx("option",{value:"Trả máy",children:"Trả máy"})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"wo-technicianName",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Kỹ thuật viên"}),i.jsx("input",{id:"wo-technicianName",type:"text",name:"technicianName",value:g.technicianName,onChange:O,placeholder:"Trần Văn An",className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 text-slate-900 dark:text-slate-100"})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"wo-laborCost",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Phí dịch vụ (công thợ)"}),i.jsx("input",{id:"wo-laborCost",type:"number",name:"laborCost",value:g.laborCost||"",onChange:O,placeholder:"100000",className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 text-slate-900 dark:text-slate-100"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"wo-notes",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Ghi chú nội bộ"}),i.jsx("textarea",{id:"wo-notes",name:"notes",value:g.notes||"",onChange:O,placeholder:"VD: Khách yêu cầu kiểm tra thêm hệ thống điện",rows:2,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 text-slate-900 dark:text-slate-100"})]})]})]});return i.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center md:items-start md:p-4 overflow-y-auto",children:[i.jsx(Ob,{isOpen:M,onClose:()=>A(!1),onSave:Q,initialName:v}),i.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full h-full md:h-auto md:max-w-6xl md:my-8 md:rounded-lg flex flex-col shadow-xl",children:[i.jsx("div",{className:"p-4 sm:p-6 border-b border-slate-200 dark:border-slate-700 flex-shrink-0",children:i.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-slate-800 dark:text-slate-100",children:a?`Xử lý Phiếu #${a.id}`:"Tạo Phiếu Sửa chữa mới"})}),i.jsxs("form",{onSubmit:J,className:"flex-1 flex flex-col min-h-0",children:[i.jsxs("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:[i.jsxs("div",{className:"space-y-4 lg:hidden",children:[i.jsx(F,{title:"Thông tin Khách hàng & Xe",id:"customerInfo",children:G()}),i.jsx(F,{title:"Sự cố & Dịch vụ",id:"issueDetails"}),i.jsx(F,{title:"Chi tiết Kỹ thuật",id:"serviceDetails"}),i.jsx(F,{title:"Báo giá (Gia công, Đặt hàng)",id:"quotationItems"}),i.jsx(F,{title:"Phụ tùng sử dụng",id:"partsUsed"})]}),i.jsxs("div",{className:"hidden lg:flex lg:gap-6",children:[i.jsxs("div",{className:"lg:w-1/2 space-y-6",children:[i.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4 space-y-4",children:[i.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-200",children:"Thông tin Khách hàng & Xe"}),G().props.children[0]]}),i.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4 space-y-4",children:[i.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-200",children:"Sự cố & Dịch vụ"}),G().props.children[1]]}),i.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4 space-y-4",children:[i.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-200",children:"Chi tiết Kỹ thuật"}),G().props.children[2]]})]}),i.jsxs("div",{className:"lg:w-1/2 space-y-6",children:[i.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg",children:[i.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-200 p-4",children:"Phụ tùng sử dụng"}),i.jsxs("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex justify-between items-center gap-4 mb-4",children:[i.jsx("h4",{className:"font-medium text-slate-700 dark:text-slate-200",children:"Thêm phụ tùng"}),i.jsx("div",{className:"flex-grow max-w-xs sm:max-w-sm",children:i.jsxs("select",{onChange:V=>{me(c.find(ae=>ae.id===V.target.value)),V.target.value=""},defaultValue:"",className:"p-2 border border-slate-300 dark:border-slate-600 rounded w-full text-slate-900 dark:text-slate-100 bg-white dark:bg-slate-800",children:[i.jsx("option",{value:"",disabled:!0,children:"-- Chọn phụ tùng --"}),c.filter(V=>(V.stock[f]||0)>0).map(V=>i.jsxs("option",{value:V.id,children:[V.name," (Tồn: ",V.stock[f],")"]},V.id))]})})]}),i.jsx("div",{className:"max-h-48 overflow-y-auto",children:i.jsxs("table",{className:"w-full text-left text-sm",children:[i.jsx("thead",{className:"bg-slate-100 dark:bg-slate-800 sticky top-0",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 font-semibold",children:"Tên"}),i.jsx("th",{className:"p-2 font-semibold",children:"SL"}),i.jsx("th",{className:"p-2 font-semibold",children:"Đ.Giá"}),i.jsx("th",{className:"p-2 font-semibold",children:"T.Tiền"}),i.jsx("th",{})]})}),i.jsx("tbody",{children:(de=g.partsUsed)==null?void 0:de.map(V=>i.jsxs("tr",{className:"border-b dark:border-slate-700",children:[i.jsx("td",{className:"p-2 font-medium dark:text-slate-200",children:V.partName}),i.jsx("td",{className:"p-1",children:i.jsx("input",{type:"number",value:V.quantity,onChange:ae=>E(V.partId,parseInt(ae.target.value)),min:"1",className:"w-16 p-1 border rounded dark:bg-slate-800 dark:border-slate-600"})}),i.jsx("td",{className:"p-2 dark:text-slate-300",children:ht(V.price)}),i.jsx("td",{className:"p-2 dark:text-slate-100 font-semibold",children:ht(V.price*V.quantity)}),i.jsx("td",{className:"p-1 text-right",children:i.jsx("button",{type:"button",onClick:()=>Te(V.partId),className:"text-red-500",children:i.jsx(fn,{className:"w-5 h-5"})})})]},V.partId))})]})})]})]}),i.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg",children:[i.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-200 p-4",children:"Báo giá (Gia công, Đặt hàng)"}),i.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700",children:i.jsxs("table",{className:"w-full text-left text-sm",children:[i.jsx("thead",{className:"bg-slate-100 dark:bg-slate-800",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 font-semibold w-2/5",children:"Mô tả"}),i.jsx("th",{className:"p-2 font-semibold",children:"SL"}),i.jsx("th",{className:"p-2 font-semibold",children:"Đ.Giá"}),i.jsx("th",{className:"p-2 font-semibold",children:"T.Tiền"}),i.jsx("th",{})]})}),i.jsx("tbody",{children:(ge=g.quotationItems)==null?void 0:ge.map(V=>i.jsxs("tr",{className:"border-b dark:border-slate-700",children:[i.jsx("td",{className:"p-1",children:i.jsx("input",{type:"text",value:V.description,onChange:ae=>ie(V.id,"description",ae.target.value),className:"w-full p-1 bg-transparent dark:text-slate-100"})}),i.jsx("td",{className:"p-1",children:i.jsx("input",{type:"number",value:V.quantity,onChange:ae=>ie(V.id,"quantity",Number(ae.target.value)),min:"1",className:"w-16 p-1 border rounded dark:bg-slate-800 dark:border-slate-600"})}),i.jsx("td",{className:"p-1",children:i.jsx("input",{type:"number",value:V.unitPrice,onChange:ae=>ie(V.id,"unitPrice",Number(ae.target.value)),min:"0",className:"w-24 p-1 border rounded dark:bg-slate-800 dark:border-slate-600"})}),i.jsx("td",{className:"p-2 dark:text-slate-100 font-semibold",children:ht(V.unitPrice*V.quantity)}),i.jsx("td",{className:"p-1 text-right",children:i.jsx("button",{type:"button",onClick:()=>re(V.id),className:"text-red-500",children:i.jsx(fn,{className:"w-5 h-5"})})})]},V.id))}),i.jsx("tfoot",{children:i.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-800/50",children:[i.jsx("td",{className:"p-1",children:i.jsx("input",{type:"text",placeholder:"Mô tả...",value:_.description,onChange:V=>j(ae=>({...ae,description:V.target.value})),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"})}),i.jsx("td",{className:"p-1",children:i.jsx("input",{type:"number",value:_.quantity,onChange:V=>j(ae=>({...ae,quantity:Number(V.target.value)})),min:"1",className:"w-16 p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"})}),i.jsx("td",{className:"p-1",children:i.jsx("input",{type:"number",placeholder:"Đơn giá",value:_.unitPrice||"",onChange:V=>j(ae=>({...ae,unitPrice:Number(V.target.value)})),min:"0",className:"w-24 p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"})}),i.jsx("td",{}),i.jsx("td",{className:"p-1 text-right",children:i.jsx("button",{type:"button",onClick:X,className:"bg-sky-600 text-white rounded px-3 py-1 text-sm font-semibold hover:bg-sky-700",children:"Thêm"})})]})})]})})]})]})]})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/70 backdrop-blur-sm p-4 sm:p-6 border-t border-slate-200 dark:border-slate-700 flex-shrink-0",children:[i.jsxs("div",{className:"max-w-md ml-auto space-y-2 mb-4",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Phí dịch vụ:"})," ",i.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:ht(g.laborCost||0)})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Tiền phụ tùng:"})," ",i.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:ht(ce)})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Gia công/Đặt hàng:"})," ",i.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:ht(T)})]}),i.jsxs("div",{className:"flex justify-between items-center py-1",children:[i.jsx("label",{htmlFor:"wo-discount",className:"text-red-600 dark:text-red-400 font-bold text-base",children:"Giảm giá:"}),i.jsx("input",{id:"wo-discount",type:"number",name:"discount",value:g.discount||"",onChange:O,placeholder:"0",className:"w-32 px-2 py-1 bg-white dark:bg-slate-700 border-2 border-slate-300 dark:border-slate-600 rounded-lg shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500 text-red-600 dark:text-red-400 font-bold text-base text-right"})]}),i.jsxs("div",{className:"flex justify-between text-xl font-bold pt-2 border-t border-slate-300 dark:border-slate-600",children:[i.jsx("span",{className:"text-slate-900 dark:text-slate-100",children:"Tổng cộng:"})," ",i.jsx("span",{className:"text-sky-600 dark:text-sky-400",children:ht(U)})]})]}),i.jsxs("div",{className:"flex justify-end space-x-3",children:[i.jsxs("button",{type:"button",onClick:e,className:"flex items-center gap-2 bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-600",children:[i.jsx(mn,{className:"w-5 h-5"}),"Trở về"]}),i.jsx("button",{type:"submit",className:"bg-sky-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-sky-700",children:"Lưu Phiếu"})]})]})]})]})]})},Yb=({isOpen:t,onClose:e,workOrder:s,settings:a})=>{var g,p,v;if(!t||!s)return null;const c=()=>{var w;const b=(w=document.getElementById("invoice-print-area"))==null?void 0:w.innerHTML,k=document.body.innerHTML;if(b){const M=`
                <style>
                    @import url('https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@300;400;500;600;700&display=swap');
                    body { 
                        font-family: 'Be Vietnam Pro', sans-serif; 
                        color: #1e293b; /* slate-800 */
                        -webkit-print-color-adjust: exact !important;
                        print-color-adjust: exact !important;
                    }
                    table { width: 100%; border-collapse: collapse; }
                    th, td { padding: 8px 12px; border: 1px solid #e2e8f0; /* slate-200 */ text-align: left; }
                    th { background-color: #f8fafc !important; /* slate-50 */ }
                    .text-right { text-align: right; }
                    .font-bold { font-weight: 700; }
                    .text-lg { font-size: 1.125rem; }
                    .mt-4 { margin-top: 1rem; }
                    .mb-4 { margin-bottom: 1rem; }
                </style>
            `;document.body.innerHTML=M+b,window.print(),document.body.innerHTML=k,window.location.reload()}},f=((g=s.partsUsed)==null?void 0:g.reduce((b,k)=>b+k.price*k.quantity,0))||0,m=((p=s.quotationItems)==null?void 0:p.reduce((b,k)=>b+k.unitPrice*k.quantity,0))||0,x=((v=a.branches.find(b=>b.id===s.branchId))==null?void 0:v.name)||"N/A";return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4 print:hidden",children:i.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-lg shadow-xl w-full max-w-2xl transform transition-all my-8 max-h-[90vh] flex flex-col",children:[i.jsx("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:i.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-slate-800 dark:text-slate-100 text-center",children:"HÓA ĐƠN DỊCH VỤ"})}),i.jsxs("div",{className:"p-6 overflow-y-auto",id:"invoice-print-area",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("h3",{className:"text-lg sm:text-xl font-bold text-slate-900 dark:text-slate-100",children:a.name}),i.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[x," - ",a.address]}),i.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:["ĐT: ",a.phone]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 border-t border-b border-slate-200 dark:border-slate-700 py-4",children:[i.jsxs("div",{className:"dark:text-slate-300",children:[i.jsxs("p",{children:[i.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Mã Phiếu:"})," ",s.id]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Ngày tạo:"})," ",s.creationDate]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Kỹ thuật viên:"})," ",s.technicianName]})]}),i.jsxs("div",{className:"dark:text-slate-300",children:[i.jsxs("p",{children:[i.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Khách hàng:"})," ",s.customerName]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Điện thoại:"})," ",s.customerPhone]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Xe:"})," ",s.vehicleModel," (",s.licensePlate,")"]}),s.odometerReading&&i.jsxs("p",{children:[i.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Số km:"})," ",s.odometerReading.toLocaleString("vi-VN")," km"]})]})]}),i.jsxs("p",{className:"mt-4 dark:text-slate-300",children:[i.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Yêu cầu của khách:"})," ",s.issueDescription]}),i.jsx("div",{className:"mt-6",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 font-semibold text-slate-700 dark:text-slate-300",children:"#"}),i.jsx("th",{className:"p-2 font-semibold text-slate-700 dark:text-slate-300",children:"Mô tả"}),i.jsx("th",{className:"p-2 font-semibold text-slate-700 dark:text-slate-300 text-right",children:"SL"}),i.jsx("th",{className:"p-2 font-semibold text-slate-700 dark:text-slate-300 text-right",children:"Đơn giá"}),i.jsx("th",{className:"p-2 font-semibold text-slate-700 dark:text-slate-300 text-right",children:"Thành tiền"})]})}),i.jsx("tbody",{children:(s.partsUsed||[]).map((b,k)=>i.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[i.jsx("td",{className:"p-2 text-slate-700 dark:text-slate-300",children:k+1}),i.jsxs("td",{className:"p-2 text-slate-900 dark:text-slate-100 font-medium",children:[b.partName," ",i.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:["(",b.sku,")"]})]}),i.jsx("td",{className:"p-2 text-slate-900 dark:text-slate-100 text-right",children:b.quantity}),i.jsx("td",{className:"p-2 text-slate-900 dark:text-slate-100 text-right",children:ht(b.price)}),i.jsx("td",{className:"p-2 text-slate-900 dark:text-slate-100 text-right",children:ht(b.price*b.quantity)})]},b.partId))})]})}),s.quotationItems&&s.quotationItems.length>0&&i.jsxs("div",{className:"mt-4",children:[i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Các hạng mục gia công / đặt hàng:"}),i.jsx("table",{className:"w-full mt-1",children:i.jsx("tbody",{children:(s.quotationItems||[]).map((b,k)=>i.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[i.jsx("td",{className:"p-2 text-slate-700 dark:text-slate-300",children:k+1}),i.jsx("td",{className:"p-2 text-slate-900 dark:text-slate-100 font-medium",children:b.description}),i.jsx("td",{className:"p-2 text-slate-900 dark:text-slate-100 text-right",children:b.quantity}),i.jsx("td",{className:"p-2 text-slate-900 dark:text-slate-100 text-right",children:ht(b.unitPrice)}),i.jsx("td",{className:"p-2 text-slate-900 dark:text-slate-100 text-right",children:ht(b.unitPrice*b.quantity)})]},b.id))})})]}),i.jsx("div",{className:"mt-6 flex justify-end",children:i.jsxs("div",{className:"w-full max-w-xs space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-slate-800 dark:text-slate-300",children:[i.jsx("span",{children:"Tiền phụ tùng:"}),i.jsx("span",{children:ht(f)})]}),m>0&&i.jsxs("div",{className:"flex justify-between text-slate-800 dark:text-slate-300",children:[i.jsx("span",{children:"Gia công/Đặt hàng:"}),i.jsx("span",{children:ht(m)})]}),i.jsxs("div",{className:"flex justify-between text-slate-800 dark:text-slate-300",children:[i.jsx("span",{children:"Tiền công:"}),i.jsx("span",{children:ht(s.laborCost||0)})]}),(s.discount||0)>0&&i.jsxs("div",{className:"flex justify-between text-slate-800 dark:text-slate-300",children:[i.jsx("span",{children:"Giảm giá:"}),i.jsxs("span",{className:"font-medium text-red-600",children:["-",ht(s.discount)]})]}),i.jsxs("div",{className:"flex justify-between text-xl font-bold text-slate-900 dark:text-slate-100 border-t border-slate-300 dark:border-slate-600 pt-2",children:[i.jsx("span",{children:"TỔNG CỘNG:"}),i.jsx("span",{children:ht(s.total)})]})]})}),i.jsxs("div",{className:"text-center mt-8 text-sm text-slate-700 dark:text-slate-400",children:[i.jsxs("p",{children:["Cảm ơn quý khách đã sử dụng dịch vụ của ",a.name,"!"]}),i.jsxs("p",{children:["Thông tin thanh toán: ",a.bankName," - ",a.bankAccountNumber," - ",a.bankAccountHolder]})]})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 px-6 py-4 flex justify-end space-x-3 border-t border-slate-200 dark:border-slate-700",children:[i.jsx("button",{onClick:e,className:"bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-600",children:"Đóng"}),i.jsxs("button",{onClick:c,className:"flex items-center bg-sky-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-sky-700",children:[i.jsx(Ai,{className:"w-5 h-5 mr-2"})," In hóa đơn"]})]})]})})},hi=15,Kb=({currentUser:t,workOrders:e,setWorkOrders:s,parts:a,storeSettings:c,currentBranchId:f,customers:m,setCustomers:x})=>{const[g,p]=N.useState(!1),[v,b]=N.useState(null),[k,w]=N.useState("all"),[M,A]=N.useState(!1),[_,j]=N.useState(null),[D,I]=N.useState(1),[q,ee]=N.useState(null);N.useEffect(()=>{I(1)},[k,f]);const se=(E=null)=>{b(E),p(!0)},F=()=>{p(!1),b(null)},oe=E=>{j(E),A(!0)},$=()=>{A(!1),j(null)},Z=E=>{var X;s(v?re=>re.map(ie=>ie.id===E.id?E:ie):re=>[E,...re]),E.status==="Trả máy"&&((X=E.serviceTypes)!=null&&X.includes("Thay nhớt"))&&E.odometerReading&&x(re=>re.map(ie=>ie.phone===E.customerPhone&&(!ie.lastServiceDate||new Date(E.creationDate)>=new Date(ie.lastServiceDate))?{...ie,lastServiceOdometer:E.odometerReading,lastServiceDate:E.creationDate}:ie)),F()},Q=E=>{window.confirm("Bạn có chắc chắn muốn xóa phiếu sửa chữa này không? Hành động này không thể hoàn tác.")&&s(X=>X.filter(re=>re.id!==E))},O=E=>{switch(E){case"Tiếp nhận":return"bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200";case"Đang sửa":return"bg-sky-100 text-sky-800 dark:bg-sky-900/50 dark:text-sky-300";case"Đã sửa xong":return"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300";case"Trả máy":return"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300";default:return"bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200"}},ue=N.useMemo(()=>{const E=e.filter(X=>X.branchId===f).sort((X,re)=>new Date(re.creationDate).getTime()-new Date(X.creationDate).getTime());return k==="all"?E:E.filter(X=>X.status===k)},[e,k,f]),me=N.useMemo(()=>{const E=(D-1)*hi;return ue.slice(E,E+hi)},[ue,D]),Te=Math.ceil(ue.length/hi);return i.jsxs("div",{className:"space-y-6",children:[i.jsx(Jb,{isOpen:g,onClose:F,onSave:Z,workOrder:v,parts:a,currentBranchId:f,customers:m,setCustomers:x}),i.jsx(Yb,{isOpen:M,onClose:$,workOrder:_,settings:c}),i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-4",children:[i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 overflow-x-auto",children:i.jsxs("nav",{className:"-mb-px flex space-x-4 sm:space-x-8","aria-label":"Tabs",children:[i.jsx("button",{onClick:()=>w("all"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ${k==="all"?"border-sky-500 text-sky-600 dark:border-sky-400 dark:text-sky-400":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200 hover:border-slate-300 dark:hover:border-slate-600"}`,children:"Tất cả"}),i.jsx("button",{onClick:()=>w("Tiếp nhận"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ${k==="Tiếp nhận"?"border-sky-500 text-sky-600 dark:border-sky-400 dark:text-sky-400":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200 hover:border-slate-300 dark:hover:border-slate-600"}`,children:"Tiếp nhận"}),i.jsx("button",{onClick:()=>w("Đang sửa"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ${k==="Đang sửa"?"border-sky-500 text-sky-600 dark:border-sky-400 dark:text-sky-400":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200 hover:border-slate-300 dark:hover:border-slate-600"}`,children:"Đang sửa"}),i.jsx("button",{onClick:()=>w("Đã sửa xong"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ${k==="Đã sửa xong"?"border-sky-500 text-sky-600 dark:border-sky-400 dark:text-sky-400":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200 hover:border-slate-300 dark:hover:border-slate-600"}`,children:"Đã sửa xong"}),i.jsx("button",{onClick:()=>w("Trả máy"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ${k==="Trả máy"?"border-sky-500 text-sky-600 dark:border-sky-400 dark:text-sky-400":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200 hover:border-slate-300 dark:hover:border-slate-600"}`,children:"Trả máy"})]})}),i.jsx("div",{className:"flex-shrink-0",children:i.jsxs("button",{onClick:()=>se(),className:"flex items-center justify-center bg-sky-600 text-white font-semibold py-2 px-4 rounded-lg shadow-sm hover:bg-sky-700 transition-colors w-full sm:w-auto",children:[i.jsx(yt,{}),i.jsx("span",{className:"ml-2",children:"Thêm Phiếu"})]})})]}),i.jsx("div",{className:"lg:hidden space-y-4",children:me.map(E=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700",children:[i.jsx("div",{className:"p-4 cursor-pointer",onClick:()=>ee(X=>X===E.id?null:E.id),children:i.jsxs("div",{className:"flex justify-between items-start gap-3",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full ${O(E.status)}`,children:E.status}),i.jsx("p",{className:"font-semibold text-sky-600 dark:text-sky-400 truncate",children:E.id})]}),i.jsx("p",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:E.customerName}),i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[E.vehicleModel," (",E.licensePlate,")"]})]}),i.jsxs("div",{className:"text-right flex-shrink-0",children:[E.discount&&E.discount>0&&i.jsxs("p",{className:"text-xs text-red-500 dark:text-red-400",children:["-",ht(E.discount)]}),i.jsx("p",{className:"text-base font-bold text-slate-900 dark:text-slate-100",children:ht(E.total)}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:E.creationDate})]}),i.jsx("div",{className:"pt-1",children:i.jsx(Lc,{className:`w-5 h-5 text-slate-400 transition-transform ${q===E.id?"rotate-180":""}`})})]})}),q===E.id&&i.jsx("div",{className:"px-4 pb-4 -mt-2",children:i.jsxs("div",{className:"pt-3 border-t border-slate-200 dark:border-slate-700 space-y-2 text-sm",children:[E.issueDescription&&i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Mô tả sự cố:"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 whitespace-pre-wrap",children:E.issueDescription})]}),E.technicianName&&i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Kỹ thuật viên:"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:E.technicianName})]}),E.notes&&i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Ghi chú nội bộ:"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 whitespace-pre-wrap",children:E.notes})]}),!E.issueDescription&&!E.technicianName&&!E.notes&&i.jsx("p",{className:"text-slate-500 dark:text-slate-400 italic",children:"Không có thông tin chi tiết."})]})}),i.jsx("div",{className:"px-4 pb-3 pt-3 border-t border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[i.jsxs("button",{onClick:()=>oe(E),className:"text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-300 flex items-center text-sm",children:[i.jsx(Ai,{className:"w-5 h-5 mr-1"}),i.jsx("span",{children:"In"})]}),i.jsxs("button",{onClick:()=>Q(E.id),className:"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 flex items-center text-sm",children:[i.jsx(fn,{className:"w-5 h-5 mr-1"}),i.jsx("span",{children:"Xóa"})]}),i.jsxs("button",{onClick:()=>se(E),className:"text-sky-600 dark:text-sky-400 hover:text-sky-800 dark:hover:text-sky-300 flex items-center text-sm font-semibold",children:[i.jsx(bl,{className:"w-5 h-5 mr-1"}),i.jsx("span",{children:"Xử lý"})]})]})})]},E.id))}),i.jsxs("div",{className:"hidden lg:block bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-slate-200/60 dark:border-slate-700 overflow-x-auto",children:[i.jsxs("table",{className:"w-full text-left min-w-max",children:[i.jsx("thead",{className:"border-b border-slate-200 dark:border-slate-700",children:i.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-700/50",children:[i.jsx("th",{className:"p-4 font-semibold text-slate-600 dark:text-slate-300",children:"Mã Phiếu"}),i.jsx("th",{className:"p-4 font-semibold text-slate-600 dark:text-slate-300",children:"Khách hàng"}),i.jsx("th",{className:"p-4 font-semibold text-slate-600 dark:text-slate-300",children:"Xe"}),i.jsx("th",{className:"p-4 font-semibold text-slate-600 dark:text-slate-300",children:"Ngày tạo"}),i.jsx("th",{className:"p-4 font-semibold text-slate-600 dark:text-slate-300",children:"Trạng thái"}),i.jsx("th",{className:"p-4 font-semibold text-slate-600 dark:text-slate-300 text-right",children:"Tổng chi phí"}),i.jsx("th",{className:"p-4 font-semibold text-slate-600 dark:text-slate-300",children:"Hành động"})]})}),i.jsx("tbody",{children:me.map(E=>i.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[i.jsx("td",{className:"p-4 font-semibold text-sky-600 dark:text-sky-400",children:E.id}),i.jsxs("td",{className:"p-4 text-slate-900 dark:text-slate-100",children:[E.customerName,i.jsx("br",{}),i.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:E.customerPhone})]}),i.jsxs("td",{className:"p-4 text-slate-800 dark:text-slate-200",children:[E.vehicleModel,i.jsx("br",{}),i.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:E.licensePlate})]}),i.jsx("td",{className:"p-4 text-slate-700 dark:text-slate-300",children:E.creationDate}),i.jsx("td",{className:"p-4",children:i.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${O(E.status)}`,children:E.status})}),i.jsx("td",{className:"p-4 text-slate-900 dark:text-slate-100 font-bold text-right",children:ht(E.total)}),i.jsx("td",{className:"p-4",children:i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("button",{onClick:()=>se(E),className:"text-sky-600 dark:text-sky-400 hover:text-sky-800 dark:hover:text-sky-300 flex items-center",children:[i.jsx(bl,{className:"w-5 h-5"}),i.jsx("span",{className:"ml-1",children:"Xử lý"})]}),i.jsxs("button",{onClick:()=>oe(E),className:"text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-300 flex items-center",children:[i.jsx(Ai,{className:"w-5 h-5"}),i.jsx("span",{className:"ml-1",children:"In"})]}),i.jsxs("button",{onClick:()=>Q(E.id),className:"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 flex items-center",children:[i.jsx(fn,{className:"w-5 h-5"}),i.jsx("span",{className:"ml-1",children:"Xóa"})]})]})})]},E.id))})]}),me.length===0&&i.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"Không có phiếu sửa chữa nào."})]}),ue.length>0&&i.jsx(kl,{currentPage:D,totalPages:Te,onPageChange:I,itemsPerPage:hi,totalItems:ue.length}),ue.length===0&&i.jsx("p",{className:"lg:hidden text-center text-slate-500 dark:text-slate-400 py-8",children:"Không có phiếu sửa chữa nào."})]})},i0=t=>isNaN(t)?"0 ₫":new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(t),pi=50,$b=({isOpen:t,onClose:e,onSave:s,part:a,parts:c,allCategories:f,onAddCategory:m,currentBranchId:x})=>{var F;const[g,p]=N.useState(()=>a?{...a}:{name:"",sku:"",stock:{},price:0,sellingPrice:0,category:""}),[v,b]=N.useState(!1),[k,w]=N.useState(!1),[M,A]=N.useState("");N.useEffect(()=>{t&&(a?(p({...a}),b(!0)):(p({name:"",sku:"",stock:{},price:0,sellingPrice:0,category:""}),b(!1)),w(!1),A(""))},[a,t]);const _=oe=>{if(!oe||oe.trim()==="")return"";const Z=oe.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/đ/g,"d").replace(/Đ/g,"D").replace(/[^a-zA-Z0-9\s]/g,"").trim().toUpperCase().split(/\s+/).filter(Boolean);if(Z.length===0)return"";const Q=Z.slice(0,3).map(ue=>ue[0]).join(""),O=Math.floor(1e3+Math.random()*9e3);return`${Q}-${O}`},j=oe=>{const{name:$,value:Z,type:Q}=oe.target;$==="sku"&&b(!0);const ue=Q==="number"?parseFloat(Z)||0:Z;if($==="name"&&!v){const me=_(Z);p(Te=>({...Te,name:Z,sku:me}))}else if($==="quantity")p(me=>({...me,stock:{...me.stock,[x]:ue}}));else if($==="price"){const me=ue;p(Te=>({...Te,price:me,sellingPrice:Math.round(me*1.3/1e3)*1e3}))}else p(me=>({...me,[$]:ue}))},D=()=>{const oe=M.trim();oe&&!f.includes(oe)&&(m(oe),p($=>({...$,category:oe}))),A(""),w(!1)},I=()=>{let oe=g.sku;return!oe&&g.name&&(oe=_(g.name)),{id:(a==null?void 0:a.id)||`P${String(Math.floor(Math.random()*9e3)+1e3)}`,...g,sku:oe}},q=()=>{const oe=I();s(oe)},ee=()=>{const oe=I();s(oe),e()};if(!t)return null;const se=((F=g.stock)==null?void 0:F[x])??0;return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:i.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-lg shadow-xl w-full max-w-lg",children:i.jsxs("form",{onSubmit:oe=>oe.preventDefault(),children:[i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100 mb-6",children:a!=null&&a.id?"Chỉnh sửa Phụ tùng":"Thêm Phụ tùng mới"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"part-name",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Tên phụ tùng"}),i.jsx("input",{id:"part-name",type:"text",name:"name",value:g.name,onChange:j,placeholder:"VD: Bugi NGK Iridium",className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 text-slate-900 dark:text-slate-100",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"part-sku",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"SKU"}),i.jsx("input",{id:"part-sku",type:"text",name:"sku",value:g.sku,onChange:j,placeholder:"Tự động tạo hoặc nhập thủ công",className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 text-slate-900 dark:text-slate-100",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Danh mục sản phẩm"}),i.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[i.jsxs("select",{name:"category",value:g.category||"",onChange:j,className:"block w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 text-slate-900 dark:text-slate-100",children:[i.jsx("option",{value:"",children:"-- Chọn danh mục --"}),f.map(oe=>i.jsx("option",{value:oe,children:oe},oe))]}),i.jsx("button",{type:"button",onClick:()=>w(!k),className:"p-2 bg-slate-200 dark:bg-slate-700 rounded-md hover:bg-slate-300 dark:hover:bg-slate-600 flex-shrink-0",children:i.jsx(yt,{className:"w-5 h-5 text-slate-700 dark:text-slate-200"})})]}),k&&i.jsxs("div",{className:"mt-2 flex items-center space-x-2",children:[i.jsx("input",{type:"text",value:M,onChange:oe=>A(oe.target.value),placeholder:"Tên danh mục mới...",className:"block w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 text-slate-900 dark:text-slate-100",autoFocus:!0}),i.jsx("button",{type:"button",onClick:D,className:"px-4 py-2 bg-sky-600 text-white rounded-md text-sm font-medium hover:bg-sky-700",children:"Lưu"})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"part-quantity",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Số lượng tồn kho (Chi nhánh hiện tại)"}),i.jsx("input",{id:"part-quantity",type:"number",name:"quantity",value:se,onChange:j,placeholder:"0",className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 text-slate-900 dark:text-slate-100",required:!0})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"part-price",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Giá nhập"}),i.jsx("input",{id:"part-price",type:"number",name:"price",value:g.price,onChange:j,placeholder:"80000",className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 text-slate-900 dark:text-slate-100",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"part-sellingPrice",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Giá bán"}),i.jsx("input",{id:"part-sellingPrice",type:"number",name:"sellingPrice",value:g.sellingPrice,onChange:j,placeholder:"110000",className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 text-slate-900 dark:text-slate-100",required:!0})]})]})]})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 px-6 py-3 flex justify-end space-x-3 border-t dark:border-slate-700",children:[i.jsxs("button",{type:"button",onClick:e,className:"flex items-center gap-2 bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-600",children:[i.jsx(mn,{className:"w-5 h-5"}),"Trở về"]}),a!=null&&a.id?i.jsxs(i.Fragment,{children:[i.jsx("button",{type:"button",onClick:q,className:"bg-slate-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Lưu thay đổi"}),i.jsx("button",{type:"button",onClick:ee,className:"bg-sky-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-sky-700",children:"Lưu & Đóng"})]}):i.jsx("button",{type:"button",onClick:ee,className:"bg-sky-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-sky-700",children:"Lưu Phụ tùng"})]})]})})})},Xb=({isOpen:t,onClose:e,onSave:s,parts:a,type:c,currentBranchId:f})=>{const[m,x]=N.useState(""),[g,p]=N.useState(1),[v,b]=N.useState(""),[k,w]=N.useState(void 0);N.useEffect(()=>{t&&(x(""),p(1),b(""),w(void 0))},[t]);const M=a.find(j=>j.id===m),A=c==="Xuất kho"?(M==null?void 0:M.stock[f])||0:1/0,_=()=>{if(!m||g<=0||c==="Xuất kho"&&g>A)return;const j=a.find(D=>D.id===m);j&&s({partId:m,partName:j.name,quantity:g,notes:v,unitPrice:k,type:c,branchId:f})};return t?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-lg shadow-xl w-full max-w-lg",children:[i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100 mb-6",children:c==="Nhập kho"?"Tạo Phiếu Nhập Kho":"Tạo Phiếu Xuất Kho"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Phụ tùng"}),i.jsxs("select",{value:m,onChange:j=>{x(j.target.value);const D=a.find(I=>I.id===j.target.value);c==="Nhập kho"&&D&&w(D.price)},className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 text-slate-900 dark:text-slate-100",children:[i.jsx("option",{value:"",children:"-- Chọn phụ tùng --"}),a.map(j=>i.jsxs("option",{value:j.id,children:[j.name," (",j.sku,") - Tồn: ",j.stock[f]||0]},j.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Số lượng"}),i.jsx("input",{type:"number",value:g,onChange:j=>p(Number(j.target.value)),min:"1",max:c==="Xuất kho"?A:void 0,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 text-slate-900 dark:text-slate-100"}),c==="Xuất kho"&&i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:["Tồn kho hiện tại: ",A]})]}),c==="Nhập kho"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Đơn giá nhập"}),i.jsx("input",{type:"number",value:k??"",onChange:j=>w(Number(j.target.value)),className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 text-slate-900 dark:text-slate-100"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Ghi chú"}),i.jsx("input",{type:"text",value:v,onChange:j=>b(j.target.value),placeholder:"VD: Nhập hàng từ nhà cung cấp A",className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 text-slate-900 dark:text-slate-100"})]})]})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 px-6 py-3 flex justify-end space-x-3 border-t dark:border-slate-700",children:[i.jsxs("button",{type:"button",onClick:e,className:"flex items-center gap-2 bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-600",children:[i.jsx(mn,{className:"w-5 h-5"}),"Trở về"]}),i.jsx("button",{type:"button",onClick:_,className:"bg-sky-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-sky-700",children:"Lưu"})]})]})}):null},Qb=({part:t,transactions:e,onClose:s,storeSettings:a})=>{const c=N.useMemo(()=>t?e.filter(f=>f.partId===t.id).sort((f,m)=>new Date(m.date).getTime()-new Date(f.date).getTime()):[],[t,e]);return t?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] flex flex-col",children:[i.jsx("div",{className:"p-6 border-b dark:border-slate-700",children:i.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:["Lịch sử giao dịch: ",t.name]})}),i.jsx("div",{className:"p-6 overflow-y-auto",children:c.length===0?i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Không có giao dịch nào cho phụ tùng này."}):i.jsxs("table",{className:"w-full text-left",children:[i.jsx("thead",{className:"sticky top-0 bg-slate-50 dark:bg-slate-800 z-10",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 font-semibold text-slate-700 dark:text-slate-300",children:"Ngày"}),i.jsx("th",{className:"p-2 font-semibold text-slate-700 dark:text-slate-300",children:"Loại"}),i.jsx("th",{className:"p-2 font-semibold text-slate-700 dark:text-slate-300",children:"Số lượng"}),i.jsx("th",{className:"p-2 font-semibold text-slate-700 dark:text-slate-300",children:"Chi nhánh"}),i.jsx("th",{className:"p-2 font-semibold text-slate-700 dark:text-slate-300",children:"Ghi chú"})]})}),i.jsx("tbody",{children:c.map(f=>{var m;return i.jsxs("tr",{className:"border-b dark:border-slate-700",children:[i.jsx("td",{className:"p-2 text-slate-800 dark:text-slate-200",children:f.date}),i.jsx("td",{className:"p-2",children:i.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${f.type==="Nhập kho"?"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"}`,children:f.type})}),i.jsx("td",{className:"p-2 font-medium text-slate-800 dark:text-slate-200",children:f.quantity}),i.jsx("td",{className:"p-2 text-slate-800 dark:text-slate-200",children:((m=a.branches.find(x=>x.id===f.branchId))==null?void 0:m.name)||f.branchId}),i.jsx("td",{className:"p-2 text-sm text-slate-600 dark:text-slate-400",children:f.notes})]},f.id)})})]})}),i.jsx("div",{className:"bg-slate-50 dark:bg-slate-800 px-6 py-3 mt-auto border-t dark:border-slate-700",children:i.jsx("button",{type:"button",onClick:s,className:"w-full bg-slate-200 dark:bg-slate-700 text-slate-800 dark:text-slate-200 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-600",children:"Đóng"})})]})}):null},Zb=({isOpen:t,onClose:e,onSave:s,parts:a,branches:c,currentBranchId:f})=>{const[m,x]=N.useState(""),[g,p]=N.useState(f),[v,b]=N.useState(""),[k,w]=N.useState(1),[M,A]=N.useState("");N.useEffect(()=>{t&&(x(""),p(f),b(""),w(1),A(""))},[t,f]);const _=a.find(q=>q.id===m),j=(_==null?void 0:_.stock[g])||0,D=!m||!g||!v||g===v||k<=0||k>j,I=()=>{D||s({partId:m,fromBranchId:g,toBranchId:v,quantity:k,notes:M})};return t?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-lg shadow-xl w-full max-w-lg",children:[i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100 mb-6",children:"Tạo Phiếu Chuyển Kho"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Phụ tùng"}),i.jsxs("select",{value:m,onChange:q=>x(q.target.value),className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 text-slate-900 dark:text-slate-100",children:[i.jsx("option",{value:"",children:"-- Chọn phụ tùng --"}),a.map(q=>i.jsxs("option",{value:q.id,children:[q.name," (",q.sku,")"]},q.id))]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Từ chi nhánh"}),i.jsx("select",{value:g,onChange:q=>p(q.target.value),className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 text-slate-900 dark:text-slate-100",children:c.map(q=>i.jsx("option",{value:q.id,children:q.name},q.id))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Đến chi nhánh"}),i.jsxs("select",{value:v,onChange:q=>b(q.target.value),className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 text-slate-900 dark:text-slate-100",disabled:!g,children:[i.jsx("option",{value:"",children:"-- Chọn --"}),c.filter(q=>q.id!==g).map(q=>i.jsx("option",{value:q.id,children:q.name},q.id))]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Số lượng chuyển"}),i.jsx("input",{type:"number",value:k,onChange:q=>w(Number(q.target.value)),min:"1",max:j,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 text-slate-900 dark:text-slate-100"}),i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:["Tồn kho tại chi nhánh nguồn: ",j]}),k>j&&i.jsx("p",{className:"text-red-500 text-xs mt-1",children:"Số lượng vượt quá tồn kho!"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Ghi chú"}),i.jsx("input",{type:"text",value:M,onChange:q=>A(q.target.value),placeholder:"VD: Điều chuyển hàng cuối tháng",className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 text-slate-900 dark:text-slate-100"})]})]})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 px-6 py-3 flex justify-end space-x-3 border-t dark:border-slate-700",children:[i.jsxs("button",{type:"button",onClick:e,className:"flex items-center gap-2 bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-600",children:[i.jsx(mn,{className:"w-5 h-5"}),"Trở về"]}),i.jsx("button",{type:"button",onClick:I,disabled:D,className:"bg-orange-500 text-white font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-orange-600 disabled:bg-orange-300 disabled:cursor-not-allowed",children:"Tạo phiếu"})]})]})}):null},Wb=({isOpen:t,onClose:e,categories:s,onAdd:a,onEdit:c,onDelete:f})=>{const[m,x]=N.useState([]),[g,p]=N.useState("");N.useEffect(()=>{t&&(x([...s]),p(""))},[t,s]);const v=(w,M)=>{const A=[...m];A[w]=M,x(A)},b=()=>{for(let w=0;w<s.length;w++)s[w]!==m[w]&&c(s[w],m[w]);e()},k=()=>{const w=g.trim();w&&!m.includes(w)&&(a(w),x(M=>[...M,w]),p(""))};return t?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-lg shadow-xl w-full max-w-xl max-h-[90vh] flex flex-col",children:[i.jsx("div",{className:"p-6 border-b dark:border-slate-700",children:i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:"Cài đặt Danh mục sản phẩm"})}),i.jsxs("div",{className:"p-6 overflow-y-auto space-y-3",children:[m.map((w,M)=>i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"text",value:w,onChange:A=>v(M,A.target.value),className:"block w-full px-3 py-2 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500"}),i.jsx("button",{type:"button",onClick:()=>{window.confirm(`Bạn có chắc muốn xóa danh mục "${s[M]}"? Các sản phẩm thuộc danh mục này sẽ được chuyển về "Chưa phân loại".`)&&f(s[M])},className:"p-2 text-red-500 hover:bg-red-100 dark:hover:bg-red-900/50 rounded-md flex-shrink-0",title:"Xóa danh mục",children:i.jsx(fn,{className:"w-5 h-5"})})]},M)),i.jsxs("div",{className:"pt-4 border-t dark:border-slate-700",children:[i.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Thêm danh mục mới"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"text",value:g,onChange:w=>p(w.target.value),placeholder:"Tên danh mục mới...",className:"block w-full px-3 py-2 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-md",onKeyDown:w=>{w.key==="Enter"&&k()}}),i.jsx("button",{type:"button",onClick:k,className:"px-4 py-2 bg-sky-600 text-white rounded-md text-sm font-medium hover:bg-sky-700 flex-shrink-0",children:"Thêm"})]})]})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 px-6 py-3 mt-auto border-t dark:border-slate-700 flex justify-end space-x-3",children:[i.jsxs("button",{type:"button",onClick:e,className:"flex items-center gap-2 bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-600",children:[i.jsx(mn,{className:"w-5 h-5"}),"Trở về"]}),i.jsx("button",{type:"button",onClick:b,className:"bg-orange-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-orange-600",children:"Lưu thay đổi"})]})]})}):null},ek=({currentUser:t,parts:e,setParts:s,transactions:a,setTransactions:c,currentBranchId:f,storeSettings:m})=>{const[x,g]=N.useState(!1),[p,v]=N.useState(!1),[b,k]=N.useState("Nhập kho"),[w,M]=N.useState(!1),[A,_]=N.useState(!1),[j,D]=N.useState(!1),[I,q]=N.useState(null),[ee,se]=N.useState(""),[F,oe]=N.useState(1),[$,Z]=N.useState(null),Q=N.useRef(null),O=N.useMemo(()=>e.filter(T=>T.name.toLowerCase().includes(ee.toLowerCase())||T.sku.toLowerCase().includes(ee.toLowerCase())),[e,ee]),ue=N.useMemo(()=>{const T=(F-1)*pi;return O.slice(T,T+pi)},[O,F]),me=Math.ceil(O.length/pi),Te=N.useMemo(()=>Array.from(new Set(e.map(T=>T.category).filter(T=>!!T))).sort(),[e]);N.useEffect(()=>{const T=U=>{Q.current&&!Q.current.contains(U.target)&&Z(null)};return document.addEventListener("mousedown",T),()=>document.removeEventListener("mousedown",T)},[]);const E=T=>{s(U=>U.some(G=>G.id===T.id)?U.map(G=>G.id===T.id?T:G):[T,...U])},X=T=>{window.confirm("Bạn có chắc muốn xóa phụ tùng này? Hành động này không thể hoàn tác.")&&s(U=>U.filter(J=>J.id!==T))},re=T=>{const U={id:`T-${Date.now()}`,date:new Date().toISOString().split("T")[0],totalPrice:(T.unitPrice||0)*T.quantity,...T};c(J=>[U,...J]),s(J=>J.map(G=>{if(G.id===U.partId){const de={...G.stock},ge=de[U.branchId]||0;de[U.branchId]=U.type==="Nhập kho"?ge+U.quantity:ge-U.quantity;const V={...G,stock:de};return U.type==="Nhập kho"&&U.unitPrice&&(V.price=U.unitPrice),V}return G})),v(!1)},ie=T=>{var ge,V;const U=`TR-${Date.now()}`,J=e.find(ae=>ae.id===T.partId);if(!J)return;const G={id:`T-EXP-${U}`,type:"Xuất kho",partId:T.partId,partName:J.name,quantity:T.quantity,date:new Date().toISOString().split("T")[0],notes:`Chuyển đến ${(ge=m.branches.find(ae=>ae.id===T.toBranchId))==null?void 0:ge.name}. ${T.notes}`,unitPrice:J.price,totalPrice:J.price*T.quantity,branchId:T.fromBranchId,transferId:U},de={id:`T-IMP-${U}`,type:"Nhập kho",partId:T.partId,partName:J.name,quantity:T.quantity,date:new Date().toISOString().split("T")[0],notes:`Nhận từ ${(V=m.branches.find(ae=>ae.id===T.fromBranchId))==null?void 0:V.name}. ${T.notes}`,unitPrice:J.price,totalPrice:J.price*T.quantity,branchId:T.toBranchId,transferId:U};c(ae=>[G,de,...ae]),s(ae=>ae.map(xe=>{if(xe.id===T.partId){const ne={...xe.stock};return ne[T.fromBranchId]=(ne[T.fromBranchId]||0)-T.quantity,ne[T.toBranchId]=(ne[T.toBranchId]||0)+T.quantity,{...xe,stock:ne}}return xe})),_(!1)},ce=(T,U)=>{switch(T){case"add":break;case"edit":s(J=>J.map(G=>G.category===U.oldName?{...G,category:U.newName}:G));break;case"delete":s(J=>J.map(G=>G.category===U.name?{...G,category:"Chưa phân loại"}:G));break}};return i.jsxs("div",{className:"space-y-6",children:[i.jsx($b,{isOpen:x,onClose:()=>g(!1),onSave:E,part:I,parts:e,allCategories:Te,onAddCategory:T=>ce("add",{name:T}),currentBranchId:f}),i.jsx(Xb,{isOpen:p,onClose:()=>v(!1),onSave:re,parts:e,type:b,currentBranchId:f}),i.jsx(Qb,{part:I,transactions:a,onClose:()=>{M(!1),q(null)},storeSettings:m}),i.jsx(Zb,{isOpen:A,onClose:()=>_(!1),onSave:ie,parts:e,branches:m.branches,currentBranchId:f}),i.jsx(Wb,{isOpen:j,onClose:()=>D(!1),categories:Te,onAdd:T=>ce("add",{name:T}),onEdit:(T,U)=>ce("edit",{oldName:T,newName:U}),onDelete:T=>ce("delete",{name:T})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border border-slate-200/60 dark:border-slate-700",children:i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-4",children:[i.jsx("input",{type:"text",placeholder:"Tìm kiếm phụ tùng (tên, SKU)...",value:ee,onChange:T=>se(T.target.value),className:"w-full sm:w-72 p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 dark:text-slate-100"}),i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[i.jsxs("button",{onClick:()=>{q(null),g(!0)},className:"flex items-center gap-2 bg-sky-600 text-white font-semibold py-2 px-3 rounded-lg shadow-sm hover:bg-sky-700 text-sm",children:[i.jsx(yt,{})," Thêm SP"]}),i.jsxs(Li,{to:"/inventory/goods-receipt/new",className:"flex items-center gap-2 bg-green-600 text-white font-semibold py-2 px-3 rounded-lg shadow-sm hover:bg-green-700 text-sm",children:[i.jsx(Kp,{})," Phiếu nhập"]}),i.jsxs("button",{onClick:()=>{k("Xuất kho"),v(!0)},className:"flex items-center gap-2 bg-red-500 text-white font-semibold py-2 px-3 rounded-lg shadow-sm hover:bg-red-600 text-sm",children:[i.jsx(Pi,{})," Xuất lẻ"]}),i.jsxs("button",{onClick:()=>_(!0),className:"flex items-center gap-2 bg-orange-500 text-white font-semibold py-2 px-3 rounded-lg shadow-sm hover:bg-orange-600 text-sm",children:[i.jsx(Nb,{})," Chuyển kho"]}),i.jsx("button",{onClick:()=>D(!0),className:"p-2.5 bg-slate-100 dark:bg-slate-700 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600",title:"Cài đặt danh mục",children:i.jsx(Pc,{className:"w-5 h-5 text-slate-700 dark:text-slate-200"})})]})]})}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-slate-200/60 dark:border-slate-700 overflow-x-auto",children:[i.jsxs("table",{className:"w-full text-left min-w-max",children:[i.jsx("thead",{className:"border-b dark:border-slate-700 bg-slate-50 dark:bg-slate-700/50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-4 font-semibold text-slate-600 dark:text-slate-300",children:"Tên Phụ tùng"}),i.jsx("th",{className:"p-4 font-semibold text-slate-600 dark:text-slate-300",children:"SKU"}),m.branches.map(T=>i.jsx("th",{className:"p-4 font-semibold text-slate-600 dark:text-slate-300 text-center",children:T.name},T.id)),i.jsx("th",{className:"p-4 font-semibold text-slate-600 dark:text-slate-300 text-right",children:"Giá nhập"}),i.jsx("th",{className:"p-4 font-semibold text-slate-600 dark:text-slate-300 text-right",children:"Giá bán"}),i.jsx("th",{className:"p-4 font-semibold text-slate-600 dark:text-slate-300 text-center",children:"Tùy chọn"})]})}),i.jsx("tbody",{children:ue.map(T=>i.jsxs("tr",{className:"border-b dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[i.jsxs("td",{className:"p-4",children:[i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-100",children:T.name}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:T.category})]}),i.jsx("td",{className:"p-4 text-slate-600 dark:text-slate-400 font-mono",children:T.sku}),m.branches.map(U=>{const J=T.stock[U.id]||0;return i.jsx("td",{className:`p-4 text-center font-bold ${J<5&&J>0?"text-amber-600 dark:text-amber-400":"text-slate-800 dark:text-slate-200"}`,children:J},U.id)}),i.jsx("td",{className:"p-4 text-slate-700 dark:text-slate-300 text-right",children:i0(T.price)}),i.jsx("td",{className:"p-4 text-sky-600 dark:text-sky-400 font-semibold text-right",children:i0(T.sellingPrice)}),i.jsx("td",{className:"p-4 text-center",children:i.jsxs("div",{className:"relative inline-block",ref:$===T.id?Q:null,children:[i.jsx("button",{onClick:()=>Z(T.id),className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-600 dark:text-slate-300",children:i.jsx(wb,{className:"w-5 h-5"})}),$===T.id&&i.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-slate-800 rounded-md shadow-lg border dark:border-slate-700 z-10",children:[i.jsx("button",{onClick:()=>{q(T),g(!0),Z(null)},className:"block w-full text-left px-4 py-2 text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700",children:"Chỉnh sửa"}),i.jsx("button",{onClick:()=>{q(T),M(!0),Z(null)},className:"block w-full text-left px-4 py-2 text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700",children:"Lịch sử"}),i.jsx("button",{onClick:()=>{X(T.id),Z(null)},className:"block w-full text-left px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/50",children:"Xóa"})]})]})})]},T.id))})]}),ue.length===0&&i.jsx("p",{className:"text-center p-8 text-slate-500 dark:text-slate-400",children:"Không tìm thấy phụ tùng nào."})]}),me>1&&i.jsx(kl,{currentPage:F,totalPages:me,onPageChange:oe,itemsPerPage:pi,totalItems:O.length})]})},tk=({isOpen:t,onClose:e,onSave:s,customer:a})=>{const[c,f]=N.useState(()=>a?{...a}:{name:"",phone:"",vehicle:"",licensePlate:"",loyaltyPoints:0,lastServiceOdometer:void 0});On.useEffect(()=>{f(a?{...a}:{name:"",phone:"",vehicle:"",licensePlate:"",loyaltyPoints:0,lastServiceOdometer:void 0})},[a]);const m=g=>{const{name:p,value:v,type:b}=g.target;f(p==="lastServiceOdometer"?k=>({...k,lastServiceOdometer:v===""?void 0:parseInt(v,10)}):k=>({...k,[p]:b==="number"?parseInt(v)||0:v}))},x=g=>{g.preventDefault();const p={id:(a==null?void 0:a.id)||`C${String(Math.floor(Math.random()*900)+100)}`,...c,lastServiceDate:c.lastServiceOdometer&&!c.lastServiceDate?new Date().toISOString().split("T")[0]:c.lastServiceDate};s(p)};return t?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:i.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-lg shadow-xl w-full max-w-lg",children:i.jsxs("form",{onSubmit:x,children:[i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100 mb-6",children:a?"Chỉnh sửa Khách hàng":"Thêm Khách hàng mới"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"customer-name",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Tên khách hàng"}),i.jsx("input",{id:"customer-name",type:"text",name:"name",value:c.name,onChange:m,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 text-slate-900 dark:text-slate-100",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"customer-phone",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Số điện thoại"}),i.jsx("input",{id:"customer-phone",type:"text",name:"phone",value:c.phone,onChange:m,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 text-slate-900 dark:text-slate-100",required:!0})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"customer-vehicle",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Dòng xe"}),i.jsx("input",{id:"customer-vehicle",type:"text",name:"vehicle",value:c.vehicle,onChange:m,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 text-slate-900 dark:text-slate-100"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"customer-licensePlate",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Biển số xe"}),i.jsx("input",{id:"customer-licensePlate",type:"text",name:"licensePlate",value:c.licensePlate,onChange:m,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 text-slate-900 dark:text-slate-100"})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"customer-odometer",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Số ODO (km)"}),i.jsx("input",{id:"customer-odometer",type:"number",name:"lastServiceOdometer",value:c.lastServiceOdometer||"",onChange:m,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 text-slate-900 dark:text-slate-100"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"customer-loyaltyPoints",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Điểm tích lũy"}),i.jsx("input",{id:"customer-loyaltyPoints",type:"number",name:"loyaltyPoints",value:c.loyaltyPoints,onChange:m,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 text-slate-900 dark:text-slate-100"})]})]})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 px-6 py-4 flex justify-end space-x-3 border-t border-slate-200 dark:border-slate-700",children:[i.jsx("button",{type:"button",onClick:e,className:"bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-600",children:"Hủy"}),i.jsx("button",{type:"submit",className:"bg-sky-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-sky-700",children:"Lưu"})]})]})})}):null},gi=20,nk=({customers:t,setCustomers:e})=>{const[s,a]=N.useState(!1),[c,f]=N.useState(null),[m,x]=N.useState(""),[g,p]=N.useState(1);N.useEffect(()=>{p(1)},[m]);const v=(_=null)=>{f(_),a(!0)},b=()=>{a(!1),f(null)},k=_=>{e(c?j=>j.map(D=>D.id===_.id?_:D):j=>[_,...j]),b()},w=N.useMemo(()=>t.filter(_=>_.name.toLowerCase().includes(m.toLowerCase())||_.phone.includes(m.toLowerCase())||_.licensePlate.toLowerCase().includes(m.toLowerCase())),[t,m]),M=N.useMemo(()=>{const _=(g-1)*gi;return w.slice(_,_+gi)},[w,g]),A=Math.ceil(w.length/gi);return i.jsxs("div",{className:"space-y-6",children:[i.jsx(tk,{isOpen:s,onClose:b,onSave:k,customer:c}),i.jsx("div",{className:"flex flex-col sm:flex-row justify-end sm:items-center gap-4",children:i.jsxs("button",{onClick:()=>v(),className:"flex items-center bg-sky-600 text-white font-semibold py-2 px-4 rounded-lg shadow-sm hover:bg-sky-700 transition-colors",children:[i.jsx(yt,{}),i.jsx("span",{className:"ml-2 hidden sm:inline",children:"Thêm Khách hàng"}),i.jsx("span",{className:"ml-2 sm:hidden",children:"Mới"})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border border-slate-200/60 dark:border-slate-700",children:i.jsx("input",{type:"text",placeholder:"Tìm theo tên, SĐT, biển số xe...",value:m,onChange:_=>x(_.target.value),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 dark:text-slate-100"})}),i.jsx("div",{className:"lg:hidden space-y-4",children:M.map(_=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-100",children:_.name}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:_.phone})]}),i.jsx("button",{onClick:()=>v(_),className:"text-sky-600 hover:text-sky-800 dark:hover:text-sky-400 p-1",children:i.jsx(bl,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"mt-2 text-sm",children:[i.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[_.vehicle," - ",_.licensePlate]}),i.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:["Điểm: ",i.jsx("span",{className:"font-bold text-green-600 dark:text-green-400",children:_.loyaltyPoints})]})]})]},_.id))}),i.jsxs("div",{className:"hidden lg:block bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-slate-200/60 dark:border-slate-700 overflow-x-auto",children:[i.jsxs("table",{className:"w-full text-left min-w-max",children:[i.jsx("thead",{className:"border-b border-slate-200 dark:border-slate-700",children:i.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-700",children:[i.jsx("th",{className:"p-4 font-semibold text-slate-600 dark:text-slate-300",children:"Tên Khách hàng"}),i.jsx("th",{className:"p-4 font-semibold text-slate-600 dark:text-slate-300",children:"Số điện thoại"}),i.jsx("th",{className:"p-4 font-semibold text-slate-600 dark:text-slate-300",children:"Xe"}),i.jsx("th",{className:"p-4 font-semibold text-slate-600 dark:text-slate-300",children:"Biển số"}),i.jsx("th",{className:"p-4 font-semibold text-slate-600 dark:text-slate-300",children:"Điểm"}),i.jsx("th",{className:"p-4 font-semibold text-slate-600 dark:text-slate-300",children:"Hành động"})]})}),i.jsx("tbody",{children:M.map(_=>i.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[i.jsx("td",{className:"p-4 font-semibold text-slate-900 dark:text-slate-100",children:_.name}),i.jsx("td",{className:"p-4 text-slate-700 dark:text-slate-300",children:_.phone}),i.jsx("td",{className:"p-4 text-slate-700 dark:text-slate-300",children:_.vehicle}),i.jsx("td",{className:"p-4 text-slate-700 dark:text-slate-300",children:_.licensePlate}),i.jsx("td",{className:"p-4 text-green-600 dark:text-green-400 font-bold",children:_.loyaltyPoints}),i.jsx("td",{className:"p-4",children:i.jsx("button",{onClick:()=>v(_),className:"text-sky-600 hover:text-sky-800 dark:text-sky-400 dark:hover:text-sky-300",children:i.jsx(bl,{className:"w-5 h-5"})})})]},_.id))})]}),M.length===0&&i.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"Không có khách hàng nào."})]}),w.length>0&&i.jsx(kl,{currentPage:g,totalPages:A,onPageChange:p,itemsPerPage:gi,totalItems:w.length}),w.length===0&&i.jsx("p",{className:"lg:hidden text-center text-slate-500 dark:text-slate-400 py-8",children:"Không có khách hàng nào."})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let lk,sk;function ak(){return{geminiUrl:lk,vertexUrl:sk}}function ok(t,e,s,a){var c,f;if(!(t!=null&&t.baseUrl)){const m=ak();return e?(c=m.vertexUrl)!==null&&c!==void 0?c:s:(f=m.geminiUrl)!==null&&f!==void 0?f:a}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fl{}function pe(t,e){const s=/\{([^}]+)\}/g;return t.replace(s,(a,c)=>{if(Object.prototype.hasOwnProperty.call(e,c)){const f=e[c];return f!=null?String(f):""}else throw new Error(`Key '${c}' not found in valueMap.`)})}function u(t,e,s){for(let f=0;f<e.length-1;f++){const m=e[f];if(m.endsWith("[]")){const x=m.slice(0,-2);if(!(x in t))if(Array.isArray(s))t[x]=Array.from({length:s.length},()=>({}));else throw new Error(`Value must be a list given an array path ${m}`);if(Array.isArray(t[x])){const g=t[x];if(Array.isArray(s))for(let p=0;p<g.length;p++){const v=g[p];u(v,e.slice(f+1),s[p])}else for(const p of g)u(p,e.slice(f+1),s)}return}else if(m.endsWith("[0]")){const x=m.slice(0,-3);x in t||(t[x]=[{}]);const g=t[x];u(g[0],e.slice(f+1),s);return}(!t[m]||typeof t[m]!="object")&&(t[m]={}),t=t[m]}const a=e[e.length-1],c=t[a];if(c!==void 0){if(!s||typeof s=="object"&&Object.keys(s).length===0||s===c)return;if(typeof c=="object"&&typeof s=="object"&&c!==null&&s!==null)Object.assign(c,s);else throw new Error(`Cannot set value for an existing key. Key: ${a}`)}else a==="_self"&&typeof s=="object"&&s!==null&&!Array.isArray(s)?Object.assign(t,s):t[a]=s}function r(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let s=0;s<e.length;s++){if(typeof t!="object"||t===null)return;const a=e[s];if(a.endsWith("[]")){const c=a.slice(0,-2);if(c in t){const f=t[c];return Array.isArray(f)?f.map(m=>r(m,e.slice(s+1))):void 0}else return}else t=t[a]}return t}catch(s){if(s instanceof TypeError)return;throw s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qc(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ik(t){const e={},s=r(t,["operationName"]);s!=null&&u(e,["operationName"],s);const a=r(t,["resourceName"]);return a!=null&&u(e,["_url","resourceName"],a),e}function rk(t){const e={},s=r(t,["name"]);s!=null&&u(e,["name"],s);const a=r(t,["metadata"]);a!=null&&u(e,["metadata"],a);const c=r(t,["done"]);c!=null&&u(e,["done"],c);const f=r(t,["error"]);f!=null&&u(e,["error"],f);const m=r(t,["response","generateVideoResponse"]);return m!=null&&u(e,["response"],ck(m)),e}function uk(t){const e={},s=r(t,["name"]);s!=null&&u(e,["name"],s);const a=r(t,["metadata"]);a!=null&&u(e,["metadata"],a);const c=r(t,["done"]);c!=null&&u(e,["done"],c);const f=r(t,["error"]);f!=null&&u(e,["error"],f);const m=r(t,["response"]);return m!=null&&u(e,["response"],dk(m)),e}function ck(t){const e={},s=r(t,["generatedSamples"]);if(s!=null){let f=s;Array.isArray(f)&&(f=f.map(m=>fk(m))),u(e,["generatedVideos"],f)}const a=r(t,["raiMediaFilteredCount"]);a!=null&&u(e,["raiMediaFilteredCount"],a);const c=r(t,["raiMediaFilteredReasons"]);return c!=null&&u(e,["raiMediaFilteredReasons"],c),e}function dk(t){const e={},s=r(t,["videos"]);if(s!=null){let f=s;Array.isArray(f)&&(f=f.map(m=>mk(m))),u(e,["generatedVideos"],f)}const a=r(t,["raiMediaFilteredCount"]);a!=null&&u(e,["raiMediaFilteredCount"],a);const c=r(t,["raiMediaFilteredReasons"]);return c!=null&&u(e,["raiMediaFilteredReasons"],c),e}function fk(t){const e={},s=r(t,["_self"]);return s!=null&&u(e,["video"],gk(s)),e}function mk(t){const e={},s=r(t,["_self"]);return s!=null&&u(e,["video"],xk(s)),e}function hk(t){const e={},s=r(t,["operationName"]);return s!=null&&u(e,["_url","operationName"],s),e}function pk(t){const e={},s=r(t,["operationName"]);return s!=null&&u(e,["_url","operationName"],s),e}function gk(t){const e={},s=r(t,["video","uri"]);s!=null&&u(e,["uri"],s);const a=r(t,["video","encodedVideo"]);a!=null&&u(e,["videoBytes"],qc(a));const c=r(t,["encoding"]);return c!=null&&u(e,["mimeType"],c),e}function xk(t){const e={},s=r(t,["gcsUri"]);s!=null&&u(e,["uri"],s);const a=r(t,["bytesBase64Encoded"]);a!=null&&u(e,["videoBytes"],qc(a));const c=r(t,["mimeType"]);return c!=null&&u(e,["mimeType"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var r0;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(r0||(r0={}));var u0;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(u0||(u0={}));var vl;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(vl||(vl={}));var c0;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(c0||(c0={}));var d0;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(d0||(d0={}));var f0;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(f0||(f0={}));var m0;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(m0||(m0={}));var h0;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(h0||(h0={}));var p0;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(p0||(p0={}));var g0;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(g0||(g0={}));var x0;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT"})(x0||(x0={}));var y0;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(y0||(y0={}));var v0;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(v0||(v0={}));var b0;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(b0||(b0={}));var k0;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(k0||(k0={}));var Ri;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Ri||(Ri={}));var C0;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(C0||(C0={}));var xc;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(xc||(xc={}));var T0;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(T0||(T0={}));var N0;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(N0||(N0={}));var S0;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V"})(S0||(S0={}));var w0;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(w0||(w0={}));var E0;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(E0||(E0={}));var M0;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(M0||(M0={}));var A0;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(A0||(A0={}));var _0;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(_0||(_0={}));var R0;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(R0||(R0={}));var D0;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(D0||(D0={}));var I0;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(I0||(I0={}));var j0;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(j0||(j0={}));var U0;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(U0||(U0={}));var L0;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(L0||(L0={}));var P0;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(P0||(P0={}));var V0;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(V0||(V0={}));var q0;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(q0||(q0={}));var H0;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(H0||(H0={}));var B0;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(B0||(B0={}));var G0;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(G0||(G0={}));var z0;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(z0||(z0={}));var F0;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(F0||(F0={}));var O0;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(O0||(O0={}));var J0;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(J0||(J0={}));var Y0;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Y0||(Y0={}));var K0;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(K0||(K0={}));var $0;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})($0||($0={}));var X0;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(X0||(X0={}));var Q0;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Q0||(Q0={}));var Z0;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Z0||(Z0={}));var Is;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Is||(Is={}));class yc{constructor(e){const s={};for(const a of e.headers.entries())s[a[0]]=a[1];this.headers=s,this.responseInternal=e}json(){return this.responseInternal.json()}}class qa{get text(){var e,s,a,c,f,m,x,g;if(((c=(a=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",v=!1;const b=[];for(const k of(g=(x=(m=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||m===void 0?void 0:m.content)===null||x===void 0?void 0:x.parts)!==null&&g!==void 0?g:[]){for(const[w,M]of Object.entries(k))w!=="text"&&w!=="thought"&&(M!==null||M!==void 0)&&b.push(w);if(typeof k.text=="string"){if(typeof k.thought=="boolean"&&k.thought)continue;v=!0,p+=k.text}}return b.length>0&&console.warn(`there are non-text parts ${b} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?p:void 0}get data(){var e,s,a,c,f,m,x,g;if(((c=(a=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const v=[];for(const b of(g=(x=(m=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||m===void 0?void 0:m.content)===null||x===void 0?void 0:x.parts)!==null&&g!==void 0?g:[]){for(const[k,w]of Object.entries(b))k!=="inlineData"&&(w!==null||w!==void 0)&&v.push(k);b.inlineData&&typeof b.inlineData.data=="string"&&(p+=atob(b.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,s,a,c,f,m,x,g;if(((c=(a=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(g=(x=(m=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||m===void 0?void 0:m.content)===null||x===void 0?void 0:x.parts)===null||g===void 0?void 0:g.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,s,a,c,f,m,x,g,p;if(((c=(a=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(g=(x=(m=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||m===void 0?void 0:m.content)===null||x===void 0?void 0:x.parts)===null||g===void 0?void 0:g.filter(b=>b.executableCode).map(b=>b.executableCode).filter(b=>b!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,s,a,c,f,m,x,g,p;if(((c=(a=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(g=(x=(m=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||m===void 0?void 0:m.content)===null||x===void 0?void 0:x.parts)===null||g===void 0?void 0:g.filter(b=>b.codeExecutionResult).map(b=>b.codeExecutionResult).filter(b=>b!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.output}}class W0{}class ep{}class yk{}class vk{}class bk{}class kk{}class tp{}class np{}class lp{}class Ck{}class Di{_fromAPIResponse({apiResponse:e,isVertexAI:s}){const a=new Di;let c;const f=e;return s?c=uk(f):c=rk(f),Object.assign(a,c),a}}class sp{}class ap{}class op{}class Tk{}class Nk{}class Sk{}class ip{}class wk{get text(){var e,s,a;let c="",f=!1;const m=[];for(const x of(a=(s=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||s===void 0?void 0:s.parts)!==null&&a!==void 0?a:[]){for(const[g,p]of Object.entries(x))g!=="text"&&g!=="thought"&&p!==null&&m.push(g);if(typeof x.text=="string"){if(typeof x.thought=="boolean"&&x.thought)continue;f=!0,c+=x.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?c:void 0}get data(){var e,s,a;let c="";const f=[];for(const m of(a=(s=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||s===void 0?void 0:s.parts)!==null&&a!==void 0?a:[]){for(const[x,g]of Object.entries(m))x!=="inlineData"&&g!==null&&f.push(x);m.inlineData&&typeof m.inlineData.data=="string"&&(c+=atob(m.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}}class Ek{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ve(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const s=e.split("/",2);return`publishers/${s[0]}/models/${s[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function $p(t,e){const s=Ve(t,e);return s?s.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${s}`:s.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${s}`:s:""}function Xp(t){return Array.isArray(t)?t.map(e=>Ii(e)):[Ii(t)]}function Ii(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Qp(t){const e=Ii(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Zp(t){const e=Ii(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function rp(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Wp(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>rp(e)):[rp(t)]}function vc(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function up(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function cp(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Mt(t){if(t==null)throw new Error("ContentUnion is required");return vc(t)?t:{role:"user",parts:Wp(t)}}function Hc(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(s=>{const a=Mt(s);return a.parts&&a.parts.length>0&&a.parts[0].text!==void 0?[a.parts[0].text]:[]});if(t.isVertexAI()){const s=Mt(e);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]}return Array.isArray(e)?e.map(s=>Mt(s)):[Mt(e)]}function sn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(up(t)||cp(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Mt(t)]}const e=[],s=[],a=vc(t[0]);for(const c of t){const f=vc(c);if(f!=a)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(f)e.push(c);else{if(up(c)||cp(c))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");s.push(c)}}return a||e.push({role:"user",parts:Wp(s)}),e}function Mk(t,e){t.includes("null")&&(e.nullable=!0);const s=t.filter(a=>a!=="null");if(s.length===1)e.type=Object.values(vl).includes(s[0].toUpperCase())?s[0].toUpperCase():vl.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const a of s)e.anyOf.push({type:Object.values(vl).includes(a.toUpperCase())?a.toUpperCase():vl.TYPE_UNSPECIFIED})}}function js(t){const e={},s=["items"],a=["anyOf"],c=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const f=t.anyOf;f!=null&&f.length==2&&(f[0].type==="null"?(e.nullable=!0,t=f[1]):f[1].type==="null"&&(e.nullable=!0,t=f[0])),t.type instanceof Array&&Mk(t.type,e);for(const[m,x]of Object.entries(t))if(x!=null)if(m=="type"){if(x==="null")throw new Error("type: null can not be the only possible type for the field.");if(x instanceof Array)continue;e.type=Object.values(vl).includes(x.toUpperCase())?x.toUpperCase():vl.TYPE_UNSPECIFIED}else if(s.includes(m))e[m]=js(x);else if(a.includes(m)){const g=[];for(const p of x){if(p.type=="null"){e.nullable=!0;continue}g.push(js(p))}e[m]=g}else if(c.includes(m)){const g={};for(const[p,v]of Object.entries(x))g[p]=js(v);e[m]=g}else{if(m==="additionalProperties")continue;e[m]=x}return e}function Bc(t){return js(t)}function Gc(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function zc(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Hs(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=js(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=js(e.response));return t}function Bs(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const s of t)e.push(s);return e}function Ak(t,e,s,a=1){const c=!e.startsWith(`${s}/`)&&e.split("/").length===a;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${s}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:c?`projects/${t.getProject()}/locations/${t.getLocation()}/${s}/${e}`:e:c?`${s}/${e}`:e}function Yn(t,e){if(typeof e!="string")throw new Error("name must be a string");return Ak(t,e,"cachedContents")}function eg(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Ol(t){return qc(t)}function _k(t){return t!=null&&typeof t=="object"&&"name"in t}function Rk(t){return t!=null&&typeof t=="object"&&"video"in t}function Dk(t){return t!=null&&typeof t=="object"&&"uri"in t}function tg(t){var e;let s;if(_k(t)&&(s=t.name),!(Dk(t)&&(s=t.uri,s===void 0))&&!(Rk(t)&&(s=(e=t.video)===null||e===void 0?void 0:e.uri,s===void 0))){if(typeof t=="string"&&(s=t),s===void 0)throw new Error("Could not extract file name from the provided input.");if(s.startsWith("https://")){const c=s.split("files/")[1].match(/[a-z0-9]+/);if(c===null)throw new Error(`Could not extract file name from URI ${s}`);s=c[0]}else s.startsWith("files/")&&(s=s.split("files/")[1]);return s}}function ng(t,e){let s;return t.isVertexAI()?s=e?"publishers/google/models":"models":s=e?"models":"tunedModels",s}function lg(t){for(const e of["models","tunedModels","publisherModels"])if(Ik(t,e))return t[e];return[]}function Ik(t,e){return t!==null&&typeof t=="object"&&e in t}function jk(t,e={}){const s=t,a={name:s.name,description:s.description,parametersJsonSchema:s.inputSchema};return s.outputSchema&&(a.responseJsonSchema=s.outputSchema),e.behavior&&(a.behavior=e.behavior),{functionDeclarations:[a]}}function Uk(t,e={}){const s=[],a=new Set;for(const c of t){const f=c.name;if(a.has(f))throw new Error(`Duplicate function name ${f} found in MCP tools. Please ensure function names are unique.`);a.add(f);const m=jk(c,e);m.functionDeclarations&&s.push(...m.functionDeclarations)}return{functionDeclarations:s}}function sg(t,e){let s;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))s={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))s={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))s={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");s={inlinedRequests:e}}else s=e;const a=[s.gcsUri,s.bigqueryUri].filter(Boolean).length,c=[s.inlinedRequests,s.fileName].filter(Boolean).length;if(t.isVertexAI()){if(c>0||a!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(a>0||c!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return s}function Lk(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function ag(t){if(typeof t!="object"||t===null)return{};const e=t,s=e.inlinedResponses;if(typeof s!="object"||s===null)return t;const c=s.inlinedResponses;if(!Array.isArray(c)||c.length===0)return t;let f=!1;for(const m of c){if(typeof m!="object"||m===null)continue;const g=m.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){f=!0;break}}return f&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Gs(t,e){const s=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(s))return s.split("/").pop();throw new Error(`Invalid batch job name: ${s}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(s))return s.split("/").pop();if(/^\d+$/.test(s))return s;throw new Error(`Invalid batch job name: ${s}.`)}function og(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Pk(t){const e={},s=r(t,["responsesFile"]);s!=null&&u(e,["fileName"],s);const a=r(t,["inlinedResponses","inlinedResponses"]);if(a!=null){let f=a;Array.isArray(f)&&(f=f.map(m=>SC(m))),u(e,["inlinedResponses"],f)}const c=r(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(c!=null){let f=c;Array.isArray(f)&&(f=f.map(m=>TC(m))),u(e,["inlinedEmbedContentResponses"],f)}return e}function Vk(t){const e={},s=r(t,["predictionsFormat"]);s!=null&&u(e,["format"],s);const a=r(t,["gcsDestination","outputUriPrefix"]);a!=null&&u(e,["gcsUri"],a);const c=r(t,["bigqueryDestination","outputUri"]);return c!=null&&u(e,["bigqueryUri"],c),e}function qk(t){const e={},s=r(t,["format"]);s!=null&&u(e,["predictionsFormat"],s);const a=r(t,["gcsUri"]);a!=null&&u(e,["gcsDestination","outputUriPrefix"],a);const c=r(t,["bigqueryUri"]);if(c!=null&&u(e,["bigqueryDestination","outputUri"],c),r(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(r(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(r(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Rs(t){const e={},s=r(t,["name"]);s!=null&&u(e,["name"],s);const a=r(t,["metadata","displayName"]);a!=null&&u(e,["displayName"],a);const c=r(t,["metadata","state"]);c!=null&&u(e,["state"],og(c));const f=r(t,["metadata","createTime"]);f!=null&&u(e,["createTime"],f);const m=r(t,["metadata","endTime"]);m!=null&&u(e,["endTime"],m);const x=r(t,["metadata","updateTime"]);x!=null&&u(e,["updateTime"],x);const g=r(t,["metadata","model"]);g!=null&&u(e,["model"],g);const p=r(t,["metadata","output"]);return p!=null&&u(e,["dest"],Pk(ag(p))),e}function bc(t){const e={},s=r(t,["name"]);s!=null&&u(e,["name"],s);const a=r(t,["displayName"]);a!=null&&u(e,["displayName"],a);const c=r(t,["state"]);c!=null&&u(e,["state"],og(c));const f=r(t,["error"]);f!=null&&u(e,["error"],rg(f));const m=r(t,["createTime"]);m!=null&&u(e,["createTime"],m);const x=r(t,["startTime"]);x!=null&&u(e,["startTime"],x);const g=r(t,["endTime"]);g!=null&&u(e,["endTime"],g);const p=r(t,["updateTime"]);p!=null&&u(e,["updateTime"],p);const v=r(t,["model"]);v!=null&&u(e,["model"],v);const b=r(t,["inputConfig"]);b!=null&&u(e,["src"],Hk(b));const k=r(t,["outputConfig"]);return k!=null&&u(e,["dest"],Vk(ag(k))),e}function Hk(t){const e={},s=r(t,["instancesFormat"]);s!=null&&u(e,["format"],s);const a=r(t,["gcsSource","uris"]);a!=null&&u(e,["gcsUri"],a);const c=r(t,["bigquerySource","inputUri"]);return c!=null&&u(e,["bigqueryUri"],c),e}function Bk(t,e){const s={};if(r(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(r(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(r(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const a=r(e,["fileName"]);a!=null&&u(s,["fileName"],a);const c=r(e,["inlinedRequests"]);if(c!=null){let f=c;Array.isArray(f)&&(f=f.map(m=>NC(t,m))),u(s,["requests","requests"],f)}return s}function Gk(t){const e={},s=r(t,["format"]);s!=null&&u(e,["instancesFormat"],s);const a=r(t,["gcsUri"]);a!=null&&u(e,["gcsSource","uris"],a);const c=r(t,["bigqueryUri"]);if(c!=null&&u(e,["bigquerySource","inputUri"],c),r(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(r(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function zk(t){const e={},s=r(t,["data"]);s!=null&&u(e,["data"],s);const a=r(t,["mimeType"]);return a!=null&&u(e,["mimeType"],a),e}function Fk(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=r(t,["data"]);s!=null&&u(e,["data"],s);const a=r(t,["mimeType"]);return a!=null&&u(e,["mimeType"],a),e}function Ok(t,e){const s={},a=r(e,["name"]);return a!=null&&u(s,["_url","name"],Gs(t,a)),s}function Jk(t,e){const s={},a=r(e,["name"]);return a!=null&&u(s,["_url","name"],Gs(t,a)),s}function Yk(t){const e={},s=r(t,["content"]);s!=null&&u(e,["content"],Qk(s));const a=r(t,["citationMetadata"]);a!=null&&u(e,["citationMetadata"],Kk(a));const c=r(t,["tokenCount"]);c!=null&&u(e,["tokenCount"],c);const f=r(t,["finishReason"]);f!=null&&u(e,["finishReason"],f);const m=r(t,["urlContextMetadata"]);m!=null&&u(e,["urlContextMetadata"],YC(m));const x=r(t,["avgLogprobs"]);x!=null&&u(e,["avgLogprobs"],x);const g=r(t,["groundingMetadata"]);g!=null&&u(e,["groundingMetadata"],g);const p=r(t,["index"]);p!=null&&u(e,["index"],p);const v=r(t,["logprobsResult"]);v!=null&&u(e,["logprobsResult"],v);const b=r(t,["safetyRatings"]);return b!=null&&u(e,["safetyRatings"],b),e}function Kk(t){const e={},s=r(t,["citationSources"]);return s!=null&&u(e,["citations"],s),e}function $k(t){const e={},s=r(t,["environment"]);s!=null&&u(e,["environment"],s);const a=r(t,["excludedPredefinedFunctions"]);return a!=null&&u(e,["excludedPredefinedFunctions"],a),e}function Xk(t){const e={},s=r(t,["values"]);return s!=null&&u(e,["values"],s),e}function Qk(t){const e={},s=r(t,["parts"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(f=>UC(f))),u(e,["parts"],c)}const a=r(t,["role"]);return a!=null&&u(e,["role"],a),e}function ig(t){const e={},s=r(t,["parts"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(f=>LC(f))),u(e,["parts"],c)}const a=r(t,["role"]);return a!=null&&u(e,["role"],a),e}function Zk(t,e){const s={},a=r(t,["displayName"]);if(e!==void 0&&a!=null&&u(e,["batch","displayName"],a),r(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return s}function Wk(t,e){const s={},a=r(t,["displayName"]);e!==void 0&&a!=null&&u(e,["displayName"],a);const c=r(t,["dest"]);return e!==void 0&&c!=null&&u(e,["outputConfig"],qk(Lk(c))),s}function uc(t,e){const s={},a=r(e,["model"]);a!=null&&u(s,["_url","model"],Ve(t,a));const c=r(e,["src"]);c!=null&&u(s,["batch","inputConfig"],Bk(t,sg(t,c)));const f=r(e,["config"]);return f!=null&&Zk(f,s),s}function eC(t,e){const s={},a=r(e,["model"]);a!=null&&u(s,["model"],Ve(t,a));const c=r(e,["src"]);c!=null&&u(s,["inputConfig"],Gk(sg(t,c)));const f=r(e,["config"]);return f!=null&&Wk(f,s),s}function tC(t,e){const s={},a=r(t,["displayName"]);return e!==void 0&&a!=null&&u(e,["batch","displayName"],a),s}function cc(t,e){const s={},a=r(e,["model"]);a!=null&&u(s,["_url","model"],Ve(t,a));const c=r(e,["src"]);c!=null&&u(s,["batch","inputConfig"],uC(t,c));const f=r(e,["config"]);return f!=null&&tC(f,s),s}function nC(t,e){const s={},a=r(e,["name"]);return a!=null&&u(s,["_url","name"],Gs(t,a)),s}function lC(t,e){const s={},a=r(e,["name"]);return a!=null&&u(s,["_url","name"],Gs(t,a)),s}function sC(t){const e={},s=r(t,["sdkHttpResponse"]);s!=null&&u(e,["sdkHttpResponse"],s);const a=r(t,["name"]);a!=null&&u(e,["name"],a);const c=r(t,["done"]);c!=null&&u(e,["done"],c);const f=r(t,["error"]);return f!=null&&u(e,["error"],Fc(f)),e}function aC(t){const e={},s=r(t,["sdkHttpResponse"]);s!=null&&u(e,["sdkHttpResponse"],s);const a=r(t,["name"]);a!=null&&u(e,["name"],a);const c=r(t,["done"]);c!=null&&u(e,["done"],c);const f=r(t,["error"]);return f!=null&&u(e,["error"],rg(f)),e}function oC(t){const e={},s=r(t,["mode"]);s!=null&&u(e,["mode"],s);const a=r(t,["dynamicThreshold"]);return a!=null&&u(e,["dynamicThreshold"],a),e}function iC(t,e){const s={},a=r(e,["contents"]);a!=null&&u(s,["requests[]","request","content"],Hc(t,a));const c=r(e,["config"]);return c!=null&&u(s,["config"],rC(c,s)),s}function rC(t,e){const s={},a=r(t,["taskType"]);e!==void 0&&a!=null&&u(e,["requests[]","taskType"],a);const c=r(t,["title"]);e!==void 0&&c!=null&&u(e,["requests[]","title"],c);const f=r(t,["outputDimensionality"]);if(e!==void 0&&f!=null&&u(e,["requests[]","outputDimensionality"],f),r(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(r(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return s}function uC(t,e){const s={},a=r(e,["fileName"]);a!=null&&u(s,["file_name"],a);const c=r(e,["inlinedRequests"]);return c!=null&&u(s,["requests"],iC(t,c)),s}function cC(t){const e={},s=r(t,["fileUri"]);s!=null&&u(e,["fileUri"],s);const a=r(t,["mimeType"]);return a!=null&&u(e,["mimeType"],a),e}function dC(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=r(t,["fileUri"]);s!=null&&u(e,["fileUri"],s);const a=r(t,["mimeType"]);return a!=null&&u(e,["mimeType"],a),e}function fC(t){const e={},s=r(t,["id"]);s!=null&&u(e,["id"],s);const a=r(t,["args"]);a!=null&&u(e,["args"],a);const c=r(t,["name"]);return c!=null&&u(e,["name"],c),e}function mC(t){const e={},s=r(t,["id"]);s!=null&&u(e,["id"],s);const a=r(t,["args"]);a!=null&&u(e,["args"],a);const c=r(t,["name"]);return c!=null&&u(e,["name"],c),e}function hC(t){const e={},s=r(t,["mode"]);s!=null&&u(e,["mode"],s);const a=r(t,["allowedFunctionNames"]);return a!=null&&u(e,["allowedFunctionNames"],a),e}function pC(t){const e={},s=r(t,["behavior"]);s!=null&&u(e,["behavior"],s);const a=r(t,["description"]);a!=null&&u(e,["description"],a);const c=r(t,["name"]);c!=null&&u(e,["name"],c);const f=r(t,["parameters"]);f!=null&&u(e,["parameters"],f);const m=r(t,["parametersJsonSchema"]);m!=null&&u(e,["parametersJsonSchema"],m);const x=r(t,["response"]);x!=null&&u(e,["response"],x);const g=r(t,["responseJsonSchema"]);return g!=null&&u(e,["responseJsonSchema"],g),e}function gC(t,e,s){const a={},c=r(e,["systemInstruction"]);s!==void 0&&c!=null&&u(s,["systemInstruction"],ig(Mt(c)));const f=r(e,["temperature"]);f!=null&&u(a,["temperature"],f);const m=r(e,["topP"]);m!=null&&u(a,["topP"],m);const x=r(e,["topK"]);x!=null&&u(a,["topK"],x);const g=r(e,["candidateCount"]);g!=null&&u(a,["candidateCount"],g);const p=r(e,["maxOutputTokens"]);p!=null&&u(a,["maxOutputTokens"],p);const v=r(e,["stopSequences"]);v!=null&&u(a,["stopSequences"],v);const b=r(e,["responseLogprobs"]);b!=null&&u(a,["responseLogprobs"],b);const k=r(e,["logprobs"]);k!=null&&u(a,["logprobs"],k);const w=r(e,["presencePenalty"]);w!=null&&u(a,["presencePenalty"],w);const M=r(e,["frequencyPenalty"]);M!=null&&u(a,["frequencyPenalty"],M);const A=r(e,["seed"]);A!=null&&u(a,["seed"],A);const _=r(e,["responseMimeType"]);_!=null&&u(a,["responseMimeType"],_);const j=r(e,["responseSchema"]);j!=null&&u(a,["responseSchema"],HC(Bc(j)));const D=r(e,["responseJsonSchema"]);if(D!=null&&u(a,["responseJsonSchema"],D),r(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(r(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const I=r(e,["safetySettings"]);if(s!==void 0&&I!=null){let O=I;Array.isArray(O)&&(O=O.map(ue=>qC(ue))),u(s,["safetySettings"],O)}const q=r(e,["tools"]);if(s!==void 0&&q!=null){let O=Bs(q);Array.isArray(O)&&(O=O.map(ue=>JC(Hs(ue)))),u(s,["tools"],O)}const ee=r(e,["toolConfig"]);if(s!==void 0&&ee!=null&&u(s,["toolConfig"],OC(ee)),r(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const se=r(e,["cachedContent"]);s!==void 0&&se!=null&&u(s,["cachedContent"],Yn(t,se));const F=r(e,["responseModalities"]);F!=null&&u(a,["responseModalities"],F);const oe=r(e,["mediaResolution"]);oe!=null&&u(a,["mediaResolution"],oe);const $=r(e,["speechConfig"]);if($!=null&&u(a,["speechConfig"],zC(Gc($))),r(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Z=r(e,["thinkingConfig"]);Z!=null&&u(a,["thinkingConfig"],FC(Z));const Q=r(e,["imageConfig"]);return Q!=null&&u(a,["imageConfig"],CC(Q)),a}function xC(t){const e={},s=r(t,["sdkHttpResponse"]);s!=null&&u(e,["sdkHttpResponse"],s);const a=r(t,["candidates"]);if(a!=null){let g=a;Array.isArray(g)&&(g=g.map(p=>Yk(p))),u(e,["candidates"],g)}const c=r(t,["modelVersion"]);c!=null&&u(e,["modelVersion"],c);const f=r(t,["promptFeedback"]);f!=null&&u(e,["promptFeedback"],f);const m=r(t,["responseId"]);m!=null&&u(e,["responseId"],m);const x=r(t,["usageMetadata"]);return x!=null&&u(e,["usageMetadata"],x),e}function yC(t,e){const s={},a=r(e,["name"]);return a!=null&&u(s,["_url","name"],Gs(t,a)),s}function vC(t,e){const s={},a=r(e,["name"]);return a!=null&&u(s,["_url","name"],Gs(t,a)),s}function bC(t){const e={},s=r(t,["dynamicRetrievalConfig"]);return s!=null&&u(e,["dynamicRetrievalConfig"],oC(s)),e}function kC(t){const e={},s=r(t,["timeRangeFilter"]);if(s!=null&&u(e,["timeRangeFilter"],wC(s)),r(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function CC(t){const e={},s=r(t,["aspectRatio"]);return s!=null&&u(e,["aspectRatio"],s),e}function TC(t){const e={},s=r(t,["response"]);s!=null&&u(e,["response"],BC(s));const a=r(t,["error"]);return a!=null&&u(e,["error"],Fc(a)),e}function NC(t,e){const s={},a=r(e,["model"]);a!=null&&u(s,["request","model"],Ve(t,a));const c=r(e,["contents"]);if(c!=null){let m=sn(c);Array.isArray(m)&&(m=m.map(x=>ig(x))),u(s,["request","contents"],m)}const f=r(e,["config"]);return f!=null&&u(s,["request","generationConfig"],gC(t,f,s)),s}function SC(t){const e={},s=r(t,["response"]);s!=null&&u(e,["response"],xC(s));const a=r(t,["error"]);return a!=null&&u(e,["error"],Fc(a)),e}function wC(t){const e={},s=r(t,["startTime"]);s!=null&&u(e,["startTime"],s);const a=r(t,["endTime"]);return a!=null&&u(e,["endTime"],a),e}function Fc(t){const e={},s=r(t,["details"]);s!=null&&u(e,["details"],s);const a=r(t,["code"]);a!=null&&u(e,["code"],a);const c=r(t,["message"]);return c!=null&&u(e,["message"],c),e}function rg(t){const e={},s=r(t,["details"]);s!=null&&u(e,["details"],s);const a=r(t,["code"]);a!=null&&u(e,["code"],a);const c=r(t,["message"]);return c!=null&&u(e,["message"],c),e}function EC(t){const e={},s=r(t,["latitude"]);s!=null&&u(e,["latitude"],s);const a=r(t,["longitude"]);return a!=null&&u(e,["longitude"],a),e}function MC(t,e){const s={},a=r(t,["pageSize"]);e!==void 0&&a!=null&&u(e,["_query","pageSize"],a);const c=r(t,["pageToken"]);if(e!==void 0&&c!=null&&u(e,["_query","pageToken"],c),r(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return s}function AC(t,e){const s={},a=r(t,["pageSize"]);e!==void 0&&a!=null&&u(e,["_query","pageSize"],a);const c=r(t,["pageToken"]);e!==void 0&&c!=null&&u(e,["_query","pageToken"],c);const f=r(t,["filter"]);return e!==void 0&&f!=null&&u(e,["_query","filter"],f),s}function _C(t){const e={},s=r(t,["config"]);return s!=null&&MC(s,e),e}function RC(t){const e={},s=r(t,["config"]);return s!=null&&AC(s,e),e}function DC(t){const e={},s=r(t,["sdkHttpResponse"]);s!=null&&u(e,["sdkHttpResponse"],s);const a=r(t,["nextPageToken"]);a!=null&&u(e,["nextPageToken"],a);const c=r(t,["operations"]);if(c!=null){let f=c;Array.isArray(f)&&(f=f.map(m=>Rs(m))),u(e,["batchJobs"],f)}return e}function IC(t){const e={},s=r(t,["sdkHttpResponse"]);s!=null&&u(e,["sdkHttpResponse"],s);const a=r(t,["nextPageToken"]);a!=null&&u(e,["nextPageToken"],a);const c=r(t,["batchPredictionJobs"]);if(c!=null){let f=c;Array.isArray(f)&&(f=f.map(m=>bc(m))),u(e,["batchJobs"],f)}return e}function jC(t){const e={},s=r(t,["speakerVoiceConfigs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>GC(c))),u(e,["speakerVoiceConfigs"],a)}return e}function UC(t){const e={},s=r(t,["videoMetadata"]);s!=null&&u(e,["videoMetadata"],XC(s));const a=r(t,["thought"]);a!=null&&u(e,["thought"],a);const c=r(t,["inlineData"]);c!=null&&u(e,["inlineData"],zk(c));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],cC(f));const m=r(t,["thoughtSignature"]);m!=null&&u(e,["thoughtSignature"],m);const x=r(t,["functionCall"]);x!=null&&u(e,["functionCall"],fC(x));const g=r(t,["codeExecutionResult"]);g!=null&&u(e,["codeExecutionResult"],g);const p=r(t,["executableCode"]);p!=null&&u(e,["executableCode"],p);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const b=r(t,["text"]);return b!=null&&u(e,["text"],b),e}function LC(t){const e={},s=r(t,["videoMetadata"]);s!=null&&u(e,["videoMetadata"],QC(s));const a=r(t,["thought"]);a!=null&&u(e,["thought"],a);const c=r(t,["inlineData"]);c!=null&&u(e,["inlineData"],Fk(c));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],dC(f));const m=r(t,["thoughtSignature"]);m!=null&&u(e,["thoughtSignature"],m);const x=r(t,["functionCall"]);x!=null&&u(e,["functionCall"],mC(x));const g=r(t,["codeExecutionResult"]);g!=null&&u(e,["codeExecutionResult"],g);const p=r(t,["executableCode"]);p!=null&&u(e,["executableCode"],p);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const b=r(t,["text"]);return b!=null&&u(e,["text"],b),e}function PC(t){const e={},s=r(t,["voiceName"]);return s!=null&&u(e,["voiceName"],s),e}function VC(t){const e={},s=r(t,["latLng"]);s!=null&&u(e,["latLng"],EC(s));const a=r(t,["languageCode"]);return a!=null&&u(e,["languageCode"],a),e}function qC(t){const e={};if(r(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=r(t,["category"]);s!=null&&u(e,["category"],s);const a=r(t,["threshold"]);return a!=null&&u(e,["threshold"],a),e}function HC(t){const e={},s=r(t,["anyOf"]);s!=null&&u(e,["anyOf"],s);const a=r(t,["default"]);a!=null&&u(e,["default"],a);const c=r(t,["description"]);c!=null&&u(e,["description"],c);const f=r(t,["enum"]);f!=null&&u(e,["enum"],f);const m=r(t,["example"]);m!=null&&u(e,["example"],m);const x=r(t,["format"]);x!=null&&u(e,["format"],x);const g=r(t,["items"]);g!=null&&u(e,["items"],g);const p=r(t,["maxItems"]);p!=null&&u(e,["maxItems"],p);const v=r(t,["maxLength"]);v!=null&&u(e,["maxLength"],v);const b=r(t,["maxProperties"]);b!=null&&u(e,["maxProperties"],b);const k=r(t,["maximum"]);k!=null&&u(e,["maximum"],k);const w=r(t,["minItems"]);w!=null&&u(e,["minItems"],w);const M=r(t,["minLength"]);M!=null&&u(e,["minLength"],M);const A=r(t,["minProperties"]);A!=null&&u(e,["minProperties"],A);const _=r(t,["minimum"]);_!=null&&u(e,["minimum"],_);const j=r(t,["nullable"]);j!=null&&u(e,["nullable"],j);const D=r(t,["pattern"]);D!=null&&u(e,["pattern"],D);const I=r(t,["properties"]);I!=null&&u(e,["properties"],I);const q=r(t,["propertyOrdering"]);q!=null&&u(e,["propertyOrdering"],q);const ee=r(t,["required"]);ee!=null&&u(e,["required"],ee);const se=r(t,["title"]);se!=null&&u(e,["title"],se);const F=r(t,["type"]);return F!=null&&u(e,["type"],F),e}function BC(t){const e={},s=r(t,["embedding"]);s!=null&&u(e,["embedding"],Xk(s));const a=r(t,["tokenCount"]);return a!=null&&u(e,["tokenCount"],a),e}function GC(t){const e={},s=r(t,["speaker"]);s!=null&&u(e,["speaker"],s);const a=r(t,["voiceConfig"]);return a!=null&&u(e,["voiceConfig"],ug(a)),e}function zC(t){const e={},s=r(t,["voiceConfig"]);s!=null&&u(e,["voiceConfig"],ug(s));const a=r(t,["multiSpeakerVoiceConfig"]);a!=null&&u(e,["multiSpeakerVoiceConfig"],jC(a));const c=r(t,["languageCode"]);return c!=null&&u(e,["languageCode"],c),e}function FC(t){const e={},s=r(t,["includeThoughts"]);s!=null&&u(e,["includeThoughts"],s);const a=r(t,["thinkingBudget"]);return a!=null&&u(e,["thinkingBudget"],a),e}function OC(t){const e={},s=r(t,["functionCallingConfig"]);s!=null&&u(e,["functionCallingConfig"],hC(s));const a=r(t,["retrievalConfig"]);return a!=null&&u(e,["retrievalConfig"],VC(a)),e}function JC(t){const e={},s=r(t,["functionDeclarations"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(p=>pC(p))),u(e,["functionDeclarations"],g)}if(r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=r(t,["googleSearch"]);a!=null&&u(e,["googleSearch"],kC(a));const c=r(t,["googleSearchRetrieval"]);if(c!=null&&u(e,["googleSearchRetrieval"],bC(c)),r(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(t,["urlContext"])!=null&&u(e,["urlContext"],KC());const m=r(t,["computerUse"]);m!=null&&u(e,["computerUse"],$k(m));const x=r(t,["codeExecution"]);return x!=null&&u(e,["codeExecution"],x),e}function YC(t){const e={},s=r(t,["urlMetadata"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>$C(c))),u(e,["urlMetadata"],a)}return e}function KC(){return{}}function $C(t){const e={},s=r(t,["retrievedUrl"]);s!=null&&u(e,["retrievedUrl"],s);const a=r(t,["urlRetrievalStatus"]);return a!=null&&u(e,["urlRetrievalStatus"],a),e}function XC(t){const e={},s=r(t,["fps"]);s!=null&&u(e,["fps"],s);const a=r(t,["endOffset"]);a!=null&&u(e,["endOffset"],a);const c=r(t,["startOffset"]);return c!=null&&u(e,["startOffset"],c),e}function QC(t){const e={},s=r(t,["fps"]);s!=null&&u(e,["fps"],s);const a=r(t,["endOffset"]);a!=null&&u(e,["endOffset"],a);const c=r(t,["startOffset"]);return c!=null&&u(e,["startOffset"],c),e}function ug(t){const e={},s=r(t,["prebuiltVoiceConfig"]);return s!=null&&u(e,["prebuiltVoiceConfig"],PC(s)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Gl;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Gl||(Gl={}));class Ka{constructor(e,s,a,c){this.pageInternal=[],this.paramsInternal={},this.requestInternal=s,this.init(e,a,c)}init(e,s,a){var c,f;this.nameInternal=e,this.pageInternal=s[this.nameInternal]||[],this.sdkHttpResponseInternal=s==null?void 0:s.sdkHttpResponse,this.idxInternal=0;let m={config:{}};!a||Object.keys(a).length===0?m={config:{}}:typeof a=="object"?m=Object.assign({},a):m=a,m.config&&(m.config.pageToken=s.nextPageToken),this.paramsInternal=m,this.pageInternalSize=(f=(c=m.config)===null||c===void 0?void 0:c.pageSize)!==null&&f!==void 0?f:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ZC extends Fl{constructor(e){super(),this.apiClient=e,this.create=async s=>{var a,c;if(this.apiClient.isVertexAI())return s.config=this.formatDestination(s.src,s.config),this.createInternal(s);const f=s.src;if(!(Array.isArray(s.src)||f.inlinedRequests!==void 0))return this.createInternal(s);const x=this.createInlinedGenerateContentRequest(s),g=x.path,p=x.body,v=uc(this.apiClient,s)._query||{};return this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=s.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(c=s.config)===null||c===void 0?void 0:c.abortSignal}).then(k=>k.json()).then(k=>Rs(k))},this.createEmbeddings=async s=>{var a,c;if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");if(!(s.src.inlinedRequests!==void 0))return this.createEmbeddingsInternal(s);const x=this.createInlinedEmbedContentRequest(s),g=x.path,p=x.body,v=cc(this.apiClient,s)._query||{};return this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=s.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(c=s.config)===null||c===void 0?void 0:c.abortSignal}).then(k=>k.json()).then(k=>Rs(k))},this.list=async(s={})=>new Ka(Gl.PAGED_ITEM_BATCH_JOBS,a=>this.listInternal(a),await this.listInternal(s),s)}createInlinedGenerateContentRequest(e){const s=uc(this.apiClient,e),a=s._url,c=pe("{model}:batchGenerateContent",a),x=s.batch.inputConfig.requests,g=x.requests,p=[];for(const v of g){const b=Object.assign({},v);if(b.systemInstruction){const k=b.systemInstruction;delete b.systemInstruction;const w=b.request;w.systemInstruction=k,b.request=w}p.push(b)}return x.requests=p,delete s.config,delete s._url,delete s._query,{path:c,body:s}}createInlinedEmbedContentRequest(e){const s=cc(this.apiClient,e),a=s._url,c=pe("{model}:asyncBatchEmbedContent",a),x=s.batch.inputConfig.requests,g=x.requests,p=[];delete x.config;for(const v of g){const b=Object.assign({},v),k=b.request;for(const w in b)w!=="request"&&(k[w]=b[w],delete b[w]);p.push(b)}return x.requests=p,delete s.config,delete s._url,delete s._query,{path:c,body:s}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,s){const a=s?Object.assign({},s):{},c=Date.now().toString();if(a.displayName||(a.displayName=`genaiBatchJob_${c}`),a.dest===void 0){const f=this.getGcsUri(e),m=this.getBigqueryUri(e);if(f)f.endsWith(".jsonl")?a.dest=`${f.slice(0,-6)}/dest`:a.dest=`${f}_dest_${c}`;else if(m)a.dest=`${m}_dest_${c}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return a}async createInternal(e){var s,a,c,f;let m,x="",g={};if(this.apiClient.isVertexAI()){const p=eC(this.apiClient,e);return x=pe("batchPredictionJobs",p._url),g=p._query,delete p._url,delete p._query,m=this.apiClient.request({path:x,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(v=>bc(v))}else{const p=uc(this.apiClient,e);return x=pe("{model}:batchGenerateContent",p._url),g=p._query,delete p._url,delete p._query,m=this.apiClient.request({path:x,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(c=e.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>Rs(v))}}async createEmbeddingsInternal(e){var s,a;let c,f="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const x=cc(this.apiClient,e);return f=pe("{model}:asyncBatchEmbedContent",x._url),m=x._query,delete x._url,delete x._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),c.then(g=>Rs(g))}}async get(e){var s,a,c,f;let m,x="",g={};if(this.apiClient.isVertexAI()){const p=vC(this.apiClient,e);return x=pe("batchPredictionJobs/{name}",p._url),g=p._query,delete p._url,delete p._query,m=this.apiClient.request({path:x,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(v=>bc(v))}else{const p=yC(this.apiClient,e);return x=pe("batches/{name}",p._url),g=p._query,delete p._url,delete p._query,m=this.apiClient.request({path:x,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(c=e.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>Rs(v))}}async cancel(e){var s,a,c,f;let m="",x={};if(this.apiClient.isVertexAI()){const g=Jk(this.apiClient,e);m=pe("batchPredictionJobs/{name}:cancel",g._url),x=g._query,delete g._url,delete g._query,await this.apiClient.request({path:m,queryParams:x,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}else{const g=Ok(this.apiClient,e);m=pe("batches/{name}:cancel",g._url),x=g._query,delete g._url,delete g._query,await this.apiClient.request({path:m,queryParams:x,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(c=e.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal})}}async listInternal(e){var s,a,c,f;let m,x="",g={};if(this.apiClient.isVertexAI()){const p=RC(e);return x=pe("batchPredictionJobs",p._url),g=p._query,delete p._url,delete p._query,m=this.apiClient.request({path:x,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(b=>{const k=b;return k.sdkHttpResponse={headers:v.headers},k})),m.then(v=>{const b=IC(v),k=new ip;return Object.assign(k,b),k})}else{const p=_C(e);return x=pe("batches",p._url),g=p._query,delete p._url,delete p._query,m=this.apiClient.request({path:x,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(c=e.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(b=>{const k=b;return k.sdkHttpResponse={headers:v.headers},k})),m.then(v=>{const b=DC(v),k=new ip;return Object.assign(k,b),k})}}async delete(e){var s,a,c,f;let m,x="",g={};if(this.apiClient.isVertexAI()){const p=lC(this.apiClient,e);return x=pe("batchPredictionJobs/{name}",p._url),g=p._query,delete p._url,delete p._query,m=this.apiClient.request({path:x,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(b=>{const k=b;return k.sdkHttpResponse={headers:v.headers},k})),m.then(v=>aC(v))}else{const p=nC(this.apiClient,e);return x=pe("batches/{name}",p._url),g=p._query,delete p._url,delete p._query,m=this.apiClient.request({path:x,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(c=e.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(b=>{const k=b;return k.sdkHttpResponse={headers:v.headers},k})),m.then(v=>sC(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function WC(t){const e={},s=r(t,["apiKeyString"]);return s!=null&&u(e,["apiKeyString"],s),e}function eT(t){const e={},s=r(t,["apiKeyConfig"]);s!=null&&u(e,["apiKeyConfig"],WC(s));const a=r(t,["authType"]);a!=null&&u(e,["authType"],a);const c=r(t,["googleServiceAccountConfig"]);c!=null&&u(e,["googleServiceAccountConfig"],c);const f=r(t,["httpBasicAuthConfig"]);f!=null&&u(e,["httpBasicAuthConfig"],f);const m=r(t,["oauthConfig"]);m!=null&&u(e,["oauthConfig"],m);const x=r(t,["oidcConfig"]);return x!=null&&u(e,["oidcConfig"],x),e}function tT(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=r(t,["data"]);s!=null&&u(e,["data"],s);const a=r(t,["mimeType"]);return a!=null&&u(e,["mimeType"],a),e}function nT(t){const e={},s=r(t,["displayName"]);s!=null&&u(e,["displayName"],s);const a=r(t,["data"]);a!=null&&u(e,["data"],a);const c=r(t,["mimeType"]);return c!=null&&u(e,["mimeType"],c),e}function Si(t){const e={},s=r(t,["name"]);s!=null&&u(e,["name"],s);const a=r(t,["displayName"]);a!=null&&u(e,["displayName"],a);const c=r(t,["model"]);c!=null&&u(e,["model"],c);const f=r(t,["createTime"]);f!=null&&u(e,["createTime"],f);const m=r(t,["updateTime"]);m!=null&&u(e,["updateTime"],m);const x=r(t,["expireTime"]);x!=null&&u(e,["expireTime"],x);const g=r(t,["usageMetadata"]);return g!=null&&u(e,["usageMetadata"],g),e}function wi(t){const e={},s=r(t,["name"]);s!=null&&u(e,["name"],s);const a=r(t,["displayName"]);a!=null&&u(e,["displayName"],a);const c=r(t,["model"]);c!=null&&u(e,["model"],c);const f=r(t,["createTime"]);f!=null&&u(e,["createTime"],f);const m=r(t,["updateTime"]);m!=null&&u(e,["updateTime"],m);const x=r(t,["expireTime"]);x!=null&&u(e,["expireTime"],x);const g=r(t,["usageMetadata"]);return g!=null&&u(e,["usageMetadata"],g),e}function lT(t){const e={},s=r(t,["environment"]);s!=null&&u(e,["environment"],s);const a=r(t,["excludedPredefinedFunctions"]);return a!=null&&u(e,["excludedPredefinedFunctions"],a),e}function sT(t){const e={},s=r(t,["environment"]);s!=null&&u(e,["environment"],s);const a=r(t,["excludedPredefinedFunctions"]);return a!=null&&u(e,["excludedPredefinedFunctions"],a),e}function dp(t){const e={},s=r(t,["parts"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(f=>BT(f))),u(e,["parts"],c)}const a=r(t,["role"]);return a!=null&&u(e,["role"],a),e}function fp(t){const e={},s=r(t,["parts"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(f=>GT(f))),u(e,["parts"],c)}const a=r(t,["role"]);return a!=null&&u(e,["role"],a),e}function aT(t,e){const s={},a=r(t,["ttl"]);e!==void 0&&a!=null&&u(e,["ttl"],a);const c=r(t,["expireTime"]);e!==void 0&&c!=null&&u(e,["expireTime"],c);const f=r(t,["displayName"]);e!==void 0&&f!=null&&u(e,["displayName"],f);const m=r(t,["contents"]);if(e!==void 0&&m!=null){let v=sn(m);Array.isArray(v)&&(v=v.map(b=>dp(b))),u(e,["contents"],v)}const x=r(t,["systemInstruction"]);e!==void 0&&x!=null&&u(e,["systemInstruction"],dp(Mt(x)));const g=r(t,["tools"]);if(e!==void 0&&g!=null){let v=g;Array.isArray(v)&&(v=v.map(b=>YT(b))),u(e,["tools"],v)}const p=r(t,["toolConfig"]);if(e!==void 0&&p!=null&&u(e,["toolConfig"],OT(p)),r(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return s}function oT(t,e){const s={},a=r(t,["ttl"]);e!==void 0&&a!=null&&u(e,["ttl"],a);const c=r(t,["expireTime"]);e!==void 0&&c!=null&&u(e,["expireTime"],c);const f=r(t,["displayName"]);e!==void 0&&f!=null&&u(e,["displayName"],f);const m=r(t,["contents"]);if(e!==void 0&&m!=null){let b=sn(m);Array.isArray(b)&&(b=b.map(k=>fp(k))),u(e,["contents"],b)}const x=r(t,["systemInstruction"]);e!==void 0&&x!=null&&u(e,["systemInstruction"],fp(Mt(x)));const g=r(t,["tools"]);if(e!==void 0&&g!=null){let b=g;Array.isArray(b)&&(b=b.map(k=>KT(k))),u(e,["tools"],b)}const p=r(t,["toolConfig"]);e!==void 0&&p!=null&&u(e,["toolConfig"],JT(p));const v=r(t,["kmsKeyName"]);return e!==void 0&&v!=null&&u(e,["encryption_spec","kmsKeyName"],v),s}function iT(t,e){const s={},a=r(e,["model"]);a!=null&&u(s,["model"],$p(t,a));const c=r(e,["config"]);return c!=null&&aT(c,s),s}function rT(t,e){const s={},a=r(e,["model"]);a!=null&&u(s,["model"],$p(t,a));const c=r(e,["config"]);return c!=null&&oT(c,s),s}function uT(t,e){const s={},a=r(e,["name"]);return a!=null&&u(s,["_url","name"],Yn(t,a)),s}function cT(t,e){const s={},a=r(e,["name"]);return a!=null&&u(s,["_url","name"],Yn(t,a)),s}function dT(t){const e={},s=r(t,["sdkHttpResponse"]);return s!=null&&u(e,["sdkHttpResponse"],s),e}function fT(t){const e={},s=r(t,["sdkHttpResponse"]);return s!=null&&u(e,["sdkHttpResponse"],s),e}function mT(t){const e={},s=r(t,["mode"]);s!=null&&u(e,["mode"],s);const a=r(t,["dynamicThreshold"]);return a!=null&&u(e,["dynamicThreshold"],a),e}function hT(t){const e={},s=r(t,["mode"]);s!=null&&u(e,["mode"],s);const a=r(t,["dynamicThreshold"]);return a!=null&&u(e,["dynamicThreshold"],a),e}function pT(t){const e={},s=r(t,["excludeDomains"]);return s!=null&&u(e,["excludeDomains"],s),e}function gT(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=r(t,["fileUri"]);s!=null&&u(e,["fileUri"],s);const a=r(t,["mimeType"]);return a!=null&&u(e,["mimeType"],a),e}function xT(t){const e={},s=r(t,["displayName"]);s!=null&&u(e,["displayName"],s);const a=r(t,["fileUri"]);a!=null&&u(e,["fileUri"],a);const c=r(t,["mimeType"]);return c!=null&&u(e,["mimeType"],c),e}function yT(t){const e={},s=r(t,["id"]);s!=null&&u(e,["id"],s);const a=r(t,["args"]);a!=null&&u(e,["args"],a);const c=r(t,["name"]);return c!=null&&u(e,["name"],c),e}function vT(t){const e={},s=r(t,["id"]);s!=null&&u(e,["id"],s);const a=r(t,["args"]);a!=null&&u(e,["args"],a);const c=r(t,["name"]);return c!=null&&u(e,["name"],c),e}function bT(t){const e={},s=r(t,["mode"]);s!=null&&u(e,["mode"],s);const a=r(t,["allowedFunctionNames"]);return a!=null&&u(e,["allowedFunctionNames"],a),e}function kT(t){const e={},s=r(t,["mode"]);s!=null&&u(e,["mode"],s);const a=r(t,["allowedFunctionNames"]);return a!=null&&u(e,["allowedFunctionNames"],a),e}function CT(t){const e={},s=r(t,["behavior"]);s!=null&&u(e,["behavior"],s);const a=r(t,["description"]);a!=null&&u(e,["description"],a);const c=r(t,["name"]);c!=null&&u(e,["name"],c);const f=r(t,["parameters"]);f!=null&&u(e,["parameters"],f);const m=r(t,["parametersJsonSchema"]);m!=null&&u(e,["parametersJsonSchema"],m);const x=r(t,["response"]);x!=null&&u(e,["response"],x);const g=r(t,["responseJsonSchema"]);return g!=null&&u(e,["responseJsonSchema"],g),e}function TT(t){const e={};if(r(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const s=r(t,["description"]);s!=null&&u(e,["description"],s);const a=r(t,["name"]);a!=null&&u(e,["name"],a);const c=r(t,["parameters"]);c!=null&&u(e,["parameters"],c);const f=r(t,["parametersJsonSchema"]);f!=null&&u(e,["parametersJsonSchema"],f);const m=r(t,["response"]);m!=null&&u(e,["response"],m);const x=r(t,["responseJsonSchema"]);return x!=null&&u(e,["responseJsonSchema"],x),e}function NT(t,e){const s={},a=r(e,["name"]);return a!=null&&u(s,["_url","name"],Yn(t,a)),s}function ST(t,e){const s={},a=r(e,["name"]);return a!=null&&u(s,["_url","name"],Yn(t,a)),s}function wT(t){const e={},s=r(t,["authConfig"]);return s!=null&&u(e,["authConfig"],eT(s)),e}function ET(t){const e={},s=r(t,["dynamicRetrievalConfig"]);return s!=null&&u(e,["dynamicRetrievalConfig"],mT(s)),e}function MT(t){const e={},s=r(t,["dynamicRetrievalConfig"]);return s!=null&&u(e,["dynamicRetrievalConfig"],hT(s)),e}function AT(t){const e={},s=r(t,["timeRangeFilter"]);if(s!=null&&u(e,["timeRangeFilter"],RT(s)),r(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function _T(t){const e={},s=r(t,["timeRangeFilter"]);s!=null&&u(e,["timeRangeFilter"],DT(s));const a=r(t,["excludeDomains"]);return a!=null&&u(e,["excludeDomains"],a),e}function RT(t){const e={},s=r(t,["startTime"]);s!=null&&u(e,["startTime"],s);const a=r(t,["endTime"]);return a!=null&&u(e,["endTime"],a),e}function DT(t){const e={},s=r(t,["startTime"]);s!=null&&u(e,["startTime"],s);const a=r(t,["endTime"]);return a!=null&&u(e,["endTime"],a),e}function IT(t){const e={},s=r(t,["latitude"]);s!=null&&u(e,["latitude"],s);const a=r(t,["longitude"]);return a!=null&&u(e,["longitude"],a),e}function jT(t){const e={},s=r(t,["latitude"]);s!=null&&u(e,["latitude"],s);const a=r(t,["longitude"]);return a!=null&&u(e,["longitude"],a),e}function UT(t,e){const s={},a=r(t,["pageSize"]);e!==void 0&&a!=null&&u(e,["_query","pageSize"],a);const c=r(t,["pageToken"]);return e!==void 0&&c!=null&&u(e,["_query","pageToken"],c),s}function LT(t,e){const s={},a=r(t,["pageSize"]);e!==void 0&&a!=null&&u(e,["_query","pageSize"],a);const c=r(t,["pageToken"]);return e!==void 0&&c!=null&&u(e,["_query","pageToken"],c),s}function PT(t){const e={},s=r(t,["config"]);return s!=null&&UT(s,e),e}function VT(t){const e={},s=r(t,["config"]);return s!=null&&LT(s,e),e}function qT(t){const e={},s=r(t,["sdkHttpResponse"]);s!=null&&u(e,["sdkHttpResponse"],s);const a=r(t,["nextPageToken"]);a!=null&&u(e,["nextPageToken"],a);const c=r(t,["cachedContents"]);if(c!=null){let f=c;Array.isArray(f)&&(f=f.map(m=>Si(m))),u(e,["cachedContents"],f)}return e}function HT(t){const e={},s=r(t,["sdkHttpResponse"]);s!=null&&u(e,["sdkHttpResponse"],s);const a=r(t,["nextPageToken"]);a!=null&&u(e,["nextPageToken"],a);const c=r(t,["cachedContents"]);if(c!=null){let f=c;Array.isArray(f)&&(f=f.map(m=>wi(m))),u(e,["cachedContents"],f)}return e}function BT(t){const e={},s=r(t,["videoMetadata"]);s!=null&&u(e,["videoMetadata"],tN(s));const a=r(t,["thought"]);a!=null&&u(e,["thought"],a);const c=r(t,["inlineData"]);c!=null&&u(e,["inlineData"],tT(c));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],gT(f));const m=r(t,["thoughtSignature"]);m!=null&&u(e,["thoughtSignature"],m);const x=r(t,["functionCall"]);x!=null&&u(e,["functionCall"],yT(x));const g=r(t,["codeExecutionResult"]);g!=null&&u(e,["codeExecutionResult"],g);const p=r(t,["executableCode"]);p!=null&&u(e,["executableCode"],p);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const b=r(t,["text"]);return b!=null&&u(e,["text"],b),e}function GT(t){const e={},s=r(t,["videoMetadata"]);s!=null&&u(e,["videoMetadata"],nN(s));const a=r(t,["thought"]);a!=null&&u(e,["thought"],a);const c=r(t,["inlineData"]);c!=null&&u(e,["inlineData"],nT(c));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],xT(f));const m=r(t,["thoughtSignature"]);m!=null&&u(e,["thoughtSignature"],m);const x=r(t,["functionCall"]);x!=null&&u(e,["functionCall"],vT(x));const g=r(t,["codeExecutionResult"]);g!=null&&u(e,["codeExecutionResult"],g);const p=r(t,["executableCode"]);p!=null&&u(e,["executableCode"],p);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const b=r(t,["text"]);return b!=null&&u(e,["text"],b),e}function zT(t){const e={},s=r(t,["latLng"]);s!=null&&u(e,["latLng"],IT(s));const a=r(t,["languageCode"]);return a!=null&&u(e,["languageCode"],a),e}function FT(t){const e={},s=r(t,["latLng"]);s!=null&&u(e,["latLng"],jT(s));const a=r(t,["languageCode"]);return a!=null&&u(e,["languageCode"],a),e}function OT(t){const e={},s=r(t,["functionCallingConfig"]);s!=null&&u(e,["functionCallingConfig"],bT(s));const a=r(t,["retrievalConfig"]);return a!=null&&u(e,["retrievalConfig"],zT(a)),e}function JT(t){const e={},s=r(t,["functionCallingConfig"]);s!=null&&u(e,["functionCallingConfig"],kT(s));const a=r(t,["retrievalConfig"]);return a!=null&&u(e,["retrievalConfig"],FT(a)),e}function YT(t){const e={},s=r(t,["functionDeclarations"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(p=>CT(p))),u(e,["functionDeclarations"],g)}if(r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=r(t,["googleSearch"]);a!=null&&u(e,["googleSearch"],AT(a));const c=r(t,["googleSearchRetrieval"]);if(c!=null&&u(e,["googleSearchRetrieval"],ET(c)),r(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(t,["urlContext"])!=null&&u(e,["urlContext"],WT());const m=r(t,["computerUse"]);m!=null&&u(e,["computerUse"],lT(m));const x=r(t,["codeExecution"]);return x!=null&&u(e,["codeExecution"],x),e}function KT(t){const e={},s=r(t,["functionDeclarations"]);if(s!=null){let b=s;Array.isArray(b)&&(b=b.map(k=>TT(k))),u(e,["functionDeclarations"],b)}const a=r(t,["retrieval"]);a!=null&&u(e,["retrieval"],a);const c=r(t,["googleSearch"]);c!=null&&u(e,["googleSearch"],_T(c));const f=r(t,["googleSearchRetrieval"]);f!=null&&u(e,["googleSearchRetrieval"],MT(f));const m=r(t,["enterpriseWebSearch"]);m!=null&&u(e,["enterpriseWebSearch"],pT(m));const x=r(t,["googleMaps"]);x!=null&&u(e,["googleMaps"],wT(x)),r(t,["urlContext"])!=null&&u(e,["urlContext"],eN());const p=r(t,["computerUse"]);p!=null&&u(e,["computerUse"],sT(p));const v=r(t,["codeExecution"]);return v!=null&&u(e,["codeExecution"],v),e}function $T(t,e){const s={},a=r(t,["ttl"]);e!==void 0&&a!=null&&u(e,["ttl"],a);const c=r(t,["expireTime"]);return e!==void 0&&c!=null&&u(e,["expireTime"],c),s}function XT(t,e){const s={},a=r(t,["ttl"]);e!==void 0&&a!=null&&u(e,["ttl"],a);const c=r(t,["expireTime"]);return e!==void 0&&c!=null&&u(e,["expireTime"],c),s}function QT(t,e){const s={},a=r(e,["name"]);a!=null&&u(s,["_url","name"],Yn(t,a));const c=r(e,["config"]);return c!=null&&$T(c,s),s}function ZT(t,e){const s={},a=r(e,["name"]);a!=null&&u(s,["_url","name"],Yn(t,a));const c=r(e,["config"]);return c!=null&&XT(c,s),s}function WT(){return{}}function eN(){return{}}function tN(t){const e={},s=r(t,["fps"]);s!=null&&u(e,["fps"],s);const a=r(t,["endOffset"]);a!=null&&u(e,["endOffset"],a);const c=r(t,["startOffset"]);return c!=null&&u(e,["startOffset"],c),e}function nN(t){const e={},s=r(t,["fps"]);s!=null&&u(e,["fps"],s);const a=r(t,["endOffset"]);a!=null&&u(e,["endOffset"],a);const c=r(t,["startOffset"]);return c!=null&&u(e,["startOffset"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lN extends Fl{constructor(e){super(),this.apiClient=e,this.list=async(s={})=>new Ka(Gl.PAGED_ITEM_CACHED_CONTENTS,a=>this.listInternal(a),await this.listInternal(s),s)}async create(e){var s,a,c,f;let m,x="",g={};if(this.apiClient.isVertexAI()){const p=rT(this.apiClient,e);return x=pe("cachedContents",p._url),g=p._query,delete p._url,delete p._query,m=this.apiClient.request({path:x,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(v=>wi(v))}else{const p=iT(this.apiClient,e);return x=pe("cachedContents",p._url),g=p._query,delete p._url,delete p._query,m=this.apiClient.request({path:x,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(c=e.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>Si(v))}}async get(e){var s,a,c,f;let m,x="",g={};if(this.apiClient.isVertexAI()){const p=ST(this.apiClient,e);return x=pe("{name}",p._url),g=p._query,delete p._url,delete p._query,m=this.apiClient.request({path:x,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(v=>wi(v))}else{const p=NT(this.apiClient,e);return x=pe("{name}",p._url),g=p._query,delete p._url,delete p._query,m=this.apiClient.request({path:x,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(c=e.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>Si(v))}}async delete(e){var s,a,c,f;let m,x="",g={};if(this.apiClient.isVertexAI()){const p=cT(this.apiClient,e);return x=pe("{name}",p._url),g=p._query,delete p._url,delete p._query,m=this.apiClient.request({path:x,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(b=>{const k=b;return k.sdkHttpResponse={headers:v.headers},k})),m.then(v=>{const b=fT(v),k=new ap;return Object.assign(k,b),k})}else{const p=uT(this.apiClient,e);return x=pe("{name}",p._url),g=p._query,delete p._url,delete p._query,m=this.apiClient.request({path:x,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(c=e.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(b=>{const k=b;return k.sdkHttpResponse={headers:v.headers},k})),m.then(v=>{const b=dT(v),k=new ap;return Object.assign(k,b),k})}}async update(e){var s,a,c,f;let m,x="",g={};if(this.apiClient.isVertexAI()){const p=ZT(this.apiClient,e);return x=pe("{name}",p._url),g=p._query,delete p._url,delete p._query,m=this.apiClient.request({path:x,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(v=>wi(v))}else{const p=QT(this.apiClient,e);return x=pe("{name}",p._url),g=p._query,delete p._url,delete p._query,m=this.apiClient.request({path:x,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(c=e.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>Si(v))}}async listInternal(e){var s,a,c,f;let m,x="",g={};if(this.apiClient.isVertexAI()){const p=VT(e);return x=pe("cachedContents",p._url),g=p._query,delete p._url,delete p._query,m=this.apiClient.request({path:x,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(b=>{const k=b;return k.sdkHttpResponse={headers:v.headers},k})),m.then(v=>{const b=HT(v),k=new op;return Object.assign(k,b),k})}else{const p=PT(e);return x=pe("cachedContents",p._url),g=p._query,delete p._url,delete p._query,m=this.apiClient.request({path:x,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(c=e.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(b=>{const k=b;return k.sdkHttpResponse={headers:v.headers},k})),m.then(v=>{const b=qT(v),k=new op;return Object.assign(k,b),k})}}}function mp(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],a=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&a>=t.length&&(t=void 0),{value:t&&t[a++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ze(t){return this instanceof Ze?(this.v=t,this):new Ze(t)}function Us(t,e,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=s.apply(t,e||[]),c,f=[];return c=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),x("next"),x("throw"),x("return",m),c[Symbol.asyncIterator]=function(){return this},c;function m(w){return function(M){return Promise.resolve(M).then(w,b)}}function x(w,M){a[w]&&(c[w]=function(A){return new Promise(function(_,j){f.push([w,A,_,j])>1||g(w,A)})},M&&(c[w]=M(c[w])))}function g(w,M){try{p(a[w](M))}catch(A){k(f[0][3],A)}}function p(w){w.value instanceof Ze?Promise.resolve(w.value.v).then(v,b):k(f[0][2],w)}function v(w){g("next",w)}function b(w){g("throw",w)}function k(w,M){w(M),f.shift(),f.length&&g(f[0][0],f[0][1])}}function Fa(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],s;return e?e.call(t):(t=typeof mp=="function"?mp(t):t[Symbol.iterator](),s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s);function a(f){s[f]=t[f]&&function(m){return new Promise(function(x,g){m=t[f](m),c(x,g,m.done,m.value)})}}function c(f,m,x,g){Promise.resolve(g).then(function(p){f({value:p,done:x})},m)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sN(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const s=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return s===void 0?!1:cg(s)}function cg(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function aN(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function hp(t){if(t===void 0||t.length===0)return[];const e=[],s=t.length;let a=0;for(;a<s;)if(t[a].role==="user")e.push(t[a]),a++;else{const c=[];let f=!0;for(;a<s&&t[a].role==="model";)c.push(t[a]),f&&!cg(t[a])&&(f=!1),a++;f?e.push(...c):e.pop()}return e}class oN{constructor(e,s){this.modelsModule=e,this.apiClient=s}create(e){return new iN(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class iN{constructor(e,s,a,c={},f=[]){this.apiClient=e,this.modelsModule=s,this.model=a,this.config=c,this.history=f,this.sendPromise=Promise.resolve(),aN(f)}async sendMessage(e){var s;await this.sendPromise;const a=Mt(e.message),c=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(a),config:(s=e.config)!==null&&s!==void 0?s:this.config});return this.sendPromise=(async()=>{var f,m,x;const g=await c,p=(m=(f=g.candidates)===null||f===void 0?void 0:f[0])===null||m===void 0?void 0:m.content,v=g.automaticFunctionCallingHistory,b=this.getHistory(!0).length;let k=[];v!=null&&(k=(x=v.slice(b))!==null&&x!==void 0?x:[]);const w=p?[p]:[];this.recordHistory(a,w,k)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),c}async sendMessageStream(e){var s;await this.sendPromise;const a=Mt(e.message),c=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(a),config:(s=e.config)!==null&&s!==void 0?s:this.config});this.sendPromise=c.then(()=>{}).catch(()=>{});const f=await c;return this.processStreamResponse(f,a)}getHistory(e=!1){const s=e?hp(this.history):this.history;return structuredClone(s)}processStreamResponse(e,s){var a,c;return Us(this,arguments,function*(){var m,x,g,p;const v=[];try{for(var b=!0,k=Fa(e),w;w=yield Ze(k.next()),m=w.done,!m;b=!0){p=w.value,b=!1;const M=p;if(sN(M)){const A=(c=(a=M.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content;A!==void 0&&v.push(A)}yield yield Ze(M)}}catch(M){x={error:M}}finally{try{!b&&!m&&(g=k.return)&&(yield Ze(g.call(k)))}finally{if(x)throw x.error}}this.recordHistory(s,v)})}recordHistory(e,s,a){let c=[];s.length>0&&s.every(f=>f.role!==void 0)?c=s:c.push({role:"model",parts:[]}),a&&a.length>0?this.history.push(...hp(a)):this.history.push(e),this.history.push(...c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vi extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Vi.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rN(t){const e={},s=r(t,["file"]);return s!=null&&u(e,["file"],hN(s)),e}function uN(t){const e={},s=r(t,["sdkHttpResponse"]);return s!=null&&u(e,["sdkHttpResponse"],s),e}function cN(t){const e={},s=r(t,["name"]);return s!=null&&u(e,["_url","file"],tg(s)),e}function dN(t){const e={},s=r(t,["sdkHttpResponse"]);return s!=null&&u(e,["sdkHttpResponse"],s),e}function kc(t){const e={},s=r(t,["name"]);s!=null&&u(e,["name"],s);const a=r(t,["displayName"]);a!=null&&u(e,["displayName"],a);const c=r(t,["mimeType"]);c!=null&&u(e,["mimeType"],c);const f=r(t,["sizeBytes"]);f!=null&&u(e,["sizeBytes"],f);const m=r(t,["createTime"]);m!=null&&u(e,["createTime"],m);const x=r(t,["expirationTime"]);x!=null&&u(e,["expirationTime"],x);const g=r(t,["updateTime"]);g!=null&&u(e,["updateTime"],g);const p=r(t,["sha256Hash"]);p!=null&&u(e,["sha256Hash"],p);const v=r(t,["uri"]);v!=null&&u(e,["uri"],v);const b=r(t,["downloadUri"]);b!=null&&u(e,["downloadUri"],b);const k=r(t,["state"]);k!=null&&u(e,["state"],k);const w=r(t,["source"]);w!=null&&u(e,["source"],w);const M=r(t,["videoMetadata"]);M!=null&&u(e,["videoMetadata"],M);const A=r(t,["error"]);return A!=null&&u(e,["error"],fN(A)),e}function fN(t){const e={},s=r(t,["details"]);s!=null&&u(e,["details"],s);const a=r(t,["message"]);a!=null&&u(e,["message"],a);const c=r(t,["code"]);return c!=null&&u(e,["code"],c),e}function mN(t){const e={},s=r(t,["details"]);s!=null&&u(e,["details"],s);const a=r(t,["message"]);a!=null&&u(e,["message"],a);const c=r(t,["code"]);return c!=null&&u(e,["code"],c),e}function hN(t){const e={},s=r(t,["name"]);s!=null&&u(e,["name"],s);const a=r(t,["displayName"]);a!=null&&u(e,["displayName"],a);const c=r(t,["mimeType"]);c!=null&&u(e,["mimeType"],c);const f=r(t,["sizeBytes"]);f!=null&&u(e,["sizeBytes"],f);const m=r(t,["createTime"]);m!=null&&u(e,["createTime"],m);const x=r(t,["expirationTime"]);x!=null&&u(e,["expirationTime"],x);const g=r(t,["updateTime"]);g!=null&&u(e,["updateTime"],g);const p=r(t,["sha256Hash"]);p!=null&&u(e,["sha256Hash"],p);const v=r(t,["uri"]);v!=null&&u(e,["uri"],v);const b=r(t,["downloadUri"]);b!=null&&u(e,["downloadUri"],b);const k=r(t,["state"]);k!=null&&u(e,["state"],k);const w=r(t,["source"]);w!=null&&u(e,["source"],w);const M=r(t,["videoMetadata"]);M!=null&&u(e,["videoMetadata"],M);const A=r(t,["error"]);return A!=null&&u(e,["error"],mN(A)),e}function pN(t){const e={},s=r(t,["name"]);return s!=null&&u(e,["_url","file"],tg(s)),e}function gN(t,e){const s={},a=r(t,["pageSize"]);e!==void 0&&a!=null&&u(e,["_query","pageSize"],a);const c=r(t,["pageToken"]);return e!==void 0&&c!=null&&u(e,["_query","pageToken"],c),s}function xN(t){const e={},s=r(t,["config"]);return s!=null&&gN(s,e),e}function yN(t){const e={},s=r(t,["sdkHttpResponse"]);s!=null&&u(e,["sdkHttpResponse"],s);const a=r(t,["nextPageToken"]);a!=null&&u(e,["nextPageToken"],a);const c=r(t,["files"]);if(c!=null){let f=c;Array.isArray(f)&&(f=f.map(m=>kc(m))),u(e,["files"],f)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vN extends Fl{constructor(e){super(),this.apiClient=e,this.list=async(s={})=>new Ka(Gl.PAGED_ITEM_FILES,a=>this.listInternal(a),await this.listInternal(s),s)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(s=>kc(s))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var s,a;let c,f="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const x=xN(e);return f=pe("files",x._url),m=x._query,delete x._url,delete x._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(x),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),c.then(g=>{const p=yN(g),v=new Tk;return Object.assign(v,p),v})}}async createInternal(e){var s,a;let c,f="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const x=rN(e);return f=pe("upload/v1beta/files",x._url),m=x._query,delete x._url,delete x._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),c.then(g=>{const p=uN(g),v=new Nk;return Object.assign(v,p),v})}}async get(e){var s,a;let c,f="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const x=pN(e);return f=pe("files/{file}",x._url),m=x._query,delete x._url,delete x._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(x),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),c.then(g=>kc(g))}}async delete(e){var s,a;let c,f="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const x=cN(e);return f=pe("files/{file}",x._url),m=x._query,delete x._url,delete x._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(x),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),c.then(g=>{const p=dN(g),v=new Sk;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bN(){return{}}function kN(){return{}}function CN(){return{}}function TN(){return{}}function NN(t){const e={},s=r(t,["apiKeyString"]);return s!=null&&u(e,["apiKeyString"],s),e}function SN(t){const e={},s=r(t,["data"]);s!=null&&u(e,["data"],s);const a=r(t,["mimeType"]);a!=null&&u(e,["mimeType"],a);const c=r(t,["sourceMetadata"]);return c!=null&&u(e,["sourceMetadata"],x1(c)),e}function pp(){return{}}function gp(){return{}}function wN(t){const e={},s=r(t,["apiKeyConfig"]);s!=null&&u(e,["apiKeyConfig"],NN(s));const a=r(t,["authType"]);a!=null&&u(e,["authType"],a);const c=r(t,["googleServiceAccountConfig"]);c!=null&&u(e,["googleServiceAccountConfig"],c);const f=r(t,["httpBasicAuthConfig"]);f!=null&&u(e,["httpBasicAuthConfig"],f);const m=r(t,["oauthConfig"]);m!=null&&u(e,["oauthConfig"],m);const x=r(t,["oidcConfig"]);return x!=null&&u(e,["oidcConfig"],x),e}function EN(t){const e={},s=r(t,["disabled"]);s!=null&&u(e,["disabled"],s);const a=r(t,["startOfSpeechSensitivity"]);a!=null&&u(e,["startOfSpeechSensitivity"],a);const c=r(t,["endOfSpeechSensitivity"]);c!=null&&u(e,["endOfSpeechSensitivity"],c);const f=r(t,["prefixPaddingMs"]);f!=null&&u(e,["prefixPaddingMs"],f);const m=r(t,["silenceDurationMs"]);return m!=null&&u(e,["silenceDurationMs"],m),e}function MN(t){const e={},s=r(t,["disabled"]);s!=null&&u(e,["disabled"],s);const a=r(t,["startOfSpeechSensitivity"]);a!=null&&u(e,["startOfSpeechSensitivity"],a);const c=r(t,["endOfSpeechSensitivity"]);c!=null&&u(e,["endOfSpeechSensitivity"],c);const f=r(t,["prefixPaddingMs"]);f!=null&&u(e,["prefixPaddingMs"],f);const m=r(t,["silenceDurationMs"]);return m!=null&&u(e,["silenceDurationMs"],m),e}function AN(t){const e={},s=r(t,["data"]);s!=null&&u(e,["data"],s);const a=r(t,["mimeType"]);return a!=null&&u(e,["mimeType"],a),e}function _N(t){const e={},s=r(t,["displayName"]);s!=null&&u(e,["displayName"],s);const a=r(t,["data"]);a!=null&&u(e,["data"],a);const c=r(t,["mimeType"]);return c!=null&&u(e,["mimeType"],c),e}function RN(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=r(t,["data"]);s!=null&&u(e,["data"],s);const a=r(t,["mimeType"]);return a!=null&&u(e,["mimeType"],a),e}function DN(t){const e={},s=r(t,["displayName"]);s!=null&&u(e,["displayName"],s);const a=r(t,["data"]);a!=null&&u(e,["data"],a);const c=r(t,["mimeType"]);return c!=null&&u(e,["mimeType"],c),e}function IN(t){const e={},s=r(t,["environment"]);s!=null&&u(e,["environment"],s);const a=r(t,["excludedPredefinedFunctions"]);return a!=null&&u(e,["excludedPredefinedFunctions"],a),e}function jN(t){const e={},s=r(t,["environment"]);s!=null&&u(e,["environment"],s);const a=r(t,["excludedPredefinedFunctions"]);return a!=null&&u(e,["excludedPredefinedFunctions"],a),e}function UN(t){const e={},s=r(t,["parts"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(f=>U1(f))),u(e,["parts"],c)}const a=r(t,["role"]);return a!=null&&u(e,["role"],a),e}function LN(t){const e={},s=r(t,["parts"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(f=>L1(f))),u(e,["parts"],c)}const a=r(t,["role"]);return a!=null&&u(e,["role"],a),e}function PN(t){const e={},s=r(t,["parts"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(f=>P1(f))),u(e,["parts"],c)}const a=r(t,["role"]);return a!=null&&u(e,["role"],a),e}function VN(t){const e={},s=r(t,["parts"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(f=>V1(f))),u(e,["parts"],c)}const a=r(t,["role"]);return a!=null&&u(e,["role"],a),e}function qN(t){const e={},s=r(t,["triggerTokens"]);s!=null&&u(e,["triggerTokens"],s);const a=r(t,["slidingWindow"]);return a!=null&&u(e,["slidingWindow"],Y1(a)),e}function HN(t){const e={},s=r(t,["triggerTokens"]);s!=null&&u(e,["triggerTokens"],s);const a=r(t,["slidingWindow"]);return a!=null&&u(e,["slidingWindow"],K1(a)),e}function BN(t){const e={},s=r(t,["mode"]);s!=null&&u(e,["mode"],s);const a=r(t,["dynamicThreshold"]);return a!=null&&u(e,["dynamicThreshold"],a),e}function GN(t){const e={},s=r(t,["mode"]);s!=null&&u(e,["mode"],s);const a=r(t,["dynamicThreshold"]);return a!=null&&u(e,["dynamicThreshold"],a),e}function zN(t){const e={},s=r(t,["excludeDomains"]);return s!=null&&u(e,["excludeDomains"],s),e}function FN(t){const e={},s=r(t,["fileUri"]);s!=null&&u(e,["fileUri"],s);const a=r(t,["mimeType"]);return a!=null&&u(e,["mimeType"],a),e}function ON(t){const e={},s=r(t,["displayName"]);s!=null&&u(e,["displayName"],s);const a=r(t,["fileUri"]);a!=null&&u(e,["fileUri"],a);const c=r(t,["mimeType"]);return c!=null&&u(e,["mimeType"],c),e}function JN(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=r(t,["fileUri"]);s!=null&&u(e,["fileUri"],s);const a=r(t,["mimeType"]);return a!=null&&u(e,["mimeType"],a),e}function YN(t){const e={},s=r(t,["displayName"]);s!=null&&u(e,["displayName"],s);const a=r(t,["fileUri"]);a!=null&&u(e,["fileUri"],a);const c=r(t,["mimeType"]);return c!=null&&u(e,["mimeType"],c),e}function dg(t){const e={},s=r(t,["id"]);s!=null&&u(e,["id"],s);const a=r(t,["args"]);a!=null&&u(e,["args"],a);const c=r(t,["name"]);return c!=null&&u(e,["name"],c),e}function fg(t){const e={},s=r(t,["id"]);s!=null&&u(e,["id"],s);const a=r(t,["args"]);a!=null&&u(e,["args"],a);const c=r(t,["name"]);return c!=null&&u(e,["name"],c),e}function KN(t){const e={},s=r(t,["id"]);s!=null&&u(e,["id"],s);const a=r(t,["args"]);a!=null&&u(e,["args"],a);const c=r(t,["name"]);return c!=null&&u(e,["name"],c),e}function $N(t){const e={},s=r(t,["id"]);s!=null&&u(e,["id"],s);const a=r(t,["args"]);a!=null&&u(e,["args"],a);const c=r(t,["name"]);return c!=null&&u(e,["name"],c),e}function XN(t){const e={},s=r(t,["behavior"]);s!=null&&u(e,["behavior"],s);const a=r(t,["description"]);a!=null&&u(e,["description"],a);const c=r(t,["name"]);c!=null&&u(e,["name"],c);const f=r(t,["parameters"]);f!=null&&u(e,["parameters"],f);const m=r(t,["parametersJsonSchema"]);m!=null&&u(e,["parametersJsonSchema"],m);const x=r(t,["response"]);x!=null&&u(e,["response"],x);const g=r(t,["responseJsonSchema"]);return g!=null&&u(e,["responseJsonSchema"],g),e}function QN(t){const e={};if(r(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const s=r(t,["description"]);s!=null&&u(e,["description"],s);const a=r(t,["name"]);a!=null&&u(e,["name"],a);const c=r(t,["parameters"]);c!=null&&u(e,["parameters"],c);const f=r(t,["parametersJsonSchema"]);f!=null&&u(e,["parametersJsonSchema"],f);const m=r(t,["response"]);m!=null&&u(e,["response"],m);const x=r(t,["responseJsonSchema"]);return x!=null&&u(e,["responseJsonSchema"],x),e}function ZN(t){const e={},s=r(t,["authConfig"]);return s!=null&&u(e,["authConfig"],wN(s)),e}function WN(t){const e={},s=r(t,["dynamicRetrievalConfig"]);return s!=null&&u(e,["dynamicRetrievalConfig"],BN(s)),e}function e1(t){const e={},s=r(t,["dynamicRetrievalConfig"]);return s!=null&&u(e,["dynamicRetrievalConfig"],GN(s)),e}function t1(t){const e={},s=r(t,["timeRangeFilter"]);if(s!=null&&u(e,["timeRangeFilter"],l1(s)),r(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function n1(t){const e={},s=r(t,["timeRangeFilter"]);s!=null&&u(e,["timeRangeFilter"],s1(s));const a=r(t,["excludeDomains"]);return a!=null&&u(e,["excludeDomains"],a),e}function l1(t){const e={},s=r(t,["startTime"]);s!=null&&u(e,["startTime"],s);const a=r(t,["endTime"]);return a!=null&&u(e,["endTime"],a),e}function s1(t){const e={},s=r(t,["startTime"]);s!=null&&u(e,["startTime"],s);const a=r(t,["endTime"]);return a!=null&&u(e,["endTime"],a),e}function a1(t,e){const s={},a=r(t,["generationConfig"]);e!==void 0&&a!=null&&u(e,["setup","generationConfig"],a);const c=r(t,["responseModalities"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","responseModalities"],c);const f=r(t,["temperature"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","temperature"],f);const m=r(t,["topP"]);e!==void 0&&m!=null&&u(e,["setup","generationConfig","topP"],m);const x=r(t,["topK"]);e!==void 0&&x!=null&&u(e,["setup","generationConfig","topK"],x);const g=r(t,["maxOutputTokens"]);e!==void 0&&g!=null&&u(e,["setup","generationConfig","maxOutputTokens"],g);const p=r(t,["mediaResolution"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","mediaResolution"],p);const v=r(t,["seed"]);e!==void 0&&v!=null&&u(e,["setup","generationConfig","seed"],v);const b=r(t,["speechConfig"]);e!==void 0&&b!=null&&u(e,["setup","generationConfig","speechConfig"],X1(zc(b)));const k=r(t,["thinkingConfig"]);e!==void 0&&k!=null&&u(e,["setup","generationConfig","thinkingConfig"],Z1(k));const w=r(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],w);const M=r(t,["systemInstruction"]);e!==void 0&&M!=null&&u(e,["setup","systemInstruction"],PN(Mt(M)));const A=r(t,["tools"]);if(e!==void 0&&A!=null){let se=Bs(A);Array.isArray(se)&&(se=se.map(F=>eS(Hs(F)))),u(e,["setup","tools"],se)}const _=r(t,["sessionResumption"]);e!==void 0&&_!=null&&u(e,["setup","sessionResumption"],O1(_));const j=r(t,["inputAudioTranscription"]);e!==void 0&&j!=null&&u(e,["setup","inputAudioTranscription"],pp());const D=r(t,["outputAudioTranscription"]);e!==void 0&&D!=null&&u(e,["setup","outputAudioTranscription"],pp());const I=r(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&u(e,["setup","realtimeInputConfig"],z1(I));const q=r(t,["contextWindowCompression"]);e!==void 0&&q!=null&&u(e,["setup","contextWindowCompression"],qN(q));const ee=r(t,["proactivity"]);return e!==void 0&&ee!=null&&u(e,["setup","proactivity"],B1(ee)),s}function o1(t,e){const s={},a=r(t,["generationConfig"]);e!==void 0&&a!=null&&u(e,["setup","generationConfig"],a);const c=r(t,["responseModalities"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","responseModalities"],c);const f=r(t,["temperature"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","temperature"],f);const m=r(t,["topP"]);e!==void 0&&m!=null&&u(e,["setup","generationConfig","topP"],m);const x=r(t,["topK"]);e!==void 0&&x!=null&&u(e,["setup","generationConfig","topK"],x);const g=r(t,["maxOutputTokens"]);e!==void 0&&g!=null&&u(e,["setup","generationConfig","maxOutputTokens"],g);const p=r(t,["mediaResolution"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","mediaResolution"],p);const v=r(t,["seed"]);e!==void 0&&v!=null&&u(e,["setup","generationConfig","seed"],v);const b=r(t,["speechConfig"]);e!==void 0&&b!=null&&u(e,["setup","generationConfig","speechConfig"],Q1(zc(b)));const k=r(t,["thinkingConfig"]);e!==void 0&&k!=null&&u(e,["setup","generationConfig","thinkingConfig"],W1(k));const w=r(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],w);const M=r(t,["systemInstruction"]);e!==void 0&&M!=null&&u(e,["setup","systemInstruction"],VN(Mt(M)));const A=r(t,["tools"]);if(e!==void 0&&A!=null){let se=Bs(A);Array.isArray(se)&&(se=se.map(F=>tS(Hs(F)))),u(e,["setup","tools"],se)}const _=r(t,["sessionResumption"]);e!==void 0&&_!=null&&u(e,["setup","sessionResumption"],J1(_));const j=r(t,["inputAudioTranscription"]);e!==void 0&&j!=null&&u(e,["setup","inputAudioTranscription"],gp());const D=r(t,["outputAudioTranscription"]);e!==void 0&&D!=null&&u(e,["setup","outputAudioTranscription"],gp());const I=r(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&u(e,["setup","realtimeInputConfig"],F1(I));const q=r(t,["contextWindowCompression"]);e!==void 0&&q!=null&&u(e,["setup","contextWindowCompression"],HN(q));const ee=r(t,["proactivity"]);return e!==void 0&&ee!=null&&u(e,["setup","proactivity"],G1(ee)),s}function i1(t,e){const s={},a=r(e,["model"]);a!=null&&u(s,["setup","model"],Ve(t,a));const c=r(e,["config"]);return c!=null&&u(s,["config"],a1(c,s)),s}function r1(t,e){const s={},a=r(e,["model"]);a!=null&&u(s,["setup","model"],Ve(t,a));const c=r(e,["config"]);return c!=null&&u(s,["config"],o1(c,s)),s}function u1(t){const e={},s=r(t,["weightedPrompts"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>mS(c))),u(e,["weightedPrompts"],a)}return e}function mg(t){const e={},s=r(t,["weightedPrompts"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>xg(c))),u(e,["weightedPrompts"],a)}return e}function Cc(t){const e={},s=r(t,["setup"]);s!=null&&u(e,["setup"],hg(s));const a=r(t,["clientContent"]);a!=null&&u(e,["clientContent"],mg(a));const c=r(t,["musicGenerationConfig"]);c!=null&&u(e,["musicGenerationConfig"],pg(c));const f=r(t,["playbackControl"]);return f!=null&&u(e,["playbackControl"],f),e}function hg(t){const e={},s=r(t,["model"]);return s!=null&&u(e,["model"],s),e}function c1(t){const e={},s=r(t,["text"]);s!=null&&u(e,["text"],s);const a=r(t,["filteredReason"]);return a!=null&&u(e,["filteredReason"],a),e}function d1(t){const e={},s=r(t,["temperature"]);s!=null&&u(e,["temperature"],s);const a=r(t,["topK"]);a!=null&&u(e,["topK"],a);const c=r(t,["seed"]);c!=null&&u(e,["seed"],c);const f=r(t,["guidance"]);f!=null&&u(e,["guidance"],f);const m=r(t,["bpm"]);m!=null&&u(e,["bpm"],m);const x=r(t,["density"]);x!=null&&u(e,["density"],x);const g=r(t,["brightness"]);g!=null&&u(e,["brightness"],g);const p=r(t,["scale"]);p!=null&&u(e,["scale"],p);const v=r(t,["muteBass"]);v!=null&&u(e,["muteBass"],v);const b=r(t,["muteDrums"]);b!=null&&u(e,["muteDrums"],b);const k=r(t,["onlyBassAndDrums"]);k!=null&&u(e,["onlyBassAndDrums"],k);const w=r(t,["musicGenerationMode"]);return w!=null&&u(e,["musicGenerationMode"],w),e}function pg(t){const e={},s=r(t,["temperature"]);s!=null&&u(e,["temperature"],s);const a=r(t,["topK"]);a!=null&&u(e,["topK"],a);const c=r(t,["seed"]);c!=null&&u(e,["seed"],c);const f=r(t,["guidance"]);f!=null&&u(e,["guidance"],f);const m=r(t,["bpm"]);m!=null&&u(e,["bpm"],m);const x=r(t,["density"]);x!=null&&u(e,["density"],x);const g=r(t,["brightness"]);g!=null&&u(e,["brightness"],g);const p=r(t,["scale"]);p!=null&&u(e,["scale"],p);const v=r(t,["muteBass"]);v!=null&&u(e,["muteBass"],v);const b=r(t,["muteDrums"]);b!=null&&u(e,["muteDrums"],b);const k=r(t,["onlyBassAndDrums"]);k!=null&&u(e,["onlyBassAndDrums"],k);const w=r(t,["musicGenerationMode"]);return w!=null&&u(e,["musicGenerationMode"],w),e}function f1(t){const e={},s=r(t,["audioChunks"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>SN(c))),u(e,["audioChunks"],a)}return e}function m1(t){const e={};r(t,["setupComplete"])!=null&&u(e,["setupComplete"],h1());const a=r(t,["serverContent"]);a!=null&&u(e,["serverContent"],f1(a));const c=r(t,["filteredPrompt"]);return c!=null&&u(e,["filteredPrompt"],c1(c)),e}function h1(){return{}}function p1(t){const e={},s=r(t,["musicGenerationConfig"]);return s!=null&&u(e,["musicGenerationConfig"],pg(s)),e}function g1(t){const e={},s=r(t,["weightedPrompts"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>xg(c))),u(e,["weightedPrompts"],a)}return e}function x1(t){const e={},s=r(t,["clientContent"]);s!=null&&u(e,["clientContent"],u1(s));const a=r(t,["musicGenerationConfig"]);return a!=null&&u(e,["musicGenerationConfig"],d1(a)),e}function y1(t){const e={},s=r(t,["media"]);if(s!=null){let p=Xp(s);Array.isArray(p)&&(p=p.map(v=>v)),u(e,["mediaChunks"],p)}const a=r(t,["audio"]);a!=null&&u(e,["audio"],Zp(a));const c=r(t,["audioStreamEnd"]);c!=null&&u(e,["audioStreamEnd"],c);const f=r(t,["video"]);f!=null&&u(e,["video"],Qp(f));const m=r(t,["text"]);return m!=null&&u(e,["text"],m),r(t,["activityStart"])!=null&&u(e,["activityStart"],CN()),r(t,["activityEnd"])!=null&&u(e,["activityEnd"],bN()),e}function v1(t){const e={},s=r(t,["media"]);if(s!=null){let p=Xp(s);Array.isArray(p)&&(p=p.map(v=>v)),u(e,["mediaChunks"],p)}const a=r(t,["audio"]);a!=null&&u(e,["audio"],Zp(a));const c=r(t,["audioStreamEnd"]);c!=null&&u(e,["audioStreamEnd"],c);const f=r(t,["video"]);f!=null&&u(e,["video"],Qp(f));const m=r(t,["text"]);return m!=null&&u(e,["text"],m),r(t,["activityStart"])!=null&&u(e,["activityStart"],TN()),r(t,["activityEnd"])!=null&&u(e,["activityEnd"],kN()),e}function b1(t){const e={},s=r(t,["modelTurn"]);s!=null&&u(e,["modelTurn"],UN(s));const a=r(t,["turnComplete"]);a!=null&&u(e,["turnComplete"],a);const c=r(t,["interrupted"]);c!=null&&u(e,["interrupted"],c);const f=r(t,["groundingMetadata"]);f!=null&&u(e,["groundingMetadata"],f);const m=r(t,["generationComplete"]);m!=null&&u(e,["generationComplete"],m);const x=r(t,["inputTranscription"]);x!=null&&u(e,["inputTranscription"],xp(x));const g=r(t,["outputTranscription"]);g!=null&&u(e,["outputTranscription"],xp(g));const p=r(t,["urlContextMetadata"]);p!=null&&u(e,["urlContextMetadata"],nS(p));const v=r(t,["turnCompleteReason"]);v!=null&&u(e,["turnCompleteReason"],v);const b=r(t,["waitingForInput"]);return b!=null&&u(e,["waitingForInput"],b),e}function k1(t){const e={},s=r(t,["modelTurn"]);s!=null&&u(e,["modelTurn"],LN(s));const a=r(t,["turnComplete"]);a!=null&&u(e,["turnComplete"],a);const c=r(t,["interrupted"]);c!=null&&u(e,["interrupted"],c);const f=r(t,["groundingMetadata"]);f!=null&&u(e,["groundingMetadata"],f);const m=r(t,["generationComplete"]);m!=null&&u(e,["generationComplete"],m);const x=r(t,["inputTranscription"]);x!=null&&u(e,["inputTranscription"],yp(x));const g=r(t,["outputTranscription"]);g!=null&&u(e,["outputTranscription"],yp(g));const p=r(t,["turnCompleteReason"]);p!=null&&u(e,["turnCompleteReason"],p);const v=r(t,["waitingForInput"]);return v!=null&&u(e,["waitingForInput"],v),e}function C1(t){const e={},s=r(t,["timeLeft"]);return s!=null&&u(e,["timeLeft"],s),e}function T1(t){const e={},s=r(t,["timeLeft"]);return s!=null&&u(e,["timeLeft"],s),e}function N1(t){const e={};r(t,["setupComplete"])!=null&&u(e,["setupComplete"],M1());const a=r(t,["serverContent"]);a!=null&&u(e,["serverContent"],b1(a));const c=r(t,["toolCall"]);c!=null&&u(e,["toolCall"],D1(c));const f=r(t,["toolCallCancellation"]);f!=null&&u(e,["toolCallCancellation"],_1(f));const m=r(t,["usageMetadata"]);m!=null&&u(e,["usageMetadata"],oS(m));const x=r(t,["goAway"]);x!=null&&u(e,["goAway"],C1(x));const g=r(t,["sessionResumptionUpdate"]);return g!=null&&u(e,["sessionResumptionUpdate"],w1(g)),e}function S1(t){const e={},s=r(t,["setupComplete"]);s!=null&&u(e,["setupComplete"],A1(s));const a=r(t,["serverContent"]);a!=null&&u(e,["serverContent"],k1(a));const c=r(t,["toolCall"]);c!=null&&u(e,["toolCall"],I1(c));const f=r(t,["toolCallCancellation"]);f!=null&&u(e,["toolCallCancellation"],R1(f));const m=r(t,["usageMetadata"]);m!=null&&u(e,["usageMetadata"],iS(m));const x=r(t,["goAway"]);x!=null&&u(e,["goAway"],T1(x));const g=r(t,["sessionResumptionUpdate"]);return g!=null&&u(e,["sessionResumptionUpdate"],E1(g)),e}function w1(t){const e={},s=r(t,["newHandle"]);s!=null&&u(e,["newHandle"],s);const a=r(t,["resumable"]);a!=null&&u(e,["resumable"],a);const c=r(t,["lastConsumedClientMessageIndex"]);return c!=null&&u(e,["lastConsumedClientMessageIndex"],c),e}function E1(t){const e={},s=r(t,["newHandle"]);s!=null&&u(e,["newHandle"],s);const a=r(t,["resumable"]);a!=null&&u(e,["resumable"],a);const c=r(t,["lastConsumedClientMessageIndex"]);return c!=null&&u(e,["lastConsumedClientMessageIndex"],c),e}function M1(){return{}}function A1(t){const e={},s=r(t,["sessionId"]);return s!=null&&u(e,["sessionId"],s),e}function _1(t){const e={},s=r(t,["ids"]);return s!=null&&u(e,["ids"],s),e}function R1(t){const e={},s=r(t,["ids"]);return s!=null&&u(e,["ids"],s),e}function D1(t){const e={},s=r(t,["functionCalls"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>dg(c))),u(e,["functionCalls"],a)}return e}function I1(t){const e={},s=r(t,["functionCalls"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>fg(c))),u(e,["functionCalls"],a)}return e}function xi(t){const e={},s=r(t,["modality"]);s!=null&&u(e,["modality"],s);const a=r(t,["tokenCount"]);return a!=null&&u(e,["tokenCount"],a),e}function yi(t){const e={},s=r(t,["modality"]);s!=null&&u(e,["modality"],s);const a=r(t,["tokenCount"]);return a!=null&&u(e,["tokenCount"],a),e}function j1(t){const e={},s=r(t,["speakerVoiceConfigs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>$1(c))),u(e,["speakerVoiceConfigs"],a)}return e}function U1(t){const e={},s=r(t,["videoMetadata"]);s!=null&&u(e,["videoMetadata"],rS(s));const a=r(t,["thought"]);a!=null&&u(e,["thought"],a);const c=r(t,["inlineData"]);c!=null&&u(e,["inlineData"],AN(c));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],FN(f));const m=r(t,["thoughtSignature"]);m!=null&&u(e,["thoughtSignature"],m);const x=r(t,["functionCall"]);x!=null&&u(e,["functionCall"],dg(x));const g=r(t,["codeExecutionResult"]);g!=null&&u(e,["codeExecutionResult"],g);const p=r(t,["executableCode"]);p!=null&&u(e,["executableCode"],p);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const b=r(t,["text"]);return b!=null&&u(e,["text"],b),e}function L1(t){const e={},s=r(t,["videoMetadata"]);s!=null&&u(e,["videoMetadata"],uS(s));const a=r(t,["thought"]);a!=null&&u(e,["thought"],a);const c=r(t,["inlineData"]);c!=null&&u(e,["inlineData"],_N(c));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],ON(f));const m=r(t,["thoughtSignature"]);m!=null&&u(e,["thoughtSignature"],m);const x=r(t,["functionCall"]);x!=null&&u(e,["functionCall"],fg(x));const g=r(t,["codeExecutionResult"]);g!=null&&u(e,["codeExecutionResult"],g);const p=r(t,["executableCode"]);p!=null&&u(e,["executableCode"],p);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const b=r(t,["text"]);return b!=null&&u(e,["text"],b),e}function P1(t){const e={},s=r(t,["videoMetadata"]);s!=null&&u(e,["videoMetadata"],cS(s));const a=r(t,["thought"]);a!=null&&u(e,["thought"],a);const c=r(t,["inlineData"]);c!=null&&u(e,["inlineData"],RN(c));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],JN(f));const m=r(t,["thoughtSignature"]);m!=null&&u(e,["thoughtSignature"],m);const x=r(t,["functionCall"]);x!=null&&u(e,["functionCall"],KN(x));const g=r(t,["codeExecutionResult"]);g!=null&&u(e,["codeExecutionResult"],g);const p=r(t,["executableCode"]);p!=null&&u(e,["executableCode"],p);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const b=r(t,["text"]);return b!=null&&u(e,["text"],b),e}function V1(t){const e={},s=r(t,["videoMetadata"]);s!=null&&u(e,["videoMetadata"],dS(s));const a=r(t,["thought"]);a!=null&&u(e,["thought"],a);const c=r(t,["inlineData"]);c!=null&&u(e,["inlineData"],DN(c));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],YN(f));const m=r(t,["thoughtSignature"]);m!=null&&u(e,["thoughtSignature"],m);const x=r(t,["functionCall"]);x!=null&&u(e,["functionCall"],$N(x));const g=r(t,["codeExecutionResult"]);g!=null&&u(e,["codeExecutionResult"],g);const p=r(t,["executableCode"]);p!=null&&u(e,["executableCode"],p);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const b=r(t,["text"]);return b!=null&&u(e,["text"],b),e}function q1(t){const e={},s=r(t,["voiceName"]);return s!=null&&u(e,["voiceName"],s),e}function H1(t){const e={},s=r(t,["voiceName"]);return s!=null&&u(e,["voiceName"],s),e}function B1(t){const e={},s=r(t,["proactiveAudio"]);return s!=null&&u(e,["proactiveAudio"],s),e}function G1(t){const e={},s=r(t,["proactiveAudio"]);return s!=null&&u(e,["proactiveAudio"],s),e}function z1(t){const e={},s=r(t,["automaticActivityDetection"]);s!=null&&u(e,["automaticActivityDetection"],EN(s));const a=r(t,["activityHandling"]);a!=null&&u(e,["activityHandling"],a);const c=r(t,["turnCoverage"]);return c!=null&&u(e,["turnCoverage"],c),e}function F1(t){const e={},s=r(t,["automaticActivityDetection"]);s!=null&&u(e,["automaticActivityDetection"],MN(s));const a=r(t,["activityHandling"]);a!=null&&u(e,["activityHandling"],a);const c=r(t,["turnCoverage"]);return c!=null&&u(e,["turnCoverage"],c),e}function O1(t){const e={},s=r(t,["handle"]);if(s!=null&&u(e,["handle"],s),r(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function J1(t){const e={},s=r(t,["handle"]);s!=null&&u(e,["handle"],s);const a=r(t,["transparent"]);return a!=null&&u(e,["transparent"],a),e}function Y1(t){const e={},s=r(t,["targetTokens"]);return s!=null&&u(e,["targetTokens"],s),e}function K1(t){const e={},s=r(t,["targetTokens"]);return s!=null&&u(e,["targetTokens"],s),e}function $1(t){const e={},s=r(t,["speaker"]);s!=null&&u(e,["speaker"],s);const a=r(t,["voiceConfig"]);return a!=null&&u(e,["voiceConfig"],gg(a)),e}function X1(t){const e={},s=r(t,["voiceConfig"]);s!=null&&u(e,["voiceConfig"],gg(s));const a=r(t,["multiSpeakerVoiceConfig"]);a!=null&&u(e,["multiSpeakerVoiceConfig"],j1(a));const c=r(t,["languageCode"]);return c!=null&&u(e,["languageCode"],c),e}function Q1(t){const e={},s=r(t,["voiceConfig"]);if(s!=null&&u(e,["voiceConfig"],fS(s)),r(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const a=r(t,["languageCode"]);return a!=null&&u(e,["languageCode"],a),e}function Z1(t){const e={},s=r(t,["includeThoughts"]);s!=null&&u(e,["includeThoughts"],s);const a=r(t,["thinkingBudget"]);return a!=null&&u(e,["thinkingBudget"],a),e}function W1(t){const e={},s=r(t,["includeThoughts"]);s!=null&&u(e,["includeThoughts"],s);const a=r(t,["thinkingBudget"]);return a!=null&&u(e,["thinkingBudget"],a),e}function eS(t){const e={},s=r(t,["functionDeclarations"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(p=>XN(p))),u(e,["functionDeclarations"],g)}if(r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=r(t,["googleSearch"]);a!=null&&u(e,["googleSearch"],t1(a));const c=r(t,["googleSearchRetrieval"]);if(c!=null&&u(e,["googleSearchRetrieval"],WN(c)),r(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(t,["urlContext"])!=null&&u(e,["urlContext"],lS());const m=r(t,["computerUse"]);m!=null&&u(e,["computerUse"],IN(m));const x=r(t,["codeExecution"]);return x!=null&&u(e,["codeExecution"],x),e}function tS(t){const e={},s=r(t,["functionDeclarations"]);if(s!=null){let b=s;Array.isArray(b)&&(b=b.map(k=>QN(k))),u(e,["functionDeclarations"],b)}const a=r(t,["retrieval"]);a!=null&&u(e,["retrieval"],a);const c=r(t,["googleSearch"]);c!=null&&u(e,["googleSearch"],n1(c));const f=r(t,["googleSearchRetrieval"]);f!=null&&u(e,["googleSearchRetrieval"],e1(f));const m=r(t,["enterpriseWebSearch"]);m!=null&&u(e,["enterpriseWebSearch"],zN(m));const x=r(t,["googleMaps"]);x!=null&&u(e,["googleMaps"],ZN(x)),r(t,["urlContext"])!=null&&u(e,["urlContext"],sS());const p=r(t,["computerUse"]);p!=null&&u(e,["computerUse"],jN(p));const v=r(t,["codeExecution"]);return v!=null&&u(e,["codeExecution"],v),e}function xp(t){const e={},s=r(t,["text"]);s!=null&&u(e,["text"],s);const a=r(t,["finished"]);return a!=null&&u(e,["finished"],a),e}function yp(t){const e={},s=r(t,["text"]);s!=null&&u(e,["text"],s);const a=r(t,["finished"]);return a!=null&&u(e,["finished"],a),e}function nS(t){const e={},s=r(t,["urlMetadata"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>aS(c))),u(e,["urlMetadata"],a)}return e}function lS(){return{}}function sS(){return{}}function aS(t){const e={},s=r(t,["retrievedUrl"]);s!=null&&u(e,["retrievedUrl"],s);const a=r(t,["urlRetrievalStatus"]);return a!=null&&u(e,["urlRetrievalStatus"],a),e}function oS(t){const e={},s=r(t,["promptTokenCount"]);s!=null&&u(e,["promptTokenCount"],s);const a=r(t,["cachedContentTokenCount"]);a!=null&&u(e,["cachedContentTokenCount"],a);const c=r(t,["responseTokenCount"]);c!=null&&u(e,["responseTokenCount"],c);const f=r(t,["toolUsePromptTokenCount"]);f!=null&&u(e,["toolUsePromptTokenCount"],f);const m=r(t,["thoughtsTokenCount"]);m!=null&&u(e,["thoughtsTokenCount"],m);const x=r(t,["totalTokenCount"]);x!=null&&u(e,["totalTokenCount"],x);const g=r(t,["promptTokensDetails"]);if(g!=null){let k=g;Array.isArray(k)&&(k=k.map(w=>xi(w))),u(e,["promptTokensDetails"],k)}const p=r(t,["cacheTokensDetails"]);if(p!=null){let k=p;Array.isArray(k)&&(k=k.map(w=>xi(w))),u(e,["cacheTokensDetails"],k)}const v=r(t,["responseTokensDetails"]);if(v!=null){let k=v;Array.isArray(k)&&(k=k.map(w=>xi(w))),u(e,["responseTokensDetails"],k)}const b=r(t,["toolUsePromptTokensDetails"]);if(b!=null){let k=b;Array.isArray(k)&&(k=k.map(w=>xi(w))),u(e,["toolUsePromptTokensDetails"],k)}return e}function iS(t){const e={},s=r(t,["promptTokenCount"]);s!=null&&u(e,["promptTokenCount"],s);const a=r(t,["cachedContentTokenCount"]);a!=null&&u(e,["cachedContentTokenCount"],a);const c=r(t,["candidatesTokenCount"]);c!=null&&u(e,["responseTokenCount"],c);const f=r(t,["toolUsePromptTokenCount"]);f!=null&&u(e,["toolUsePromptTokenCount"],f);const m=r(t,["thoughtsTokenCount"]);m!=null&&u(e,["thoughtsTokenCount"],m);const x=r(t,["totalTokenCount"]);x!=null&&u(e,["totalTokenCount"],x);const g=r(t,["promptTokensDetails"]);if(g!=null){let w=g;Array.isArray(w)&&(w=w.map(M=>yi(M))),u(e,["promptTokensDetails"],w)}const p=r(t,["cacheTokensDetails"]);if(p!=null){let w=p;Array.isArray(w)&&(w=w.map(M=>yi(M))),u(e,["cacheTokensDetails"],w)}const v=r(t,["candidatesTokensDetails"]);if(v!=null){let w=v;Array.isArray(w)&&(w=w.map(M=>yi(M))),u(e,["responseTokensDetails"],w)}const b=r(t,["toolUsePromptTokensDetails"]);if(b!=null){let w=b;Array.isArray(w)&&(w=w.map(M=>yi(M))),u(e,["toolUsePromptTokensDetails"],w)}const k=r(t,["trafficType"]);return k!=null&&u(e,["trafficType"],k),e}function rS(t){const e={},s=r(t,["fps"]);s!=null&&u(e,["fps"],s);const a=r(t,["endOffset"]);a!=null&&u(e,["endOffset"],a);const c=r(t,["startOffset"]);return c!=null&&u(e,["startOffset"],c),e}function uS(t){const e={},s=r(t,["fps"]);s!=null&&u(e,["fps"],s);const a=r(t,["endOffset"]);a!=null&&u(e,["endOffset"],a);const c=r(t,["startOffset"]);return c!=null&&u(e,["startOffset"],c),e}function cS(t){const e={},s=r(t,["fps"]);s!=null&&u(e,["fps"],s);const a=r(t,["endOffset"]);a!=null&&u(e,["endOffset"],a);const c=r(t,["startOffset"]);return c!=null&&u(e,["startOffset"],c),e}function dS(t){const e={},s=r(t,["fps"]);s!=null&&u(e,["fps"],s);const a=r(t,["endOffset"]);a!=null&&u(e,["endOffset"],a);const c=r(t,["startOffset"]);return c!=null&&u(e,["startOffset"],c),e}function gg(t){const e={},s=r(t,["prebuiltVoiceConfig"]);return s!=null&&u(e,["prebuiltVoiceConfig"],q1(s)),e}function fS(t){const e={},s=r(t,["prebuiltVoiceConfig"]);return s!=null&&u(e,["prebuiltVoiceConfig"],H1(s)),e}function mS(t){const e={},s=r(t,["text"]);s!=null&&u(e,["text"],s);const a=r(t,["weight"]);return a!=null&&u(e,["weight"],a),e}function xg(t){const e={},s=r(t,["text"]);s!=null&&u(e,["text"],s);const a=r(t,["weight"]);return a!=null&&u(e,["weight"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hS(t){const e={},s=r(t,["apiKeyString"]);return s!=null&&u(e,["apiKeyString"],s),e}function pS(t){const e={},s=r(t,["apiKeyConfig"]);s!=null&&u(e,["apiKeyConfig"],hS(s));const a=r(t,["authType"]);a!=null&&u(e,["authType"],a);const c=r(t,["googleServiceAccountConfig"]);c!=null&&u(e,["googleServiceAccountConfig"],c);const f=r(t,["httpBasicAuthConfig"]);f!=null&&u(e,["httpBasicAuthConfig"],f);const m=r(t,["oauthConfig"]);m!=null&&u(e,["oauthConfig"],m);const x=r(t,["oidcConfig"]);return x!=null&&u(e,["oidcConfig"],x),e}function gS(t){const e={},s=r(t,["data"]);s!=null&&u(e,["data"],s);const a=r(t,["mimeType"]);return a!=null&&u(e,["mimeType"],a),e}function xS(t){const e={},s=r(t,["displayName"]);s!=null&&u(e,["displayName"],s);const a=r(t,["data"]);a!=null&&u(e,["data"],a);const c=r(t,["mimeType"]);return c!=null&&u(e,["mimeType"],c),e}function yS(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=r(t,["data"]);s!=null&&u(e,["data"],s);const a=r(t,["mimeType"]);return a!=null&&u(e,["mimeType"],a),e}function vS(t){const e={},s=r(t,["displayName"]);s!=null&&u(e,["displayName"],s);const a=r(t,["data"]);a!=null&&u(e,["data"],a);const c=r(t,["mimeType"]);return c!=null&&u(e,["mimeType"],c),e}function bS(t){const e={},s=r(t,["content"]);s!=null&&u(e,["content"],DS(s));const a=r(t,["citationMetadata"]);a!=null&&u(e,["citationMetadata"],TS(a));const c=r(t,["tokenCount"]);c!=null&&u(e,["tokenCount"],c);const f=r(t,["finishReason"]);f!=null&&u(e,["finishReason"],f);const m=r(t,["urlContextMetadata"]);m!=null&&u(e,["urlContextMetadata"],Zw(m));const x=r(t,["avgLogprobs"]);x!=null&&u(e,["avgLogprobs"],x);const g=r(t,["groundingMetadata"]);g!=null&&u(e,["groundingMetadata"],g);const p=r(t,["index"]);p!=null&&u(e,["index"],p);const v=r(t,["logprobsResult"]);v!=null&&u(e,["logprobsResult"],v);const b=r(t,["safetyRatings"]);return b!=null&&u(e,["safetyRatings"],b),e}function kS(t){const e={},s=r(t,["content"]);s!=null&&u(e,["content"],IS(s));const a=r(t,["citationMetadata"]);a!=null&&u(e,["citationMetadata"],NS(a));const c=r(t,["finishMessage"]);c!=null&&u(e,["finishMessage"],c);const f=r(t,["finishReason"]);f!=null&&u(e,["finishReason"],f);const m=r(t,["urlContextMetadata"]);m!=null&&u(e,["urlContextMetadata"],Ww(m));const x=r(t,["avgLogprobs"]);x!=null&&u(e,["avgLogprobs"],x);const g=r(t,["groundingMetadata"]);g!=null&&u(e,["groundingMetadata"],g);const p=r(t,["index"]);p!=null&&u(e,["index"],p);const v=r(t,["logprobsResult"]);v!=null&&u(e,["logprobsResult"],v);const b=r(t,["safetyRatings"]);return b!=null&&u(e,["safetyRatings"],b),e}function CS(t){const e={},s=r(t,["checkpointId"]);s!=null&&u(e,["checkpointId"],s);const a=r(t,["epoch"]);a!=null&&u(e,["epoch"],a);const c=r(t,["step"]);return c!=null&&u(e,["step"],c),e}function TS(t){const e={},s=r(t,["citationSources"]);return s!=null&&u(e,["citations"],s),e}function NS(t){const e={},s=r(t,["citations"]);return s!=null&&u(e,["citations"],s),e}function SS(t,e){const s={},a=r(e,["model"]);a!=null&&u(s,["_url","model"],Ve(t,a));const c=r(e,["contents"]);if(c!=null){let f=sn(c);Array.isArray(f)&&(f=f.map(m=>zs(m))),u(s,["contents"],f)}return s}function wS(t){const e={},s=r(t,["sdkHttpResponse"]);s!=null&&u(e,["sdkHttpResponse"],s);const a=r(t,["tokensInfo"]);return a!=null&&u(e,["tokensInfo"],a),e}function ES(t){const e={},s=r(t,["environment"]);s!=null&&u(e,["environment"],s);const a=r(t,["excludedPredefinedFunctions"]);return a!=null&&u(e,["excludedPredefinedFunctions"],a),e}function MS(t){const e={},s=r(t,["environment"]);s!=null&&u(e,["environment"],s);const a=r(t,["excludedPredefinedFunctions"]);return a!=null&&u(e,["excludedPredefinedFunctions"],a),e}function AS(t){const e={},s=r(t,["values"]);return s!=null&&u(e,["values"],s),e}function _S(t){const e={},s=r(t,["values"]);s!=null&&u(e,["values"],s);const a=r(t,["statistics"]);return a!=null&&u(e,["statistics"],RS(a)),e}function RS(t){const e={},s=r(t,["truncated"]);s!=null&&u(e,["truncated"],s);const a=r(t,["token_count"]);return a!=null&&u(e,["tokenCount"],a),e}function DS(t){const e={},s=r(t,["parts"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(f=>cw(f))),u(e,["parts"],c)}const a=r(t,["role"]);return a!=null&&u(e,["role"],a),e}function IS(t){const e={},s=r(t,["parts"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(f=>dw(f))),u(e,["parts"],c)}const a=r(t,["role"]);return a!=null&&u(e,["role"],a),e}function qi(t){const e={},s=r(t,["parts"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(f=>fw(f))),u(e,["parts"],c)}const a=r(t,["role"]);return a!=null&&u(e,["role"],a),e}function zs(t){const e={},s=r(t,["parts"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(f=>mw(f))),u(e,["parts"],c)}const a=r(t,["role"]);return a!=null&&u(e,["role"],a),e}function jS(t){const e={},s=r(t,["controlType"]);s!=null&&u(e,["controlType"],s);const a=r(t,["enableControlImageComputation"]);return a!=null&&u(e,["computeControl"],a),e}function US(t){const e={};if(r(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(r(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(r(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function LS(t,e){const s={},a=r(t,["systemInstruction"]);e!==void 0&&a!=null&&u(e,["systemInstruction"],zs(Mt(a)));const c=r(t,["tools"]);if(e!==void 0&&c!=null){let m=c;Array.isArray(m)&&(m=m.map(x=>Cg(x))),u(e,["tools"],m)}const f=r(t,["generationConfig"]);return e!==void 0&&f!=null&&u(e,["generationConfig"],f),s}function PS(t,e){const s={},a=r(e,["model"]);a!=null&&u(s,["_url","model"],Ve(t,a));const c=r(e,["contents"]);if(c!=null){let m=sn(c);Array.isArray(m)&&(m=m.map(x=>qi(x))),u(s,["contents"],m)}const f=r(e,["config"]);return f!=null&&US(f),s}function VS(t,e){const s={},a=r(e,["model"]);a!=null&&u(s,["_url","model"],Ve(t,a));const c=r(e,["contents"]);if(c!=null){let m=sn(c);Array.isArray(m)&&(m=m.map(x=>zs(x))),u(s,["contents"],m)}const f=r(e,["config"]);return f!=null&&LS(f,s),s}function qS(t){const e={},s=r(t,["sdkHttpResponse"]);s!=null&&u(e,["sdkHttpResponse"],s);const a=r(t,["totalTokens"]);a!=null&&u(e,["totalTokens"],a);const c=r(t,["cachedContentTokenCount"]);return c!=null&&u(e,["cachedContentTokenCount"],c),e}function HS(t){const e={},s=r(t,["sdkHttpResponse"]);s!=null&&u(e,["sdkHttpResponse"],s);const a=r(t,["totalTokens"]);return a!=null&&u(e,["totalTokens"],a),e}function BS(t,e){const s={},a=r(e,["model"]);return a!=null&&u(s,["_url","name"],Ve(t,a)),s}function GS(t,e){const s={},a=r(e,["model"]);return a!=null&&u(s,["_url","name"],Ve(t,a)),s}function zS(t){const e={},s=r(t,["sdkHttpResponse"]);return s!=null&&u(e,["sdkHttpResponse"],s),e}function FS(t){const e={},s=r(t,["sdkHttpResponse"]);return s!=null&&u(e,["sdkHttpResponse"],s),e}function OS(t){const e={},s=r(t,["mode"]);s!=null&&u(e,["mode"],s);const a=r(t,["dynamicThreshold"]);return a!=null&&u(e,["dynamicThreshold"],a),e}function JS(t){const e={},s=r(t,["mode"]);s!=null&&u(e,["mode"],s);const a=r(t,["dynamicThreshold"]);return a!=null&&u(e,["dynamicThreshold"],a),e}function YS(t,e){const s={},a=r(t,["outputGcsUri"]);e!==void 0&&a!=null&&u(e,["parameters","storageUri"],a);const c=r(t,["negativePrompt"]);e!==void 0&&c!=null&&u(e,["parameters","negativePrompt"],c);const f=r(t,["numberOfImages"]);e!==void 0&&f!=null&&u(e,["parameters","sampleCount"],f);const m=r(t,["aspectRatio"]);e!==void 0&&m!=null&&u(e,["parameters","aspectRatio"],m);const x=r(t,["guidanceScale"]);e!==void 0&&x!=null&&u(e,["parameters","guidanceScale"],x);const g=r(t,["seed"]);e!==void 0&&g!=null&&u(e,["parameters","seed"],g);const p=r(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&u(e,["parameters","safetySetting"],p);const v=r(t,["personGeneration"]);e!==void 0&&v!=null&&u(e,["parameters","personGeneration"],v);const b=r(t,["includeSafetyAttributes"]);e!==void 0&&b!=null&&u(e,["parameters","includeSafetyAttributes"],b);const k=r(t,["includeRaiReason"]);e!==void 0&&k!=null&&u(e,["parameters","includeRaiReason"],k);const w=r(t,["language"]);e!==void 0&&w!=null&&u(e,["parameters","language"],w);const M=r(t,["outputMimeType"]);e!==void 0&&M!=null&&u(e,["parameters","outputOptions","mimeType"],M);const A=r(t,["outputCompressionQuality"]);e!==void 0&&A!=null&&u(e,["parameters","outputOptions","compressionQuality"],A);const _=r(t,["addWatermark"]);e!==void 0&&_!=null&&u(e,["parameters","addWatermark"],_);const j=r(t,["editMode"]);e!==void 0&&j!=null&&u(e,["parameters","editMode"],j);const D=r(t,["baseSteps"]);return e!==void 0&&D!=null&&u(e,["parameters","editConfig","baseSteps"],D),s}function KS(t,e){const s={},a=r(e,["model"]);a!=null&&u(s,["_url","model"],Ve(t,a));const c=r(e,["prompt"]);c!=null&&u(s,["instances[0]","prompt"],c);const f=r(e,["referenceImages"]);if(f!=null){let x=f;Array.isArray(x)&&(x=x.map(g=>kw(g))),u(s,["instances[0]","referenceImages"],x)}const m=r(e,["config"]);return m!=null&&YS(m,s),s}function $S(t){const e={},s=r(t,["sdkHttpResponse"]);s!=null&&u(e,["sdkHttpResponse"],s);const a=r(t,["predictions"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(f=>Hi(f))),u(e,["generatedImages"],c)}return e}function XS(t,e){const s={},a=r(t,["taskType"]);e!==void 0&&a!=null&&u(e,["requests[]","taskType"],a);const c=r(t,["title"]);e!==void 0&&c!=null&&u(e,["requests[]","title"],c);const f=r(t,["outputDimensionality"]);if(e!==void 0&&f!=null&&u(e,["requests[]","outputDimensionality"],f),r(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(r(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return s}function QS(t,e){const s={},a=r(t,["taskType"]);e!==void 0&&a!=null&&u(e,["instances[]","task_type"],a);const c=r(t,["title"]);e!==void 0&&c!=null&&u(e,["instances[]","title"],c);const f=r(t,["outputDimensionality"]);e!==void 0&&f!=null&&u(e,["parameters","outputDimensionality"],f);const m=r(t,["mimeType"]);e!==void 0&&m!=null&&u(e,["instances[]","mimeType"],m);const x=r(t,["autoTruncate"]);return e!==void 0&&x!=null&&u(e,["parameters","autoTruncate"],x),s}function ZS(){return{}}function WS(t){const e={},s=r(t,["billableCharacterCount"]);return s!=null&&u(e,["billableCharacterCount"],s),e}function e2(t,e){const s={},a=r(e,["model"]);a!=null&&u(s,["_url","model"],Ve(t,a));const c=r(e,["contents"]);c!=null&&u(s,["requests[]","content"],Hc(t,c));const f=r(e,["config"]);f!=null&&XS(f,s);const m=r(e,["model"]);return m!==void 0&&u(s,["requests[]","model"],Ve(t,m)),s}function t2(t,e){const s={},a=r(e,["model"]);a!=null&&u(s,["_url","model"],Ve(t,a));const c=r(e,["contents"]);c!=null&&u(s,["instances[]","content"],Hc(t,c));const f=r(e,["config"]);return f!=null&&QS(f,s),s}function n2(t){const e={},s=r(t,["sdkHttpResponse"]);s!=null&&u(e,["sdkHttpResponse"],s);const a=r(t,["embeddings"]);if(a!=null){let f=a;Array.isArray(f)&&(f=f.map(m=>AS(m))),u(e,["embeddings"],f)}return r(t,["metadata"])!=null&&u(e,["metadata"],ZS()),e}function l2(t){const e={},s=r(t,["sdkHttpResponse"]);s!=null&&u(e,["sdkHttpResponse"],s);const a=r(t,["predictions[]","embeddings"]);if(a!=null){let f=a;Array.isArray(f)&&(f=f.map(m=>_S(m))),u(e,["embeddings"],f)}const c=r(t,["metadata"]);return c!=null&&u(e,["metadata"],WS(c)),e}function s2(t){const e={},s=r(t,["endpoint"]);s!=null&&u(e,["name"],s);const a=r(t,["deployedModelId"]);return a!=null&&u(e,["deployedModelId"],a),e}function a2(t){const e={},s=r(t,["excludeDomains"]);return s!=null&&u(e,["excludeDomains"],s),e}function o2(t){const e={},s=r(t,["label"]);s!=null&&u(e,["label"],s);const a=r(t,["score"]);return a!=null&&u(e,["score"],a),e}function i2(t){const e={},s=r(t,["fileUri"]);s!=null&&u(e,["fileUri"],s);const a=r(t,["mimeType"]);return a!=null&&u(e,["mimeType"],a),e}function r2(t){const e={},s=r(t,["displayName"]);s!=null&&u(e,["displayName"],s);const a=r(t,["fileUri"]);a!=null&&u(e,["fileUri"],a);const c=r(t,["mimeType"]);return c!=null&&u(e,["mimeType"],c),e}function u2(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=r(t,["fileUri"]);s!=null&&u(e,["fileUri"],s);const a=r(t,["mimeType"]);return a!=null&&u(e,["mimeType"],a),e}function c2(t){const e={},s=r(t,["displayName"]);s!=null&&u(e,["displayName"],s);const a=r(t,["fileUri"]);a!=null&&u(e,["fileUri"],a);const c=r(t,["mimeType"]);return c!=null&&u(e,["mimeType"],c),e}function d2(t){const e={},s=r(t,["id"]);s!=null&&u(e,["id"],s);const a=r(t,["args"]);a!=null&&u(e,["args"],a);const c=r(t,["name"]);return c!=null&&u(e,["name"],c),e}function f2(t){const e={},s=r(t,["id"]);s!=null&&u(e,["id"],s);const a=r(t,["args"]);a!=null&&u(e,["args"],a);const c=r(t,["name"]);return c!=null&&u(e,["name"],c),e}function m2(t){const e={},s=r(t,["id"]);s!=null&&u(e,["id"],s);const a=r(t,["args"]);a!=null&&u(e,["args"],a);const c=r(t,["name"]);return c!=null&&u(e,["name"],c),e}function h2(t){const e={},s=r(t,["id"]);s!=null&&u(e,["id"],s);const a=r(t,["args"]);a!=null&&u(e,["args"],a);const c=r(t,["name"]);return c!=null&&u(e,["name"],c),e}function p2(t){const e={},s=r(t,["mode"]);s!=null&&u(e,["mode"],s);const a=r(t,["allowedFunctionNames"]);return a!=null&&u(e,["allowedFunctionNames"],a),e}function g2(t){const e={},s=r(t,["mode"]);s!=null&&u(e,["mode"],s);const a=r(t,["allowedFunctionNames"]);return a!=null&&u(e,["allowedFunctionNames"],a),e}function x2(t){const e={},s=r(t,["behavior"]);s!=null&&u(e,["behavior"],s);const a=r(t,["description"]);a!=null&&u(e,["description"],a);const c=r(t,["name"]);c!=null&&u(e,["name"],c);const f=r(t,["parameters"]);f!=null&&u(e,["parameters"],f);const m=r(t,["parametersJsonSchema"]);m!=null&&u(e,["parametersJsonSchema"],m);const x=r(t,["response"]);x!=null&&u(e,["response"],x);const g=r(t,["responseJsonSchema"]);return g!=null&&u(e,["responseJsonSchema"],g),e}function y2(t){const e={};if(r(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const s=r(t,["description"]);s!=null&&u(e,["description"],s);const a=r(t,["name"]);a!=null&&u(e,["name"],a);const c=r(t,["parameters"]);c!=null&&u(e,["parameters"],c);const f=r(t,["parametersJsonSchema"]);f!=null&&u(e,["parametersJsonSchema"],f);const m=r(t,["response"]);m!=null&&u(e,["response"],m);const x=r(t,["responseJsonSchema"]);return x!=null&&u(e,["responseJsonSchema"],x),e}function v2(t,e,s){const a={},c=r(e,["systemInstruction"]);s!==void 0&&c!=null&&u(s,["systemInstruction"],qi(Mt(c)));const f=r(e,["temperature"]);f!=null&&u(a,["temperature"],f);const m=r(e,["topP"]);m!=null&&u(a,["topP"],m);const x=r(e,["topK"]);x!=null&&u(a,["topK"],x);const g=r(e,["candidateCount"]);g!=null&&u(a,["candidateCount"],g);const p=r(e,["maxOutputTokens"]);p!=null&&u(a,["maxOutputTokens"],p);const v=r(e,["stopSequences"]);v!=null&&u(a,["stopSequences"],v);const b=r(e,["responseLogprobs"]);b!=null&&u(a,["responseLogprobs"],b);const k=r(e,["logprobs"]);k!=null&&u(a,["logprobs"],k);const w=r(e,["presencePenalty"]);w!=null&&u(a,["presencePenalty"],w);const M=r(e,["frequencyPenalty"]);M!=null&&u(a,["frequencyPenalty"],M);const A=r(e,["seed"]);A!=null&&u(a,["seed"],A);const _=r(e,["responseMimeType"]);_!=null&&u(a,["responseMimeType"],_);const j=r(e,["responseSchema"]);j!=null&&u(a,["responseSchema"],ww(Bc(j)));const D=r(e,["responseJsonSchema"]);if(D!=null&&u(a,["responseJsonSchema"],D),r(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(r(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const I=r(e,["safetySettings"]);if(s!==void 0&&I!=null){let O=I;Array.isArray(O)&&(O=O.map(ue=>Nw(ue))),u(s,["safetySettings"],O)}const q=r(e,["tools"]);if(s!==void 0&&q!=null){let O=Bs(q);Array.isArray(O)&&(O=O.map(ue=>Gw(Hs(ue)))),u(s,["tools"],O)}const ee=r(e,["toolConfig"]);if(s!==void 0&&ee!=null&&u(s,["toolConfig"],Hw(ee)),r(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const se=r(e,["cachedContent"]);s!==void 0&&se!=null&&u(s,["cachedContent"],Yn(t,se));const F=r(e,["responseModalities"]);F!=null&&u(a,["responseModalities"],F);const oe=r(e,["mediaResolution"]);oe!=null&&u(a,["mediaResolution"],oe);const $=r(e,["speechConfig"]);if($!=null&&u(a,["speechConfig"],jw(Gc($))),r(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Z=r(e,["thinkingConfig"]);Z!=null&&u(a,["thinkingConfig"],Vw(Z));const Q=r(e,["imageConfig"]);return Q!=null&&u(a,["imageConfig"],K2(Q)),a}function b2(t,e,s){const a={},c=r(e,["systemInstruction"]);s!==void 0&&c!=null&&u(s,["systemInstruction"],zs(Mt(c)));const f=r(e,["temperature"]);f!=null&&u(a,["temperature"],f);const m=r(e,["topP"]);m!=null&&u(a,["topP"],m);const x=r(e,["topK"]);x!=null&&u(a,["topK"],x);const g=r(e,["candidateCount"]);g!=null&&u(a,["candidateCount"],g);const p=r(e,["maxOutputTokens"]);p!=null&&u(a,["maxOutputTokens"],p);const v=r(e,["stopSequences"]);v!=null&&u(a,["stopSequences"],v);const b=r(e,["responseLogprobs"]);b!=null&&u(a,["responseLogprobs"],b);const k=r(e,["logprobs"]);k!=null&&u(a,["logprobs"],k);const w=r(e,["presencePenalty"]);w!=null&&u(a,["presencePenalty"],w);const M=r(e,["frequencyPenalty"]);M!=null&&u(a,["frequencyPenalty"],M);const A=r(e,["seed"]);A!=null&&u(a,["seed"],A);const _=r(e,["responseMimeType"]);_!=null&&u(a,["responseMimeType"],_);const j=r(e,["responseSchema"]);j!=null&&u(a,["responseSchema"],Ew(Bc(j)));const D=r(e,["responseJsonSchema"]);D!=null&&u(a,["responseJsonSchema"],D);const I=r(e,["routingConfig"]);I!=null&&u(a,["routingConfig"],I);const q=r(e,["modelSelectionConfig"]);q!=null&&u(a,["modelConfig"],rw(q));const ee=r(e,["safetySettings"]);if(s!==void 0&&ee!=null){let E=ee;Array.isArray(E)&&(E=E.map(X=>Sw(X))),u(s,["safetySettings"],E)}const se=r(e,["tools"]);if(s!==void 0&&se!=null){let E=Bs(se);Array.isArray(E)&&(E=E.map(X=>Cg(Hs(X)))),u(s,["tools"],E)}const F=r(e,["toolConfig"]);s!==void 0&&F!=null&&u(s,["toolConfig"],Bw(F));const oe=r(e,["labels"]);s!==void 0&&oe!=null&&u(s,["labels"],oe);const $=r(e,["cachedContent"]);s!==void 0&&$!=null&&u(s,["cachedContent"],Yn(t,$));const Z=r(e,["responseModalities"]);Z!=null&&u(a,["responseModalities"],Z);const Q=r(e,["mediaResolution"]);Q!=null&&u(a,["mediaResolution"],Q);const O=r(e,["speechConfig"]);O!=null&&u(a,["speechConfig"],Uw(Gc(O)));const ue=r(e,["audioTimestamp"]);ue!=null&&u(a,["audioTimestamp"],ue);const me=r(e,["thinkingConfig"]);me!=null&&u(a,["thinkingConfig"],qw(me));const Te=r(e,["imageConfig"]);return Te!=null&&u(a,["imageConfig"],$2(Te)),a}function vp(t,e){const s={},a=r(e,["model"]);a!=null&&u(s,["_url","model"],Ve(t,a));const c=r(e,["contents"]);if(c!=null){let m=sn(c);Array.isArray(m)&&(m=m.map(x=>qi(x))),u(s,["contents"],m)}const f=r(e,["config"]);return f!=null&&u(s,["generationConfig"],v2(t,f,s)),s}function bp(t,e){const s={},a=r(e,["model"]);a!=null&&u(s,["_url","model"],Ve(t,a));const c=r(e,["contents"]);if(c!=null){let m=sn(c);Array.isArray(m)&&(m=m.map(x=>zs(x))),u(s,["contents"],m)}const f=r(e,["config"]);return f!=null&&u(s,["generationConfig"],b2(t,f,s)),s}function kp(t){const e={},s=r(t,["sdkHttpResponse"]);s!=null&&u(e,["sdkHttpResponse"],s);const a=r(t,["candidates"]);if(a!=null){let g=a;Array.isArray(g)&&(g=g.map(p=>bS(p))),u(e,["candidates"],g)}const c=r(t,["modelVersion"]);c!=null&&u(e,["modelVersion"],c);const f=r(t,["promptFeedback"]);f!=null&&u(e,["promptFeedback"],f);const m=r(t,["responseId"]);m!=null&&u(e,["responseId"],m);const x=r(t,["usageMetadata"]);return x!=null&&u(e,["usageMetadata"],x),e}function Cp(t){const e={},s=r(t,["sdkHttpResponse"]);s!=null&&u(e,["sdkHttpResponse"],s);const a=r(t,["candidates"]);if(a!=null){let p=a;Array.isArray(p)&&(p=p.map(v=>kS(v))),u(e,["candidates"],p)}const c=r(t,["createTime"]);c!=null&&u(e,["createTime"],c);const f=r(t,["modelVersion"]);f!=null&&u(e,["modelVersion"],f);const m=r(t,["promptFeedback"]);m!=null&&u(e,["promptFeedback"],m);const x=r(t,["responseId"]);x!=null&&u(e,["responseId"],x);const g=r(t,["usageMetadata"]);return g!=null&&u(e,["usageMetadata"],g),e}function k2(t,e){const s={};if(r(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(r(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const a=r(t,["numberOfImages"]);e!==void 0&&a!=null&&u(e,["parameters","sampleCount"],a);const c=r(t,["aspectRatio"]);e!==void 0&&c!=null&&u(e,["parameters","aspectRatio"],c);const f=r(t,["guidanceScale"]);if(e!==void 0&&f!=null&&u(e,["parameters","guidanceScale"],f),r(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const m=r(t,["safetyFilterLevel"]);e!==void 0&&m!=null&&u(e,["parameters","safetySetting"],m);const x=r(t,["personGeneration"]);e!==void 0&&x!=null&&u(e,["parameters","personGeneration"],x);const g=r(t,["includeSafetyAttributes"]);e!==void 0&&g!=null&&u(e,["parameters","includeSafetyAttributes"],g);const p=r(t,["includeRaiReason"]);e!==void 0&&p!=null&&u(e,["parameters","includeRaiReason"],p);const v=r(t,["language"]);e!==void 0&&v!=null&&u(e,["parameters","language"],v);const b=r(t,["outputMimeType"]);e!==void 0&&b!=null&&u(e,["parameters","outputOptions","mimeType"],b);const k=r(t,["outputCompressionQuality"]);if(e!==void 0&&k!=null&&u(e,["parameters","outputOptions","compressionQuality"],k),r(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const w=r(t,["imageSize"]);if(e!==void 0&&w!=null&&u(e,["parameters","sampleImageSize"],w),r(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return s}function C2(t,e){const s={},a=r(t,["outputGcsUri"]);e!==void 0&&a!=null&&u(e,["parameters","storageUri"],a);const c=r(t,["negativePrompt"]);e!==void 0&&c!=null&&u(e,["parameters","negativePrompt"],c);const f=r(t,["numberOfImages"]);e!==void 0&&f!=null&&u(e,["parameters","sampleCount"],f);const m=r(t,["aspectRatio"]);e!==void 0&&m!=null&&u(e,["parameters","aspectRatio"],m);const x=r(t,["guidanceScale"]);e!==void 0&&x!=null&&u(e,["parameters","guidanceScale"],x);const g=r(t,["seed"]);e!==void 0&&g!=null&&u(e,["parameters","seed"],g);const p=r(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&u(e,["parameters","safetySetting"],p);const v=r(t,["personGeneration"]);e!==void 0&&v!=null&&u(e,["parameters","personGeneration"],v);const b=r(t,["includeSafetyAttributes"]);e!==void 0&&b!=null&&u(e,["parameters","includeSafetyAttributes"],b);const k=r(t,["includeRaiReason"]);e!==void 0&&k!=null&&u(e,["parameters","includeRaiReason"],k);const w=r(t,["language"]);e!==void 0&&w!=null&&u(e,["parameters","language"],w);const M=r(t,["outputMimeType"]);e!==void 0&&M!=null&&u(e,["parameters","outputOptions","mimeType"],M);const A=r(t,["outputCompressionQuality"]);e!==void 0&&A!=null&&u(e,["parameters","outputOptions","compressionQuality"],A);const _=r(t,["addWatermark"]);e!==void 0&&_!=null&&u(e,["parameters","addWatermark"],_);const j=r(t,["imageSize"]);e!==void 0&&j!=null&&u(e,["parameters","sampleImageSize"],j);const D=r(t,["enhancePrompt"]);return e!==void 0&&D!=null&&u(e,["parameters","enhancePrompt"],D),s}function T2(t,e){const s={},a=r(e,["model"]);a!=null&&u(s,["_url","model"],Ve(t,a));const c=r(e,["prompt"]);c!=null&&u(s,["instances[0]","prompt"],c);const f=r(e,["config"]);return f!=null&&k2(f,s),s}function N2(t,e){const s={},a=r(e,["model"]);a!=null&&u(s,["_url","model"],Ve(t,a));const c=r(e,["prompt"]);c!=null&&u(s,["instances[0]","prompt"],c);const f=r(e,["config"]);return f!=null&&C2(f,s),s}function S2(t){const e={},s=r(t,["sdkHttpResponse"]);s!=null&&u(e,["sdkHttpResponse"],s);const a=r(t,["predictions"]);if(a!=null){let f=a;Array.isArray(f)&&(f=f.map(m=>P2(m))),u(e,["generatedImages"],f)}const c=r(t,["positivePromptSafetyAttributes"]);return c!=null&&u(e,["positivePromptSafetyAttributes"],bg(c)),e}function w2(t){const e={},s=r(t,["sdkHttpResponse"]);s!=null&&u(e,["sdkHttpResponse"],s);const a=r(t,["predictions"]);if(a!=null){let f=a;Array.isArray(f)&&(f=f.map(m=>Hi(m))),u(e,["generatedImages"],f)}const c=r(t,["positivePromptSafetyAttributes"]);return c!=null&&u(e,["positivePromptSafetyAttributes"],kg(c)),e}function E2(t,e){const s={},a=r(t,["numberOfVideos"]);if(e!==void 0&&a!=null&&u(e,["parameters","sampleCount"],a),r(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(r(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const c=r(t,["durationSeconds"]);if(e!==void 0&&c!=null&&u(e,["parameters","durationSeconds"],c),r(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const f=r(t,["aspectRatio"]);e!==void 0&&f!=null&&u(e,["parameters","aspectRatio"],f);const m=r(t,["resolution"]);e!==void 0&&m!=null&&u(e,["parameters","resolution"],m);const x=r(t,["personGeneration"]);if(e!==void 0&&x!=null&&u(e,["parameters","personGeneration"],x),r(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const g=r(t,["negativePrompt"]);e!==void 0&&g!=null&&u(e,["parameters","negativePrompt"],g);const p=r(t,["enhancePrompt"]);if(e!==void 0&&p!=null&&u(e,["parameters","enhancePrompt"],p),r(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(r(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(r(t,["referenceImages"])!==void 0)throw new Error("referenceImages parameter is not supported in Gemini API.");if(r(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(r(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return s}function M2(t,e){const s={},a=r(t,["numberOfVideos"]);e!==void 0&&a!=null&&u(e,["parameters","sampleCount"],a);const c=r(t,["outputGcsUri"]);e!==void 0&&c!=null&&u(e,["parameters","storageUri"],c);const f=r(t,["fps"]);e!==void 0&&f!=null&&u(e,["parameters","fps"],f);const m=r(t,["durationSeconds"]);e!==void 0&&m!=null&&u(e,["parameters","durationSeconds"],m);const x=r(t,["seed"]);e!==void 0&&x!=null&&u(e,["parameters","seed"],x);const g=r(t,["aspectRatio"]);e!==void 0&&g!=null&&u(e,["parameters","aspectRatio"],g);const p=r(t,["resolution"]);e!==void 0&&p!=null&&u(e,["parameters","resolution"],p);const v=r(t,["personGeneration"]);e!==void 0&&v!=null&&u(e,["parameters","personGeneration"],v);const b=r(t,["pubsubTopic"]);e!==void 0&&b!=null&&u(e,["parameters","pubsubTopic"],b);const k=r(t,["negativePrompt"]);e!==void 0&&k!=null&&u(e,["parameters","negativePrompt"],k);const w=r(t,["enhancePrompt"]);e!==void 0&&w!=null&&u(e,["parameters","enhancePrompt"],w);const M=r(t,["generateAudio"]);e!==void 0&&M!=null&&u(e,["parameters","generateAudio"],M);const A=r(t,["lastFrame"]);e!==void 0&&A!=null&&u(e,["instances[0]","lastFrame"],pn(A));const _=r(t,["referenceImages"]);if(e!==void 0&&_!=null){let I=_;Array.isArray(I)&&(I=I.map(q=>iE(q))),u(e,["instances[0]","referenceImages"],I)}const j=r(t,["mask"]);e!==void 0&&j!=null&&u(e,["instances[0]","mask"],oE(j));const D=r(t,["compressionQuality"]);return e!==void 0&&D!=null&&u(e,["parameters","compressionQuality"],D),s}function A2(t){const e={},s=r(t,["name"]);s!=null&&u(e,["name"],s);const a=r(t,["metadata"]);a!=null&&u(e,["metadata"],a);const c=r(t,["done"]);c!=null&&u(e,["done"],c);const f=r(t,["error"]);f!=null&&u(e,["error"],f);const m=r(t,["response","generateVideoResponse"]);return m!=null&&u(e,["response"],I2(m)),e}function _2(t){const e={},s=r(t,["name"]);s!=null&&u(e,["name"],s);const a=r(t,["metadata"]);a!=null&&u(e,["metadata"],a);const c=r(t,["done"]);c!=null&&u(e,["done"],c);const f=r(t,["error"]);f!=null&&u(e,["error"],f);const m=r(t,["response"]);return m!=null&&u(e,["response"],j2(m)),e}function R2(t,e){const s={},a=r(e,["model"]);a!=null&&u(s,["_url","model"],Ve(t,a));const c=r(e,["prompt"]);c!=null&&u(s,["instances[0]","prompt"],c);const f=r(e,["image"]);if(f!=null&&u(s,["instances[0]","image"],vg(f)),r(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const m=r(e,["source"]);m!=null&&U2(m,s);const x=r(e,["config"]);return x!=null&&E2(x,s),s}function D2(t,e){const s={},a=r(e,["model"]);a!=null&&u(s,["_url","model"],Ve(t,a));const c=r(e,["prompt"]);c!=null&&u(s,["instances[0]","prompt"],c);const f=r(e,["image"]);f!=null&&u(s,["instances[0]","image"],pn(f));const m=r(e,["video"]);m!=null&&u(s,["instances[0]","video"],Tg(m));const x=r(e,["source"]);x!=null&&L2(x,s);const g=r(e,["config"]);return g!=null&&M2(g,s),s}function I2(t){const e={},s=r(t,["generatedSamples"]);if(s!=null){let f=s;Array.isArray(f)&&(f=f.map(m=>q2(m))),u(e,["generatedVideos"],f)}const a=r(t,["raiMediaFilteredCount"]);a!=null&&u(e,["raiMediaFilteredCount"],a);const c=r(t,["raiMediaFilteredReasons"]);return c!=null&&u(e,["raiMediaFilteredReasons"],c),e}function j2(t){const e={},s=r(t,["videos"]);if(s!=null){let f=s;Array.isArray(f)&&(f=f.map(m=>H2(m))),u(e,["generatedVideos"],f)}const a=r(t,["raiMediaFilteredCount"]);a!=null&&u(e,["raiMediaFilteredCount"],a);const c=r(t,["raiMediaFilteredReasons"]);return c!=null&&u(e,["raiMediaFilteredReasons"],c),e}function U2(t,e){const s={},a=r(t,["prompt"]);e!==void 0&&a!=null&&u(e,["instances[0]","prompt"],a);const c=r(t,["image"]);if(e!==void 0&&c!=null&&u(e,["instances[0]","image"],vg(c)),r(t,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");return s}function L2(t,e){const s={},a=r(t,["prompt"]);e!==void 0&&a!=null&&u(e,["instances[0]","prompt"],a);const c=r(t,["image"]);e!==void 0&&c!=null&&u(e,["instances[0]","image"],pn(c));const f=r(t,["video"]);return e!==void 0&&f!=null&&u(e,["instances[0]","video"],Tg(f)),s}function P2(t){const e={},s=r(t,["_self"]);s!=null&&u(e,["image"],X2(s));const a=r(t,["raiFilteredReason"]);a!=null&&u(e,["raiFilteredReason"],a);const c=r(t,["_self"]);return c!=null&&u(e,["safetyAttributes"],bg(c)),e}function Hi(t){const e={},s=r(t,["_self"]);s!=null&&u(e,["image"],yg(s));const a=r(t,["raiFilteredReason"]);a!=null&&u(e,["raiFilteredReason"],a);const c=r(t,["_self"]);c!=null&&u(e,["safetyAttributes"],kg(c));const f=r(t,["prompt"]);return f!=null&&u(e,["enhancedPrompt"],f),e}function V2(t){const e={},s=r(t,["_self"]);s!=null&&u(e,["mask"],yg(s));const a=r(t,["labels"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(f=>o2(f))),u(e,["labels"],c)}return e}function q2(t){const e={},s=r(t,["_self"]);return s!=null&&u(e,["video"],sE(s)),e}function H2(t){const e={},s=r(t,["_self"]);return s!=null&&u(e,["video"],aE(s)),e}function B2(t,e){const s={},a=r(e,["model"]);return a!=null&&u(s,["_url","name"],Ve(t,a)),s}function G2(t,e){const s={},a=r(e,["model"]);return a!=null&&u(s,["_url","name"],Ve(t,a)),s}function z2(t){const e={},s=r(t,["authConfig"]);return s!=null&&u(e,["authConfig"],pS(s)),e}function F2(t){const e={},s=r(t,["dynamicRetrievalConfig"]);return s!=null&&u(e,["dynamicRetrievalConfig"],OS(s)),e}function O2(t){const e={},s=r(t,["dynamicRetrievalConfig"]);return s!=null&&u(e,["dynamicRetrievalConfig"],JS(s)),e}function J2(t){const e={},s=r(t,["timeRangeFilter"]);if(s!=null&&u(e,["timeRangeFilter"],Q2(s)),r(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Y2(t){const e={},s=r(t,["timeRangeFilter"]);s!=null&&u(e,["timeRangeFilter"],Z2(s));const a=r(t,["excludeDomains"]);return a!=null&&u(e,["excludeDomains"],a),e}function K2(t){const e={},s=r(t,["aspectRatio"]);return s!=null&&u(e,["aspectRatio"],s),e}function $2(t){const e={},s=r(t,["aspectRatio"]);return s!=null&&u(e,["aspectRatio"],s),e}function X2(t){const e={},s=r(t,["bytesBase64Encoded"]);s!=null&&u(e,["imageBytes"],Ol(s));const a=r(t,["mimeType"]);return a!=null&&u(e,["mimeType"],a),e}function yg(t){const e={},s=r(t,["gcsUri"]);s!=null&&u(e,["gcsUri"],s);const a=r(t,["bytesBase64Encoded"]);a!=null&&u(e,["imageBytes"],Ol(a));const c=r(t,["mimeType"]);return c!=null&&u(e,["mimeType"],c),e}function vg(t){const e={};if(r(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const s=r(t,["imageBytes"]);s!=null&&u(e,["bytesBase64Encoded"],Ol(s));const a=r(t,["mimeType"]);return a!=null&&u(e,["mimeType"],a),e}function pn(t){const e={},s=r(t,["gcsUri"]);s!=null&&u(e,["gcsUri"],s);const a=r(t,["imageBytes"]);a!=null&&u(e,["bytesBase64Encoded"],Ol(a));const c=r(t,["mimeType"]);return c!=null&&u(e,["mimeType"],c),e}function Q2(t){const e={},s=r(t,["startTime"]);s!=null&&u(e,["startTime"],s);const a=r(t,["endTime"]);return a!=null&&u(e,["endTime"],a),e}function Z2(t){const e={},s=r(t,["startTime"]);s!=null&&u(e,["startTime"],s);const a=r(t,["endTime"]);return a!=null&&u(e,["endTime"],a),e}function W2(t){const e={},s=r(t,["latitude"]);s!=null&&u(e,["latitude"],s);const a=r(t,["longitude"]);return a!=null&&u(e,["longitude"],a),e}function ew(t){const e={},s=r(t,["latitude"]);s!=null&&u(e,["latitude"],s);const a=r(t,["longitude"]);return a!=null&&u(e,["longitude"],a),e}function tw(t,e,s){const a={},c=r(e,["pageSize"]);s!==void 0&&c!=null&&u(s,["_query","pageSize"],c);const f=r(e,["pageToken"]);s!==void 0&&f!=null&&u(s,["_query","pageToken"],f);const m=r(e,["filter"]);s!==void 0&&m!=null&&u(s,["_query","filter"],m);const x=r(e,["queryBase"]);return s!==void 0&&x!=null&&u(s,["_url","models_url"],ng(t,x)),a}function nw(t,e,s){const a={},c=r(e,["pageSize"]);s!==void 0&&c!=null&&u(s,["_query","pageSize"],c);const f=r(e,["pageToken"]);s!==void 0&&f!=null&&u(s,["_query","pageToken"],f);const m=r(e,["filter"]);s!==void 0&&m!=null&&u(s,["_query","filter"],m);const x=r(e,["queryBase"]);return s!==void 0&&x!=null&&u(s,["_url","models_url"],ng(t,x)),a}function lw(t,e){const s={},a=r(e,["config"]);return a!=null&&tw(t,a,s),s}function sw(t,e){const s={},a=r(e,["config"]);return a!=null&&nw(t,a,s),s}function aw(t){const e={},s=r(t,["sdkHttpResponse"]);s!=null&&u(e,["sdkHttpResponse"],s);const a=r(t,["nextPageToken"]);a!=null&&u(e,["nextPageToken"],a);const c=r(t,["_self"]);if(c!=null){let f=lg(c);Array.isArray(f)&&(f=f.map(m=>Tc(m))),u(e,["models"],f)}return e}function ow(t){const e={},s=r(t,["sdkHttpResponse"]);s!=null&&u(e,["sdkHttpResponse"],s);const a=r(t,["nextPageToken"]);a!=null&&u(e,["nextPageToken"],a);const c=r(t,["_self"]);if(c!=null){let f=lg(c);Array.isArray(f)&&(f=f.map(m=>Nc(m))),u(e,["models"],f)}return e}function iw(t){const e={},s=r(t,["maskMode"]);s!=null&&u(e,["maskMode"],s);const a=r(t,["segmentationClasses"]);a!=null&&u(e,["maskClasses"],a);const c=r(t,["maskDilation"]);return c!=null&&u(e,["dilation"],c),e}function Tc(t){const e={},s=r(t,["name"]);s!=null&&u(e,["name"],s);const a=r(t,["displayName"]);a!=null&&u(e,["displayName"],a);const c=r(t,["description"]);c!=null&&u(e,["description"],c);const f=r(t,["version"]);f!=null&&u(e,["version"],f);const m=r(t,["_self"]);m!=null&&u(e,["tunedModelInfo"],zw(m));const x=r(t,["inputTokenLimit"]);x!=null&&u(e,["inputTokenLimit"],x);const g=r(t,["outputTokenLimit"]);g!=null&&u(e,["outputTokenLimit"],g);const p=r(t,["supportedGenerationMethods"]);return p!=null&&u(e,["supportedActions"],p),e}function Nc(t){const e={},s=r(t,["name"]);s!=null&&u(e,["name"],s);const a=r(t,["displayName"]);a!=null&&u(e,["displayName"],a);const c=r(t,["description"]);c!=null&&u(e,["description"],c);const f=r(t,["versionId"]);f!=null&&u(e,["version"],f);const m=r(t,["deployedModels"]);if(m!=null){let b=m;Array.isArray(b)&&(b=b.map(k=>s2(k))),u(e,["endpoints"],b)}const x=r(t,["labels"]);x!=null&&u(e,["labels"],x);const g=r(t,["_self"]);g!=null&&u(e,["tunedModelInfo"],Fw(g));const p=r(t,["defaultCheckpointId"]);p!=null&&u(e,["defaultCheckpointId"],p);const v=r(t,["checkpoints"]);if(v!=null){let b=v;Array.isArray(b)&&(b=b.map(k=>CS(k))),u(e,["checkpoints"],b)}return e}function rw(t){const e={},s=r(t,["featureSelectionPreference"]);return s!=null&&u(e,["featureSelectionPreference"],s),e}function uw(t){const e={},s=r(t,["speakerVoiceConfigs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>Iw(c))),u(e,["speakerVoiceConfigs"],a)}return e}function cw(t){const e={},s=r(t,["videoMetadata"]);s!=null&&u(e,["videoMetadata"],rE(s));const a=r(t,["thought"]);a!=null&&u(e,["thought"],a);const c=r(t,["inlineData"]);c!=null&&u(e,["inlineData"],gS(c));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],i2(f));const m=r(t,["thoughtSignature"]);m!=null&&u(e,["thoughtSignature"],m);const x=r(t,["functionCall"]);x!=null&&u(e,["functionCall"],d2(x));const g=r(t,["codeExecutionResult"]);g!=null&&u(e,["codeExecutionResult"],g);const p=r(t,["executableCode"]);p!=null&&u(e,["executableCode"],p);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const b=r(t,["text"]);return b!=null&&u(e,["text"],b),e}function dw(t){const e={},s=r(t,["videoMetadata"]);s!=null&&u(e,["videoMetadata"],uE(s));const a=r(t,["thought"]);a!=null&&u(e,["thought"],a);const c=r(t,["inlineData"]);c!=null&&u(e,["inlineData"],xS(c));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],r2(f));const m=r(t,["thoughtSignature"]);m!=null&&u(e,["thoughtSignature"],m);const x=r(t,["functionCall"]);x!=null&&u(e,["functionCall"],f2(x));const g=r(t,["codeExecutionResult"]);g!=null&&u(e,["codeExecutionResult"],g);const p=r(t,["executableCode"]);p!=null&&u(e,["executableCode"],p);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const b=r(t,["text"]);return b!=null&&u(e,["text"],b),e}function fw(t){const e={},s=r(t,["videoMetadata"]);s!=null&&u(e,["videoMetadata"],cE(s));const a=r(t,["thought"]);a!=null&&u(e,["thought"],a);const c=r(t,["inlineData"]);c!=null&&u(e,["inlineData"],yS(c));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],u2(f));const m=r(t,["thoughtSignature"]);m!=null&&u(e,["thoughtSignature"],m);const x=r(t,["functionCall"]);x!=null&&u(e,["functionCall"],m2(x));const g=r(t,["codeExecutionResult"]);g!=null&&u(e,["codeExecutionResult"],g);const p=r(t,["executableCode"]);p!=null&&u(e,["executableCode"],p);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const b=r(t,["text"]);return b!=null&&u(e,["text"],b),e}function mw(t){const e={},s=r(t,["videoMetadata"]);s!=null&&u(e,["videoMetadata"],dE(s));const a=r(t,["thought"]);a!=null&&u(e,["thought"],a);const c=r(t,["inlineData"]);c!=null&&u(e,["inlineData"],vS(c));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],c2(f));const m=r(t,["thoughtSignature"]);m!=null&&u(e,["thoughtSignature"],m);const x=r(t,["functionCall"]);x!=null&&u(e,["functionCall"],h2(x));const g=r(t,["codeExecutionResult"]);g!=null&&u(e,["codeExecutionResult"],g);const p=r(t,["executableCode"]);p!=null&&u(e,["executableCode"],p);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const b=r(t,["text"]);return b!=null&&u(e,["text"],b),e}function hw(t){const e={},s=r(t,["voiceName"]);return s!=null&&u(e,["voiceName"],s),e}function pw(t){const e={},s=r(t,["voiceName"]);return s!=null&&u(e,["voiceName"],s),e}function gw(t){const e={},s=r(t,["productImage"]);return s!=null&&u(e,["image"],pn(s)),e}function xw(t,e){const s={},a=r(t,["numberOfImages"]);e!==void 0&&a!=null&&u(e,["parameters","sampleCount"],a);const c=r(t,["baseSteps"]);e!==void 0&&c!=null&&u(e,["parameters","editConfig","baseSteps"],c);const f=r(t,["outputGcsUri"]);e!==void 0&&f!=null&&u(e,["parameters","storageUri"],f);const m=r(t,["seed"]);e!==void 0&&m!=null&&u(e,["parameters","seed"],m);const x=r(t,["safetyFilterLevel"]);e!==void 0&&x!=null&&u(e,["parameters","safetySetting"],x);const g=r(t,["personGeneration"]);e!==void 0&&g!=null&&u(e,["parameters","personGeneration"],g);const p=r(t,["addWatermark"]);e!==void 0&&p!=null&&u(e,["parameters","addWatermark"],p);const v=r(t,["outputMimeType"]);e!==void 0&&v!=null&&u(e,["parameters","outputOptions","mimeType"],v);const b=r(t,["outputCompressionQuality"]);e!==void 0&&b!=null&&u(e,["parameters","outputOptions","compressionQuality"],b);const k=r(t,["enhancePrompt"]);return e!==void 0&&k!=null&&u(e,["parameters","enhancePrompt"],k),s}function yw(t,e){const s={},a=r(e,["model"]);a!=null&&u(s,["_url","model"],Ve(t,a));const c=r(e,["source"]);c!=null&&bw(c,s);const f=r(e,["config"]);return f!=null&&xw(f,s),s}function vw(t){const e={},s=r(t,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>Hi(c))),u(e,["generatedImages"],a)}return e}function bw(t,e){const s={},a=r(t,["prompt"]);e!==void 0&&a!=null&&u(e,["instances[0]","prompt"],a);const c=r(t,["personImage"]);e!==void 0&&c!=null&&u(e,["instances[0]","personImage","image"],pn(c));const f=r(t,["productImages"]);if(e!==void 0&&f!=null){let m=f;Array.isArray(m)&&(m=m.map(x=>gw(x))),u(e,["instances[0]","productImages"],m)}return s}function kw(t){const e={},s=r(t,["referenceImage"]);s!=null&&u(e,["referenceImage"],pn(s));const a=r(t,["referenceId"]);a!=null&&u(e,["referenceId"],a);const c=r(t,["referenceType"]);c!=null&&u(e,["referenceType"],c);const f=r(t,["maskImageConfig"]);f!=null&&u(e,["maskImageConfig"],iw(f));const m=r(t,["controlImageConfig"]);m!=null&&u(e,["controlImageConfig"],jS(m));const x=r(t,["styleImageConfig"]);x!=null&&u(e,["styleImageConfig"],Lw(x));const g=r(t,["subjectImageConfig"]);return g!=null&&u(e,["subjectImageConfig"],Pw(g)),e}function Cw(t){const e={},s=r(t,["latLng"]);s!=null&&u(e,["latLng"],W2(s));const a=r(t,["languageCode"]);return a!=null&&u(e,["languageCode"],a),e}function Tw(t){const e={},s=r(t,["latLng"]);s!=null&&u(e,["latLng"],ew(s));const a=r(t,["languageCode"]);return a!=null&&u(e,["languageCode"],a),e}function bg(t){const e={},s=r(t,["safetyAttributes","categories"]);s!=null&&u(e,["categories"],s);const a=r(t,["safetyAttributes","scores"]);a!=null&&u(e,["scores"],a);const c=r(t,["contentType"]);return c!=null&&u(e,["contentType"],c),e}function kg(t){const e={},s=r(t,["safetyAttributes","categories"]);s!=null&&u(e,["categories"],s);const a=r(t,["safetyAttributes","scores"]);a!=null&&u(e,["scores"],a);const c=r(t,["contentType"]);return c!=null&&u(e,["contentType"],c),e}function Nw(t){const e={};if(r(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=r(t,["category"]);s!=null&&u(e,["category"],s);const a=r(t,["threshold"]);return a!=null&&u(e,["threshold"],a),e}function Sw(t){const e={},s=r(t,["method"]);s!=null&&u(e,["method"],s);const a=r(t,["category"]);a!=null&&u(e,["category"],a);const c=r(t,["threshold"]);return c!=null&&u(e,["threshold"],c),e}function ww(t){const e={},s=r(t,["anyOf"]);s!=null&&u(e,["anyOf"],s);const a=r(t,["default"]);a!=null&&u(e,["default"],a);const c=r(t,["description"]);c!=null&&u(e,["description"],c);const f=r(t,["enum"]);f!=null&&u(e,["enum"],f);const m=r(t,["example"]);m!=null&&u(e,["example"],m);const x=r(t,["format"]);x!=null&&u(e,["format"],x);const g=r(t,["items"]);g!=null&&u(e,["items"],g);const p=r(t,["maxItems"]);p!=null&&u(e,["maxItems"],p);const v=r(t,["maxLength"]);v!=null&&u(e,["maxLength"],v);const b=r(t,["maxProperties"]);b!=null&&u(e,["maxProperties"],b);const k=r(t,["maximum"]);k!=null&&u(e,["maximum"],k);const w=r(t,["minItems"]);w!=null&&u(e,["minItems"],w);const M=r(t,["minLength"]);M!=null&&u(e,["minLength"],M);const A=r(t,["minProperties"]);A!=null&&u(e,["minProperties"],A);const _=r(t,["minimum"]);_!=null&&u(e,["minimum"],_);const j=r(t,["nullable"]);j!=null&&u(e,["nullable"],j);const D=r(t,["pattern"]);D!=null&&u(e,["pattern"],D);const I=r(t,["properties"]);I!=null&&u(e,["properties"],I);const q=r(t,["propertyOrdering"]);q!=null&&u(e,["propertyOrdering"],q);const ee=r(t,["required"]);ee!=null&&u(e,["required"],ee);const se=r(t,["title"]);se!=null&&u(e,["title"],se);const F=r(t,["type"]);return F!=null&&u(e,["type"],F),e}function Ew(t){const e={},s=r(t,["anyOf"]);s!=null&&u(e,["anyOf"],s);const a=r(t,["default"]);a!=null&&u(e,["default"],a);const c=r(t,["description"]);c!=null&&u(e,["description"],c);const f=r(t,["enum"]);f!=null&&u(e,["enum"],f);const m=r(t,["example"]);m!=null&&u(e,["example"],m);const x=r(t,["format"]);x!=null&&u(e,["format"],x);const g=r(t,["items"]);g!=null&&u(e,["items"],g);const p=r(t,["maxItems"]);p!=null&&u(e,["maxItems"],p);const v=r(t,["maxLength"]);v!=null&&u(e,["maxLength"],v);const b=r(t,["maxProperties"]);b!=null&&u(e,["maxProperties"],b);const k=r(t,["maximum"]);k!=null&&u(e,["maximum"],k);const w=r(t,["minItems"]);w!=null&&u(e,["minItems"],w);const M=r(t,["minLength"]);M!=null&&u(e,["minLength"],M);const A=r(t,["minProperties"]);A!=null&&u(e,["minProperties"],A);const _=r(t,["minimum"]);_!=null&&u(e,["minimum"],_);const j=r(t,["nullable"]);j!=null&&u(e,["nullable"],j);const D=r(t,["pattern"]);D!=null&&u(e,["pattern"],D);const I=r(t,["properties"]);I!=null&&u(e,["properties"],I);const q=r(t,["propertyOrdering"]);q!=null&&u(e,["propertyOrdering"],q);const ee=r(t,["required"]);ee!=null&&u(e,["required"],ee);const se=r(t,["title"]);se!=null&&u(e,["title"],se);const F=r(t,["type"]);return F!=null&&u(e,["type"],F),e}function Mw(t){const e={},s=r(t,["image"]);return s!=null&&u(e,["image"],pn(s)),e}function Aw(t,e){const s={},a=r(t,["mode"]);e!==void 0&&a!=null&&u(e,["parameters","mode"],a);const c=r(t,["maxPredictions"]);e!==void 0&&c!=null&&u(e,["parameters","maxPredictions"],c);const f=r(t,["confidenceThreshold"]);e!==void 0&&f!=null&&u(e,["parameters","confidenceThreshold"],f);const m=r(t,["maskDilation"]);e!==void 0&&m!=null&&u(e,["parameters","maskDilation"],m);const x=r(t,["binaryColorThreshold"]);return e!==void 0&&x!=null&&u(e,["parameters","binaryColorThreshold"],x),s}function _w(t,e){const s={},a=r(e,["model"]);a!=null&&u(s,["_url","model"],Ve(t,a));const c=r(e,["source"]);c!=null&&Dw(c,s);const f=r(e,["config"]);return f!=null&&Aw(f,s),s}function Rw(t){const e={},s=r(t,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>V2(c))),u(e,["generatedMasks"],a)}return e}function Dw(t,e){const s={},a=r(t,["prompt"]);e!==void 0&&a!=null&&u(e,["instances[0]","prompt"],a);const c=r(t,["image"]);e!==void 0&&c!=null&&u(e,["instances[0]","image"],pn(c));const f=r(t,["scribbleImage"]);return e!==void 0&&f!=null&&u(e,["instances[0]","scribble"],Mw(f)),s}function Iw(t){const e={},s=r(t,["speaker"]);s!=null&&u(e,["speaker"],s);const a=r(t,["voiceConfig"]);return a!=null&&u(e,["voiceConfig"],Ng(a)),e}function jw(t){const e={},s=r(t,["voiceConfig"]);s!=null&&u(e,["voiceConfig"],Ng(s));const a=r(t,["multiSpeakerVoiceConfig"]);a!=null&&u(e,["multiSpeakerVoiceConfig"],uw(a));const c=r(t,["languageCode"]);return c!=null&&u(e,["languageCode"],c),e}function Uw(t){const e={},s=r(t,["voiceConfig"]);if(s!=null&&u(e,["voiceConfig"],fE(s)),r(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const a=r(t,["languageCode"]);return a!=null&&u(e,["languageCode"],a),e}function Lw(t){const e={},s=r(t,["styleDescription"]);return s!=null&&u(e,["styleDescription"],s),e}function Pw(t){const e={},s=r(t,["subjectType"]);s!=null&&u(e,["subjectType"],s);const a=r(t,["subjectDescription"]);return a!=null&&u(e,["subjectDescription"],a),e}function Vw(t){const e={},s=r(t,["includeThoughts"]);s!=null&&u(e,["includeThoughts"],s);const a=r(t,["thinkingBudget"]);return a!=null&&u(e,["thinkingBudget"],a),e}function qw(t){const e={},s=r(t,["includeThoughts"]);s!=null&&u(e,["includeThoughts"],s);const a=r(t,["thinkingBudget"]);return a!=null&&u(e,["thinkingBudget"],a),e}function Hw(t){const e={},s=r(t,["functionCallingConfig"]);s!=null&&u(e,["functionCallingConfig"],p2(s));const a=r(t,["retrievalConfig"]);return a!=null&&u(e,["retrievalConfig"],Cw(a)),e}function Bw(t){const e={},s=r(t,["functionCallingConfig"]);s!=null&&u(e,["functionCallingConfig"],g2(s));const a=r(t,["retrievalConfig"]);return a!=null&&u(e,["retrievalConfig"],Tw(a)),e}function Gw(t){const e={},s=r(t,["functionDeclarations"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(p=>x2(p))),u(e,["functionDeclarations"],g)}if(r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=r(t,["googleSearch"]);a!=null&&u(e,["googleSearch"],J2(a));const c=r(t,["googleSearchRetrieval"]);if(c!=null&&u(e,["googleSearchRetrieval"],F2(c)),r(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(t,["urlContext"])!=null&&u(e,["urlContext"],eE());const m=r(t,["computerUse"]);m!=null&&u(e,["computerUse"],ES(m));const x=r(t,["codeExecution"]);return x!=null&&u(e,["codeExecution"],x),e}function Cg(t){const e={},s=r(t,["functionDeclarations"]);if(s!=null){let b=s;Array.isArray(b)&&(b=b.map(k=>y2(k))),u(e,["functionDeclarations"],b)}const a=r(t,["retrieval"]);a!=null&&u(e,["retrieval"],a);const c=r(t,["googleSearch"]);c!=null&&u(e,["googleSearch"],Y2(c));const f=r(t,["googleSearchRetrieval"]);f!=null&&u(e,["googleSearchRetrieval"],O2(f));const m=r(t,["enterpriseWebSearch"]);m!=null&&u(e,["enterpriseWebSearch"],a2(m));const x=r(t,["googleMaps"]);x!=null&&u(e,["googleMaps"],z2(x)),r(t,["urlContext"])!=null&&u(e,["urlContext"],tE());const p=r(t,["computerUse"]);p!=null&&u(e,["computerUse"],MS(p));const v=r(t,["codeExecution"]);return v!=null&&u(e,["codeExecution"],v),e}function zw(t){const e={},s=r(t,["baseModel"]);s!=null&&u(e,["baseModel"],s);const a=r(t,["createTime"]);a!=null&&u(e,["createTime"],a);const c=r(t,["updateTime"]);return c!=null&&u(e,["updateTime"],c),e}function Fw(t){const e={},s=r(t,["labels","google-vertex-llm-tuning-base-model-id"]);s!=null&&u(e,["baseModel"],s);const a=r(t,["createTime"]);a!=null&&u(e,["createTime"],a);const c=r(t,["updateTime"]);return c!=null&&u(e,["updateTime"],c),e}function Ow(t,e){const s={},a=r(t,["displayName"]);e!==void 0&&a!=null&&u(e,["displayName"],a);const c=r(t,["description"]);e!==void 0&&c!=null&&u(e,["description"],c);const f=r(t,["defaultCheckpointId"]);return e!==void 0&&f!=null&&u(e,["defaultCheckpointId"],f),s}function Jw(t,e){const s={},a=r(t,["displayName"]);e!==void 0&&a!=null&&u(e,["displayName"],a);const c=r(t,["description"]);e!==void 0&&c!=null&&u(e,["description"],c);const f=r(t,["defaultCheckpointId"]);return e!==void 0&&f!=null&&u(e,["defaultCheckpointId"],f),s}function Yw(t,e){const s={},a=r(e,["model"]);a!=null&&u(s,["_url","name"],Ve(t,a));const c=r(e,["config"]);return c!=null&&Ow(c,s),s}function Kw(t,e){const s={},a=r(e,["model"]);a!=null&&u(s,["_url","model"],Ve(t,a));const c=r(e,["config"]);return c!=null&&Jw(c,s),s}function $w(t,e){const s={},a=r(t,["outputGcsUri"]);e!==void 0&&a!=null&&u(e,["parameters","storageUri"],a);const c=r(t,["includeRaiReason"]);e!==void 0&&c!=null&&u(e,["parameters","includeRaiReason"],c);const f=r(t,["outputMimeType"]);e!==void 0&&f!=null&&u(e,["parameters","outputOptions","mimeType"],f);const m=r(t,["outputCompressionQuality"]);e!==void 0&&m!=null&&u(e,["parameters","outputOptions","compressionQuality"],m);const x=r(t,["enhanceInputImage"]);e!==void 0&&x!=null&&u(e,["parameters","upscaleConfig","enhanceInputImage"],x);const g=r(t,["imagePreservationFactor"]);e!==void 0&&g!=null&&u(e,["parameters","upscaleConfig","imagePreservationFactor"],g);const p=r(t,["numberOfImages"]);e!==void 0&&p!=null&&u(e,["parameters","sampleCount"],p);const v=r(t,["mode"]);return e!==void 0&&v!=null&&u(e,["parameters","mode"],v),s}function Xw(t,e){const s={},a=r(e,["model"]);a!=null&&u(s,["_url","model"],Ve(t,a));const c=r(e,["image"]);c!=null&&u(s,["instances[0]","image"],pn(c));const f=r(e,["upscaleFactor"]);f!=null&&u(s,["parameters","upscaleConfig","upscaleFactor"],f);const m=r(e,["config"]);return m!=null&&$w(m,s),s}function Qw(t){const e={},s=r(t,["sdkHttpResponse"]);s!=null&&u(e,["sdkHttpResponse"],s);const a=r(t,["predictions"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(f=>Hi(f))),u(e,["generatedImages"],c)}return e}function Zw(t){const e={},s=r(t,["urlMetadata"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>nE(c))),u(e,["urlMetadata"],a)}return e}function Ww(t){const e={},s=r(t,["urlMetadata"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>lE(c))),u(e,["urlMetadata"],a)}return e}function eE(){return{}}function tE(){return{}}function nE(t){const e={},s=r(t,["retrievedUrl"]);s!=null&&u(e,["retrievedUrl"],s);const a=r(t,["urlRetrievalStatus"]);return a!=null&&u(e,["urlRetrievalStatus"],a),e}function lE(t){const e={},s=r(t,["retrievedUrl"]);s!=null&&u(e,["retrievedUrl"],s);const a=r(t,["urlRetrievalStatus"]);return a!=null&&u(e,["urlRetrievalStatus"],a),e}function sE(t){const e={},s=r(t,["video","uri"]);s!=null&&u(e,["uri"],s);const a=r(t,["video","encodedVideo"]);a!=null&&u(e,["videoBytes"],Ol(a));const c=r(t,["encoding"]);return c!=null&&u(e,["mimeType"],c),e}function aE(t){const e={},s=r(t,["gcsUri"]);s!=null&&u(e,["uri"],s);const a=r(t,["bytesBase64Encoded"]);a!=null&&u(e,["videoBytes"],Ol(a));const c=r(t,["mimeType"]);return c!=null&&u(e,["mimeType"],c),e}function oE(t){const e={},s=r(t,["image"]);s!=null&&u(e,["_self"],pn(s));const a=r(t,["maskMode"]);return a!=null&&u(e,["maskMode"],a),e}function iE(t){const e={},s=r(t,["image"]);s!=null&&u(e,["image"],pn(s));const a=r(t,["referenceType"]);return a!=null&&u(e,["referenceType"],a),e}function rE(t){const e={},s=r(t,["fps"]);s!=null&&u(e,["fps"],s);const a=r(t,["endOffset"]);a!=null&&u(e,["endOffset"],a);const c=r(t,["startOffset"]);return c!=null&&u(e,["startOffset"],c),e}function uE(t){const e={},s=r(t,["fps"]);s!=null&&u(e,["fps"],s);const a=r(t,["endOffset"]);a!=null&&u(e,["endOffset"],a);const c=r(t,["startOffset"]);return c!=null&&u(e,["startOffset"],c),e}function cE(t){const e={},s=r(t,["fps"]);s!=null&&u(e,["fps"],s);const a=r(t,["endOffset"]);a!=null&&u(e,["endOffset"],a);const c=r(t,["startOffset"]);return c!=null&&u(e,["startOffset"],c),e}function dE(t){const e={},s=r(t,["fps"]);s!=null&&u(e,["fps"],s);const a=r(t,["endOffset"]);a!=null&&u(e,["endOffset"],a);const c=r(t,["startOffset"]);return c!=null&&u(e,["startOffset"],c),e}function Tg(t){const e={},s=r(t,["uri"]);s!=null&&u(e,["gcsUri"],s);const a=r(t,["videoBytes"]);a!=null&&u(e,["bytesBase64Encoded"],Ol(a));const c=r(t,["mimeType"]);return c!=null&&u(e,["mimeType"],c),e}function Ng(t){const e={},s=r(t,["prebuiltVoiceConfig"]);return s!=null&&u(e,["prebuiltVoiceConfig"],hw(s)),e}function fE(t){const e={},s=r(t,["prebuiltVoiceConfig"]);return s!=null&&u(e,["prebuiltVoiceConfig"],pw(s)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mE="Content-Type",hE="X-Server-Timeout",pE="User-Agent",Sc="x-goog-api-client",gE="1.22.0",xE=`google-genai-sdk/${gE}`,yE="v1beta1",vE="v1beta",Tp=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class bE{constructor(e){var s,a;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const c={};this.clientOptions.vertexai?(c.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:yE,c.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(c.apiVersion=(a=this.clientOptions.apiVersion)!==null&&a!==void 0?a:vE,c.baseUrl="https://generativelanguage.googleapis.com/"),c.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=c,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(c,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const a=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&a.push(e.apiVersion),a.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),s=new URL(e);return s.protocol=s.protocol=="http:"?"ws":"wss",s.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,s,a){const c=[this.getRequestUrlInternal(s)];return a&&c.push(this.getBaseResourcePath()),e!==""&&c.push(e),new URL(`${c.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let s=this.clientOptions.httpOptions;e.httpOptions&&(s=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const a=this.shouldPrependVertexProjectPath(e),c=this.constructUrl(e.path,s,a);if(e.queryParams)for(const[m,x]of Object.entries(e.queryParams))c.searchParams.append(m,String(x));let f={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else f.body=e.body;return f=await this.includeExtraHttpOptionsToRequestInit(f,s,e.abortSignal),this.unaryApiCall(c,f,e.httpMethod)}patchHttpOptions(e,s){const a=JSON.parse(JSON.stringify(e));for(const[c,f]of Object.entries(s))typeof f=="object"?a[c]=Object.assign(Object.assign({},a[c]),f):f!==void 0&&(a[c]=f);return a}async requestStream(e){let s=this.clientOptions.httpOptions;e.httpOptions&&(s=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const a=this.shouldPrependVertexProjectPath(e),c=this.constructUrl(e.path,s,a);(!c.searchParams.has("alt")||c.searchParams.get("alt")!=="sse")&&c.searchParams.set("alt","sse");let f={};return f.body=e.body,f=await this.includeExtraHttpOptionsToRequestInit(f,s,e.abortSignal),this.streamApiCall(c,f,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,s,a){if(s&&s.timeout||a){const c=new AbortController,f=c.signal;if(s.timeout&&(s==null?void 0:s.timeout)>0){const m=setTimeout(()=>c.abort(),s.timeout);m&&typeof m.unref=="function"&&m.unref()}a&&a.addEventListener("abort",()=>{c.abort()}),e.signal=f}return s&&s.extraBody!==null&&kE(e,s.extraBody),e.headers=await this.getHeadersInternal(s),e}async unaryApiCall(e,s,a){return this.apiCall(e.toString(),Object.assign(Object.assign({},s),{method:a})).then(async c=>(await Np(c),new yc(c))).catch(c=>{throw c instanceof Error?c:new Error(JSON.stringify(c))})}async streamApiCall(e,s,a){return this.apiCall(e.toString(),Object.assign(Object.assign({},s),{method:a})).then(async c=>(await Np(c),this.processStreamResponse(c))).catch(c=>{throw c instanceof Error?c:new Error(JSON.stringify(c))})}processStreamResponse(e){var s;return Us(this,arguments,function*(){const c=(s=e==null?void 0:e.body)===null||s===void 0?void 0:s.getReader(),f=new TextDecoder("utf-8");if(!c)throw new Error("Response body is empty");try{let m="";for(;;){const{done:x,value:g}=yield Ze(c.read());if(x){if(m.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=f.decode(g,{stream:!0});try{const b=JSON.parse(p);if("error"in b){const k=JSON.parse(JSON.stringify(b.error)),w=k.status,M=k.code,A=`got status: ${w}. ${JSON.stringify(b)}`;if(M>=400&&M<600)throw new Vi({message:A,status:M})}}catch(b){if(b.name==="ApiError")throw b}m+=p;let v=m.match(Tp);for(;v;){const b=v[1];try{const k=new Response(b,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ze(new yc(k)),m=m.slice(v[0].length),v=m.match(Tp)}catch(k){throw new Error(`exception parsing stream chunk ${b}. ${k}`)}}}}finally{c.releaseLock()}})}async apiCall(e,s){return fetch(e,s).catch(a=>{throw new Error(`exception ${a} sending request`)})}getDefaultHeaders(){const e={},s=xE+" "+this.clientOptions.userAgentExtra;return e[pE]=s,e[Sc]=s,e[mE]="application/json",e}async getHeadersInternal(e){const s=new Headers;if(e&&e.headers){for(const[a,c]of Object.entries(e.headers))s.append(a,c);e.timeout&&e.timeout>0&&s.append(hE,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s),s}async uploadFile(e,s){var a;const c={};s!=null&&(c.mimeType=s.mimeType,c.name=s.name,c.displayName=s.displayName),c.name&&!c.name.startsWith("files/")&&(c.name=`files/${c.name}`);const f=this.clientOptions.uploader,m=await f.stat(e);c.sizeBytes=String(m.size);const x=(a=s==null?void 0:s.mimeType)!==null&&a!==void 0?a:m.type;if(x===void 0||x==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");c.mimeType=x;const g=await this.fetchUploadUrl(c,s);return f.upload(e,g,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,s){var a;let c={};s!=null&&s.httpOptions?c=s.httpOptions:c={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const f={file:e},m=await this.request({path:pe("upload/v1beta/files",f._url),body:JSON.stringify(f),httpMethod:"POST",httpOptions:c});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const x=(a=m==null?void 0:m.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(x===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return x}}async function Np(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const s=t.status;let a;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?a=await t.json():a={error:{message:await t.text(),code:t.status,status:t.statusText}};const c=JSON.stringify(a);throw s>=400&&s<600?new Vi({message:c,status:s}):new Error(c)}}function kE(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let s={};if(typeof t.body=="string"&&t.body.length>0)try{const f=JSON.parse(t.body);if(typeof f=="object"&&f!==null&&!Array.isArray(f))s=f;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function a(f,m){const x=Object.assign({},f);for(const g in m)if(Object.prototype.hasOwnProperty.call(m,g)){const p=m[g],v=x[g];p&&typeof p=="object"&&!Array.isArray(p)&&v&&typeof v=="object"&&!Array.isArray(v)?x[g]=a(v,p):(v&&p&&typeof v!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof v}, New type: ${typeof p}. Overwriting.`),x[g]=p)}return x}const c=a(s,e);t.body=JSON.stringify(c)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const CE="mcp_used/unknown";let TE=!1;function Sg(t){for(const e of t)if(NE(e)||typeof e=="object"&&"inputSchema"in e)return!0;return TE}function wg(t){var e;const s=(e=t[Sc])!==null&&e!==void 0?e:"";t[Sc]=(s+` ${CE}`).trimStart()}function NE(t){return t!==null&&typeof t=="object"&&t instanceof Oc}function SE(t,e=100){return Us(this,arguments,function*(){let a,c=0;for(;c<e;){const f=yield Ze(t.listTools({cursor:a}));for(const m of f.tools)yield yield Ze(m),c++;if(!f.nextCursor)break;a=f.nextCursor}})}class Oc{constructor(e=[],s){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=s}static create(e,s){return new Oc(e,s)}async initialize(){var e,s,a,c;if(this.mcpTools.length>0)return;const f={},m=[];for(const v of this.mcpClients)try{for(var x=!0,g=(s=void 0,Fa(SE(v))),p;p=await g.next(),e=p.done,!e;x=!0){c=p.value,x=!1;const b=c;m.push(b);const k=b.name;if(f[k])throw new Error(`Duplicate function name ${k} found in MCP tools. Please ensure function names are unique.`);f[k]=v}}catch(b){s={error:b}}finally{try{!x&&!e&&(a=g.return)&&await a.call(g)}finally{if(s)throw s.error}}this.mcpTools=m,this.functionNameToMcpClient=f}async tool(){return await this.initialize(),Uk(this.mcpTools,this.config)}async callTool(e){await this.initialize();const s=[];for(const a of e)if(a.name in this.functionNameToMcpClient){const c=this.functionNameToMcpClient[a.name];let f;this.config.timeout&&(f={timeout:this.config.timeout});const m=await c.callTool({name:a.name,arguments:a.args},void 0,f);s.push({functionResponse:{name:a.name,response:m.isError?{error:m}:m}})}return s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function wE(t,e,s){const a=new Ek;let c;s.data instanceof Blob?c=JSON.parse(await s.data.text()):c=JSON.parse(s.data);const f=m1(c);Object.assign(a,f),e(a)}class EE{constructor(e,s,a){this.apiClient=e,this.auth=s,this.webSocketFactory=a}async connect(e){var s,a;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const c=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion(),m=_E(this.apiClient.getDefaultHeaders()),x=this.apiClient.getApiKey(),g=`${c}/ws/google.ai.generativelanguage.${f}.GenerativeService.BidiGenerateMusic?key=${x}`;let p=()=>{};const v=new Promise(I=>{p=I}),b=e.callbacks,k=function(){p({})},w=this.apiClient,M={onopen:k,onmessage:I=>{wE(w,b.onmessage,I)},onerror:(s=b==null?void 0:b.onerror)!==null&&s!==void 0?s:function(I){},onclose:(a=b==null?void 0:b.onclose)!==null&&a!==void 0?a:function(I){}},A=this.webSocketFactory.create(g,AE(m),M);A.connect(),await v;const _=Ve(this.apiClient,e.model),j=hg({model:_}),D=Cc({setup:j});return A.send(JSON.stringify(D)),new ME(A,this.apiClient)}}class ME{constructor(e,s){this.conn=e,this.apiClient=s}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const s=g1(e),a=mg(s);this.conn.send(JSON.stringify({clientContent:a}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const s=p1(e),a=Cc(s);this.conn.send(JSON.stringify(a))}sendPlaybackControl(e){const s=Cc({playbackControl:e});this.conn.send(JSON.stringify(s))}play(){this.sendPlaybackControl(Is.PLAY)}pause(){this.sendPlaybackControl(Is.PAUSE)}stop(){this.sendPlaybackControl(Is.STOP)}resetContext(){this.sendPlaybackControl(Is.RESET_CONTEXT)}close(){this.conn.close()}}function AE(t){const e={};return t.forEach((s,a)=>{e[a]=s}),e}function _E(t){const e=new Headers;for(const[s,a]of Object.entries(t))e.append(s,a);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const RE="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function DE(t,e,s){const a=new wk;let c;s.data instanceof Blob?c=await s.data.text():s.data instanceof ArrayBuffer?c=new TextDecoder().decode(s.data):c=s.data;const f=JSON.parse(c);if(t.isVertexAI()){const m=S1(f);Object.assign(a,m)}else{const m=N1(f);Object.assign(a,m)}e(a)}class IE{constructor(e,s,a){this.apiClient=e,this.auth=s,this.webSocketFactory=a,this.music=new EE(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var s,a,c,f,m,x;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let v;const b=this.apiClient.getHeaders();e.config&&e.config.tools&&Sg(e.config.tools)&&wg(b);const k=PE(b);if(this.apiClient.isVertexAI())v=`${g}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(k);else{const $=this.apiClient.getApiKey();let Z="BidiGenerateContent",Q="key";$!=null&&$.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),Z="BidiGenerateContentConstrained",Q="access_token"),v=`${g}/ws/google.ai.generativelanguage.${p}.GenerativeService.${Z}?${Q}=${$}`}let w=()=>{};const M=new Promise($=>{w=$}),A=e.callbacks,_=function(){var $;($=A==null?void 0:A.onopen)===null||$===void 0||$.call(A),w({})},j=this.apiClient,D={onopen:_,onmessage:$=>{DE(j,A.onmessage,$)},onerror:(s=A==null?void 0:A.onerror)!==null&&s!==void 0?s:function($){},onclose:(a=A==null?void 0:A.onclose)!==null&&a!==void 0?a:function($){}},I=this.webSocketFactory.create(v,LE(k),D);I.connect(),await M;let q=Ve(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&q.startsWith("publishers/")){const $=this.apiClient.getProject(),Z=this.apiClient.getLocation();q=`projects/${$}/locations/${Z}/`+q}let ee={};this.apiClient.isVertexAI()&&((c=e.config)===null||c===void 0?void 0:c.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Ri.AUDIO]}:e.config.responseModalities=[Ri.AUDIO]),!((f=e.config)===null||f===void 0)&&f.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const se=(x=(m=e.config)===null||m===void 0?void 0:m.tools)!==null&&x!==void 0?x:[],F=[];for(const $ of se)if(this.isCallableTool($)){const Z=$;F.push(await Z.tool())}else F.push($);F.length>0&&(e.config.tools=F);const oe={model:q,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?ee=r1(this.apiClient,oe):ee=i1(this.apiClient,oe),delete ee.config,I.send(JSON.stringify(ee)),new UE(I,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const jE={turnComplete:!0};class UE{constructor(e,s){this.conn=e,this.apiClient=s}tLiveClientContent(e,s){if(s.turns!==null&&s.turns!==void 0){let a=[];try{a=sn(s.turns),e.isVertexAI()?a=a.map(c=>zs(c)):a=a.map(c=>qi(c))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof s.turns}'`)}return{clientContent:{turns:a,turnComplete:s.turnComplete}}}return{clientContent:{turnComplete:s.turnComplete}}}tLiveClienttToolResponse(e,s){let a=[];if(s.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(s.functionResponses)?a=s.functionResponses:a=[s.functionResponses],a.length===0)throw new Error("functionResponses is required.");for(const f of a){if(typeof f!="object"||f===null||!("name"in f)||!("response"in f))throw new Error(`Could not parse function response, type '${typeof f}'.`);if(!e.isVertexAI()&&!("id"in f))throw new Error(RE)}return{toolResponse:{functionResponses:a}}}sendClientContent(e){e=Object.assign(Object.assign({},jE),e);const s=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(s))}sendRealtimeInput(e){let s={};this.apiClient.isVertexAI()?s={realtimeInput:v1(e)}:s={realtimeInput:y1(e)},this.conn.send(JSON.stringify(s))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const s=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(s))}close(){this.conn.close()}}function LE(t){const e={};return t.forEach((s,a)=>{e[a]=s}),e}function PE(t){const e=new Headers;for(const[s,a]of Object.entries(t))e.append(s,a);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Sp=10;function wp(t){var e,s,a;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let c=!1;for(const m of(s=t==null?void 0:t.tools)!==null&&s!==void 0?s:[])if(Ls(m)){c=!0;break}if(!c)return!0;const f=(a=t==null?void 0:t.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls;return f&&(f<0||!Number.isInteger(f))||f==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",f),!0):!1}function Ls(t){return"callTool"in t&&typeof t.callTool=="function"}function VE(t){var e,s,a;return(a=(s=(e=t.config)===null||e===void 0?void 0:e.tools)===null||s===void 0?void 0:s.some(c=>Ls(c)))!==null&&a!==void 0?a:!1}function qE(t){var e,s,a;return(a=(s=(e=t.config)===null||e===void 0?void 0:e.tools)===null||s===void 0?void 0:s.some(c=>!Ls(c)))!==null&&a!==void 0?a:!1}function Ep(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class HE extends Fl{constructor(e){super(),this.apiClient=e,this.generateContent=async s=>{var a,c,f,m,x;const g=await this.processParamsMaybeAddMcpUsage(s);if(this.maybeMoveToResponseJsonSchem(s),!VE(s)||wp(s.config))return await this.generateContentInternal(g);if(qE(s))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let p,v;const b=sn(g.contents),k=(f=(c=(a=g.config)===null||a===void 0?void 0:a.automaticFunctionCalling)===null||c===void 0?void 0:c.maximumRemoteCalls)!==null&&f!==void 0?f:Sp;let w=0;for(;w<k&&(p=await this.generateContentInternal(g),!(!p.functionCalls||p.functionCalls.length===0));){const M=p.candidates[0].content,A=[];for(const _ of(x=(m=s.config)===null||m===void 0?void 0:m.tools)!==null&&x!==void 0?x:[])if(Ls(_)){const D=await _.callTool(p.functionCalls);A.push(...D)}w++,v={role:"user",parts:A},g.contents=sn(g.contents),g.contents.push(M),g.contents.push(v),Ep(g.config)&&(b.push(M),b.push(v))}return Ep(g.config)&&(p.automaticFunctionCallingHistory=b),p},this.generateContentStream=async s=>{if(this.maybeMoveToResponseJsonSchem(s),wp(s.config)){const a=await this.processParamsMaybeAddMcpUsage(s);return await this.generateContentStreamInternal(a)}else return await this.processAfcStream(s)},this.generateImages=async s=>await this.generateImagesInternal(s).then(a=>{var c;let f;const m=[];if(a!=null&&a.generatedImages)for(const g of a.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((c=g==null?void 0:g.safetyAttributes)===null||c===void 0?void 0:c.contentType)==="Positive Prompt"?f=g==null?void 0:g.safetyAttributes:m.push(g);let x;return f?x={generatedImages:m,positivePromptSafetyAttributes:f,sdkHttpResponse:a.sdkHttpResponse}:x={generatedImages:m,sdkHttpResponse:a.sdkHttpResponse},x}),this.list=async s=>{var a;const m={config:Object.assign(Object.assign({},{queryBase:!0}),s==null?void 0:s.config)};if(this.apiClient.isVertexAI()&&!m.config.queryBase){if(!((a=m.config)===null||a===void 0)&&a.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");m.config.filter="labels.tune-type:*"}return new Ka(Gl.PAGED_ITEM_MODELS,x=>this.listInternal(x),await this.listInternal(m),m)},this.editImage=async s=>{const a={model:s.model,prompt:s.prompt,referenceImages:[],config:s.config};return s.referenceImages&&s.referenceImages&&(a.referenceImages=s.referenceImages.map(c=>c.toReferenceImageAPI())),await this.editImageInternal(a)},this.upscaleImage=async s=>{let a={numberOfImages:1,mode:"upscale"};s.config&&(a=Object.assign(Object.assign({},a),s.config));const c={model:s.model,image:s.image,upscaleFactor:s.upscaleFactor,config:a};return await this.upscaleImageInternal(c)},this.generateVideos=async s=>{if((s.prompt||s.image||s.video)&&s.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return await this.generateVideosInternal(s)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var s,a,c;const f=(s=e.config)===null||s===void 0?void 0:s.tools;if(!f)return e;const m=await Promise.all(f.map(async g=>Ls(g)?await g.tool():g)),x={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:m})};if(x.config.tools=m,e.config&&e.config.tools&&Sg(e.config.tools)){const g=(c=(a=e.config.httpOptions)===null||a===void 0?void 0:a.headers)!==null&&c!==void 0?c:{};let p=Object.assign({},g);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),wg(p),x.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return x}async initAfcToolsMap(e){var s,a,c;const f=new Map;for(const m of(a=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[])if(Ls(m)){const x=m,g=await x.tool();for(const p of(c=g.functionDeclarations)!==null&&c!==void 0?c:[]){if(!p.name)throw new Error("Function declaration name is required.");if(f.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);f.set(p.name,x)}}return f}async processAfcStream(e){var s,a,c;const f=(c=(a=(s=e.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&c!==void 0?c:Sp;let m=!1,x=0;const g=await this.initAfcToolsMap(e);return(function(p,v,b){var k,w;return Us(this,arguments,function*(){for(var M,A,_,j;x<f;){m&&(x++,m=!1);const ee=yield Ze(p.processParamsMaybeAddMcpUsage(b)),se=yield Ze(p.generateContentStreamInternal(ee)),F=[],oe=[];try{for(var D=!0,I=(A=void 0,Fa(se)),q;q=yield Ze(I.next()),M=q.done,!M;D=!0){j=q.value,D=!1;const $=j;if(yield yield Ze($),$.candidates&&(!((k=$.candidates[0])===null||k===void 0)&&k.content)){oe.push($.candidates[0].content);for(const Z of(w=$.candidates[0].content.parts)!==null&&w!==void 0?w:[])if(x<f&&Z.functionCall){if(!Z.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(Z.functionCall.name)){const Q=yield Ze(v.get(Z.functionCall.name).callTool([Z.functionCall]));F.push(...Q)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${Z.functionCall.name}`)}}}}catch($){A={error:$}}finally{try{!D&&!M&&(_=I.return)&&(yield Ze(_.call(I)))}finally{if(A)throw A.error}}if(F.length>0){m=!0;const $=new qa;$.candidates=[{content:{role:"user",parts:F}}],yield yield Ze($);const Z=[];Z.push(...oe),Z.push({role:"user",parts:F});const Q=sn(b.contents).concat(Z);b.contents=Q}else break}})})(this,g,e)}async generateContentInternal(e){var s,a,c,f;let m,x="",g={};if(this.apiClient.isVertexAI()){const p=bp(this.apiClient,e);return x=pe("{model}:generateContent",p._url),g=p._query,delete p._url,delete p._query,m=this.apiClient.request({path:x,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(b=>{const k=b;return k.sdkHttpResponse={headers:v.headers},k})),m.then(v=>{const b=Cp(v),k=new qa;return Object.assign(k,b),k})}else{const p=vp(this.apiClient,e);return x=pe("{model}:generateContent",p._url),g=p._query,delete p._url,delete p._query,m=this.apiClient.request({path:x,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(c=e.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(b=>{const k=b;return k.sdkHttpResponse={headers:v.headers},k})),m.then(v=>{const b=kp(v),k=new qa;return Object.assign(k,b),k})}}async generateContentStreamInternal(e){var s,a,c,f;let m,x="",g={};if(this.apiClient.isVertexAI()){const p=bp(this.apiClient,e);return x=pe("{model}:streamGenerateContent?alt=sse",p._url),g=p._query,delete p._url,delete p._query,m=this.apiClient.requestStream({path:x,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),m.then(function(b){return Us(this,arguments,function*(){var k,w,M,A;try{for(var _=!0,j=Fa(b),D;D=yield Ze(j.next()),k=D.done,!k;_=!0){A=D.value,_=!1;const I=A,q=Cp(yield Ze(I.json()));q.sdkHttpResponse={headers:I.headers};const ee=new qa;Object.assign(ee,q),yield yield Ze(ee)}}catch(I){w={error:I}}finally{try{!_&&!k&&(M=j.return)&&(yield Ze(M.call(j)))}finally{if(w)throw w.error}}})})}else{const p=vp(this.apiClient,e);return x=pe("{model}:streamGenerateContent?alt=sse",p._url),g=p._query,delete p._url,delete p._query,m=this.apiClient.requestStream({path:x,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(c=e.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}),m.then(function(b){return Us(this,arguments,function*(){var k,w,M,A;try{for(var _=!0,j=Fa(b),D;D=yield Ze(j.next()),k=D.done,!k;_=!0){A=D.value,_=!1;const I=A,q=kp(yield Ze(I.json()));q.sdkHttpResponse={headers:I.headers};const ee=new qa;Object.assign(ee,q),yield yield Ze(ee)}}catch(I){w={error:I}}finally{try{!_&&!k&&(M=j.return)&&(yield Ze(M.call(j)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var s,a,c,f;let m,x="",g={};if(this.apiClient.isVertexAI()){const p=t2(this.apiClient,e);return x=pe("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,m=this.apiClient.request({path:x,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(b=>{const k=b;return k.sdkHttpResponse={headers:v.headers},k})),m.then(v=>{const b=l2(v),k=new W0;return Object.assign(k,b),k})}else{const p=e2(this.apiClient,e);return x=pe("{model}:batchEmbedContents",p._url),g=p._query,delete p._url,delete p._query,m=this.apiClient.request({path:x,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(c=e.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(b=>{const k=b;return k.sdkHttpResponse={headers:v.headers},k})),m.then(v=>{const b=n2(v),k=new W0;return Object.assign(k,b),k})}}async generateImagesInternal(e){var s,a,c,f;let m,x="",g={};if(this.apiClient.isVertexAI()){const p=N2(this.apiClient,e);return x=pe("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,m=this.apiClient.request({path:x,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(b=>{const k=b;return k.sdkHttpResponse={headers:v.headers},k})),m.then(v=>{const b=w2(v),k=new ep;return Object.assign(k,b),k})}else{const p=T2(this.apiClient,e);return x=pe("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,m=this.apiClient.request({path:x,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(c=e.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(b=>{const k=b;return k.sdkHttpResponse={headers:v.headers},k})),m.then(v=>{const b=S2(v),k=new ep;return Object.assign(k,b),k})}}async editImageInternal(e){var s,a;let c,f="",m={};if(this.apiClient.isVertexAI()){const x=KS(this.apiClient,e);return f=pe("{model}:predict",x._url),m=x._query,delete x._url,delete x._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),c.then(g=>{const p=$S(g),v=new yk;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var s,a;let c,f="",m={};if(this.apiClient.isVertexAI()){const x=Xw(this.apiClient,e);return f=pe("{model}:predict",x._url),m=x._query,delete x._url,delete x._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),c.then(g=>{const p=Qw(g),v=new vk;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var s,a;let c,f="",m={};if(this.apiClient.isVertexAI()){const x=yw(this.apiClient,e);return f=pe("{model}:predict",x._url),m=x._query,delete x._url,delete x._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),c.then(g=>{const p=vw(g),v=new bk;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var s,a;let c,f="",m={};if(this.apiClient.isVertexAI()){const x=_w(this.apiClient,e);return f=pe("{model}:predict",x._url),m=x._query,delete x._url,delete x._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),c.then(g=>{const p=Rw(g),v=new kk;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var s,a,c,f;let m,x="",g={};if(this.apiClient.isVertexAI()){const p=G2(this.apiClient,e);return x=pe("{name}",p._url),g=p._query,delete p._url,delete p._query,m=this.apiClient.request({path:x,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(v=>Nc(v))}else{const p=B2(this.apiClient,e);return x=pe("{name}",p._url),g=p._query,delete p._url,delete p._query,m=this.apiClient.request({path:x,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(c=e.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>Tc(v))}}async listInternal(e){var s,a,c,f;let m,x="",g={};if(this.apiClient.isVertexAI()){const p=sw(this.apiClient,e);return x=pe("{models_url}",p._url),g=p._query,delete p._url,delete p._query,m=this.apiClient.request({path:x,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(b=>{const k=b;return k.sdkHttpResponse={headers:v.headers},k})),m.then(v=>{const b=ow(v),k=new tp;return Object.assign(k,b),k})}else{const p=lw(this.apiClient,e);return x=pe("{models_url}",p._url),g=p._query,delete p._url,delete p._query,m=this.apiClient.request({path:x,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(c=e.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(b=>{const k=b;return k.sdkHttpResponse={headers:v.headers},k})),m.then(v=>{const b=aw(v),k=new tp;return Object.assign(k,b),k})}}async update(e){var s,a,c,f;let m,x="",g={};if(this.apiClient.isVertexAI()){const p=Kw(this.apiClient,e);return x=pe("{model}",p._url),g=p._query,delete p._url,delete p._query,m=this.apiClient.request({path:x,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(v=>Nc(v))}else{const p=Yw(this.apiClient,e);return x=pe("{name}",p._url),g=p._query,delete p._url,delete p._query,m=this.apiClient.request({path:x,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(c=e.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>Tc(v))}}async delete(e){var s,a,c,f;let m,x="",g={};if(this.apiClient.isVertexAI()){const p=GS(this.apiClient,e);return x=pe("{name}",p._url),g=p._query,delete p._url,delete p._query,m=this.apiClient.request({path:x,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(b=>{const k=b;return k.sdkHttpResponse={headers:v.headers},k})),m.then(v=>{const b=FS(v),k=new np;return Object.assign(k,b),k})}else{const p=BS(this.apiClient,e);return x=pe("{name}",p._url),g=p._query,delete p._url,delete p._query,m=this.apiClient.request({path:x,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(c=e.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(b=>{const k=b;return k.sdkHttpResponse={headers:v.headers},k})),m.then(v=>{const b=zS(v),k=new np;return Object.assign(k,b),k})}}async countTokens(e){var s,a,c,f;let m,x="",g={};if(this.apiClient.isVertexAI()){const p=VS(this.apiClient,e);return x=pe("{model}:countTokens",p._url),g=p._query,delete p._url,delete p._query,m=this.apiClient.request({path:x,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(b=>{const k=b;return k.sdkHttpResponse={headers:v.headers},k})),m.then(v=>{const b=HS(v),k=new lp;return Object.assign(k,b),k})}else{const p=PS(this.apiClient,e);return x=pe("{model}:countTokens",p._url),g=p._query,delete p._url,delete p._query,m=this.apiClient.request({path:x,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(c=e.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(b=>{const k=b;return k.sdkHttpResponse={headers:v.headers},k})),m.then(v=>{const b=qS(v),k=new lp;return Object.assign(k,b),k})}}async computeTokens(e){var s,a;let c,f="",m={};if(this.apiClient.isVertexAI()){const x=SS(this.apiClient,e);return f=pe("{model}:computeTokens",x._url),m=x._query,delete x._url,delete x._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),c.then(g=>{const p=wS(g),v=new Ck;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var s,a,c,f;let m,x="",g={};if(this.apiClient.isVertexAI()){const p=D2(this.apiClient,e);return x=pe("{model}:predictLongRunning",p._url),g=p._query,delete p._url,delete p._query,m=this.apiClient.request({path:x,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(v=>{const b=_2(v),k=new Di;return Object.assign(k,b),k})}else{const p=R2(this.apiClient,e);return x=pe("{model}:predictLongRunning",p._url),g=p._query,delete p._url,delete p._query,m=this.apiClient.request({path:x,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(c=e.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>{const b=A2(v),k=new Di;return Object.assign(k,b),k})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BE extends Fl{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const s=e.operation,a=e.config;if(s.name===void 0||s.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const c=s.name.split("/operations/")[0];let f;a&&"httpOptions"in a&&(f=a.httpOptions);const m=await this.fetchPredictVideosOperationInternal({operationName:s.name,resourceName:c,config:{httpOptions:f}});return s._fromAPIResponse({apiResponse:m,isVertexAI:!0})}else{const c=await this.getVideosOperationInternal({operationName:s.name,config:a});return s._fromAPIResponse({apiResponse:c,isVertexAI:!1})}}async get(e){const s=e.operation,a=e.config;if(s.name===void 0||s.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const c=s.name.split("/operations/")[0];let f;a&&"httpOptions"in a&&(f=a.httpOptions);const m=await this.fetchPredictVideosOperationInternal({operationName:s.name,resourceName:c,config:{httpOptions:f}});return s._fromAPIResponse({apiResponse:m,isVertexAI:!0})}else{const c=await this.getVideosOperationInternal({operationName:s.name,config:a});return s._fromAPIResponse({apiResponse:c,isVertexAI:!1})}}async getVideosOperationInternal(e){var s,a,c,f;let m,x="",g={};if(this.apiClient.isVertexAI()){const p=pk(e);return x=pe("{operationName}",p._url),g=p._query,delete p._url,delete p._query,m=this.apiClient.request({path:x,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m}else{const p=hk(e);return x=pe("{operationName}",p._url),g=p._query,delete p._url,delete p._query,m=this.apiClient.request({path:x,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(c=e.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m}}async fetchPredictVideosOperationInternal(e){var s,a;let c,f="",m={};if(this.apiClient.isVertexAI()){const x=ik(e);return f=pe("{resourceName}:fetchPredictOperation",x._url),m=x._query,delete x._url,delete x._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),c}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Mp(){return{}}function GE(t){const e={},s=r(t,["name"]);return s!=null&&u(e,["name"],s),e}function zE(t){const e={},s=r(t,["disabled"]);s!=null&&u(e,["disabled"],s);const a=r(t,["startOfSpeechSensitivity"]);a!=null&&u(e,["startOfSpeechSensitivity"],a);const c=r(t,["endOfSpeechSensitivity"]);c!=null&&u(e,["endOfSpeechSensitivity"],c);const f=r(t,["prefixPaddingMs"]);f!=null&&u(e,["prefixPaddingMs"],f);const m=r(t,["silenceDurationMs"]);return m!=null&&u(e,["silenceDurationMs"],m),e}function FE(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=r(t,["data"]);s!=null&&u(e,["data"],s);const a=r(t,["mimeType"]);return a!=null&&u(e,["mimeType"],a),e}function OE(t){const e={},s=r(t,["environment"]);s!=null&&u(e,["environment"],s);const a=r(t,["excludedPredefinedFunctions"]);return a!=null&&u(e,["excludedPredefinedFunctions"],a),e}function JE(t){const e={},s=r(t,["parts"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(f=>oM(f))),u(e,["parts"],c)}const a=r(t,["role"]);return a!=null&&u(e,["role"],a),e}function YE(t){const e={},s=r(t,["triggerTokens"]);s!=null&&u(e,["triggerTokens"],s);const a=r(t,["slidingWindow"]);return a!=null&&u(e,["slidingWindow"],dM(a)),e}function KE(t,e,s){const a={},c=r(e,["expireTime"]);s!==void 0&&c!=null&&u(s,["expireTime"],c);const f=r(e,["newSessionExpireTime"]);s!==void 0&&f!=null&&u(s,["newSessionExpireTime"],f);const m=r(e,["uses"]);s!==void 0&&m!=null&&u(s,["uses"],m);const x=r(e,["liveConnectConstraints"]);s!==void 0&&x!=null&&u(s,["bidiGenerateContentSetup"],sM(t,x));const g=r(e,["lockAdditionalFields"]);return s!==void 0&&g!=null&&u(s,["fieldMask"],g),a}function $E(t,e){const s={},a=r(e,["config"]);return a!=null&&u(s,["config"],KE(t,a,s)),s}function XE(t){const e={},s=r(t,["mode"]);s!=null&&u(e,["mode"],s);const a=r(t,["dynamicThreshold"]);return a!=null&&u(e,["dynamicThreshold"],a),e}function QE(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=r(t,["fileUri"]);s!=null&&u(e,["fileUri"],s);const a=r(t,["mimeType"]);return a!=null&&u(e,["mimeType"],a),e}function ZE(t){const e={},s=r(t,["id"]);s!=null&&u(e,["id"],s);const a=r(t,["args"]);a!=null&&u(e,["args"],a);const c=r(t,["name"]);return c!=null&&u(e,["name"],c),e}function WE(t){const e={},s=r(t,["behavior"]);s!=null&&u(e,["behavior"],s);const a=r(t,["description"]);a!=null&&u(e,["description"],a);const c=r(t,["name"]);c!=null&&u(e,["name"],c);const f=r(t,["parameters"]);f!=null&&u(e,["parameters"],f);const m=r(t,["parametersJsonSchema"]);m!=null&&u(e,["parametersJsonSchema"],m);const x=r(t,["response"]);x!=null&&u(e,["response"],x);const g=r(t,["responseJsonSchema"]);return g!=null&&u(e,["responseJsonSchema"],g),e}function eM(t){const e={},s=r(t,["dynamicRetrievalConfig"]);return s!=null&&u(e,["dynamicRetrievalConfig"],XE(s)),e}function tM(t){const e={},s=r(t,["timeRangeFilter"]);if(s!=null&&u(e,["timeRangeFilter"],nM(s)),r(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function nM(t){const e={},s=r(t,["startTime"]);s!=null&&u(e,["startTime"],s);const a=r(t,["endTime"]);return a!=null&&u(e,["endTime"],a),e}function lM(t,e){const s={},a=r(t,["generationConfig"]);e!==void 0&&a!=null&&u(e,["setup","generationConfig"],a);const c=r(t,["responseModalities"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","responseModalities"],c);const f=r(t,["temperature"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","temperature"],f);const m=r(t,["topP"]);e!==void 0&&m!=null&&u(e,["setup","generationConfig","topP"],m);const x=r(t,["topK"]);e!==void 0&&x!=null&&u(e,["setup","generationConfig","topK"],x);const g=r(t,["maxOutputTokens"]);e!==void 0&&g!=null&&u(e,["setup","generationConfig","maxOutputTokens"],g);const p=r(t,["mediaResolution"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","mediaResolution"],p);const v=r(t,["seed"]);e!==void 0&&v!=null&&u(e,["setup","generationConfig","seed"],v);const b=r(t,["speechConfig"]);e!==void 0&&b!=null&&u(e,["setup","generationConfig","speechConfig"],mM(zc(b)));const k=r(t,["thinkingConfig"]);e!==void 0&&k!=null&&u(e,["setup","generationConfig","thinkingConfig"],hM(k));const w=r(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],w);const M=r(t,["systemInstruction"]);e!==void 0&&M!=null&&u(e,["setup","systemInstruction"],JE(Mt(M)));const A=r(t,["tools"]);if(e!==void 0&&A!=null){let se=Bs(A);Array.isArray(se)&&(se=se.map(F=>pM(Hs(F)))),u(e,["setup","tools"],se)}const _=r(t,["sessionResumption"]);e!==void 0&&_!=null&&u(e,["setup","sessionResumption"],cM(_));const j=r(t,["inputAudioTranscription"]);e!==void 0&&j!=null&&u(e,["setup","inputAudioTranscription"],Mp());const D=r(t,["outputAudioTranscription"]);e!==void 0&&D!=null&&u(e,["setup","outputAudioTranscription"],Mp());const I=r(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&u(e,["setup","realtimeInputConfig"],uM(I));const q=r(t,["contextWindowCompression"]);e!==void 0&&q!=null&&u(e,["setup","contextWindowCompression"],YE(q));const ee=r(t,["proactivity"]);return e!==void 0&&ee!=null&&u(e,["setup","proactivity"],rM(ee)),s}function sM(t,e){const s={},a=r(e,["model"]);a!=null&&u(s,["setup","model"],Ve(t,a));const c=r(e,["config"]);return c!=null&&u(s,["config"],lM(c,s)),s}function aM(t){const e={},s=r(t,["speakerVoiceConfigs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>fM(c))),u(e,["speakerVoiceConfigs"],a)}return e}function oM(t){const e={},s=r(t,["videoMetadata"]);s!=null&&u(e,["videoMetadata"],xM(s));const a=r(t,["thought"]);a!=null&&u(e,["thought"],a);const c=r(t,["inlineData"]);c!=null&&u(e,["inlineData"],FE(c));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],QE(f));const m=r(t,["thoughtSignature"]);m!=null&&u(e,["thoughtSignature"],m);const x=r(t,["functionCall"]);x!=null&&u(e,["functionCall"],ZE(x));const g=r(t,["codeExecutionResult"]);g!=null&&u(e,["codeExecutionResult"],g);const p=r(t,["executableCode"]);p!=null&&u(e,["executableCode"],p);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const b=r(t,["text"]);return b!=null&&u(e,["text"],b),e}function iM(t){const e={},s=r(t,["voiceName"]);return s!=null&&u(e,["voiceName"],s),e}function rM(t){const e={},s=r(t,["proactiveAudio"]);return s!=null&&u(e,["proactiveAudio"],s),e}function uM(t){const e={},s=r(t,["automaticActivityDetection"]);s!=null&&u(e,["automaticActivityDetection"],zE(s));const a=r(t,["activityHandling"]);a!=null&&u(e,["activityHandling"],a);const c=r(t,["turnCoverage"]);return c!=null&&u(e,["turnCoverage"],c),e}function cM(t){const e={},s=r(t,["handle"]);if(s!=null&&u(e,["handle"],s),r(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function dM(t){const e={},s=r(t,["targetTokens"]);return s!=null&&u(e,["targetTokens"],s),e}function fM(t){const e={},s=r(t,["speaker"]);s!=null&&u(e,["speaker"],s);const a=r(t,["voiceConfig"]);return a!=null&&u(e,["voiceConfig"],Eg(a)),e}function mM(t){const e={},s=r(t,["voiceConfig"]);s!=null&&u(e,["voiceConfig"],Eg(s));const a=r(t,["multiSpeakerVoiceConfig"]);a!=null&&u(e,["multiSpeakerVoiceConfig"],aM(a));const c=r(t,["languageCode"]);return c!=null&&u(e,["languageCode"],c),e}function hM(t){const e={},s=r(t,["includeThoughts"]);s!=null&&u(e,["includeThoughts"],s);const a=r(t,["thinkingBudget"]);return a!=null&&u(e,["thinkingBudget"],a),e}function pM(t){const e={},s=r(t,["functionDeclarations"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(p=>WE(p))),u(e,["functionDeclarations"],g)}if(r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=r(t,["googleSearch"]);a!=null&&u(e,["googleSearch"],tM(a));const c=r(t,["googleSearchRetrieval"]);if(c!=null&&u(e,["googleSearchRetrieval"],eM(c)),r(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(t,["urlContext"])!=null&&u(e,["urlContext"],gM());const m=r(t,["computerUse"]);m!=null&&u(e,["computerUse"],OE(m));const x=r(t,["codeExecution"]);return x!=null&&u(e,["codeExecution"],x),e}function gM(){return{}}function xM(t){const e={},s=r(t,["fps"]);s!=null&&u(e,["fps"],s);const a=r(t,["endOffset"]);a!=null&&u(e,["endOffset"],a);const c=r(t,["startOffset"]);return c!=null&&u(e,["startOffset"],c),e}function Eg(t){const e={},s=r(t,["prebuiltVoiceConfig"]);return s!=null&&u(e,["prebuiltVoiceConfig"],iM(s)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yM(t){const e=[];for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)){const a=t[s];if(typeof a=="object"&&a!=null&&Object.keys(a).length>0){const c=Object.keys(a).map(f=>`${s}.${f}`);e.push(...c)}else e.push(s)}return e.join(",")}function vM(t,e){let s=null;const a=t.bidiGenerateContentSetup;if(typeof a=="object"&&a!==null&&"setup"in a){const f=a.setup;typeof f=="object"&&f!==null?(t.bidiGenerateContentSetup=f,s=f):delete t.bidiGenerateContentSetup}else a!==void 0&&delete t.bidiGenerateContentSetup;const c=t.fieldMask;if(s){const f=yM(s);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)f?t.fieldMask=f:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&c!==null&&Array.isArray(c)&&c.length>0){const m=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let x=[];c.length>0&&(x=c.map(p=>m.includes(p)?`generationConfig.${p}`:p));const g=[];f&&g.push(f),x.length>0&&g.push(...x),g.length>0?t.fieldMask=g.join(","):delete t.fieldMask}else delete t.fieldMask}else c!==null&&Array.isArray(c)&&c.length>0?t.fieldMask=c.join(","):delete t.fieldMask;return t}class bM extends Fl{constructor(e){super(),this.apiClient=e}async create(e){var s,a;let c,f="",m={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const x=$E(this.apiClient,e);f=pe("auth_tokens",x._url),m=x._query,delete x.config,delete x._url,delete x._query;const g=vM(x,e.config);return c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json()),c.then(p=>GE(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kM(t){const e={},s=r(t,["name"]);return s!=null&&u(e,["_url","name"],s),e}function CM(t){const e={},s=r(t,["name"]);return s!=null&&u(e,["_url","name"],s),e}function TM(t,e){const s={};if(r(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const a=r(t,["tunedModelDisplayName"]);if(e!==void 0&&a!=null&&u(e,["displayName"],a),r(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const c=r(t,["epochCount"]);e!==void 0&&c!=null&&u(e,["tuningTask","hyperparameters","epochCount"],c);const f=r(t,["learningRateMultiplier"]);if(f!=null&&u(s,["tuningTask","hyperparameters","learningRateMultiplier"],f),r(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(r(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(r(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const m=r(t,["batchSize"]);e!==void 0&&m!=null&&u(e,["tuningTask","hyperparameters","batchSize"],m);const x=r(t,["learningRate"]);if(e!==void 0&&x!=null&&u(e,["tuningTask","hyperparameters","learningRate"],x),r(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return s}function NM(t,e){const s={},a=r(t,["validationDataset"]);e!==void 0&&a!=null&&u(e,["supervisedTuningSpec"],GM(a,s));const c=r(t,["tunedModelDisplayName"]);e!==void 0&&c!=null&&u(e,["tunedModelDisplayName"],c);const f=r(t,["description"]);e!==void 0&&f!=null&&u(e,["description"],f);const m=r(t,["epochCount"]);e!==void 0&&m!=null&&u(e,["supervisedTuningSpec","hyperParameters","epochCount"],m);const x=r(t,["learningRateMultiplier"]);e!==void 0&&x!=null&&u(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],x);const g=r(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&u(e,["supervisedTuningSpec","exportLastCheckpointOnly"],g);const p=r(t,["adapterSize"]);if(e!==void 0&&p!=null&&u(e,["supervisedTuningSpec","hyperParameters","adapterSize"],p),r(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(r(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const v=r(t,["labels"]);return e!==void 0&&v!=null&&u(e,["labels"],v),s}function SM(t){const e={},s=r(t,["baseModel"]);s!=null&&u(e,["baseModel"],s);const a=r(t,["preTunedModel"]);a!=null&&u(e,["preTunedModel"],a);const c=r(t,["trainingDataset"]);c!=null&&u(e,["tuningTask","trainingData"],VM(c));const f=r(t,["config"]);return f!=null&&TM(f,e),e}function wM(t){const e={},s=r(t,["baseModel"]);s!=null&&u(e,["baseModel"],s);const a=r(t,["preTunedModel"]);a!=null&&u(e,["preTunedModel"],a);const c=r(t,["trainingDataset"]);c!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],qM(c,e));const f=r(t,["config"]);return f!=null&&NM(f,e),e}function EM(t){const e={},s=r(t,["name"]);return s!=null&&u(e,["_url","name"],s),e}function MM(t){const e={},s=r(t,["name"]);return s!=null&&u(e,["_url","name"],s),e}function AM(t,e){const s={},a=r(t,["pageSize"]);e!==void 0&&a!=null&&u(e,["_query","pageSize"],a);const c=r(t,["pageToken"]);e!==void 0&&c!=null&&u(e,["_query","pageToken"],c);const f=r(t,["filter"]);return e!==void 0&&f!=null&&u(e,["_query","filter"],f),s}function _M(t,e){const s={},a=r(t,["pageSize"]);e!==void 0&&a!=null&&u(e,["_query","pageSize"],a);const c=r(t,["pageToken"]);e!==void 0&&c!=null&&u(e,["_query","pageToken"],c);const f=r(t,["filter"]);return e!==void 0&&f!=null&&u(e,["_query","filter"],f),s}function RM(t){const e={},s=r(t,["config"]);return s!=null&&AM(s,e),e}function DM(t){const e={},s=r(t,["config"]);return s!=null&&_M(s,e),e}function IM(t){const e={},s=r(t,["sdkHttpResponse"]);s!=null&&u(e,["sdkHttpResponse"],s);const a=r(t,["nextPageToken"]);a!=null&&u(e,["nextPageToken"],a);const c=r(t,["tunedModels"]);if(c!=null){let f=c;Array.isArray(f)&&(f=f.map(m=>Mg(m))),u(e,["tuningJobs"],f)}return e}function jM(t){const e={},s=r(t,["sdkHttpResponse"]);s!=null&&u(e,["sdkHttpResponse"],s);const a=r(t,["nextPageToken"]);a!=null&&u(e,["nextPageToken"],a);const c=r(t,["tuningJobs"]);if(c!=null){let f=c;Array.isArray(f)&&(f=f.map(m=>wc(m))),u(e,["tuningJobs"],f)}return e}function UM(t){const e={},s=r(t,["checkpointId"]);s!=null&&u(e,["checkpointId"],s);const a=r(t,["epoch"]);a!=null&&u(e,["epoch"],a);const c=r(t,["step"]);c!=null&&u(e,["step"],c);const f=r(t,["endpoint"]);return f!=null&&u(e,["endpoint"],f),e}function LM(t){const e={},s=r(t,["name"]);s!=null&&u(e,["model"],s);const a=r(t,["name"]);return a!=null&&u(e,["endpoint"],a),e}function PM(t){const e={},s=r(t,["model"]);s!=null&&u(e,["model"],s);const a=r(t,["endpoint"]);a!=null&&u(e,["endpoint"],a);const c=r(t,["checkpoints"]);if(c!=null){let f=c;Array.isArray(f)&&(f=f.map(m=>UM(m))),u(e,["checkpoints"],f)}return e}function VM(t){const e={};if(r(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(r(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=r(t,["examples"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>HM(c))),u(e,["examples","examples"],a)}return e}function qM(t,e){const s={},a=r(t,["gcsUri"]);e!==void 0&&a!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],a);const c=r(t,["vertexDatasetResource"]);if(e!==void 0&&c!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],c),r(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function HM(t){const e={},s=r(t,["textInput"]);s!=null&&u(e,["textInput"],s);const a=r(t,["output"]);return a!=null&&u(e,["output"],a),e}function Mg(t){const e={},s=r(t,["sdkHttpResponse"]);s!=null&&u(e,["sdkHttpResponse"],s);const a=r(t,["name"]);a!=null&&u(e,["name"],a);const c=r(t,["state"]);c!=null&&u(e,["state"],eg(c));const f=r(t,["createTime"]);f!=null&&u(e,["createTime"],f);const m=r(t,["tuningTask","startTime"]);m!=null&&u(e,["startTime"],m);const x=r(t,["tuningTask","completeTime"]);x!=null&&u(e,["endTime"],x);const g=r(t,["updateTime"]);g!=null&&u(e,["updateTime"],g);const p=r(t,["description"]);p!=null&&u(e,["description"],p);const v=r(t,["baseModel"]);v!=null&&u(e,["baseModel"],v);const b=r(t,["_self"]);b!=null&&u(e,["tunedModel"],LM(b));const k=r(t,["customBaseModel"]);k!=null&&u(e,["customBaseModel"],k);const w=r(t,["experiment"]);w!=null&&u(e,["experiment"],w);const M=r(t,["labels"]);M!=null&&u(e,["labels"],M);const A=r(t,["outputUri"]);A!=null&&u(e,["outputUri"],A);const _=r(t,["pipelineJob"]);_!=null&&u(e,["pipelineJob"],_);const j=r(t,["serviceAccount"]);j!=null&&u(e,["serviceAccount"],j);const D=r(t,["tunedModelDisplayName"]);D!=null&&u(e,["tunedModelDisplayName"],D);const I=r(t,["veoTuningSpec"]);return I!=null&&u(e,["veoTuningSpec"],I),e}function wc(t){const e={},s=r(t,["sdkHttpResponse"]);s!=null&&u(e,["sdkHttpResponse"],s);const a=r(t,["name"]);a!=null&&u(e,["name"],a);const c=r(t,["state"]);c!=null&&u(e,["state"],eg(c));const f=r(t,["createTime"]);f!=null&&u(e,["createTime"],f);const m=r(t,["startTime"]);m!=null&&u(e,["startTime"],m);const x=r(t,["endTime"]);x!=null&&u(e,["endTime"],x);const g=r(t,["updateTime"]);g!=null&&u(e,["updateTime"],g);const p=r(t,["error"]);p!=null&&u(e,["error"],p);const v=r(t,["description"]);v!=null&&u(e,["description"],v);const b=r(t,["baseModel"]);b!=null&&u(e,["baseModel"],b);const k=r(t,["tunedModel"]);k!=null&&u(e,["tunedModel"],PM(k));const w=r(t,["preTunedModel"]);w!=null&&u(e,["preTunedModel"],w);const M=r(t,["supervisedTuningSpec"]);M!=null&&u(e,["supervisedTuningSpec"],M);const A=r(t,["tuningDataStats"]);A!=null&&u(e,["tuningDataStats"],A);const _=r(t,["encryptionSpec"]);_!=null&&u(e,["encryptionSpec"],_);const j=r(t,["partnerModelTuningSpec"]);j!=null&&u(e,["partnerModelTuningSpec"],j);const D=r(t,["customBaseModel"]);D!=null&&u(e,["customBaseModel"],D);const I=r(t,["experiment"]);I!=null&&u(e,["experiment"],I);const q=r(t,["labels"]);q!=null&&u(e,["labels"],q);const ee=r(t,["outputUri"]);ee!=null&&u(e,["outputUri"],ee);const se=r(t,["pipelineJob"]);se!=null&&u(e,["pipelineJob"],se);const F=r(t,["serviceAccount"]);F!=null&&u(e,["serviceAccount"],F);const oe=r(t,["tunedModelDisplayName"]);oe!=null&&u(e,["tunedModelDisplayName"],oe);const $=r(t,["veoTuningSpec"]);return $!=null&&u(e,["veoTuningSpec"],$),e}function BM(t){const e={},s=r(t,["sdkHttpResponse"]);s!=null&&u(e,["sdkHttpResponse"],s);const a=r(t,["name"]);a!=null&&u(e,["name"],a);const c=r(t,["metadata"]);c!=null&&u(e,["metadata"],c);const f=r(t,["done"]);f!=null&&u(e,["done"],f);const m=r(t,["error"]);return m!=null&&u(e,["error"],m),e}function GM(t,e){const s={},a=r(t,["gcsUri"]);a!=null&&u(s,["validationDatasetUri"],a);const c=r(t,["vertexDatasetResource"]);return e!==void 0&&c!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],c),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zM extends Fl{constructor(e){super(),this.apiClient=e,this.get=async s=>await this.getInternal(s),this.list=async(s={})=>new Ka(Gl.PAGED_ITEM_TUNING_JOBS,a=>this.listInternal(a),await this.listInternal(s),s),this.tune=async s=>{var a;if(this.apiClient.isVertexAI())if(s.baseModel.startsWith("projects/")){const c={tunedModelName:s.baseModel};!((a=s.config)===null||a===void 0)&&a.preTunedModelCheckpointId&&(c.checkpointId=s.config.preTunedModelCheckpointId);const f=Object.assign(Object.assign({},s),{preTunedModel:c});return f.baseModel=void 0,await this.tuneInternal(f)}else{const c=Object.assign({},s);return await this.tuneInternal(c)}else{const c=Object.assign({},s),f=await this.tuneMldevInternal(c);let m="";return f.metadata!==void 0&&f.metadata.tunedModel!==void 0?m=f.metadata.tunedModel:f.name!==void 0&&f.name.includes("/operations/")&&(m=f.name.split("/operations/")[0]),{name:m,state:xc.JOB_STATE_QUEUED}}}}async getInternal(e){var s,a,c,f;let m,x="",g={};if(this.apiClient.isVertexAI()){const p=MM(e);return x=pe("{name}",p._url),g=p._query,delete p._url,delete p._query,m=this.apiClient.request({path:x,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(b=>{const k=b;return k.sdkHttpResponse={headers:v.headers},k})),m.then(v=>wc(v))}else{const p=EM(e);return x=pe("{name}",p._url),g=p._query,delete p._url,delete p._query,m=this.apiClient.request({path:x,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(c=e.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(b=>{const k=b;return k.sdkHttpResponse={headers:v.headers},k})),m.then(v=>Mg(v))}}async listInternal(e){var s,a,c,f;let m,x="",g={};if(this.apiClient.isVertexAI()){const p=DM(e);return x=pe("tuningJobs",p._url),g=p._query,delete p._url,delete p._query,m=this.apiClient.request({path:x,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(b=>{const k=b;return k.sdkHttpResponse={headers:v.headers},k})),m.then(v=>{const b=jM(v),k=new sp;return Object.assign(k,b),k})}else{const p=RM(e);return x=pe("tunedModels",p._url),g=p._query,delete p._url,delete p._query,m=this.apiClient.request({path:x,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(c=e.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(b=>{const k=b;return k.sdkHttpResponse={headers:v.headers},k})),m.then(v=>{const b=IM(v),k=new sp;return Object.assign(k,b),k})}}async cancel(e){var s,a,c,f;let m="",x={};if(this.apiClient.isVertexAI()){const g=CM(e);m=pe("{name}:cancel",g._url),x=g._query,delete g._url,delete g._query,await this.apiClient.request({path:m,queryParams:x,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}else{const g=kM(e);m=pe("{name}:cancel",g._url),x=g._query,delete g._url,delete g._query,await this.apiClient.request({path:m,queryParams:x,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(c=e.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal})}}async tuneInternal(e){var s,a;let c,f="",m={};if(this.apiClient.isVertexAI()){const x=wM(e);return f=pe("tuningJobs",x._url),m=x._query,delete x._url,delete x._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),c.then(g=>wc(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var s,a;let c,f="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const x=SM(e);return f=pe("tunedModels",x._url),m=x._query,delete x._url,delete x._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),c.then(g=>BM(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FM{async download(e,s){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const OM=1024*1024*8,JM=3,YM=1e3,KM=2,dc="x-goog-upload-status";async function $M(t,e,s){var a,c,f;let m=0,x=0,g=new yc(new Response),p="upload";for(m=t.size;x<m;){const b=Math.min(OM,m-x),k=t.slice(x,x+b);x+b>=m&&(p+=", finalize");let w=0,M=YM;for(;w<JM&&(g=await s.request({path:"",body:k,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(x),"Content-Length":String(b)}}}),!(!((a=g==null?void 0:g.headers)===null||a===void 0)&&a[dc]));)w++,await QM(M),M=M*KM;if(x+=b,((c=g==null?void 0:g.headers)===null||c===void 0?void 0:c[dc])!=="active")break;if(m<=x)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const v=await(g==null?void 0:g.json());if(((f=g==null?void 0:g.headers)===null||f===void 0?void 0:f[dc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return v.file}async function XM(t){return{size:t.size,type:t.type}}function QM(t){return new Promise(e=>setTimeout(e,t))}class ZM{async upload(e,s,a){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await $M(e,s,a)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await XM(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class WM{create(e,s,a){return new eA(e,s,a)}}class eA{constructor(e,s,a){this.url=e,this.headers=s,this.callbacks=a}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ap="x-goog-api-key";class tA{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(Ap)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Ap,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nA="gl-node/";class lA{constructor(e){var s;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(s=e.vertexai)!==null&&s!==void 0?s:!1,this.apiKey=e.apiKey;const a=ok(e.httpOptions,e.vertexai,void 0,void 0);a&&(e.httpOptions?e.httpOptions.baseUrl=a:e.httpOptions={baseUrl:a}),this.apiVersion=e.apiVersion;const c=new tA(this.apiKey);this.apiClient=new bE({auth:c,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:nA+"web",uploader:new ZM,downloader:new FM}),this.models=new HE(this.apiClient),this.live=new IE(this.apiClient,c,new WM),this.batches=new ZC(this.apiClient),this.chats=new oN(this.models,this.apiClient),this.caches=new lN(this.apiClient),this.files=new vN(this.apiClient),this.operations=new BE(this.apiClient),this.authTokens=new bM(this.apiClient),this.tunings=new zM(this.apiClient)}}const sA=new lA({apiKey:void 0}),aA=async(t,e)=>{try{const s=`Bạn là một chuyên gia sửa chữa xe máy giàu kinh nghiệm tại Việt Nam. Một khách hàng mô tả sự cố của xe như sau: "${t}". 
    
    Nếu có hình ảnh đính kèm, hãy phân tích cả hình ảnh đó cùng với mô tả.
    
    Dựa vào thông tin được cung cấp, hãy cung cấp các thông tin sau một cách rõ ràng và có cấu trúc:
    1.  **Chẩn đoán sơ bộ:** Liệt kê các nguyên nhân có khả năng cao nhất gây ra sự cố.
    2.  **Các bước kiểm tra:** Đề xuất các bước kiểm tra cụ thể mà một thợ sửa xe có thể thực hiện để xác định chính xác nguyên nhân.
    3.  **Phụ tùng có thể cần thay thế:** Liệt kê danh sách các phụ tùng có thể liên quan và cần thay thế.
    
    Hãy trình bày câu trả lời bằng tiếng Việt, sử dụng thuật ngữ chuyên ngành phổ thông, dễ hiểu. Định dạng câu trả lời bằng Markdown.`,a=[];return a.push({text:s}),e&&a.push({inlineData:{mimeType:e.mimeType,data:e.data}}),(await sA.models.generateContent({model:"gemini-2.5-flash",contents:{parts:a}})).text}catch(s){return console.error("Error calling Gemini API:",s),"Đã xảy ra lỗi khi kết nối với trợ lý AI. Vui lòng thử lại sau."}},oA=t=>new Promise((e,s)=>{const a=new FileReader;a.onloadend=()=>{if(typeof a.result=="string"){const c=a.result.split(",")[1];e(c)}else s(new Error("Failed to read blob as base64 string."))},a.onerror=s,a.readAsDataURL(t)}),iA=()=>{const[t,e]=N.useState(""),[s,a]=N.useState(null),[c,f]=N.useState(""),[m,x]=N.useState(!1),[g,p]=N.useState(null),v=N.useRef(null),b=M=>{var _;const A=(_=M.target.files)==null?void 0:_[0];if(A){if(!A.type.startsWith("image/")){p("Vui lòng chỉ tải lên tệp hình ảnh.");return}a({file:A,previewUrl:URL.createObjectURL(A)}),p(null)}},k=async()=>{if(!t.trim()){p("Vui lòng mô tả triệu chứng của xe.");return}p(null),x(!0),f("");let M;if(s)try{M={data:await oA(s.file),mimeType:s.file.type}}catch{p("Không thể xử lý hình ảnh. Vui lòng thử lại."),x(!1);return}try{const A=await aA(t,M);f(A)}catch{p("Không thể nhận được chẩn đoán. Vui lòng thử lại.")}finally{x(!1)}},w=M=>{const A=[];let _=null;return M.split(`
`).forEach(j=>{j=j.trim();const D=j.match(/^\d*\.?\s?\*\*(.+?):\*\*/);D?(_&&A.push(_),_={title:D[1].trim(),content:[]}):_&&j&&_.content.push(j)}),_&&A.push(_),A.length===0?i.jsx("p",{children:M}):A.map((j,D)=>i.jsxs("details",{open:!0,className:"mb-4 bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg overflow-hidden last:mb-0",children:[i.jsxs("summary",{className:"font-semibold text-slate-800 dark:text-slate-100 p-4 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-600 flex justify-between items-center",children:[j.title,i.jsx("svg",{className:"w-5 h-5 transition-transform transform details-arrow",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),i.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-600 prose prose-slate dark:prose-invert max-w-none",children:i.jsx("ul",{className:"list-disc pl-5 space-y-1",children:j.content.map((I,q)=>i.jsx("li",{children:I.replace(/^\* /,"")},q))})})]},D))};return i.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[i.jsx("style",{children:`
        details > summary { list-style: none; }
        details > summary::-webkit-details-marker { display: none; }
        details[open] .details-arrow { transform: rotate(180deg); }
      `}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(gc,{className:"w-8 h-8 text-sky-600 dark:text-sky-400"}),i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-100 ml-3",children:"Trợ lý Chẩn đoán AI"})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200/60 dark:border-slate-700 space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"symptom-textarea",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["1. Mô tả chi tiết các triệu chứng của xe ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("textarea",{id:"symptom-textarea",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-500 text-slate-900 dark:text-slate-200 bg-white dark:bg-slate-700 transition-colors",rows:4,value:t,onChange:M=>e(M.target.value),placeholder:"Ví dụ: Xe khó nổ máy vào buổi sáng, có tiếng kêu lạ ở động cơ khi tăng ga..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"2. Đính kèm hình ảnh (nếu có)"}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("input",{type:"file",ref:v,onChange:b,accept:"image/*",className:"hidden"}),i.jsxs("button",{onClick:()=>{var M;return(M=v.current)==null?void 0:M.click()},className:"flex items-center gap-2 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200 font-semibold py-2 px-4 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:[i.jsx(Kp,{className:"w-5 h-5"})," Tải ảnh lên"]}),i.jsxs("button",{className:"flex items-center gap-2 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200 font-semibold py-2 px-4 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors disabled:opacity-50",disabled:!0,children:[i.jsx(Yp,{className:"w-5 h-5"})," Chụp ảnh"]})]}),s&&i.jsxs("div",{className:"mt-4 relative w-40 h-40",children:[i.jsx("img",{src:s.previewUrl,alt:"Preview",className:"w-full h-full object-cover rounded-lg border-2 border-slate-200 dark:border-slate-600"}),i.jsx("button",{onClick:()=>a(null),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 shadow-md hover:bg-red-600",children:i.jsx(on,{className:"w-4 h-4"})})]})]}),g&&i.jsx("p",{className:"text-red-500 dark:text-red-400 text-sm",children:g}),i.jsx("button",{onClick:k,disabled:m,className:"mt-4 w-full flex justify-center items-center bg-sky-600 text-white font-semibold py-3 px-4 rounded-lg shadow-sm hover:bg-sky-700 transition-colors disabled:bg-sky-300 disabled:cursor-wait",children:m?i.jsxs(i.Fragment,{children:[i.jsx(Sb,{}),i.jsx("span",{children:"Đang chẩn đoán..."})]}):"Nhận chẩn đoán từ AI"})]}),c&&!m&&i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-6 rounded-xl border border-slate-200/60 dark:border-slate-700",children:[i.jsx("h2",{className:"text-2xl font-semibold text-slate-800 dark:text-slate-100 mb-4",children:"Kết quả Chẩn đoán"}),i.jsx("div",{children:w(c)})]})]})},bn=t=>isNaN(t)?"0":new Intl.NumberFormat("vi-VN").format(t),rA=({isOpen:t,onClose:e,onSave:s,initialName:a=""})=>{const[c,f]=N.useState({name:a,phone:"",vehicle:"",licensePlate:"",lastServiceOdometer:void 0});On.useEffect(()=>{t&&f({name:a,phone:"",vehicle:"",licensePlate:"",lastServiceOdometer:void 0})},[t,a]);const m=g=>{const{name:p,value:v,type:b}=g.target;f(k=>({...k,[p]:b==="number"?v===""?void 0:parseInt(v,10):v}))},x=g=>{g.preventDefault();const p={id:`C${Date.now()}`,...c,loyaltyPoints:0,lastServiceDate:c.lastServiceOdometer?new Date().toISOString().split("T")[0]:void 0};s(p)};return t?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-[60] flex justify-center items-center p-4",children:i.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-lg shadow-xl w-full max-w-lg",children:i.jsxs("form",{onSubmit:x,children:[i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-slate-800 dark:text-slate-100 mb-6",children:"Thêm Khách hàng mới"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"new-customer-name",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Tên khách hàng (*)"}),i.jsx("input",{id:"new-customer-name",type:"text",name:"name",value:c.name,onChange:m,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 text-slate-900 dark:text-slate-100",required:!0,autoFocus:!0})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"new-customer-phone",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Số điện thoại (*)"}),i.jsx("input",{id:"new-customer-phone",type:"text",name:"phone",value:c.phone,onChange:m,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 text-slate-900 dark:text-slate-100",required:!0})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"new-customer-vehicle",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Dòng xe"}),i.jsx("input",{id:"new-customer-vehicle",type:"text",name:"vehicle",value:c.vehicle,onChange:m,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 text-slate-900 dark:text-slate-100"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"new-customer-licensePlate",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Biển số xe"}),i.jsx("input",{id:"new-customer-licensePlate",type:"text",name:"licensePlate",value:c.licensePlate,onChange:m,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 text-slate-900 dark:text-slate-100"})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"new-customer-odometer",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Số ODO (km)"}),i.jsx("input",{id:"new-customer-odometer",type:"number",name:"lastServiceOdometer",value:c.lastServiceOdometer||"",onChange:m,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 text-slate-900 dark:text-slate-100"})]})]})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 px-6 py-4 flex justify-end space-x-3 border-t border-slate-200 dark:border-slate-700",children:[i.jsxs("button",{type:"button",onClick:e,className:"flex items-center gap-2 bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-600",children:[i.jsx(mn,{className:"w-5 h-5"}),"Trở về"]}),i.jsx("button",{type:"submit",className:"bg-sky-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-sky-700",children:"Lưu"})]})]})})}):null},uA=({isOpen:t,onClose:e,cart:s,subtotal:a,discount:c,total:f,settings:m,branchId:x})=>{var v;if(!t)return null;const g=()=>{var w;const b=(w=document.getElementById("receipt-content"))==null?void 0:w.innerHTML,k=document.body.innerHTML;if(b){const M=`
                <style>
                    body { 
                        -webkit-print-color-adjust: exact !important;
                        print-color-adjust: exact !important;
                        font-family: sans-serif;
                    }
                </style>
            `;document.body.innerHTML=M+b,window.print(),document.body.innerHTML=k,window.location.reload()}},p=((v=m.branches.find(b=>b.id===x))==null?void 0:v.name)||"";return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4 print:hidden",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md transform transition-all",children:[i.jsxs("div",{id:"receipt-content",className:"p-6",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("h2",{className:"text-xl font-bold text-black",children:m.name}),i.jsx("p",{className:"text-sm text-black",children:p}),i.jsx("p",{className:"text-sm text-black",children:m.address}),i.jsxs("p",{className:"text-sm text-black",children:["ĐT: ",m.phone]})]}),i.jsx("div",{className:"my-4 border-t border-dashed border-black"}),i.jsx("h3",{className:"text-lg font-semibold text-center text-black",children:"HÓA ĐƠN BÁN LẺ"}),i.jsxs("p",{className:"text-xs text-center mb-2 text-black",children:["Ngày: ",new Date().toLocaleString("vi-VN")]}),i.jsxs("table",{className:"w-full text-sm text-black",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-black",children:[i.jsx("th",{className:"text-left py-1",children:"Sản phẩm"}),i.jsx("th",{className:"text-center py-1",children:"SL"}),i.jsx("th",{className:"text-right py-1",children:"Đ.Giá"}),i.jsx("th",{className:"text-right py-1",children:"T.Tiền"})]})}),i.jsx("tbody",{children:s.map(b=>{const k=b.sellingPrice*b.quantity;return i.jsxs("tr",{children:[i.jsx("td",{className:"py-1",children:b.partName}),i.jsx("td",{className:"text-center py-1",children:b.quantity}),i.jsx("td",{className:"text-right py-1",children:b.sellingPrice.toLocaleString()}),i.jsx("td",{className:"text-right py-1",children:k.toLocaleString()})]},b.partId)})})]}),i.jsx("div",{className:"my-4 border-t border-dashed border-black"}),i.jsxs("div",{className:"text-right text-black space-y-1",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Tạm tính:"}),i.jsxs("span",{children:[a.toLocaleString()," ₫"]})]}),c>0&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Giảm giá:"}),i.jsxs("span",{children:["-",c.toLocaleString()," ₫"]})]}),i.jsxs("div",{className:"flex justify-between font-bold text-base",children:[i.jsx("span",{children:"Tổng cộng:"}),i.jsxs("span",{children:[f.toLocaleString()," ₫"]})]})]}),i.jsx("div",{className:"text-center mt-4 text-sm text-black",children:i.jsx("p",{children:"Cảm ơn quý khách!"})})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 px-6 py-4 flex justify-end space-x-3 border-t border-slate-200 dark:border-slate-700",children:[i.jsx("button",{onClick:e,className:"bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-600",children:"Đóng"}),i.jsxs("button",{onClick:g,className:"flex items-center bg-sky-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-sky-700",children:[i.jsx(Ai,{className:"w-5 h-5 mr-2"})," In hóa đơn"]})]})]})})},vi=50,cA=({currentUser:t,parts:e,setParts:s,transactions:a,setTransactions:c,cartItems:f,setCartItems:m,storeSettings:x,currentBranchId:g,customers:p,setCustomers:v})=>{const[b,k]=N.useState("products"),[w,M]=N.useState(""),[A,_]=N.useState(1),[j,D]=N.useState(!1),[I,q]=N.useState(null),[ee,se]=N.useState(null),[F,oe]=N.useState(null),[$,Z]=N.useState(!1),[Q,O]=N.useState(null),[ue,me]=N.useState(0),[Te,E]=N.useState(0),[X,re]=N.useState(!0),[ie,ce]=N.useState(new Date().toISOString().slice(0,16)),[T,U]=N.useState(!1),[J,G]=N.useState(""),[de,ge]=N.useState(!1),[V,ae]=N.useState(""),[xe,ne]=N.useState(null),[be,we]=N.useState(!1),[rt,He]=N.useState(!1),pt=N.useRef(null);N.useEffect(()=>{_(1)},[w]);const vt=N.useMemo(()=>e.filter(K=>(K.name.toLowerCase().includes(w.toLowerCase())||K.sku.toLowerCase().includes(w.toLowerCase()))&&(K.stock[g]||0)>0),[e,w,g]),ze=Math.ceil(vt.length/vi),nt=N.useMemo(()=>{const K=(A-1)*vi;return vt.slice(K,K+vi)},[vt,A]),St=N.useMemo(()=>f.reduce((K,fe)=>K+fe.sellingPrice*fe.quantity,0),[f]),Cl=N.useMemo(()=>f.reduce((K,fe)=>K+(fe.discount||0),0),[f]),Kn=N.useMemo(()=>St-Cl-ue,[St,Cl,ue]),Jl=N.useMemo(()=>f.reduce((K,fe)=>K+fe.quantity,0),[f]),$a=N.useMemo(()=>V?p.filter(K=>K.name.toLowerCase().includes(V.toLowerCase())||K.phone.includes(V)):[],[p,V]);N.useEffect(()=>{const K=fe=>{pt.current&&!pt.current.contains(fe.target)&&we(!1)};return document.addEventListener("mousedown",K),()=>document.removeEventListener("mousedown",K)},[]);const wt=K=>{ne(K.id),ae(K.name),we(!1)},Bi=K=>{v(fe=>[K,...fe]),wt(K),He(!1)},Xa=K=>{oe(K),Z(!0)},Qa=K=>{const fe=e.find(Me=>Me.id===K.partId);if(!fe)return;const Fe=fe.stock[g]||0;m(Me=>Me.find(Ce=>Ce.partId===K.partId)?Me.map(Ce=>Ce.partId===K.partId?{...Ce,quantity:Math.min(Ce.quantity+K.quantity,Fe),discount:(Ce.discount||0)+K.discount}:Ce):[...Me,{partId:fe.id,partName:fe.name,sku:fe.sku,quantity:Math.min(K.quantity,Fe),sellingPrice:K.sellingPrice,stock:Fe,discount:K.discount,warrantyPeriod:fe.warrantyPeriod}]),Z(!1),oe(null)},Cn=(K,fe)=>{m(Fe=>Fe.map(Me=>Me.partId===K?{...Me,quantity:Math.max(0,fe)}:Me).filter(Me=>Me.quantity>0))},Fs=()=>{me(0),E(0),re(!0),U(!1),G(""),ge(!1),ae(""),ne(null),O(null)},Za=()=>{if(f.length===0)return;const K=`SALE-${Date.now()}`,fe=[];let Fe=[...e];const Me=p.find(je=>je.id===xe),Ue=Cl+ue,Ce=[...f];f.forEach(je=>{const at=je.sellingPrice*je.quantity,Oe=St>0?at/St*ue:0,We=(je.discount||0)+Oe,Os={id:`T-${Date.now()}-${je.partId}`,type:"Xuất kho",partId:je.partId,partName:je.partName,quantity:je.quantity,date:X?new Date().toISOString().split("T")[0]:ie.split("T")[0],notes:J||"Bán lẻ tại quầy",unitPrice:je.sellingPrice,totalPrice:at-We,branchId:g,saleId:K,discount:We,customerId:xe||void 0,customerName:(Me==null?void 0:Me.name)||V||"Khách vãng lai",userId:t.id,userName:t.name};fe.push(Os),Fe=Fe.map(Tn=>{if(Tn.id===je.partId){const Nl={...Tn.stock};return Nl[g]=(Nl[g]||0)-je.quantity,{...Tn,stock:Nl}}return Tn})}),c(je=>[...fe,...je]),s(Fe),q({cart:Ce,subtotal:St,total:Kn,discount:Ue}),m([]),de&&D(!0),Fs(),k("products")},Gi=K=>{if(!window.confirm("Bạn có chắc chắn muốn xóa lịch sử bán hàng này không? Hành động này sẽ hoàn tác giao dịch và cập nhật lại tồn kho."))return;const fe=a.filter(Fe=>Fe.saleId===K);fe.length!==0&&(s(Fe=>{const Me=new Map;return fe.forEach(Ue=>{Me.has(Ue.partId)||Me.set(Ue.partId,new Map);const Ce=Me.get(Ue.partId);Ce.set(Ue.branchId,(Ce.get(Ue.branchId)||0)+Ue.quantity)}),Fe.map(Ue=>{if(Me.has(Ue.id)){const Ce=Me.get(Ue.id),je={...Ue.stock};return Ce.forEach((at,Oe)=>{je[Oe]=(je[Oe]||0)+at}),{...Ue,stock:je}}return Ue})}),c(Fe=>Fe.filter(Me=>Me.saleId!==K)))},zi=K=>{const fe=a.filter(Oe=>Oe.saleId===K);if(fe.length===0)return;const Fe=fe.map(Oe=>{const We=e.find(Tn=>Tn.id===Oe.partId),Os=We&&We.stock[g]||0;return{partId:Oe.partId,partName:Oe.partName,sku:(We==null?void 0:We.sku)||"",quantity:Oe.quantity,sellingPrice:Oe.unitPrice,stock:Os+Oe.quantity,discount:Oe.discount||0,warrantyPeriod:We==null?void 0:We.warrantyPeriod}}),Me=fe[0],Ue=fe.reduce((Oe,We)=>Oe+(We.discount||0),0),Ce=fe.reduce((Oe,We)=>Oe+(We.totalPrice||0),0),at=fe.reduce((Oe,We)=>Oe+(We.unitPrice||0)*We.quantity,0)-Ce-Ue;m(Fe),me(at>0?at:0),Me.customerId?(ne(Me.customerId),ae(Me.customerName||"")):(ae(Me.customerName||"Khách vãng lai"),ne(null)),G(Me.notes||""),U(!!Me.notes),re(!1),ce(new Date(Me.date).toISOString().slice(0,16)),O(K),k("cart")},Tl=()=>{if(!Q)return;const K=a.filter(Ce=>Ce.saleId===Q),fe=a.filter(Ce=>Ce.saleId!==Q),Fe=p.find(Ce=>Ce.id===xe),Me=f.map(Ce=>{const je=Ce.sellingPrice*Ce.quantity,at=St>0?je/St*ue:0,Oe=(Ce.discount||0)+at;return{id:`T-${Date.now()}-${Ce.partId}`,type:"Xuất kho",partId:Ce.partId,partName:Ce.partName,quantity:Ce.quantity,date:X?new Date().toISOString().split("T")[0]:ie.split("T")[0],notes:J||"Bán lẻ tại quầy (đã chỉnh sửa)",unitPrice:Ce.sellingPrice,totalPrice:je-Oe,branchId:g,saleId:Q,discount:Oe,customerId:xe||void 0,customerName:(Fe==null?void 0:Fe.name)||V||"Khách vãng lai",userId:t.id,userName:t.name}}),Ue=new Map;K.forEach(Ce=>Ue.set(Ce.partId,(Ue.get(Ce.partId)||0)+Ce.quantity)),Me.forEach(Ce=>Ue.set(Ce.partId,(Ue.get(Ce.partId)||0)-Ce.quantity)),s(Ce=>Ce.map(je=>{if(Ue.has(je.id)){const at={...je.stock};return at[g]=(at[g]||0)+Ue.get(je.id),{...je,stock:at}}return je})),c([...fe,...Me]),m([]),Fs(),k("history")},At=()=>{O(null),m([]),Fs(),k("history")},rn=N.useMemo(()=>{const K={};return a.filter(fe=>fe.saleId&&fe.branchId===g).forEach(fe=>{fe.saleId&&(K[fe.saleId]||(K[fe.saleId]={id:fe.saleId,date:fe.date,total:0,items:[],totalDiscount:0,customerName:fe.customerName||"Khách vãng lai",userName:fe.userName,notes:fe.notes}),K[fe.saleId].items.push({partName:fe.partName,quantity:fe.quantity,totalPrice:fe.totalPrice||0}),K[fe.saleId].total+=fe.totalPrice||0,K[fe.saleId].totalDiscount+=fe.discount||0)}),Object.values(K).sort((fe,Fe)=>{const Me=new Date(fe.date).getTime(),Ue=new Date(Fe.date).getTime();return Ue!==Me?Ue-Me:Fe.id.localeCompare(fe.id)})},[a,g]);return i.jsxs("div",{className:"space-y-6",children:[i.jsx(rA,{isOpen:rt,onClose:()=>He(!1),onSave:Bi,initialName:V}),j&&I&&i.jsx(uA,{isOpen:j,onClose:()=>D(!1),cart:I.cart,subtotal:I.subtotal,discount:I.discount,total:I.total,settings:x,branchId:g}),$&&F&&i.jsx(mA,{part:F,onClose:()=>Z(!1),onConfirm:Qa}),i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:i.jsxs("nav",{className:"-mb-px flex space-x-6 sm:space-x-8","aria-label":"Tabs",children:[i.jsxs("button",{onClick:()=>k("products"),className:`flex items-center whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ${b==="products"?"border-sky-500 text-sky-600 dark:border-sky-400 dark:text-sky-400":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200 hover:border-slate-300 dark:hover:border-slate-600"}`,children:[i.jsx(ln,{className:"w-5 h-5 mr-2"})," Sản phẩm"]}),i.jsxs("button",{onClick:()=>k("cart"),className:`flex items-center whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ${b==="cart"?"border-sky-500 text-sky-600 dark:border-sky-400 dark:text-sky-400":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200 hover:border-slate-300 dark:hover:border-slate-600"}`,children:[i.jsx(Ps,{className:"w-5 h-5 mr-2"})," Giỏ hàng",Jl>0&&i.jsx("span",{className:"ml-2 bg-sky-600 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:Jl})]}),i.jsxs("button",{onClick:()=>k("history"),className:`flex items-center whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ${b==="history"?"border-sky-500 text-sky-600 dark:border-sky-400 dark:text-sky-400":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200 hover:border-slate-300 dark:hover:border-slate-600"}`,children:[i.jsx(l0,{className:"w-5 h-5 mr-2"})," Lịch sử"]})]})}),b==="products"&&i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",placeholder:"Tìm theo tên sản phẩm...",value:w,onChange:K=>M(K.target.value),className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg mb-4 text-slate-900 dark:text-slate-100 dark:bg-slate-800 focus:ring-sky-500 focus:border-sky-500"}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:nt.map(K=>i.jsx(dA,{part:K,onSelect:()=>Xa(K),currentBranchId:g},K.id))}),vt.length===0&&i.jsxs("div",{className:"text-center py-16 text-slate-500 dark:text-slate-400",children:[i.jsx(ln,{className:"w-12 h-12 mx-auto text-slate-400 dark:text-slate-500"}),i.jsx("p",{className:"mt-4 font-semibold",children:"Không tìm thấy sản phẩm nào"}),i.jsx("p",{children:"Hãy thử một từ khóa tìm kiếm khác."})]}),ze>1&&i.jsx("div",{className:"mt-6",children:i.jsx(kl,{currentPage:A,totalPages:ze,onPageChange:_,itemsPerPage:vi,totalItems:vt.length})}),Jl>0&&i.jsx(fA,{count:Jl,total:Kn,onClick:()=>k("cart")})]}),b==="cart"&&i.jsx("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-xl shadow-sm border border-slate-200/60 dark:border-slate-700 max-w-4xl mx-auto",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{ref:pt,children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Khách hàng"}),i.jsxs("div",{className:"relative mt-1",children:[i.jsxs("div",{className:"flex",children:[i.jsx("input",{type:"text",placeholder:"Tìm hoặc thêm khách hàng (SĐT hoặc tên)",value:V,onChange:K=>{ae(K.target.value),we(!0),ne(null)},onFocus:()=>we(!0),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-l-md dark:bg-slate-800 dark:text-slate-100"}),i.jsx("button",{type:"button",onClick:()=>He(!0),className:"p-2 border-t border-b border-r rounded-r-md h-[42px] bg-slate-50 dark:bg-slate-700 dark:border-slate-600 hover:bg-slate-100 dark:hover:bg-slate-600",title:"Thêm khách hàng mới",children:i.jsx(yt,{})})]}),be&&i.jsx("div",{className:"absolute z-10 w-full bg-white dark:bg-slate-800 border dark:border-slate-600 rounded-md mt-1 shadow-lg max-h-60 overflow-y-auto",children:$a.length>0?$a.map(K=>i.jsxs("div",{onClick:()=>wt(K),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 cursor-pointer text-sm",children:[i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:K.name}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:K.phone})]},K.id)):i.jsx("div",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"Không tìm thấy khách hàng."})})]})]}),i.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100 pt-2",children:"Giỏ hàng xuất bán"}),f.length===0?i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-8",children:"Giỏ hàng trống."}):i.jsx("div",{className:"space-y-3",children:f.map(K=>i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-3 rounded-lg border dark:border-slate-700",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-100",children:K.partName}),i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["SKU: ",K.sku]})]}),i.jsx("button",{onClick:()=>Cn(K.partId,0),className:"text-red-500 hover:text-red-700 p-1",children:i.jsx(fn,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"flex items-center justify-between mt-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>Cn(K.partId,K.quantity-1),className:"p-1 border dark:border-slate-600 rounded-md",children:i.jsx(Pi,{className:"w-4 h-4"})}),i.jsx("input",{type:"number",value:K.quantity,onChange:fe=>Cn(K.partId,parseInt(fe.target.value)),className:"w-12 text-center border-slate-300 dark:bg-slate-700 dark:border-slate-500 dark:text-slate-100 rounded"}),i.jsx("button",{onClick:()=>Cn(K.partId,K.quantity+1),className:"p-1 border dark:border-slate-600 rounded-md",children:i.jsx(yt,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:bn(K.sellingPrice)}),i.jsx("p",{className:"font-semibold text-slate-900 dark:text-slate-100",children:bn(K.sellingPrice*K.quantity)})]})]})]},K.partId))}),i.jsxs("div",{className:"border-t dark:border-slate-700 pt-4 space-y-2 text-slate-800 dark:text-slate-200",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Tổng tiền hàng"})," ",i.jsx("span",{className:"font-medium",children:bn(St)})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Giảm giá"}),i.jsx("input",{type:"number",value:ue||"",onChange:K=>me(Number(K.target.value)),placeholder:"0",className:"w-28 p-1 border dark:border-slate-600 rounded-md text-right dark:bg-slate-800 dark:text-slate-100"})]}),i.jsxs("div",{className:"flex justify-between items-center font-bold text-xl",children:[i.jsx("span",{children:"Khách phải trả"})," ",i.jsx("span",{children:bn(Kn)})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Khách thanh toán"}),i.jsx("input",{type:"number",value:Te||"",onChange:K=>E(Number(K.target.value)),placeholder:"0",className:"w-28 p-1 border dark:border-slate-600 rounded-md text-right dark:bg-slate-800 dark:text-slate-100"})]}),i.jsx("div",{className:"flex flex-wrap gap-2 pt-2",children:[Kn,2e5,5e5,1e6].map(K=>i.jsx("button",{onClick:()=>E(K),className:"border dark:border-slate-600 rounded-full px-3 py-1 text-sm hover:bg-slate-100 dark:hover:bg-slate-700",children:bn(K)},K))})]}),i.jsxs("div",{className:"border-t dark:border-slate-700 pt-4 space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Thời gian bán hàng"}),i.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"radio",name:"saleTime",checked:X,onChange:()=>re(!0),className:"mr-1"})," Thời gian hiện tại"]}),i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"radio",name:"saleTime",checked:!X,onChange:()=>re(!1),className:"mr-1"})," Tùy chỉnh"]})]}),!X&&i.jsx("input",{type:"datetime-local",value:ie,onChange:K=>ce(K.target.value),className:"mt-2 p-2 border dark:border-slate-600 rounded-md w-full sm:w-auto dark:bg-slate-800 dark:text-slate-100"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:T,onChange:K=>U(K.target.checked),className:"mr-2"})," Ghi chú riêng cho đơn hàng"]}),T&&i.jsx("textarea",{value:J,onChange:K=>G(K.target.value),className:"mt-2 p-2 border dark:border-slate-600 rounded-md w-full dark:bg-slate-800 dark:text-slate-100",rows:2})]}),i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:de,onChange:K=>ge(K.target.checked),className:"mr-2"})," Đồng thời in hoá đơn"]})]}),i.jsx("div",{className:"flex gap-4 pt-4",children:Q?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:At,className:"w-full bg-slate-100 dark:bg-slate-700 border border-slate-300 dark:border-slate-500 text-slate-800 dark:text-slate-200 font-bold py-3 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600",children:"HỦY"}),i.jsx("button",{onClick:Tl,className:"w-full bg-sky-600 text-white font-bold py-3 rounded-lg hover:bg-sky-700 disabled:bg-sky-300",children:"CẬP NHẬT"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"w-full bg-slate-100 dark:bg-slate-700 border border-slate-300 dark:border-slate-500 text-slate-800 dark:text-slate-200 font-bold py-3 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600",children:"LƯU NHÁP"}),i.jsx("button",{onClick:Za,disabled:f.length===0,className:"w-full bg-orange-500 text-white font-bold py-3 rounded-lg hover:bg-orange-600 disabled:bg-orange-300",children:"XUẤT BÁN"})]})})]})}),b==="history"&&i.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-xl shadow-sm border border-slate-200/60 dark:border-slate-700 max-w-5xl mx-auto",children:[i.jsxs("h2",{className:"text-2xl font-bold mb-4 flex items-center text-slate-800 dark:text-slate-100",children:[i.jsx(l0,{className:"w-6 h-6 mr-2"})," Lịch sử bán lẻ"]}),i.jsx("div",{className:"space-y-3 max-h-[70vh] overflow-y-auto",children:rn.length===0?i.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"Chưa có giao dịch bán lẻ nào."}):rn.map(K=>i.jsxs("div",{className:"rounded-lg border border-slate-200 dark:border-slate-700 overflow-hidden",children:[i.jsxs("div",{className:"w-full flex justify-between items-center p-4 bg-slate-50 dark:bg-slate-800 hover:bg-slate-100/70 dark:hover:bg-slate-700/70",children:[i.jsxs("div",{className:"flex-grow flex items-center cursor-pointer",onClick:()=>se(fe=>fe===K.id?null:K.id),children:[i.jsxs("div",{className:"flex-grow text-left",children:[i.jsx("p",{className:"font-semibold text-sky-700 dark:text-sky-400",children:K.id}),i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-100",children:K.customerName}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:new Date(K.date).toLocaleString("vi-VN")})]}),i.jsxs("div",{className:"text-right pr-4 flex-shrink-0",children:[K.totalDiscount>0&&i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-500 line-through",children:[(K.total+K.totalDiscount).toLocaleString("vi-VN")," ₫"]}),i.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-100 text-lg",children:[K.total.toLocaleString("vi-VN")," ₫"]})]}),i.jsx(Lc,{className:`w-5 h-5 transition-transform text-slate-500 dark:text-slate-400 ${ee===K.id?"rotate-180":""}`})]}),i.jsxs("div",{className:"flex items-center gap-2 pl-4 ml-4 border-l border-slate-300 dark:border-slate-600",children:[i.jsx("button",{onClick:()=>zi(K.id),className:"p-2 text-sky-600 dark:text-sky-400 hover:text-sky-800 dark:hover:text-sky-300",title:"Chỉnh sửa",children:i.jsx(bl,{className:"w-5 h-5"})}),i.jsx("button",{onClick:()=>Gi(K.id),className:"p-2 text-red-500 hover:text-red-700",title:"Xóa",children:i.jsx(fn,{className:"w-5 h-5"})})]})]}),ee===K.id&&i.jsxs("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800/50",children:[i.jsxs("div",{className:"mb-3 text-sm space-y-1",children:[i.jsxs("p",{children:[i.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:"Nhân viên:"})," ",i.jsx("span",{className:"dark:text-slate-200",children:K.userName})]}),K.notes&&K.notes!=="Bán lẻ tại quầy"&&i.jsxs("p",{children:[i.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:"Ghi chú:"})," ",i.jsx("span",{className:"dark:text-slate-200",children:K.notes})]})]}),i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b dark:border-slate-600",children:[i.jsx("th",{className:"text-left font-semibold text-slate-600 dark:text-slate-400 pb-2",children:"Sản phẩm"}),i.jsx("th",{className:"text-center font-semibold text-slate-600 dark:text-slate-400 pb-2",children:"SL"}),i.jsx("th",{className:"text-right font-semibold text-slate-600 dark:text-slate-400 pb-2",children:"Thành tiền"})]})}),i.jsx("tbody",{className:"dark:text-slate-200",children:K.items.map((fe,Fe)=>i.jsxs("tr",{className:"border-b dark:border-slate-700 last:border-none",children:[i.jsx("td",{className:"py-2",children:fe.partName}),i.jsx("td",{className:"py-2 text-center",children:fe.quantity}),i.jsxs("td",{className:"py-2 text-right",children:[fe.totalPrice.toLocaleString("vi-VN")," ₫"]})]},Fe))})]}),i.jsxs("div",{className:"mt-2 text-right text-sm space-y-1 dark:text-slate-300",children:[i.jsxs("p",{children:["Tạm tính: ",i.jsxs("span",{className:"font-medium",children:[(K.total+K.totalDiscount).toLocaleString("vi-VN")," ₫"]})]}),K.totalDiscount>0&&i.jsxs("p",{className:"text-red-600 dark:text-red-400",children:["Giảm giá: ",i.jsxs("span",{className:"font-medium",children:["-",K.totalDiscount.toLocaleString("vi-VN")," ₫"]})]}),i.jsxs("p",{className:"font-bold dark:text-slate-100",children:["Tổng cộng: ",K.total.toLocaleString("vi-VN")," ₫"]})]})]})]},K.id))})]})]})},dA=({part:t,onSelect:e,currentBranchId:s})=>i.jsxs("div",{onClick:e,className:"border dark:border-slate-700 rounded-lg p-3 flex flex-col cursor-pointer hover:shadow-md hover:border-sky-500 dark:hover:border-sky-500 transition-all bg-white dark:bg-slate-800",children:[i.jsx("div",{className:"relative w-full h-24 bg-slate-100 dark:bg-slate-700 rounded-md flex items-center justify-center mb-2",children:i.jsx(ln,{className:"w-10 h-10 text-slate-400 dark:text-slate-500"})}),i.jsx("p",{className:"font-semibold text-sm text-slate-800 dark:text-slate-200 flex-grow leading-tight",children:t.name}),i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:["SKU: ",t.sku]}),i.jsxs("div",{className:"flex justify-between items-center mt-2",children:[i.jsx("p",{className:"font-bold text-sky-600 dark:text-sky-400",children:bn(t.sellingPrice)}),i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:["Kho: ",t.stock[s]||0]})]})]}),fA=({count:t,total:e,onClick:s})=>i.jsx("div",{className:"fixed bottom-6 right-6 z-20",children:i.jsxs("button",{onClick:s,className:"bg-orange-500 text-white font-bold rounded-lg shadow-lg flex items-center py-3 px-5 hover:bg-orange-600 transition-transform hover:scale-105",children:[i.jsx(Ps,{className:"w-6 h-6"}),i.jsx("span",{className:"bg-white text-orange-600 rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold ml-3",children:t}),i.jsx("span",{className:"ml-3 text-lg",children:bn(e)}),i.jsx("span",{className:"ml-3",children:"Tiếp tục"})]})}),mA=({part:t,onClose:e,onConfirm:s})=>{const[a,c]=N.useState(1),[f,m]=N.useState(t.sellingPrice),[x,g]=N.useState(!1),p=N.useRef(null),v=b=>{const k=t.sellingPrice*a-f*a;s({partId:t.id,quantity:a,sellingPrice:t.sellingPrice,discount:k}),b?e():(c(1),m(t.sellingPrice))};return N.useEffect(()=>{const b=k=>{p.current&&!p.current.contains(k.target)&&g(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex justify-center items-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-lg shadow-xl w-full max-w-md",children:[i.jsxs("div",{className:"p-4 border-b dark:border-slate-700 flex justify-between items-center",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-100",children:t.name}),i.jsx("button",{onClick:e,children:i.jsx(on,{className:"w-6 h-6 text-slate-500 dark:text-slate-400"})})]}),i.jsxs("div",{className:"p-4 space-y-4",children:[i.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-200 dark:border-yellow-700/50 p-3 rounded-md text-sm text-slate-800 dark:text-slate-200",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"SKU:"})," ",t.sku]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Giá bán lẻ:"})," ",bn(t.sellingPrice)]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Có thể bán:"})," ",t.stock[t.id]||5," (Mock)"]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("label",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Số lượng:"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>c(b=>Math.max(1,b-1)),className:"p-1 border dark:border-slate-600 rounded-md",children:i.jsx(Pi,{className:"w-5 h-5"})}),i.jsx("input",{type:"number",value:a,onChange:b=>c(Number(b.target.value)),className:"w-16 text-center border-slate-300 dark:bg-slate-800 dark:border-slate-600 dark:text-slate-100 rounded"}),i.jsx("button",{onClick:()=>c(b=>b+1),className:"p-1 border dark:border-slate-600 rounded-md",children:i.jsx(yt,{className:"w-5 h-5"})})]})]}),t.warrantyPeriod&&i.jsxs("p",{className:"flex items-center text-sm text-slate-600 dark:text-slate-300",children:[i.jsx(_i,{className:"w-4 h-4 mr-1 text-green-600 dark:text-green-400"})," Bảo hành: ",t.warrantyPeriod]}),i.jsxs("div",{className:"flex justify-between items-center relative",children:[i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Giá bán:"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-bold text-lg text-slate-900 dark:text-slate-100",children:bn(f*a)}),i.jsx("button",{onClick:()=>g(!0),className:"p-1 text-sky-600 dark:text-sky-400",children:i.jsx(bl,{className:"w-5 h-5"})})]}),x&&i.jsx(hA,{basePrice:t.sellingPrice,currentPrice:f,onApply:m,onClose:()=>g(!1),ref:p})]})]}),i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-800 flex gap-4",children:[i.jsx("button",{onClick:()=>v(!0),className:"w-full bg-orange-500 text-white font-bold py-3 rounded-lg hover:bg-orange-600",children:"Thêm vào giỏ hàng"}),i.jsx("button",{onClick:()=>v(!1),className:"w-full bg-green-600 text-white font-bold py-3 rounded-lg hover:bg-green-700",children:"Thêm và tiếp tục"})]})]})})},hA=On.forwardRef(({basePrice:t,currentPrice:e,onApply:s,onClose:a},c)=>{const[f,m]=N.useState(0),[x,g]=N.useState("%");N.useEffect(()=>{const v=t-e;v>0&&(m(v),g("VND"))},[t,e]);const p=()=>{let v=t;x==="VND"?v=t-f:v=t*(1-f/100),s(Math.max(0,v)),a()};return i.jsxs("div",{ref:c,className:"absolute right-0 top-full mt-2 w-64 bg-white dark:bg-slate-800 border dark:border-slate-600 rounded-lg shadow-xl z-20 p-4 space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium dark:text-slate-300",children:"Đơn giá:"}),i.jsx("input",{type:"text",value:bn(t),disabled:!0,className:"w-full p-2 bg-slate-100 dark:bg-slate-700 border dark:border-slate-600 rounded-md mt-1"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium dark:text-slate-300",children:"Giảm giá:"}),i.jsxs("div",{className:"flex items-center mt-1",children:[i.jsx("input",{type:"number",value:f||"",onChange:v=>m(Number(v.target.value)),className:"w-full p-2 border dark:border-slate-500 rounded-l-md dark:bg-slate-700"}),i.jsx("button",{onClick:()=>g("VND"),className:`p-2 border-t border-b dark:border-slate-500 ${x==="VND"?"bg-sky-600 text-white":"dark:text-slate-200"}`,children:"VND"}),i.jsx("button",{onClick:()=>g("%"),className:`p-2 border dark:border-slate-500 rounded-r-md ${x==="%"?"bg-sky-600 text-white":"dark:text-slate-200"}`,children:"%"})]})]}),i.jsx("button",{onClick:p,className:"w-full bg-sky-600 text-white font-semibold py-2 rounded-md",children:"Áp dụng"})]})}),pA=({isOpen:t,onClose:e,onSave:s})=>{const[a,c]=N.useState(""),[f,m]=N.useState(""),[x,g]=N.useState(""),p=()=>{if(g(""),!a||a.length<6){g("Mật khẩu phải có ít nhất 6 ký tự.");return}if(a!==f){g("Mật khẩu xác nhận không khớp.");return}s(a)};return N.useEffect(()=>{t&&(c(""),m(""),g(""))},[t]),t?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-[80] flex justify-center items-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-lg shadow-xl w-full max-w-sm",children:[i.jsx("div",{className:"p-4 border-b dark:border-slate-700",children:i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-100",children:"Đổi mật khẩu"})}),i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Mật khẩu mới"}),i.jsx("input",{type:"password",value:a,onChange:v=>c(v.target.value),className:"mt-1 w-full p-2 border dark:border-slate-600 rounded-md dark:bg-slate-800 dark:text-white",autoFocus:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Xác nhận mật khẩu mới"}),i.jsx("input",{type:"password",value:f,onChange:v=>m(v.target.value),className:"mt-1 w-full p-2 border dark:border-slate-600 rounded-md dark:bg-slate-800 dark:text-white"})]}),x&&i.jsx("p",{className:"text-sm text-red-500",children:x})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 px-6 py-3 flex justify-end space-x-3 border-t dark:border-slate-700",children:[i.jsx("button",{onClick:e,className:"bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-600",children:"Hủy"}),i.jsx("button",{onClick:p,className:"bg-sky-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-sky-700",children:"Lưu"})]})]})}):null},Ag=[{key:"stt",name:"STT"},{key:"name",name:"Tên"},{key:"loginPhone",name:"ĐT Đăng nhập"},{key:"email",name:"Email"},{key:"address",name:"Địa chỉ"},{key:"departments",name:"Phòng / Ban"},{key:"status",name:"Trạng thái"},{key:"creationDate",name:"Ngày tạo"}],_g=["stt","name","loginPhone","email","status","departments"],fc={dashboard:{name:"Trang chủ",type:"detailed",options:{viewReports:"Xem báo cáo",viewWarnings:"Xem cảnh báo"}},service:{name:"Sửa chữa - Bảo hành",type:"detailed",options:{view:"Xem danh sách",add:"Thêm mới",edit:"Chỉnh sửa",delete:"Xóa",print:"In biên nhận"}},sales:{name:"Bán hàng",type:"detailed",options:{create:"Tạo đơn",viewHistory:"Xem lịch sử",edit:"Sửa đơn",delete:"Xóa đơn"}},inventory:{name:"Quản lý kho",type:"detailed",options:{view:"Xem tồn kho",add:"Thêm sản phẩm",edit:"Sửa sản phẩm",delete:"Xóa",createReceipt:"Nhập kho",createDispatch:"Xuất kho",transfer:"Chuyển kho"}},customers:{name:"Khách hàng",type:"detailed",options:{view:"Xem",add:"Thêm",edit:"Sửa",delete:"Xóa"}},cashflow:{name:"Sổ quỹ",type:"toggle"},activityLog:{name:"Nhật ký thao tác",type:"toggle"},userManager:{name:"Quản lý nhân viên",type:"toggle"},reports:{name:"Báo cáo",type:"detailed",options:{revenue:"Báo cáo doanh thu",inventory:"Báo cáo tồn kho"}}},gA=({visibleColumns:t,onApply:e,onClose:s})=>{const[a,c]=N.useState(t),f=m=>{c(x=>x.includes(m)?x.filter(g=>g!==m):[...x,m])};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[60] flex justify-center items-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-md",children:[i.jsxs("div",{className:"p-4 border-b dark:border-slate-700 flex justify-between items-center",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-100",children:"Chọn dữ liệu hiển thị"}),i.jsx("button",{onClick:s,children:i.jsx(on,{className:"w-6 h-6 text-slate-500 dark:text-slate-300"})})]}),i.jsx("div",{className:"p-6 grid grid-cols-2 gap-4",children:Ag.map(m=>i.jsxs("label",{className:"flex items-center space-x-3",children:[i.jsx("input",{type:"checkbox",checked:a.includes(m.key),onChange:()=>f(m.key),className:"h-4 w-4 rounded border-gray-300 text-sky-600 focus:ring-sky-500"}),i.jsx("span",{className:"text-slate-700 dark:text-slate-200",children:m.name})]},m.key))}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-3 flex justify-between items-center border-t dark:border-slate-700",children:[i.jsxs("div",{children:[i.jsx("button",{onClick:()=>c(_g),className:"text-sm text-sky-600 dark:text-sky-400 hover:underline",children:"Đặt mặc định"}),i.jsx("button",{onClick:()=>c([]),className:"text-sm text-red-600 dark:text-red-400 hover:underline ml-4",children:"Xoá tuỳ chọn"})]}),i.jsx("button",{onClick:()=>e(a),className:"bg-orange-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-orange-600",children:"Áp dụng"})]})]})})},xA=({moduleKey:t,config:e,value:s,onChange:a})=>{const[c,f]=N.useState(!1),m=p=>{if(e.type==="detailed"){const v=typeof s=="object"?s.details:{};a({level:p,details:v})}},x=(p,v)=>{if(typeof s=="object"){const b={...s.details||{},[p]:v};a({...s,details:b})}};if(e.type==="toggle")return i.jsxs("div",{className:"flex justify-between items-center p-3 border dark:border-slate-700 rounded-md bg-white dark:bg-slate-800",children:[i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-200",children:e.name}),i.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:!!s,onChange:p=>a(p.target.checked),className:"sr-only peer"}),i.jsx("div",{className:"w-11 h-6 bg-gray-200 rounded-full peer peer-focus:ring-2 peer-focus:ring-sky-300 dark:peer-focus:ring-sky-800 dark:bg-slate-600 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-sky-600"})]})]});const g=typeof s=="object"?s.level:"none";return i.jsxs("div",{className:"border dark:border-slate-700 rounded-md bg-white dark:bg-slate-800",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 items-center p-3 gap-2",children:[i.jsx("div",{className:"md:col-span-1 font-medium text-slate-700 dark:text-slate-200",children:e.name}),i.jsx("div",{className:"md:col-span-3 grid grid-cols-3 gap-2 text-slate-700 dark:text-slate-300",children:["all","restricted","none"].map(p=>i.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700",children:[i.jsx("input",{type:"radio",name:t,value:p,checked:g===p,onChange:()=>m(p),className:"text-sky-600 focus:ring-sky-500"}),i.jsx("span",{className:"capitalize",children:p==="all"?"Tất cả":p==="restricted"?"Hạn chế":"Không"})]},p))})]}),g==="restricted"&&i.jsxs("div",{className:"p-3 border-t dark:border-slate-700 bg-slate-50 dark:bg-slate-700 text-slate-700 dark:text-slate-300",children:[i.jsxs("button",{type:"button",onClick:()=>f(!c),className:"text-sm text-sky-600 dark:text-sky-400 hover:underline mb-2",children:["Xem chi tiết ",Object.keys(e.options||{}).length," hạng mục"]}),c&&i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-x-4 gap-y-2 mt-2",children:Object.entries(e.options||{}).map(([p,v])=>{var b;return i.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[i.jsx("input",{type:"checkbox",checked:!!(typeof s=="object"&&((b=s.details)!=null&&b[p])),onChange:k=>x(p,k.target.checked),className:"rounded text-sky-600 focus:ring-sky-500"}),i.jsx("span",{children:v})]},p)})})]})]})},yA=({department:t,onClose:e,onSave:s})=>{const[a,c]=N.useState({});N.useEffect(()=>{const x=Object.keys(fc).reduce((p,v)=>{const b=fc[v];return p[v]=b.type==="toggle"?!1:{level:"none",details:{}},p},{}),g=t?{...t,permissions:{...x,...t.permissions||{}}}:{name:"",description:"",permissions:x};c(g)},[t]);const f=(x,g)=>{c(p=>({...p,permissions:{...p.permissions||{},[x]:g}}))},m=()=>{if(!a.name){alert("Vui lòng nhập tên phòng ban.");return}const x={id:a.id||`dept_${Date.now()}`,name:a.name,description:a.description||"",permissions:a.permissions||{}};s(x)};return t?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[70] flex justify-center items-center p-4",children:i.jsxs("div",{className:"bg-slate-100 dark:bg-slate-900 rounded-lg shadow-xl w-full max-w-4xl h-[90vh] flex flex-col",children:[i.jsxs("div",{className:"p-4 border-b dark:border-slate-700 bg-white dark:bg-slate-800 rounded-t-lg flex justify-between items-center",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:t.id?"Chỉnh sửa thông tin":"Thêm phòng ban"}),i.jsx("button",{onClick:e,children:i.jsx(on,{className:"w-6 h-6 text-slate-500 dark:text-slate-300"})})]}),i.jsxs("div",{className:"p-6 flex-1 overflow-y-auto space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 bg-white dark:bg-slate-800 p-4 rounded-lg border dark:border-slate-700",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Tên (*)"}),i.jsx("input",{type:"text",value:a.name||"",onChange:x=>c(g=>({...g,name:x.target.value})),className:"mt-1 w-full p-2 border dark:border-slate-600 rounded-md dark:bg-slate-700 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Mô tả"}),i.jsx("input",{type:"text",value:a.description||"",onChange:x=>c(g=>({...g,description:x.target.value})),className:"mt-1 w-full p-2 border dark:border-slate-600 rounded-md dark:bg-slate-700 dark:text-white"})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-100 text-lg",children:"Phân quyền"}),Object.entries(fc).map(([x,g])=>{var p;return i.jsx(xA,{moduleKey:x,config:g,value:((p=a.permissions)==null?void 0:p[x])??(g.type==="toggle"?!1:{level:"none"}),onChange:v=>f(x,v)},x)})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 px-6 py-3 flex justify-end space-x-3 border-t dark:border-slate-700 rounded-b-lg",children:[i.jsx("button",{onClick:e,className:"bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-600",children:"Hủy"}),i.jsx("button",{onClick:m,className:"bg-orange-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-orange-600",children:"Lưu và đóng"})]})]})}):null},vA=({departments:t,onClose:e,onSave:s,onDelete:a})=>{const[c,f]=N.useState(null);return i.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[60] flex justify-center items-center p-4",children:[c&&i.jsx(yA,{department:c,onClose:()=>f(null),onSave:m=>{s(m),f(null)}}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col",children:[i.jsxs("div",{className:"p-4 border-b dark:border-slate-700 flex justify-between items-center",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:"Danh sách phòng ban"}),i.jsx("button",{onClick:e,children:i.jsx(on,{className:"w-6 h-6 text-slate-500 dark:text-slate-300"})})]}),i.jsx("div",{className:"p-6 flex-1 overflow-y-auto space-y-3",children:t.map(m=>i.jsxs("div",{className:"p-3 border dark:border-slate-700 rounded-lg flex justify-between items-center hover:bg-slate-50 dark:hover:bg-slate-700",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-100",children:m.name}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:m.description})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{onClick:()=>f(m),className:"p-2 text-sky-600 dark:text-sky-400 hover:text-sky-800 dark:hover:text-sky-300",children:i.jsx(bl,{className:"w-5 h-5"})}),i.jsx("button",{onClick:()=>a(m.id),className:"p-2 text-red-500 hover:text-red-700",children:i.jsx(fn,{className:"w-5 h-5"})})]})]},m.id))}),i.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-3 border-t dark:border-slate-700 flex justify-end",children:i.jsxs("button",{onClick:()=>f({}),className:"bg-orange-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-orange-600 flex items-center gap-2",children:[i.jsx(yt,{})," Thêm mới"]})})]})]})},bA=({user:t,onClose:e,onSave:s,departments:a,users:c})=>{const[f,m]=N.useState(1),[x,g]=N.useState(""),[p,v]=N.useState({}),[b,k]=N.useState(!1);N.useEffect(()=>{t?(v(t),g(t.loginPhone),m(2)):(v({status:"active",departmentIds:[]}),g(""),m(1)),k(!1)},[t]);const w=()=>{if(!x.trim()){alert("Vui lòng nhập số điện thoại đăng nhập.");return}if(!t&&c.some(A=>A.loginPhone===x.trim())){alert("Số điện thoại này đã được sử dụng.");return}v(A=>({...A,loginPhone:x.trim()})),m(2)},M=(A=!1)=>{if(!p.name){alert("Vui lòng nhập tên nhân viên.");return}if(!p.loginPhone||!p.loginPhone.trim()){alert("Vui lòng nhập số điện thoại đăng nhập.");return}if(c.some(j=>{var D;return j.loginPhone===((D=p.loginPhone)==null?void 0:D.trim())&&j.id!==p.id})){alert("Số điện thoại này đã được sử dụng bởi một nhân viên khác.");return}const _={id:p.id||`U${Date.now()}`,name:p.name,loginPhone:p.loginPhone,password:p.password||"password123",status:p.status||"active",departmentIds:p.departmentIds||[],creationDate:p.creationDate||new Date().toISOString().split("T")[0],...p};s(_),A?(v({status:"active",departmentIds:[]}),g(""),m(1)):e()};return i.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[60] flex justify-center items-center p-4",children:[b&&i.jsx(pA,{isOpen:b,onClose:()=>k(!1),onSave:A=>{v(_=>({..._,password:A})),k(!1)}}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-xl max-h-[90vh] flex flex-col",children:[i.jsxs("div",{className:"p-4 border-b dark:border-slate-700 bg-orange-500 rounded-t-lg text-white flex justify-between items-center",children:[i.jsx("h3",{className:"text-xl font-bold",children:t?"Chỉnh sửa nhân viên":"Thêm nhân viên"}),i.jsx("button",{onClick:e,className:"text-white opacity-70 hover:opacity-100",children:i.jsx(on,{className:"w-6 h-6"})})]}),i.jsxs("div",{className:"flex p-4 border-b dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(o0,{className:`w-6 h-6 ${f>=1?"text-sky-600 dark:text-sky-400":"text-slate-400 dark:text-slate-500"}`}),i.jsx("span",{className:`ml-2 font-semibold ${f>=1?"text-sky-600 dark:text-sky-400":"text-slate-500 dark:text-slate-400"}`,children:"Điện thoại đăng nhập"})]}),i.jsx("div",{className:"flex-1 border-t-2 mx-4 mt-3 border-dashed"}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(o0,{className:`w-6 h-6 ${f===2?"text-sky-600 dark:text-sky-400":"text-slate-400 dark:text-slate-500"}`}),i.jsx("span",{className:`ml-2 font-semibold ${f===2?"text-sky-600 dark:text-sky-400":"text-slate-500 dark:text-slate-400"}`,children:"Thêm thành viên"})]})]}),i.jsxs("div",{className:"p-6 flex-1 overflow-y-auto",children:[f===1&&i.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[i.jsx("label",{className:"text-lg font-semibold mb-4 dark:text-slate-200",children:"Số điện thoại đăng nhập"}),i.jsx("input",{type:"text",value:x,onChange:A=>g(A.target.value),className:"w-full max-w-sm p-3 text-center border-2 dark:bg-slate-700 dark:border-slate-600 dark:text-white rounded-lg text-lg focus:ring-sky-500 focus:border-sky-500",placeholder:"Nhập số điện thoại...",autoFocus:!0}),i.jsx("button",{onClick:w,className:"mt-6 bg-orange-500 text-white font-bold py-2 px-8 rounded-lg hover:bg-orange-600",children:"Tiếp tục"})]}),f===2&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Số điện thoại đăng nhập (*)"}),i.jsx("input",{type:"text",value:p.loginPhone||"",onChange:A=>v(_=>({..._,loginPhone:A.target.value})),className:"mt-1 w-full p-2 border dark:border-slate-600 rounded-md dark:bg-slate-700 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Tên (*)"}),i.jsx("input",{type:"text",value:p.name||"",onChange:A=>v(_=>({..._,name:A.target.value})),className:"mt-1 w-full p-2 border dark:border-slate-600 rounded-md dark:bg-slate-700 dark:text-white",autoFocus:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Trạng thái"}),i.jsxs("div",{className:"flex gap-4 mt-2 dark:text-slate-300",children:[i.jsxs("label",{children:[i.jsx("input",{type:"radio",name:"status",value:"active",checked:p.status==="active",onChange:()=>v(A=>({...A,status:"active"})),className:"mr-1"})," Hoạt động"]}),i.jsxs("label",{children:[i.jsx("input",{type:"radio",name:"status",value:"inactive",checked:p.status==="inactive",onChange:()=>v(A=>({...A,status:"inactive"})),className:"mr-1"})," Bị khoá"]})]})]}),t&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Mật khẩu"}),i.jsx("button",{type:"button",onClick:()=>k(!0),className:"mt-1 text-sm text-sky-600 dark:text-sky-400 hover:underline font-medium",children:"Đặt lại mật khẩu"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Phòng ban"}),i.jsx("div",{className:"mt-2 space-y-2 p-3 border dark:border-slate-600 rounded-md max-h-40 overflow-y-auto dark:text-slate-200",children:a.map(A=>{var _;return i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:(_=p.departmentIds)==null?void 0:_.includes(A.id),onChange:j=>{const D=j.target.checked;v(I=>({...I,departmentIds:D?[...I.departmentIds||[],A.id]:(I.departmentIds||[]).filter(q=>q!==A.id)}))},className:"mr-2 rounded text-sky-600 focus:ring-sky-500"}),A.name]},A.id)})})]})]})]}),f===2&&i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 px-6 py-3 border-t dark:border-slate-600 flex justify-between items-center",children:[i.jsxs("button",{onClick:()=>m(1),className:"flex items-center gap-2 text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-slate-100",children:[i.jsx(mn,{className:"w-5 h-5"})," Quay lại"]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>M(!1),className:"bg-orange-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-orange-600",children:"Lưu"}),!t&&i.jsx("button",{onClick:()=>M(!0),className:"bg-sky-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-sky-700",children:"Lưu và thêm tiếp"})]})]})]})]})},Ha=15,kA=({currentUser:t,users:e,setUsers:s,departments:a,setDepartments:c})=>{const[f,m]=N.useState(""),[x,g]=N.useState(()=>{const Z=localStorage.getItem("motocare_user_cols");return Z?JSON.parse(Z):_g}),[p,v]=N.useState(!1),[b,k]=N.useState(!1),[w,M]=N.useState(null),[A,_]=N.useState(!1),[j,D]=N.useState(1);N.useEffect(()=>{localStorage.setItem("motocare_user_cols",JSON.stringify(x))},[x]),N.useEffect(()=>{D(1)},[f]);const I=N.useMemo(()=>e.filter(Z=>Z.name.toLowerCase().includes(f.toLowerCase())||Z.loginPhone.toLowerCase().includes(f.toLowerCase())||(Z.email||"").toLowerCase().includes(f.toLowerCase())),[e,f]),q=N.useMemo(()=>{const Z=(j-1)*Ha;return I.slice(Z,Z+Ha)},[I,j]),ee=Math.ceil(I.length/Ha),se=Z=>{s(Q=>Q.some(ue=>ue.id===Z.id)?Q.map(ue=>ue.id===Z.id?Z:ue):[Z,...Q])},F=Z=>{window.confirm("Bạn có chắc chắn muốn xóa nhân viên này?")&&s(Q=>Q.filter(O=>O.id!==Z))},oe=Z=>{c(Q=>Q.some(ue=>ue.id===Z.id)?Q.map(ue=>ue.id===Z.id?Z:ue):[Z,...Q])},$=Z=>{window.confirm("Bạn có chắc chắn muốn xóa phòng ban này? Các nhân viên thuộc phòng ban này sẽ bị gỡ ra.")&&(c(Q=>Q.filter(O=>O.id!==Z)),s(Q=>Q.map(O=>({...O,departmentIds:O.departmentIds.filter(ue=>ue!==Z)}))))};return i.jsxs("div",{className:"space-y-6",children:[p&&i.jsx(gA,{visibleColumns:x,onApply:g,onClose:()=>v(!1)}),b&&i.jsx(bA,{user:w,onClose:()=>{k(!1),M(null)},onSave:se,departments:a,users:e}),A&&i.jsx(vA,{departments:a,onClose:()=>_(!1),onSave:oe,onDelete:$}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border border-slate-200/60 dark:border-slate-700 flex flex-col sm:flex-row justify-between sm:items-center gap-4",children:[i.jsx("input",{type:"text",placeholder:"Tìm kiếm nhân viên...",value:f,onChange:Z=>m(Z.target.value),className:"w-full sm:w-72 p-2 border dark:border-slate-600 rounded-md dark:bg-slate-700 dark:text-slate-100"}),i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[i.jsxs("button",{onClick:()=>{M(null),k(!0)},className:"flex items-center gap-2 bg-sky-600 text-white font-semibold py-2 px-4 rounded-lg shadow-sm hover:bg-sky-700",children:[i.jsx(yt,{})," Thêm mới"]}),i.jsxs("button",{onClick:()=>_(!0),className:"flex items-center gap-2 bg-slate-600 text-white font-semibold py-2 px-4 rounded-lg shadow-sm hover:bg-slate-700",children:[i.jsx(jb,{})," Phân quyền"]}),i.jsx("button",{onClick:()=>v(!0),className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600",title:"Chọn cột hiển thị",children:i.jsx(Ub,{className:"w-6 h-6 text-slate-700 dark:text-slate-200"})})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-slate-200/60 dark:border-slate-700 overflow-x-auto",children:[i.jsxs("table",{className:"w-full text-left min-w-max",children:[i.jsx("thead",{className:"border-b dark:border-slate-700 bg-slate-50 dark:bg-slate-700/50",children:i.jsxs("tr",{children:[x.map(Z=>{const Q=Ag.find(O=>O.key===Z);return i.jsx("th",{className:"p-3 font-semibold text-slate-600 dark:text-slate-300",children:Q==null?void 0:Q.name},Z)}),i.jsx("th",{className:"p-3 font-semibold text-slate-600 dark:text-slate-300"})]})}),i.jsx("tbody",{children:q.map((Z,Q)=>i.jsxs("tr",{className:"border-b dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[x.map(O=>i.jsx("td",{className:"p-3 text-slate-800 dark:text-slate-200",children:(()=>{switch(O){case"stt":return(j-1)*Ha+Q+1;case"name":return i.jsx("span",{className:"font-semibold",children:Z.name});case"status":return i.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${Z.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"}`,children:Z.status==="active"?"Hoạt động":"Bị khoá"});case"departments":return Z.departmentIds.map(ue=>{var me;return(me=a.find(Te=>Te.id===ue))==null?void 0:me.name}).join(", ");default:return Z[O]||""}})()},O)),i.jsx("td",{className:"p-3",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>{M(Z),k(!0)},className:"p-1 text-sky-600 dark:text-sky-400 hover:text-sky-800 dark:hover:text-sky-300",children:i.jsx(bl,{className:"w-5 h-5"})}),i.jsx("button",{onClick:()=>F(Z.id),className:"p-1 text-red-500 hover:text-red-700",children:i.jsx(fn,{className:"w-5 h-5"})})]})})]},Z.id))})]}),I.length===0&&i.jsx("div",{className:"text-center p-8 text-slate-500 dark:text-slate-400",children:"Không tìm thấy nhân viên nào."})]}),I.length>0&&i.jsx(kl,{currentPage:j,totalPages:ee,onPageChange:D,itemsPerPage:Ha,totalItems:I.length})]})},Gn=t=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(t),CA=({data:t})=>{const e=N.useMemo(()=>{if(t.length===0)return 0;const s=t.map(a=>Math.max(a.revenue,a.cost));return Math.max(...s,1)},[t]);return t.length===0?i.jsx("div",{className:"flex items-center justify-center h-80 bg-slate-100 dark:bg-slate-700/50 rounded-lg text-slate-500 dark:text-slate-400",children:"Không có dữ liệu để hiển thị."}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 sm:p-6 rounded-xl shadow-sm border border-slate-200/60 dark:border-slate-700",children:[i.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-slate-700 dark:text-slate-200 mb-2",children:"Tổng quan Doanh thu - Chi phí - Lợi nhuận"}),i.jsxs("div",{className:"flex justify-end space-x-4 mb-4 text-xs text-slate-600 dark:text-slate-300",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"w-3 h-3 bg-sky-500 mr-2 rounded-sm"}),"Doanh thu"]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"w-3 h-3 bg-amber-500 mr-2 rounded-sm"}),"Chi phí"]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"w-3 h-3 bg-green-500 mr-2 rounded-sm"}),"Lợi nhuận"]})]}),i.jsx("div",{className:"overflow-x-auto pb-8 -mb-4",children:i.jsx("div",{className:"flex items-end h-80 space-x-2",style:{minWidth:`${t.length*60}px`},children:t.map((s,a)=>i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-end group relative h-full",children:[i.jsxs("div",{className:"absolute -top-14 hidden group-hover:block bg-slate-800 text-white text-xs rounded py-1 px-2 pointer-events-none whitespace-nowrap z-10",children:[i.jsxs("div",{children:["Doanh thu: ",Gn(s.revenue)]}),i.jsxs("div",{children:["Chi phí: ",Gn(s.cost)]}),i.jsxs("div",{className:"font-bold",children:["Lợi nhuận: ",Gn(s.profit)]})]}),i.jsxs("div",{className:"flex items-end h-full w-full justify-center space-x-[10%]",children:[i.jsx("div",{className:"w-full bg-sky-400 hover:bg-sky-500 transition-all duration-300 rounded-t",style:{height:`${Math.max(0,s.revenue/e)*100}%`}}),i.jsx("div",{className:"w-full bg-amber-400 hover:bg-amber-500 transition-all duration-300 rounded-t",style:{height:`${Math.max(0,s.cost/e)*100}%`}}),i.jsx("div",{className:"w-full bg-green-400 hover:bg-green-500 transition-all duration-300 rounded-t",style:{height:`${Math.max(0,s.profit/e)*100}%`}})]}),i.jsx("span",{className:"mt-2 text-xs text-slate-500 dark:text-slate-400 whitespace-nowrap",children:s.label})]},a))})})]})},TA=({data:t})=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200/60 dark:border-slate-700",children:[i.jsxs("h3",{className:"text-lg sm:text-xl font-semibold text-slate-700 dark:text-slate-200 mb-4 flex items-center",children:[i.jsx(Ib,{className:"w-6 h-6 mr-3 text-violet-600"}),"Doanh thu theo Danh mục"]}),i.jsx("div",{className:"space-y-3",children:t.length>0?t.map(e=>i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-200",children:e.category}),i.jsxs("span",{className:"font-semibold text-slate-600 dark:text-slate-300",children:[Gn(e.revenue)," (",e.percentage.toFixed(1),"%)"]})]}),i.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2.5",children:i.jsx("div",{className:"bg-violet-500 h-2.5 rounded-full",style:{width:`${e.percentage}%`}})})]},e.category)):i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"Không có dữ liệu."})})]}),bi=20,NA=({workOrders:t,transactions:e,parts:s,currentBranchId:a})=>{const c=new Date,f=new Date(c);f.setMonth(c.getMonth()-1);const[m,x]=N.useState(f.toISOString().split("T")[0]),[g,p]=N.useState(c.toISOString().split("T")[0]),[v,b]=N.useState("day"),[k,w]=N.useState([]),[M,A]=N.useState([]),[_,j]=N.useState([]),[D,I]=N.useState(null),[q,ee]=N.useState(1),se=N.useMemo(()=>{const E=t.filter(ie=>ie.status==="Trả máy"&&ie.branchId===a&&ie.partsUsed).flatMap(ie=>ie.partsUsed.map(ce=>{const T=s.find(U=>U.id===ce.partId);return{date:ie.creationDate,revenue:ce.price*ce.quantity,cost:((T==null?void 0:T.price)||0)*ce.quantity,partId:ce.partId,partName:ce.partName,sku:ce.sku,category:(T==null?void 0:T.category)||"Chưa phân loại",quantity:ce.quantity}})),X=t.filter(ie=>ie.status==="Trả máy"&&ie.branchId===a&&ie.laborCost>0).map(ie=>({date:ie.creationDate,revenue:ie.laborCost,cost:0,partId:"LABOR",partName:"Tiền công sửa chữa",sku:"DV-SC",category:"Dịch vụ",quantity:1})),re=e.filter(ie=>ie.type==="Xuất kho"&&ie.branchId===a&&ie.saleId).map(ie=>{const ce=s.find(T=>T.id===ie.partId);return{date:ie.date,revenue:ie.totalPrice||0,cost:((ce==null?void 0:ce.price)||0)*ie.quantity,partId:ie.partId,partName:ie.partName,sku:(ce==null?void 0:ce.sku)||"N/A",category:(ce==null?void 0:ce.category)||"Chưa phân loại",quantity:ie.quantity}});return[...E,...X,...re].sort((ie,ce)=>new Date(ie.date).getTime()-new Date(ce.date).getTime())},[t,e,s,a]),F=()=>{ee(1);const E=new Date(`${m}T00:00:00`),X=new Date(`${g}T23:59:59`),re=se.filter(G=>{const de=new Date(G.date);return de>=E&&de<=X}),ie={},ce=G=>{G=new Date(Date.UTC(G.getFullYear(),G.getMonth(),G.getDate())),G.setUTCDate(G.getUTCDate()+4-(G.getUTCDay()||7));const de=new Date(Date.UTC(G.getUTCFullYear(),0,1)),ge=Math.ceil(((G.getTime()-de.getTime())/864e5+1)/7);return{year:G.getUTCFullYear(),week:ge}};re.forEach(G=>{const de=new Date(G.date);let ge="";if(v==="day")ge=de.toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit"});else if(v==="week"){const{year:V,week:ae}=ce(de);ge=`${V}-W${ae.toString().padStart(2,"0")}`}else v==="month"&&(ge=`${de.getFullYear()}-${(de.getMonth()+1).toString().padStart(2,"0")}`);ge&&(ie[ge]||(ie[ge]={revenue:0,cost:0}),ie[ge].revenue+=G.revenue,ie[ge].cost+=G.cost)}),w(Object.keys(ie).sort().map(G=>({label:G,revenue:ie[G].revenue,cost:ie[G].cost,profit:ie[G].revenue-ie[G].cost})));const T={};re.filter(G=>G.partId!=="LABOR").forEach(G=>{T[G.partId]||(T[G.partId]={partName:G.partName,sku:G.sku,quantity:0,revenue:0}),T[G.partId].quantity+=G.quantity,T[G.partId].revenue+=G.revenue}),A(Object.values(T).sort((G,de)=>de.quantity-G.quantity));const U={};let J=0;re.forEach(G=>{const de=G.category||"Chưa phân loại";U[de]=(U[de]||0)+G.revenue,J+=G.revenue}),j(J>0?Object.entries(U).map(([G,de])=>({category:G,revenue:de,percentage:de/J*100})).sort((G,de)=>de.revenue-G.revenue):[])},oe=N.useMemo(()=>D?[...M].sort((E,X)=>{const re=D.key;return E[re]<X[re]?D.direction==="asc"?-1:1:E[re]>X[re]?D.direction==="asc"?1:-1:0}):M,[M,D]),$=N.useMemo(()=>{const E=(q-1)*bi;return oe.slice(E,E+bi)},[oe,q]),Z=Math.ceil(oe.length/bi),Q=E=>{let X,re,ie;if(M.length>0)X=["Ten san pham","SKU","So luong ban","Doanh thu (VND)"],re=oe.map(J=>[J.partName,J.sku,J.quantity,J.revenue]),ie="bao_cao_ban_hang_san_pham.csv";else return;let ce="data:text/csv;charset=utf-8,"+[X.join(","),...re.map(J=>J.join(","))].join(`
`);const T=encodeURI(ce),U=document.createElement("a");U.setAttribute("href",T),U.setAttribute("download",ie),document.body.appendChild(U),U.click(),document.body.removeChild(U)},O=E=>{let X="asc";D&&D.key===E&&D.direction==="asc"&&(X="desc"),I({key:E,direction:X})},ue=N.useMemo(()=>k.reduce((E,X)=>E+X.revenue,0),[k]),me=N.useMemo(()=>k.reduce((E,X)=>E+X.cost,0),[k]),Te=N.useMemo(()=>k.reduce((E,X)=>E+X.profit,0),[k]);return i.jsxs("div",{className:"space-y-8",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200/60 dark:border-slate-700",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 items-end",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Từ ngày"}),i.jsx("input",{type:"date",value:m,onChange:E=>x(E.target.value),className:"mt-1 block w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm dark:bg-slate-700 dark:text-white [color-scheme:light] dark:[color-scheme:dark]"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Đến ngày"}),i.jsx("input",{type:"date",value:g,onChange:E=>p(E.target.value),className:"mt-1 block w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm dark:bg-slate-700 dark:text-white [color-scheme:light] dark:[color-scheme:dark]"})]}),i.jsxs("div",{className:"md:col-span-2 lg:col-span-1",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Xem theo"}),i.jsxs("div",{className:"mt-1 flex rounded-md shadow-sm",children:[i.jsx("button",{onClick:()=>b("day"),className:`px-4 py-2 text-sm font-medium rounded-l-md border border-slate-300 dark:border-slate-600 ${v==="day"?"bg-sky-600 text-white":"bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-600"}`,children:"Ngày"}),i.jsx("button",{onClick:()=>b("week"),className:`px-4 py-2 text-sm font-medium border-t border-b border-slate-300 dark:border-slate-600 ${v==="week"?"bg-sky-600 text-white":"bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-600"}`,children:"Tuần"}),i.jsx("button",{onClick:()=>b("month"),className:`px-4 py-2 text-sm font-medium rounded-r-md border border-slate-300 dark:border-slate-600 ${v==="month"?"bg-sky-600 text-white":"bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-600"}`,children:"Tháng"})]})]}),i.jsx("div",{className:"lg:col-span-2",children:i.jsx("button",{onClick:F,className:"w-full bg-sky-600 text-white font-semibold py-2 px-4 rounded-lg shadow-sm hover:bg-sky-700 transition-colors",children:"Xem báo cáo"})})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"bg-sky-100 dark:bg-sky-900/50 p-5 rounded-lg border border-sky-200 dark:border-sky-800 flex items-start",children:[i.jsx("div",{className:"p-3 rounded-full bg-white dark:bg-sky-900 mr-4",children:i.jsx(Jp,{className:"w-6 h-6 text-sky-600 dark:text-sky-400"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-sky-800 dark:text-sky-300",children:"Tổng Doanh thu"}),i.jsx("p",{className:"text-2xl font-bold text-sky-800 dark:text-sky-200",children:Gn(ue)})]})]}),i.jsxs("div",{className:"bg-amber-100 dark:bg-amber-900/50 p-5 rounded-lg border border-amber-200 dark:border-amber-800 flex items-start",children:[i.jsx("div",{className:"p-3 rounded-full bg-white dark:bg-amber-900 mr-4",children:i.jsx(ln,{className:"w-6 h-6 text-amber-600 dark:text-amber-400"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-amber-800 dark:text-amber-300",children:"Tổng Chi phí"}),i.jsx("p",{className:"text-2xl font-bold text-amber-800 dark:text-amber-200",children:Gn(me)})]})]}),i.jsxs("div",{className:"bg-green-100 dark:bg-green-900/50 p-5 rounded-lg border border-green-200 dark:border-green-800 flex items-start",children:[i.jsx("div",{className:"p-3 rounded-full bg-white dark:bg-green-900 mr-4",children:i.jsx(Vc,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-green-800 dark:text-green-300",children:"Tổng Lợi nhuận"}),i.jsx("p",{className:"text-2xl font-bold text-green-800 dark:text-green-200",children:Gn(Te)})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsx("div",{className:"lg:col-span-2",children:i.jsx(CA,{data:k})}),i.jsx("div",{children:i.jsx(TA,{data:_})})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 sm:p-6 rounded-xl shadow-sm border border-slate-200/60 dark:border-slate-700",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-3",children:[i.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-slate-700 dark:text-slate-200",children:"Chi tiết Bán hàng theo Sản phẩm"}),i.jsxs("button",{onClick:()=>Q(),className:"flex items-center text-sm bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200 font-semibold py-2 px-3 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600",children:[i.jsx(_b,{className:"w-4 h-4 mr-2"})," Tải về"]})]}),i.jsx("div",{className:"lg:hidden space-y-4",children:$.length>0?$.map(E=>i.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg border border-slate-200 dark:border-slate-600",children:i.jsxs("div",{className:"flex justify-between items-start gap-3",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-100 truncate",children:E.partName}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 font-mono",children:E.sku})]}),i.jsxs("div",{className:"text-right flex-shrink-0",children:[i.jsx("p",{className:"font-bold text-lg text-sky-600 dark:text-sky-400",children:Gn(E.revenue)}),i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["SL: ",E.quantity]})]})]})},E.sku)):i.jsx("div",{className:"text-center p-8 text-slate-500 dark:text-slate-400",children:"Không có dữ liệu bán hàng."})}),i.jsx("div",{className:"hidden lg:block overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left",children:[i.jsx("thead",{className:"border-b dark:border-slate-700",children:i.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-700/50",children:[i.jsx("th",{className:"p-3 font-semibold text-slate-600 dark:text-slate-300",children:i.jsx("div",{onClick:()=>O("partName"),className:"cursor-pointer",children:"Sản phẩm"})}),i.jsx("th",{className:"p-3 font-semibold text-slate-600 dark:text-slate-300",children:i.jsx("div",{onClick:()=>O("sku"),className:"cursor-pointer",children:"SKU"})}),i.jsx("th",{className:"p-3 font-semibold text-slate-600 dark:text-slate-300 text-center",children:i.jsx("div",{onClick:()=>O("quantity"),className:"cursor-pointer",children:"Số lượng bán"})}),i.jsx("th",{className:"p-3 font-semibold text-slate-600 dark:text-slate-300 text-right",children:i.jsx("div",{onClick:()=>O("revenue"),className:"cursor-pointer",children:"Doanh thu"})})]})}),i.jsx("tbody",{children:$.length>0?$.map(E=>i.jsxs("tr",{className:"border-b dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[i.jsx("td",{className:"p-3 font-medium text-slate-800 dark:text-slate-200",children:E.partName}),i.jsx("td",{className:"p-3 text-slate-600 dark:text-slate-400",children:E.sku}),i.jsx("td",{className:"p-3 text-slate-800 dark:text-slate-200 font-medium text-center",children:E.quantity}),i.jsx("td",{className:"p-3 text-slate-900 dark:text-slate-100 font-semibold text-right",children:Gn(E.revenue)})]},E.sku)):i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"text-center py-8 text-slate-500 dark:text-slate-400",children:"Không có dữ liệu bán hàng."})})})]})}),Z>1&&i.jsx(kl,{currentPage:q,totalPages:Z,onPageChange:ee,itemsPerPage:bi,totalItems:oe.length})]})]})},ki=20,mc=({icon:t,title:e,value:s,color:a})=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-xl shadow-sm flex items-center border border-slate-200/60 dark:border-slate-700",children:[i.jsx("div",{className:`p-4 rounded-full ${a}`,children:On.cloneElement(t,{className:"w-7 h-7 text-white"})}),i.jsxs("div",{className:"ml-4",children:[i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 font-medium",children:e}),i.jsx("p",{className:"text-xl sm:text-2xl font-bold text-slate-800 dark:text-slate-100",children:s})]})]}),SA=({parts:t,transactions:e,currentBranchId:s,storeSettings:a})=>{const[c,f]=N.useState("low-stock"),[m,x]=N.useState(null),[g,p]=N.useState(1);On.useEffect(()=>{p(1),x(null)},[c]);const v=N.useMemo(()=>{const D=new Date,I=new Map;[...e].filter($=>$.type==="Xuất kho"&&$.branchId===s).sort(($,Z)=>new Date(Z.date).getTime()-new Date($.date).getTime()).forEach($=>{I.has($.partId)||I.set($.partId,$.date)});const q=t.map($=>{const Z=I.get($.id);if(Z){const Q=new Date(Z),O=Math.floor((D.getTime()-Q.getTime())/(1e3*60*60*24));return{...$,lastSoldDate:Z,daysSinceLastSale:O}}return $}),ee=t.filter($=>a.branches.some(Z=>{const Q=$.stock[Z.id]||0;return Q>0&&Q<5})),se=new Date;se.setDate(se.getDate()+30);const F=t.filter($=>$.expiryDate&&new Date($.expiryDate)<=se&&new Date($.expiryDate)>=D&&Object.values($.stock).some(Z=>Z>0)),oe=q.filter($=>($.stock[s]||0)>0&&$.daysSinceLastSale&&$.daysSinceLastSale>90);return{"low-stock":ee,"expiring-soon":F,"slow-moving":oe}},[t,e,s,a.branches]),b=N.useMemo(()=>{let D=[...v[c]];return m!==null&&D.sort((I,q)=>{let ee,se;if(m.key.startsWith("stock_")){const F=m.key.substring(6);ee=I.stock[F]||0,se=q.stock[F]||0}else ee=I[m.key],se=q[m.key];return ee==null?1:se==null?-1:ee<se?m.direction==="ascending"?-1:1:ee>se?m.direction==="ascending"?1:-1:0}),D},[v,c,m]),k=N.useMemo(()=>{const D=(g-1)*ki;return b.slice(D,D+ki)},[b,g]),w=Math.ceil(b.length/ki),M=D=>{let I="ascending";m&&m.key===D&&m.direction==="ascending"&&(I="descending"),x({key:D,direction:I})},A=D=>!m||m.key!==D?i.jsx("span",{className:"text-slate-400 dark:text-slate-500",children:"↑↓"}):m.direction==="ascending"?"▲":"▼",j=N.useMemo(()=>{const D=[{key:"name",label:"Tên Phụ tùng",visibleOn:["low-stock","expiring-soon","slow-moving"]},{key:"sku",label:"SKU",visibleOn:["low-stock","expiring-soon","slow-moving"]}],I=a.branches.map(ee=>({key:`stock_${ee.id}`,label:`Tồn kho (${ee.name})`,visibleOn:["low-stock","expiring-soon","slow-moving"]})),q=[{key:"expiryDate",label:"Ngày hết hạn",visibleOn:["expiring-soon"]},{key:"lastSoldDate",label:"Ngày bán cuối",visibleOn:["slow-moving"]},{key:"daysSinceLastSale",label:"Số ngày chưa bán",visibleOn:["slow-moving"]}];return[...D,...I,...q]},[a.branches]).filter(D=>D.visibleOn.includes(c));return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsx(mc,{icon:i.jsx(za,{}),title:"Sắp hết hàng",value:v["low-stock"].length,color:"bg-amber-500"}),i.jsx(mc,{icon:i.jsx(_i,{}),title:"Sắp hết hạn",value:v["expiring-soon"].length,color:"bg-red-500"}),i.jsx(mc,{icon:i.jsx(ln,{}),title:"Tồn kho lâu",value:v["slow-moving"].length,color:"bg-sky-500"})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200/60 dark:border-slate-700",children:[i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:i.jsxs("nav",{className:"-mb-px flex space-x-8 px-6","aria-label":"Tabs",children:[i.jsxs("button",{onClick:()=>f("low-stock"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ${c==="low-stock"?"border-indigo-500 dark:border-indigo-400 text-indigo-600 dark:text-indigo-400":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200 hover:border-slate-300 dark:hover:border-slate-600"}`,children:["Hàng sắp hết (",v["low-stock"].length,")"]}),i.jsxs("button",{onClick:()=>f("expiring-soon"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ${c==="expiring-soon"?"border-indigo-500 dark:border-indigo-400 text-indigo-600 dark:text-indigo-400":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200 hover:border-slate-300 dark:hover:border-slate-600"}`,children:["Hàng sắp hết hạn (",v["expiring-soon"].length,")"]}),i.jsxs("button",{onClick:()=>f("slow-moving"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ${c==="slow-moving"?"border-indigo-500 dark:border-indigo-400 text-indigo-600 dark:text-indigo-400":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200 hover:border-slate-300 dark:hover:border-slate-600"}`,children:["Hàng tồn kho lâu (",v["slow-moving"].length,")"]})]})}),i.jsxs("div",{className:"p-4 sm:p-6",children:[i.jsx("div",{className:"lg:hidden space-y-4",children:k.length>0?k.map(D=>i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg border border-slate-200 dark:border-slate-600 space-y-3",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-100",children:D.name}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 font-mono",children:D.sku})]}),i.jsx("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 text-sm border-t border-b border-slate-200 dark:border-slate-600 py-3",children:a.branches.map(I=>{const q=D.stock[I.id]||0;return i.jsxs("div",{children:[i.jsxs("span",{className:"text-slate-500 dark:text-slate-400",children:[I.name,": "]}),i.jsx("span",{className:`font-bold ${q>0&&q<5?"text-amber-600 dark:text-amber-400":"text-slate-800 dark:text-slate-200"}`,children:q})]},I.id)})}),i.jsxs("div",{children:[c==="expiring-soon"&&D.expiryDate&&i.jsxs("div",{className:"flex items-center text-sm text-red-600 dark:text-red-400",children:[i.jsx(za,{className:"w-4 h-4 mr-2"}),i.jsxs("span",{className:"font-medium",children:["Hết hạn vào: ",D.expiryDate]})]}),c==="slow-moving"&&D.daysSinceLastSale!==void 0&&i.jsxs("div",{className:"flex items-center text-sm",children:[i.jsx(_i,{className:"w-4 h-4 mr-2 text-sky-600 dark:text-sky-400"}),i.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"Chưa bán trong: "}),i.jsxs("span",{className:"font-bold text-sky-600 dark:text-sky-400 ml-1",children:[D.daysSinceLastSale," ngày"]})]})]})]},D.id)):i.jsx("div",{className:"text-center p-8 text-slate-500 dark:text-slate-400",children:"Không có sản phẩm nào trong danh mục này."})}),i.jsx("div",{className:"hidden lg:block overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left min-w-max",children:[i.jsx("thead",{className:"border-b border-slate-200 dark:border-slate-700",children:i.jsx("tr",{className:"bg-slate-50 dark:bg-slate-700/50",children:j.map(D=>i.jsx("th",{className:"p-4 font-semibold text-slate-600 dark:text-slate-300",children:i.jsxs("div",{onClick:()=>M(D.key),className:"flex items-center space-x-2 cursor-pointer select-none",children:[i.jsx("span",{children:D.label}),i.jsx("span",{className:"text-slate-500",children:A(D.key)})]})},D.key))})}),i.jsx("tbody",{children:k.length>0?k.map(D=>i.jsx("tr",{className:"border-b border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700/50",children:j.map(I=>{if(I.key.startsWith("stock_")){const q=I.key.substring(6),ee=D.stock[q]||0;return i.jsx("td",{className:`p-4 font-medium ${ee>0&&ee<5?"text-amber-600 dark:text-amber-400 font-bold":"text-slate-900 dark:text-slate-100"}`,children:ee},I.key)}switch(I.key){case"name":return i.jsx("td",{className:"p-4 text-slate-900 dark:text-slate-100 font-semibold",children:D.name},I.key);case"sku":return i.jsx("td",{className:"p-4 text-slate-600 dark:text-slate-300",children:D.sku},I.key);case"expiryDate":return i.jsx("td",{className:"p-4 text-red-600 dark:text-red-400 font-medium",children:D.expiryDate},I.key);case"lastSoldDate":return i.jsx("td",{className:"p-4 text-slate-700 dark:text-slate-200",children:D.lastSoldDate||"Chưa bán"},I.key);case"daysSinceLastSale":return i.jsx("td",{className:"p-4 text-sky-600 dark:text-sky-400 font-medium",children:D.daysSinceLastSale},I.key);default:return i.jsx("td",{},I.key)}})},D.id)):i.jsx("tr",{children:i.jsx("td",{colSpan:j.length,className:"text-center p-8 text-slate-500 dark:text-slate-400",children:"Không có sản phẩm nào trong danh mục này."})})})]})}),b.length>0&&i.jsx(kl,{currentPage:g,totalPages:w,onPageChange:p,itemsPerPage:ki,totalItems:b.length})]})]})]})},wA=t=>t.includes("/dashboard")?"Bảng điều khiển":t.includes("/services")?"Quản lý Dịch vụ":t.includes("/sales")?"Bán hàng":t.includes("/inventory")?"Quản lý Kho":t.includes("/customers")?"Khách hàng":t.includes("/cashflow")?"Quản lý Thu Chi":t.includes("/reports/revenue")?"Báo cáo Doanh thu":t.includes("/reports/inventory")?"Báo cáo Tồn kho":t.includes("/users")?"Nhân viên":t.includes("/ai-assistant")?"Trợ lý AI":"MotoCare Pro",EA=({onMenuClick:t})=>{const e=Jn(),s=wA(e.pathname);return i.jsx("header",{className:"lg:hidden bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 sticky top-0 z-20",children:i.jsxs("div",{className:"flex items-center justify-between p-4 h-16",children:[i.jsx("button",{onClick:t,className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white p-2 -ml-2",children:i.jsx(Eb,{className:"h-6 w-6"})}),i.jsx("h1",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100",children:s}),i.jsx("div",{className:"w-6"})," "]})})},MA=({onLogin:t})=>{const[e,s]=N.useState(""),[a,c]=N.useState(""),[f,m]=N.useState(""),x=g=>{g.preventDefault(),m(""),t(e,a)||m("Tên đăng nhập hoặc mật khẩu không đúng.")};return i.jsx("div",{className:"min-h-screen bg-slate-100 dark:bg-slate-900 flex flex-col justify-center items-center p-4 font-sans",children:i.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-slate-800 rounded-xl shadow-lg p-8 space-y-8",children:[i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("div",{className:"bg-sky-600 p-3 rounded-full mb-4",children:i.jsx(Ga,{className:"w-8 h-8 text-white"})}),i.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-800 dark:text-slate-100",children:"MotoCare Pro"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Đăng nhập vào tài khoản của bạn"})]}),i.jsxs("form",{onSubmit:x,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Số điện thoại đăng nhập"}),i.jsx("input",{id:"username",type:"text",value:e,onChange:g=>s(g.target.value),className:"mt-1 block w-full px-3 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 text-slate-900 dark:text-slate-200",required:!0,autoFocus:!0})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Mật khẩu"}),i.jsx("input",{id:"password",type:"password",value:a,onChange:g=>c(g.target.value),className:"mt-1 block w-full px-3 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 text-slate-900 dark:text-slate-200",required:!0})]}),f&&i.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 text-center",children:f}),i.jsx("button",{type:"submit",className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-semibold text-white bg-sky-600 hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sky-500 transition-colors",children:"Đăng nhập"})]})]})})},Ds=t=>isNaN(t)?"0":new Intl.NumberFormat("vi-VN").format(t),AA=({isOpen:t,onClose:e,onCapture:s})=>{const a=N.useRef(null),c=N.useRef(null);N.useEffect(()=>(t&&navigator.mediaDevices.getUserMedia({video:!0}).then(m=>{c.current=m,a.current&&(a.current.srcObject=m)}).catch(m=>{console.error("Error accessing camera: ",m),alert("Không thể truy cập camera. Vui lòng kiểm tra quyền truy cập trong trình duyệt."),e()}),()=>{c.current&&(c.current.getTracks().forEach(m=>m.stop()),c.current=null)}),[t,e]);const f=()=>{if(a.current){const m=document.createElement("canvas");m.width=a.current.videoWidth,m.height=a.current.videoHeight;const x=m.getContext("2d");x==null||x.drawImage(a.current,0,0,m.width,m.height),m.toBlob(g=>{g&&s(g)},"image/jpeg",.95)}};return t?i.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-80 z-[60] flex flex-col justify-center items-center p-4",children:[i.jsx("video",{ref:a,autoPlay:!0,playsInline:!0,className:"w-full max-w-lg rounded-lg mb-4 border-2 border-slate-600"}),i.jsxs("div",{className:"flex space-x-4",children:[i.jsx("button",{onClick:e,className:"bg-slate-200 text-slate-800 font-semibold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Hủy"}),i.jsx("button",{onClick:f,className:"bg-sky-600 text-white font-semibold py-2 px-6 rounded-lg hover:bg-sky-700",children:"Chụp ảnh"})]})]}):null},_A=({isOpen:t,onClose:e,onSaveAndAddToCart:s,parts:a})=>{const[c,f]=N.useState({name:"",description:"",sku:"",category:"",quantity:1,price:0,sellingPrice:0}),[m,x]=N.useState(1),[g,p]=N.useState("tháng"),v=N.useMemo(()=>Array.from(new Set(a.map(Q=>Q.category).filter(Q=>!!Q))).sort(),[a]),[b,k]=N.useState(v),[w,M]=N.useState(!1),[A,_]=N.useState(""),[j,D]=N.useState(null),[I,q]=N.useState(!1),ee=N.useRef(null);N.useEffect(()=>{t&&(f({name:"",description:"",sku:"",category:"",quantity:1,price:0,sellingPrice:0}),x(1),p("tháng"),k(v),M(!1),_(""),D(null),q(!1))},[t,v]);const se=Q=>{const{name:O,value:ue}=Q.target;if(O==="price"){const me=parseFloat(ue)||0,Te=Math.round(me*1.4/1e3)*1e3;f(E=>({...E,price:me,sellingPrice:Te}))}else f(O==="quantity"?me=>({...me,quantity:parseInt(ue)||1}):O==="sellingPrice"?me=>({...me,sellingPrice:parseFloat(ue)||0}):me=>({...me,[O]:ue}))},F=()=>{const Q=A.trim();if(Q&&!b.includes(Q)){const O=[...b,Q].sort();k(O),f(ue=>({...ue,category:Q}))}_(""),M(!1)},oe=Q=>{var ue;const O=(ue=Q.target.files)==null?void 0:ue[0];O&&O.type.startsWith("image/")&&D({file:O,previewUrl:URL.createObjectURL(O)}),Q.target&&(Q.target.value="")},$=Q=>{const O=new File([Q],`capture-${Date.now()}.jpg`,{type:"image/jpeg"});D({file:O,previewUrl:URL.createObjectURL(O)}),q(!1)},Z=()=>{const Q=a.find(ue=>ue.name.toLowerCase()===c.name.toLowerCase()||ue.sku.toLowerCase()===c.sku.toLowerCase()),O={id:(Q==null?void 0:Q.id)||`P${Date.now()}`,name:c.name,sku:c.sku||`SKU${Date.now()}`,description:c.description,category:c.category,price:c.price,sellingPrice:c.sellingPrice,stock:(Q==null?void 0:Q.stock)||{},warrantyPeriod:`${m} ${g}`};s(O,c.quantity,c.price,c.sellingPrice,`${m} ${g}`),e()};return t?i.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:[i.jsx(AA,{isOpen:I,onClose:()=>q(!1),onCapture:$}),i.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-lg shadow-xl w-full max-w-2xl max-h-[95vh] flex flex-col",children:[i.jsxs("div",{className:"p-4 border-b dark:border-slate-700 flex justify-between items-center",children:[i.jsx("h2",{className:"text-lg sm:text-xl font-bold text-slate-800 dark:text-slate-100",children:"Thêm sản phẩm mới"}),i.jsx("button",{onClick:e,children:i.jsx(on,{className:"w-6 h-6 text-slate-500 dark:text-slate-300"})})]}),i.jsxs("div",{className:"p-6 space-y-4 overflow-y-auto",children:[i.jsxs("div",{className:"p-4 bg-sky-50 dark:bg-sky-900/50 border border-sky-200 dark:border-sky-800 rounded-lg flex items-start space-x-4",children:[i.jsx("input",{type:"file",ref:ee,onChange:oe,accept:"image/*",className:"hidden"}),j?i.jsxs("div",{className:"relative w-24 h-24 flex-shrink-0",children:[i.jsx("img",{src:j.previewUrl,alt:"Preview",className:"w-full h-full object-cover rounded-lg shadow-md"}),i.jsx("button",{type:"button",onClick:()=>D(null),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 shadow-md hover:bg-red-600 transition-transform hover:scale-110",children:i.jsx(on,{className:"w-4 h-4"})})]}):i.jsx("div",{className:"w-24 h-24 bg-slate-200 dark:bg-slate-700 rounded-lg flex items-center justify-center flex-shrink-0",children:i.jsx(ln,{className:"w-10 h-10 text-slate-400 dark:text-slate-500"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 mb-2",children:"Tải lên ảnh sản phẩm để dễ nhận biết và quản lý hơn."}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs("button",{type:"button",onClick:()=>{var Q;return(Q=ee.current)==null?void 0:Q.click()},className:"flex items-center gap-2 text-sm bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-200 font-semibold py-1.5 px-3 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-600",children:[i.jsx(yt,{className:"w-4 h-4"})," Tải lên"]}),i.jsxs("button",{type:"button",onClick:()=>q(!0),className:"flex items-center gap-2 text-sm bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-200 font-semibold py-1.5 px-3 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-600",children:[i.jsx(Yp,{className:"w-4 h-4"})," Chụp ảnh"]})]})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:["Tên sản phẩm ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",name:"name",value:c.name,onChange:se,className:"mt-1 w-full p-2 border rounded-md bg-white dark:bg-slate-800 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-slate-100"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Mô tả"}),i.jsx("textarea",{name:"description",value:c.description,onChange:se,rows:2,className:"mt-1 w-full p-2 border rounded-md bg-white dark:bg-slate-800 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-slate-100"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Danh mục sản phẩm"}),i.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[i.jsxs("select",{name:"category",value:c.category,onChange:se,className:"w-full p-2 border rounded-md bg-white dark:bg-slate-800 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-slate-100 focus:outline-none focus:ring-sky-500 focus:border-sky-500",children:[i.jsx("option",{value:"",children:"-- Chọn hoặc tạo mới --"}),b.map(Q=>i.jsx("option",{value:Q,children:Q},Q))]}),i.jsx("button",{type:"button",onClick:()=>M(Q=>!Q),className:"p-2.5 bg-slate-100 dark:bg-slate-700 rounded-md hover:bg-slate-200 dark:hover:bg-slate-600 flex-shrink-0",title:"Thêm danh mục mới",children:i.jsx(yt,{className:"w-5 h-5 text-slate-700 dark:text-slate-200"})})]}),w&&i.jsxs("div",{className:"mt-2 flex items-center space-x-2",children:[i.jsx("input",{type:"text",value:A,onChange:Q=>_(Q.target.value),placeholder:"Tên danh mục mới...",className:"block w-full p-2 border rounded-md bg-white dark:bg-slate-800 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-slate-100 focus:outline-none focus:ring-sky-500 focus:border-sky-500",autoFocus:!0,onKeyDown:Q=>{Q.key==="Enter"&&(Q.preventDefault(),F())}}),i.jsx("button",{type:"button",onClick:F,className:"px-4 py-2 bg-sky-600 text-white rounded-md text-sm font-medium hover:bg-sky-700",children:"Lưu"})]})]}),i.jsxs("div",{className:"border-t pt-4 dark:border-slate-700",children:[i.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-200",children:"Thông tin nhập kho:"}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mt-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Số lượng:"}),i.jsx("input",{type:"number",name:"quantity",value:c.quantity,onChange:se,className:"mt-1 w-full p-2 border rounded-md bg-white dark:bg-slate-800 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-slate-100"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Giá nhập:"}),i.jsx("input",{type:"number",name:"price",value:c.price,onChange:se,className:"mt-1 w-full p-2 border rounded-md bg-white dark:bg-slate-800 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-slate-100"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Giá bán lẻ:"}),i.jsx("input",{type:"number",name:"sellingPrice",value:c.sellingPrice,onChange:se,className:"mt-1 w-full p-2 border rounded-md bg-white dark:bg-slate-800 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-slate-100"})]})]})]}),i.jsxs("div",{className:"border-t pt-4 dark:border-slate-700",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Bảo hành"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"number",value:m,onChange:Q=>x(parseInt(Q.target.value)||0),className:"w-20 p-2 border rounded-md bg-white dark:bg-slate-800 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-slate-100"}),i.jsxs("select",{value:g,onChange:Q=>p(Q.target.value),className:"p-2 border rounded-md bg-white dark:bg-slate-800 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-slate-100",children:[i.jsx("option",{value:"ngày",children:"ngày"}),i.jsx("option",{value:"tuần",children:"tuần"}),i.jsx("option",{value:"tháng",children:"tháng"}),i.jsx("option",{value:"năm",children:"năm"})]})]})]})]}),i.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-800 border-t dark:border-slate-700 flex justify-end",children:i.jsx("button",{onClick:Z,className:"bg-orange-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-orange-600",children:"Lưu và Thêm vào giỏ hàng"})})]})]}):null},RA=({isOpen:t,onClose:e,onSave:s,initialName:a=""})=>{const[c,f]=N.useState({name:a,phone:"",address:"",email:"",notes:""});N.useEffect(()=>{t&&f({name:a,phone:"",address:"",email:"",notes:""})},[t,a]);const m=()=>{const x={id:`SUP${Date.now()}`,name:c.name,phone:c.phone,address:c.address,email:c.email};s(x),e()};return t?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-lg shadow-xl w-full max-w-lg",children:[i.jsxs("div",{className:"p-4 border-b dark:border-slate-700 flex justify-between items-center",children:[i.jsx("h2",{className:"text-lg sm:text-xl font-bold text-slate-800 dark:text-slate-100",children:"Thêm nhà cung cấp"}),i.jsx("button",{onClick:e,children:i.jsx(on,{className:"w-6 h-6 text-slate-500 dark:text-slate-300"})})]}),i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"dark:text-slate-300",children:"Tên nhà cung cấp (*)"}),i.jsx("input",{type:"text",value:c.name,onChange:x=>f({...c,name:x.target.value}),className:"w-full p-2 border rounded-md mt-1 bg-white dark:bg-slate-800 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-slate-100"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"dark:text-slate-300",children:"Điện thoại"}),i.jsx("input",{type:"text",value:c.phone,onChange:x=>f({...c,phone:x.target.value}),className:"w-full p-2 border rounded-md mt-1 bg-white dark:bg-slate-800 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-slate-100"})]})]}),i.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-800 border-t dark:border-slate-700 flex justify-end",children:i.jsx("button",{onClick:m,className:"bg-orange-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-orange-600",children:"Lưu"})})]})}):null},DA=({count:t,total:e,onClick:s})=>i.jsx("div",{className:"lg:hidden fixed bottom-4 right-4 z-30",children:i.jsxs("button",{onClick:s,className:"bg-orange-500 text-white font-bold rounded-lg shadow-lg flex items-center py-3 px-5 hover:bg-orange-600 transition-transform hover:scale-105",children:[i.jsx(Ps,{className:"w-6 h-6"}),i.jsx("span",{className:"bg-white text-orange-600 rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold ml-3",children:t}),i.jsx("span",{className:"ml-3 text-lg",children:Ds(e)})]})}),IA=({parts:t,setParts:e,transactions:s,setTransactions:a,suppliers:c,setSuppliers:f,storeSettings:m,currentBranchId:x})=>{const[g,p]=N.useState([]),[v,b]=N.useState(""),[k,w]=N.useState(!1),[M,A]=N.useState(!1),[_,j]=N.useState(""),[D,I]=N.useState(null),[q,ee]=N.useState(0),[se,F]=N.useState("full"),[oe,$]=N.useState("cash"),[Z,Q]=N.useState(!0),[O,ue]=N.useState({}),[me,Te]=N.useState(!1),[E,X]=N.useState("products"),re=N.useRef(null),ie=Rc();N.useEffect(()=>{const ne=be=>{re.current&&!re.current.contains(be.target)&&Te(!1)};return document.addEventListener("mousedown",ne),()=>document.removeEventListener("mousedown",ne)},[]);const ce=N.useMemo(()=>t.filter(ne=>ne.name.toLowerCase().includes(v.toLowerCase())||ne.sku.toLowerCase().includes(v.toLowerCase())),[t,v]),T=ne=>{ue(be=>{const we={...be};return delete we[ne],we})},U=(ne,be=1)=>{p(we=>we.find(He=>He.partId===ne.id)?we.map(He=>He.partId===ne.id?{...He,quantity:He.quantity+be}:He):[...we,{partId:ne.id,partName:ne.name,sku:ne.sku,quantity:be,purchasePrice:ne.price,sellingPrice:ne.sellingPrice,warrantyPeriod:ne.warrantyPeriod}])},J=(ne,be,we,rt,He)=>{const pt=!t.some(ze=>ze.id===ne.id),vt={...ne,price:we,sellingPrice:rt,warrantyPeriod:He};e(pt?ze=>[vt,...ze]:ze=>ze.map(nt=>nt.id===vt.id?vt:nt)),U(vt,be)},G=N.useMemo(()=>g.reduce((ne,be)=>ne+be.purchasePrice*be.quantity,0),[g]),de=N.useMemo(()=>G-q,[G,q]),ge=N.useMemo(()=>g.reduce((ne,be)=>ne+be.quantity,0),[g]),V=(ne,be,we)=>{if(!g.find(ze=>ze.partId===ne))return;const He=`${ne}-purchase-price`,pt=`${ne}-selling-price`,vt=`${ne}-qty`;if(be==="purchasePrice"){const ze=t.find(nt=>nt.id===ne);if(ze&&ze.price>0){const nt=(we-ze.price)/ze.price*100;nt>10?ue(St=>({...St,[He]:`Giá nhập mới cao hơn ${Math.round(nt)}% so với giá cũ.`})):we<ze.price?ue(St=>({...St,[He]:`Giá nhập mới thấp hơn giá cũ (${Ds(ze.price)}).`})):T(He)}}if(be==="sellingPrice"){const ze=t.find(nt=>nt.id===ne);ze&&ze.sellingPrice>0&&(we<ze.sellingPrice?ue(nt=>({...nt,[pt]:`Giá bán mới thấp hơn giá cũ (${Ds(ze.sellingPrice)}).`})):T(pt))}be==="quantity"&&(we>500?ue(ze=>({...ze,[vt]:`Số lượng nhập (${we}) rất lớn.`})):T(vt)),p(ze=>ze.map(nt=>nt.partId===ne?{...nt,[be]:we}:nt).filter(nt=>nt.quantity>0))},ae=()=>{const ne=`PN${Date.now()}`,be=g.map(we=>({id:`TXN-${ne}-${we.partId}`,type:"Nhập kho",partId:we.partId,partName:we.partName,quantity:we.quantity,date:new Date().toISOString().split("T")[0],notes:`Phiếu nhập ${ne}`,unitPrice:we.purchasePrice,totalPrice:we.purchasePrice*we.quantity,branchId:x}));a(we=>[...be,...we]),e(we=>we.map(rt=>{const He=g.find(pt=>pt.partId===rt.id);if(He){const pt={...rt.stock};return pt[x]=(pt[x]||0)+He.quantity,{...rt,stock:pt,price:He.purchasePrice,sellingPrice:He.sellingPrice}}return rt})),alert("Nhập kho thành công!"),ie("/inventory")},xe=N.useMemo(()=>c.filter(ne=>ne.name.toLowerCase().includes(_.toLowerCase())||ne.phone&&ne.phone.includes(_)),[c,_]);return i.jsxs("div",{className:"lg:flex lg:h-[calc(100vh-88px)] lg:gap-6",children:[i.jsx(_A,{isOpen:k,onClose:()=>w(!1),onSaveAndAddToCart:J,parts:t}),i.jsx(RA,{isOpen:M,onClose:()=>A(!1),onSave:ne=>{f(be=>[ne,...be]),I(ne.id),j(ne.name)},initialName:_}),ge>0&&E==="products"&&i.jsx(DA,{count:ge,total:de,onClick:()=>X("cart")}),i.jsxs("div",{className:`${E==="products"?"flex":"hidden"} lg:flex flex-col bg-white dark:bg-slate-800 p-4 lg:p-6 rounded-lg shadow-sm border border-slate-200/60 dark:border-slate-700 h-full lg:flex-1`,children:[i.jsxs("div",{className:"flex justify-between items-center mb-4 flex-shrink-0",children:[i.jsx("h1",{className:"text-lg sm:text-xl font-bold text-slate-800 dark:text-slate-100",children:"Chọn sản phẩm nhập kho"}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("button",{onClick:()=>ie("/inventory"),className:"flex items-center bg-slate-200 dark:bg-slate-700 text-slate-800 dark:text-slate-200 font-semibold py-2 px-3 rounded-lg shadow-sm hover:bg-slate-300 dark:hover:bg-slate-600",children:i.jsx(mn,{className:"w-5 h-5"})}),i.jsxs("button",{onClick:()=>w(!0),className:"flex items-center bg-sky-600 text-white font-semibold py-2 px-3 rounded-lg shadow-sm hover:bg-sky-700",children:[i.jsx(yt,{})," ",i.jsx("span",{className:"ml-2 hidden sm:inline",children:"Thêm sản phẩm mới"})]})]})]}),i.jsx("input",{type:"text",placeholder:"Tìm theo tên sản phẩm, SKU...",value:v,onChange:ne=>b(ne.target.value),className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg mb-4 text-slate-900 dark:text-slate-100 bg-white dark:bg-slate-700 flex-shrink-0"}),i.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 pr-2 -mr-2",children:ce.map(ne=>i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-2 rounded-lg flex items-center justify-between border border-slate-200 dark:border-slate-600/50",children:[i.jsxs("div",{className:"flex items-center overflow-hidden",children:[i.jsx("div",{className:"w-10 h-10 bg-slate-200 dark:bg-slate-600 rounded-md flex items-center justify-center mr-3 flex-shrink-0",children:i.jsx(ln,{className:"w-6 h-6 text-slate-500 dark:text-slate-400"})}),i.jsxs("div",{className:"overflow-hidden",children:[i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200 text-sm truncate",children:ne.name}),i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 truncate",children:[ne.sku," | Tồn kho: ",ne.stock[x]||0]})]})]}),i.jsx("button",{onClick:()=>U(ne),className:"p-2 bg-sky-100 dark:bg-sky-900/50 text-sky-700 dark:text-sky-300 rounded-full hover:bg-sky-200 dark:hover:bg-sky-800/50 flex-shrink-0 ml-2",children:i.jsx(yt,{className:"w-5 h-5"})})]},ne.id))})]}),i.jsxs("div",{className:`${E==="cart"?"flex":"hidden"} lg:flex w-full lg:w-[520px] flex-shrink-0 bg-white dark:bg-slate-800 p-4 lg:p-6 rounded-lg shadow-sm border border-slate-200/60 dark:border-slate-700 flex-col h-full`,children:[i.jsxs("div",{className:"lg:hidden flex items-center mb-4 flex-shrink-0",children:[i.jsx("button",{onClick:()=>X("products"),className:"p-2 mr-2 -ml-2 text-slate-600 dark:text-slate-300",children:i.jsx(mn,{className:"w-6 h-6"})}),i.jsx("h2",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100",children:"Hoàn tất Phiếu nhập"})]}),g.length===0?i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center text-slate-500 dark:text-slate-400",children:[i.jsx(Ps,{className:"w-16 h-16 text-slate-300 dark:text-slate-600 mb-4"}),i.jsx("h2",{className:"text-lg font-semibold",children:"Giỏ hàng nhập kho"}),i.jsx("p",{children:"Vui lòng thêm sản phẩm cần nhập vào giỏ hàng."})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex-1 overflow-y-auto pr-3 -mr-3 space-y-4",children:[i.jsxs("div",{ref:re,children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Nhà cung cấp (NCC):"}),i.jsxs("div",{className:"relative mt-1",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{type:"text",placeholder:"Tìm nhà cung cấp",value:_,onChange:ne=>{j(ne.target.value),I(null),Te(!0)},onFocus:()=>Te(!0),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-l-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),i.jsx("button",{type:"button",onClick:()=>A(!0),className:"p-2 bg-slate-100 dark:bg-slate-600 border-t border-b border-r border-slate-300 dark:border-slate-600 rounded-r-md hover:bg-slate-200 dark:hover:bg-slate-500 h-[42px]",title:"Thêm NCC mới",children:i.jsx(yt,{className:"w-5 h-5 text-slate-700 dark:text-slate-200"})})]}),me&&i.jsx("div",{className:"absolute z-10 w-full bg-white dark:bg-slate-700 border dark:border-slate-600 rounded-md mt-1 shadow-lg max-h-48 overflow-y-auto",children:xe.map(ne=>i.jsxs("div",{onClick:()=>{I(ne.id),j(ne.name),Te(!1)},className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer text-sm text-slate-800 dark:text-slate-200",children:[ne.name," ",i.jsxs("span",{className:"text-slate-500 dark:text-slate-400",children:[" - ",ne.phone]})]},ne.id))})]})]}),i.jsxs("div",{children:[i.jsx("h2",{className:"font-semibold text-slate-800 dark:text-slate-100 mb-2",children:"Giỏ hàng nhập kho:"}),i.jsx("div",{className:"space-y-3",children:g.map(ne=>i.jsxs("div",{className:"bg-slate-50/70 dark:bg-slate-700/50 p-3 rounded-lg border border-slate-200 dark:border-slate-600",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsx("p",{className:"font-medium text-sm text-slate-800 dark:text-slate-200 flex-1 pr-2",children:ne.partName}),i.jsx("button",{onClick:()=>p(be=>be.filter(we=>we.partId!==ne.partId)),className:"text-red-500",children:i.jsx(fn,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-x-4 gap-y-2 items-center",children:[i.jsx("div",{className:"col-span-1 text-sm text-slate-600 dark:text-slate-400",children:"Số lượng:"}),i.jsxs("div",{className:"col-span-2 flex items-center gap-1",children:[i.jsx("button",{onClick:()=>V(ne.partId,"quantity",ne.quantity-1),className:"p-1 border dark:border-slate-500 rounded-md text-slate-600 dark:text-slate-300",children:i.jsx(Pi,{className:"w-4 h-4"})}),i.jsx("input",{type:"number",value:ne.quantity,onChange:be=>V(ne.partId,"quantity",parseInt(be.target.value)),className:"w-12 text-center border-slate-300 dark:border-slate-500 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 rounded-md text-sm p-1"}),i.jsx("button",{onClick:()=>V(ne.partId,"quantity",ne.quantity+1),className:"p-1 border dark:border-slate-500 rounded-md text-slate-600 dark:text-slate-300",children:i.jsx(yt,{className:"w-4 h-4"})})]}),i.jsx("div",{className:"col-span-1 text-sm text-slate-600 dark:text-slate-400",children:"Giá nhập:"}),i.jsx("div",{className:"col-span-2",children:i.jsx("input",{type:"number",value:ne.purchasePrice,onChange:be=>V(ne.partId,"purchasePrice",parseFloat(be.target.value)),className:"w-full p-1 border rounded-md text-right text-sm bg-white dark:bg-slate-700 border-slate-300 dark:border-slate-500 text-slate-900 dark:text-slate-100"})}),i.jsx("div",{className:"col-span-1 text-sm text-slate-600 dark:text-slate-400",children:"Giá bán:"}),i.jsx("div",{className:"col-span-2",children:i.jsx("input",{type:"number",value:ne.sellingPrice,onChange:be=>V(ne.partId,"sellingPrice",parseFloat(be.target.value)),className:"w-full p-1 border rounded-md text-right text-sm bg-white dark:bg-slate-700 border-slate-300 dark:border-slate-500 text-slate-900 dark:text-slate-100"})}),i.jsx("div",{className:"col-span-1 text-sm text-slate-600 dark:text-slate-300 font-semibold",children:"Thành tiền:"}),i.jsx("div",{className:"col-span-2 text-right font-semibold text-slate-900 dark:text-slate-100",children:Ds(ne.quantity*ne.purchasePrice)})]}),i.jsxs("div",{className:"mt-2 space-y-1",children:[O[`${ne.partId}-purchase-price`]&&i.jsxs("p",{className:"text-xs text-amber-600 dark:text-amber-400 flex items-center",children:[i.jsx(za,{className:"w-4 h-4 mr-1"})," ",O[`${ne.partId}-purchase-price`]]}),O[`${ne.partId}-selling-price`]&&i.jsxs("p",{className:"text-xs text-amber-600 dark:text-amber-400 flex items-center",children:[i.jsx(za,{className:"w-4 h-4 mr-1"})," ",O[`${ne.partId}-selling-price`]]}),O[`${ne.partId}-qty`]&&i.jsxs("p",{className:"text-xs text-amber-600 dark:text-amber-400 flex items-center",children:[i.jsx(za,{className:"w-4 h-4 mr-1"})," ",O[`${ne.partId}-qty`]]})]})]},ne.partId))})]}),i.jsxs("div",{className:"space-y-1 text-sm pt-2 text-slate-800 dark:text-slate-200",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Tổng tiền hàng"}),i.jsx("span",{children:Ds(G)})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{children:"Giảm giá"}),i.jsx("input",{type:"number",value:q||"",onChange:ne=>ee(parseFloat(ne.target.value)||0),placeholder:"0",className:"w-24 p-1 border rounded-md text-right bg-white dark:bg-slate-700 border-slate-300 dark:border-slate-500 text-slate-900 dark:text-slate-100"})]}),i.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[i.jsx("span",{children:"Phải trả NCC"}),i.jsx("span",{className:"text-sky-600 dark:text-sky-400",children:Ds(de)})]})]}),i.jsxs("div",{className:"border-t pt-4 mt-2 dark:border-slate-600",children:[i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-2",children:"Thanh toán:"}),i.jsxs("div",{className:"flex gap-4 text-sm text-slate-700 dark:text-slate-300",children:[i.jsxs("label",{children:[i.jsx("input",{type:"radio",name:"paymentStatus",checked:se==="partial",onChange:()=>F("partial"),className:"mr-1"})," Thanh toán một phần"]}),i.jsxs("label",{children:[i.jsx("input",{type:"radio",name:"paymentStatus",checked:se==="full",onChange:()=>F("full"),className:"mr-1"})," Thanh toán đủ"]})]}),i.jsxs("div",{className:"flex gap-4 text-sm mt-2 text-slate-700 dark:text-slate-300",children:[i.jsxs("label",{children:[i.jsx("input",{type:"radio",name:"paymentMethod",checked:oe==="cash",onChange:()=>$("cash"),className:"mr-1"})," Tiền mặt"]}),i.jsxs("label",{children:[i.jsx("input",{type:"radio",name:"paymentMethod",checked:oe==="transfer",onChange:()=>$("transfer"),className:"mr-1"})," Chuyển khoản"]})]})]}),i.jsxs("div",{className:"border-t pt-4 mt-2 dark:border-slate-600",children:[i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-2",children:"Thời gian nhập hàng:"}),i.jsxs("div",{className:"flex gap-4 text-sm text-slate-700 dark:text-slate-300",children:[i.jsxs("label",{children:[i.jsx("input",{type:"radio",name:"receiptTime",checked:Z,onChange:()=>Q(!0),className:"mr-1"})," Thời gian hiện tại"]}),i.jsxs("label",{children:[i.jsx("input",{type:"radio",name:"receiptTime",checked:!Z,onChange:()=>Q(!1),className:"mr-1"})," Tùy chỉnh"]})]})]})]}),i.jsx("div",{className:"mt-auto pt-4 border-t dark:border-slate-700 flex-shrink-0",children:i.jsxs("div",{className:"flex justify-end gap-3",children:[i.jsx("button",{className:"bg-slate-200 dark:bg-slate-600 text-slate-800 dark:text-slate-200 font-bold py-3 px-6 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"LƯU NHÁP"}),i.jsx("button",{onClick:ae,className:"bg-orange-500 text-white font-bold py-3 px-6 rounded-lg hover:bg-orange-600",children:"NHẬP KHO"})]})})]})]})]})},Ba=t=>isNaN(t)?"0 ₫":new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(t),jA=({isOpen:t,onClose:e,onSave:s})=>{const[a,c]=N.useState(""),[f,m]=N.useState(""),[x,g]=N.useState("Khách hàng");N.useEffect(()=>{t&&(c(""),m(""),g("Khách hàng"))},[t]);const p=()=>{a&&(s({name:a,phone:f,type:[x]}),e())};return t?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-[60] flex justify-center items-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-lg",children:[i.jsxs("div",{className:"p-4 border-b dark:border-slate-700 flex justify-between items-center",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:"Thêm liên hệ"}),i.jsx("button",{onClick:e,children:i.jsx(on,{className:"w-6 h-6 text-slate-500 dark:text-slate-300"})})]}),i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Tên (*)"}),i.jsx("input",{type:"text",value:a,onChange:v=>c(v.target.value),className:"mt-1 w-full p-2 border dark:border-slate-600 rounded-md dark:bg-slate-700 dark:text-white",autoFocus:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Điện thoại"}),i.jsx("input",{type:"text",value:f,onChange:v=>m(v.target.value),className:"mt-1 w-full p-2 border dark:border-slate-600 rounded-md dark:bg-slate-700 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Phân loại"}),i.jsx("div",{className:"flex flex-wrap gap-4 mt-2 text-slate-700 dark:text-slate-300",children:["Khách hàng","Nhà cung cấp","Đối tác sửa chữa","Đối tác tài chính"].map(v=>i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"radio",name:"contactType",value:v,checked:x===v,onChange:()=>g(v),className:"mr-2"}),v]},v))})]})]}),i.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-800/50 border-t dark:border-slate-700 flex justify-end",children:i.jsx("button",{onClick:p,className:"bg-orange-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-orange-600",children:"Lưu"})})]})}):null},UA=({isOpen:t,onClose:e,onSave:s,type:a,contacts:c,paymentSources:f,onAddNewContact:m,onConfigureSources:x})=>{const[g,p]=N.useState(""),[v,b]=N.useState(null),[k,w]=N.useState(!1),[M,A]=N.useState(""),[_,j]=N.useState(""),[D,I]=N.useState(!0),[q,ee]=N.useState(new Date().toISOString().slice(0,16)),[se,F]=N.useState("");N.useEffect(()=>{if(t){p(""),b(null),w(!1),A(""),j(""),I(!0);const O=f.find(ue=>ue.isDefault)||f[0];F((O==null?void 0:O.id)||"")}},[t,f]);const oe=()=>{if(!v||!M||!se){alert("Vui lòng điền đầy đủ thông tin bắt buộc.");return}s({type:a,contact:v,amount:Number(M),notes:_,paymentSourceId:se,date:D?new Date().toISOString():new Date(q).toISOString()})},$=c.filter(O=>O.name.toLowerCase().includes(g.toLowerCase())||O.phone&&O.phone.includes(g));if(!t)return null;const Z=a==="income"?"Tạo phiếu thu (Tôi nhận tiền)":"Tạo phiếu chi (Tôi đưa tiền)",Q=a==="income"?"Tôi nhận tiền của ai?":"Tôi đưa tiền cho ai?";return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-xl max-h-[95vh] flex flex-col",children:[i.jsxs("div",{className:"p-4 border-b dark:border-slate-700 flex justify-between items-center",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:Z}),i.jsx("button",{onClick:e,children:i.jsx(on,{className:"w-6 h-6 text-slate-500 dark:text-slate-300"})})]}),i.jsxs("div",{className:"p-6 space-y-4 overflow-y-auto",children:[i.jsxs("div",{className:"relative",children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:[Q," ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsxs("div",{className:"flex items-center mt-1",children:[i.jsx("input",{type:"text",placeholder:"Nhập từ khoá cần tìm",value:g,onChange:O=>{p(O.target.value),b(null),w(!0)},onFocus:()=>w(!0),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-l-md dark:bg-slate-700 dark:text-white"}),i.jsx("button",{onClick:m,className:"p-2 border-t border-b border-r rounded-r-md h-[42px] bg-slate-50 dark:bg-slate-600 dark:border-slate-600 hover:bg-slate-100 dark:hover:bg-slate-500",children:i.jsx(yt,{})})]}),k&&i.jsx("div",{className:"absolute z-10 w-full bg-white dark:bg-slate-700 border dark:border-slate-600 rounded-md mt-1 shadow-lg max-h-48 overflow-y-auto",children:$.map(O=>i.jsxs("div",{onClick:()=>{b(O),p(O.name),w(!1)},className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer text-sm text-slate-800 dark:text-slate-200",children:[O.name," ",O.phone&&i.jsxs("span",{className:"text-slate-500 dark:text-slate-400",children:["- ",O.phone]})]},O.id))}),v&&i.jsx("div",{className:"mt-2 p-2 bg-sky-50 dark:bg-sky-900/50 border border-sky-200 dark:border-sky-700 rounded-md text-sky-800 dark:text-sky-300 font-semibold",children:v.name})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Số tiền thanh toán"}),i.jsx("input",{type:"number",placeholder:"0",value:M,onChange:O=>A(Number(O.target.value)),className:"mt-1 w-full p-2 border dark:border-slate-600 rounded-md dark:bg-slate-700 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Nội dung ghi chú"}),i.jsx("textarea",{rows:3,value:_,onChange:O=>j(O.target.value),className:"mt-1 w-full p-2 border dark:border-slate-600 rounded-md dark:bg-slate-700 dark:text-white"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Hình thức thanh toán"}),i.jsxs("button",{onClick:x,className:"text-xs text-orange-600 dark:text-orange-400 hover:underline flex items-center",children:[i.jsx(Pc,{className:"w-4 h-4 mr-1"})," Thiết lập nguồn tiền"]})]}),i.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:f.map(O=>i.jsxs("button",{onClick:()=>F(O.id),className:`p-3 border rounded-lg text-left ${se===O.id?"border-sky-500 bg-sky-50 dark:bg-sky-900/50 ring-2 ring-sky-300":"border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700"}`,children:[i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:O.name}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:Ba(O.balance)})]},O.id))})]}),i.jsxs("div",{className:"text-slate-700 dark:text-slate-300",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Thời gian thanh toán"}),i.jsxs("div",{className:"flex gap-4 mt-2",children:[i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"radio",checked:D,onChange:()=>I(!0),className:"mr-1"})," Thời gian hiện tại"]}),i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"radio",checked:!D,onChange:()=>I(!1),className:"mr-1"})," Tùy chỉnh"]})]}),!D&&i.jsx("input",{type:"datetime-local",value:q,onChange:O=>ee(O.target.value),className:"mt-2 p-2 border dark:border-slate-600 rounded-md w-full sm:w-auto dark:bg-slate-700 dark:text-white"}),D&&i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2 p-2 border dark:border-slate-600 rounded-md bg-slate-50 dark:bg-slate-700 inline-block",children:new Date().toLocaleString("vi-VN")})]})]}),i.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-800/50 border-t dark:border-slate-700 flex justify-end",children:i.jsx("button",{onClick:oe,className:"bg-orange-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-orange-600",children:"LƯU"})})]})})},Ci=20,LA=({cashTransactions:t,setCashTransactions:e,paymentSources:s,setPaymentSources:a,customers:c,suppliers:f,setCustomers:m,setSuppliers:x,currentBranchId:g})=>{const[p,v]=N.useState({type:null,isOpen:!1}),[b,k]=N.useState(!1),[w,M]=N.useState(!1),[A,_]=N.useState(1),j=new Date,D=new Date(j);D.setDate(j.getDate()-30);const[I,q]=N.useState(D.toISOString().split("T")[0]),[ee,se]=N.useState(j.toISOString().split("T")[0]);N.useEffect(()=>{_(1)},[I,ee]);const F=N.useMemo(()=>{const T=[];return c.forEach(U=>T.push({id:U.id,name:U.name,phone:U.phone})),f.forEach(U=>T.push({id:U.id,name:U.name,phone:U.phone})),T},[c,f]),oe=T=>{v({type:T,isOpen:!0})},$=()=>{v({type:null,isOpen:!1})},Z=T=>{if(T.type.includes("Nhà cung cấp")){const U={id:`SUP${Date.now()}`,...T,phone:T.phone||""};x(J=>[U,...J])}else{const U={id:`C${Date.now()}`,vehicle:"",licensePlate:"",loyaltyPoints:0,...T,phone:T.phone||""};m(J=>[U,...J])}},Q=T=>{const U={...T,id:`CT-${Date.now()}`,branchId:g};e(J=>[U,...J]),a(J=>J.map(G=>{if(G.id===U.paymentSourceId){const de=U.type==="income"?G.balance+U.amount:G.balance-U.amount;return{...G,balance:de}}return G})),$()},O=(T,U)=>{q(T.toISOString().split("T")[0]),se(U.toISOString().split("T")[0])},ue=()=>{const T=new Date;O(T,T)},me=()=>{const T=new Date,U=T.getDate()-T.getDay()+(T.getDay()===0?-6:1),J=new Date(T.setDate(U)),G=new Date(J);G.setDate(J.getDate()+6),O(J,G)},Te=()=>{const T=new Date;O(new Date(T.getFullYear(),T.getMonth(),1),new Date(T.getFullYear(),T.getMonth()+1,0))},E=()=>{const T=new Date;O(new Date(T.getFullYear(),0,1),new Date(T.getFullYear(),11,31))},X=N.useMemo(()=>{if(!I||!ee)return[...t].sort((J,G)=>new Date(G.date).getTime()-new Date(J.date).getTime());const T=new Date(`${I}T00:00:00`),U=new Date(`${ee}T23:59:59`);return t.filter(J=>{const G=new Date(J.date);return G>=T&&G<=U}).sort((J,G)=>new Date(G.date).getTime()-new Date(J.date).getTime())},[t,I,ee]),re=N.useMemo(()=>{const T=(A-1)*Ci;return X.slice(T,T+Ci)},[X,A]),ie=Math.ceil(X.length/Ci),ce=N.useMemo(()=>X.reduce((T,U)=>(U.type==="income"?T.totalIncome+=U.amount:T.totalExpense+=U.amount,T),{totalIncome:0,totalExpense:0}),[X]);return i.jsxs("div",{className:"space-y-6",children:[p.isOpen&&p.type&&i.jsx(UA,{isOpen:!0,onClose:$,onSave:Q,type:p.type,contacts:F,paymentSources:s,onAddNewContact:()=>k(!0),onConfigureSources:()=>alert("Chức năng đang phát triển")}),i.jsx(jA,{isOpen:b,onClose:()=>k(!1),onSave:Z}),i.jsx("div",{className:"flex flex-col sm:flex-row justify-end sm:items-center gap-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("button",{onClick:()=>oe("expense"),className:"flex items-center gap-2 bg-red-100 text-red-700 font-semibold py-2 px-4 rounded-lg shadow-sm hover:bg-red-200 dark:bg-red-900/50 dark:text-red-300 dark:hover:bg-red-900/80",children:[i.jsx(s0,{className:"w-6 h-6"})," Tôi đã đưa"]}),i.jsxs("button",{onClick:()=>oe("income"),className:"flex items-center gap-2 bg-green-100 text-green-700 font-semibold py-2 px-4 rounded-lg shadow-sm hover:bg-green-200 dark:bg-green-900/50 dark:text-green-300 dark:hover:bg-green-900/80",children:[i.jsx(a0,{className:"w-6 h-6"})," Tôi đã nhận"]})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-xl shadow-sm flex items-center border dark:border-slate-700",children:[i.jsx("div",{className:"p-4 rounded-full bg-green-100 dark:bg-green-900/50",children:i.jsx(a0,{className:"w-7 h-7 text-green-600 dark:text-green-400"})}),i.jsxs("div",{className:"ml-4",children:[i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Tổng thu trong kỳ"}),i.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:Ba(ce.totalIncome)})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-xl shadow-sm flex items-center border dark:border-slate-700",children:[i.jsx("div",{className:"p-4 rounded-full bg-red-100 dark:bg-red-900/50",children:i.jsx(s0,{className:"w-7 h-7 text-red-600 dark:text-red-400"})}),i.jsxs("div",{className:"ml-4",children:[i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Tổng chi trong kỳ"}),i.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:Ba(ce.totalExpense)})]})]})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border border-slate-200/60 dark:border-slate-700",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 items-end",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Từ ngày"}),i.jsx("input",{type:"date",value:I,onChange:T=>q(T.target.value),className:"mt-1 block w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm dark:bg-slate-700 dark:text-white [color-scheme:light] dark:[color-scheme:dark]"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Đến ngày"}),i.jsx("input",{type:"date",value:ee,onChange:T=>se(T.target.value),className:"mt-1 block w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm dark:bg-slate-700 dark:text-white [color-scheme:light] dark:[color-scheme:dark]"})]}),i.jsxs("div",{className:"lg:col-span-3 flex flex-wrap items-end gap-2",children:[i.jsx("button",{onClick:ue,className:"px-3 py-2 border dark:border-slate-600 rounded-md text-sm font-medium bg-slate-100 dark:bg-slate-700 dark:text-slate-200 hover:bg-slate-200 dark:hover:bg-slate-600",children:"Hôm nay"}),i.jsx("button",{onClick:me,className:"px-3 py-2 border dark:border-slate-600 rounded-md text-sm font-medium bg-slate-100 dark:bg-slate-700 dark:text-slate-200 hover:bg-slate-200 dark:hover:bg-slate-600",children:"Tuần này"}),i.jsx("button",{onClick:Te,className:"px-3 py-2 border dark:border-slate-600 rounded-md text-sm font-medium bg-slate-100 dark:bg-slate-700 dark:text-slate-200 hover:bg-slate-200 dark:hover:bg-slate-600",children:"Tháng này"}),i.jsx("button",{onClick:E,className:"px-3 py-2 border dark:border-slate-600 rounded-md text-sm font-medium bg-slate-100 dark:bg-slate-700 dark:text-slate-200 hover:bg-slate-200 dark:hover:bg-slate-600",children:"Năm nay"}),i.jsx("button",{onClick:()=>{q(""),se("")},className:"px-3 py-2 border dark:border-slate-600 rounded-md text-sm font-medium bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-red-600 dark:text-red-400",children:"Bỏ lọc"})]})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-slate-200/60 dark:border-slate-700 overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left",children:[i.jsx("thead",{className:"border-b dark:border-slate-700",children:i.jsxs("tr",{className:"bg-slate-100 dark:bg-slate-700/50",children:[i.jsx("th",{className:"p-3 font-semibold text-slate-700 dark:text-slate-300",children:"Thời gian"}),i.jsx("th",{className:"p-3 font-semibold text-slate-700 dark:text-slate-300",children:"Đối tác"}),i.jsx("th",{className:"p-3 font-semibold text-slate-700 dark:text-slate-300",children:"Nội dung"}),i.jsx("th",{className:"p-3 font-semibold text-slate-700 dark:text-slate-300 text-right",children:"Đã thu"}),i.jsx("th",{className:"p-3 font-semibold text-slate-700 dark:text-slate-300 text-right",children:"Đã chi"}),i.jsx("th",{className:"p-3 font-semibold text-slate-700 dark:text-slate-300",children:"Nguồn tiền"})]})}),i.jsx("tbody",{children:re.length>0?re.map(T=>{const U=s.find(J=>J.id===T.paymentSourceId);return i.jsxs("tr",{className:"border-b dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700/50 text-sm",children:[i.jsx("td",{className:"p-3 text-slate-700 dark:text-slate-300",children:new Date(T.date).toLocaleString("vi-VN")}),i.jsx("td",{className:"p-3 font-medium text-slate-800 dark:text-slate-200",children:T.contact.name}),i.jsx("td",{className:"p-3 text-slate-600 dark:text-slate-400",children:T.notes}),i.jsx("td",{className:"p-3 text-right font-semibold text-green-600 dark:text-green-400",children:T.type==="income"?Ba(T.amount):""}),i.jsx("td",{className:"p-3 text-right font-semibold text-red-600 dark:text-red-400",children:T.type==="expense"?Ba(T.amount):""}),i.jsx("td",{className:"p-3 text-slate-700 dark:text-slate-300",children:(U==null?void 0:U.name)||"N/A"})]},T.id)}):i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"text-center p-16 text-slate-500 dark:text-slate-400",children:"Không có giao dịch nào trong khoảng thời gian đã chọn."})})})]})}),X.length>0&&i.jsx(kl,{currentPage:A,totalPages:ie,onPageChange:_,itemsPerPage:Ci,totalItems:X.length})]})},PA=[{id:"S001",creationDate:"2024-07-30",customerName:"Nguyễn Văn A",customerPhone:"0901234567",vehicleModel:"Honda Air Blade",licensePlate:"59-A1 123.45",issueDescription:"Bảo dưỡng định kỳ, thay nhớt",technicianName:"Trần Văn An",status:"Trả máy",total:58e4,branchId:"main",laborCost:13e4,processingType:"Sửa trực tiếp",customerQuote:58e4,partsUsed:[{partId:"P002",partName:"Nhớt Motul 300V",sku:"MOTUL-300V-1L",quantity:1,price:45e4}],notes:"Khách yêu cầu kiểm tra thêm hệ thống điện và sạc.",odometerReading:1e4,serviceTypes:["Bảo dưỡng định kỳ","Thay nhớt"]},{id:"S002",creationDate:"2024-07-29",customerName:"Trần Thị B",customerPhone:"0987654321",vehicleModel:"Yamaha Exciter",licensePlate:"72-B2 678.90",issueDescription:"Phanh sau không ăn, có tiếng kêu",technicianName:"Lê Minh Bảo",status:"Đang sửa",total:12e4,branchId:"main",laborCost:0,processingType:"Sửa trực tiếp",customerQuote:37e4,partsUsed:[{partId:"P004",partName:"Má phanh Bendix",sku:"BENDIX-MD27",quantity:1,price:12e4}],notes:"Cần thay má phanh gấp.",odometerReading:25e3,serviceTypes:["Sửa chữa chung"]},{id:"S003",creationDate:"2024-08-15",customerName:"Nguyễn Văn A",customerPhone:"0901234567",vehicleModel:"Honda Air Blade",licensePlate:"59-A1 123.45",issueDescription:"Sửa đèn xi-nhan sau",technicianName:"Trần Văn An",status:"Trả máy",total:8e4,branchId:"main",laborCost:8e4,processingType:"Sửa trực tiếp",customerQuote:8e4,partsUsed:[],notes:"Đã thay bóng đèn mới.",odometerReading:11750,serviceTypes:["Sửa chữa chung"]}],VA=[{id:"P001",name:"Bugi NGK Iridium",sku:"NGK-CPR8EAIX-9",stock:{main:10,q2:5},price:8e4,sellingPrice:11e4,warrantyPeriod:"6 tháng"},{id:"P002",name:"Nhớt Motul 300V",sku:"MOTUL-300V-1L",stock:{main:5,q2:3},price:45e4,sellingPrice:52e4},{id:"P003",name:"Lốp Michelin City Grip 2",sku:"MCH-CG2-909014",stock:{main:4,q2:0},price:95e4,sellingPrice:11e5,warrantyPeriod:"12 tháng"},{id:"P004",name:"Má phanh Bendix",sku:"BENDIX-MD27",stock:{main:15,q2:7},price:12e4,sellingPrice:15e4,warrantyPeriod:"3 tháng"},{id:"P005",name:"Dung dịch súc rửa động cơ",sku:"LIQUIMOLY-2427",stock:{main:20,q2:10},price:15e4,sellingPrice:18e4,expiryDate:"2024-08-25"},{id:"P006",name:"Lọc gió K&N",sku:"KN-YA-1208",stock:{main:8,q2:4},price:75e4,sellingPrice:85e4,expiryDate:"2026-01-01"}],qA=[{id:"C001",name:"Nguyễn Văn A",phone:"0901234567",vehicle:"Honda Air Blade 2022",licensePlate:"59-A1 123.45",loyaltyPoints:150,lastServiceOdometer:1e4,lastServiceDate:"2024-07-30"},{id:"C002",name:"Trần Thị B",phone:"0987654321",vehicle:"Yamaha Exciter 155",licensePlate:"72-B2 678.90",loyaltyPoints:320},{id:"C003",name:"Lê Hoàng Long",phone:"0912345678",vehicle:"Honda SH 150i",licensePlate:"29-C1 555.55",loyaltyPoints:80}],HA=[{id:"T001",type:"Nhập kho",partId:"P002",partName:"Nhớt Motul 300V",quantity:10,date:"2024-07-29",notes:"Nhập từ nhà cung cấp A",unitPrice:45e4,totalPrice:45e5,branchId:"main"},{id:"T002",type:"Xuất kho",partId:"P001",partName:"Bugi NGK Iridium",quantity:2,date:"2024-07-28",notes:"Sử dụng cho đơn WO002",unitPrice:11e4,totalPrice:22e4,branchId:"main"},{id:"T003",type:"Xuất kho",partId:"P004",partName:"Má phanh Bendix",quantity:1,date:"2024-07-28",notes:"Bán lẻ cho khách vãng lai",unitPrice:15e4,totalPrice:15e4,branchId:"main",saleId:"SALE-123"},{id:"T004",type:"Nhập kho",partId:"P003",partName:"Lốp Michelin City Grip 2",quantity:5,date:"2024-07-27",notes:"Nhập từ nhà cung cấp B",unitPrice:95e4,totalPrice:475e4,branchId:"main"},{id:"T005",type:"Nhập kho",partId:"P001",partName:"Bugi NGK Iridium",quantity:20,date:"2024-03-26",notes:"Nhập hàng định kỳ",unitPrice:8e4,totalPrice:16e5,branchId:"q2"}],BA=[{id:"U001",name:"Nguyễn Xuân Nhạn",loginPhone:"chucuahang",password:"password123",departmentIds:["dept_admin"],status:"active",email:"xuan.nhan@example.com",creationDate:"2023-01-15"},{id:"U002",name:"Lê Minh Kỹ Thuật",loginPhone:"kythuat01",password:"password123",departmentIds:["dept_tech"],status:"active",email:"minh.kt@example.com",creationDate:"2023-02-20"},{id:"U003",name:"Trần Thị Bán Hàng",loginPhone:"banhang01",password:"password123",departmentIds:[],status:"active",email:"thi.bh@example.com",creationDate:"2023-03-10"}],GA=[{id:"dept_tech",name:"Kỹ thuật viên",description:"Thợ sửa chữa",permissions:{service:{level:"all",details:{}},inventory:{level:"restricted",details:{view:!0,add:!1,edit:!1,delete:!1}},sales:{level:"none",details:{}},userManager:!1}},{id:"dept_admin",name:"Quản trị",description:"Có thể xem được tất cả hoạt động của cửa hàng",permissions:{service:{level:"all",details:{}},inventory:{level:"all",details:{}},sales:{level:"all",details:{}},userManager:!0}}],zA={name:"MotoCare Pro",address:"123 Đường ABC, Quận 1, TP. HCM",phone:"0987.654.321",bankName:"Vietcombank",bankAccountNumber:"1234567890",bankAccountHolder:"MOTO CARE PRO",branches:[{id:"main",name:"Chi nhánh Chính"},{id:"q2",name:"Chi nhánh Quận 2"}]},FA=[{id:"SUP001",name:"Nguyễn Xuân Nhạn",phone:"0915449550"},{id:"SUP002",name:"Cty TNHH TM-DV Phương Thuỷ",phone:"0907855077"},{id:"SUP003",name:"Cty TM Song Đại Long",phone:"0287777369"},{id:"SUP004",name:"Kho sỉ Thập Nhất Phong",phone:"0988123456"}],OA=[{id:"cash",name:"Tiền mặt",balance:14373238,isDefault:!0},{id:"bank",name:"Tài khoản ngân hàng",balance:5e7}],JA=[];function Vt(t,e){const[s,a]=N.useState(()=>{try{const c=window.localStorage.getItem(t);if(c)return JSON.parse(c)}catch(c){console.error(`Error reading localStorage key “${t}”:`,c)}return e instanceof Function?e():e});return N.useEffect(()=>{try{window.localStorage.setItem(t,JSON.stringify(s))}catch(c){console.error(`Error writing to localStorage key “${t}”:`,c)}},[t,s]),[s,a]}const YA=()=>{const[t,e]=Vt("motocare_workOrders",PA),[s,a]=Vt("motocare_parts",VA),[c,f]=Vt("motocare_customers",qA),[m,x]=Vt("motocare_transactions",HA),[g,p]=Vt("motocare_users",BA),[v,b]=Vt("motocare_departments",GA),[k,w]=Vt("motocare_storeSettings",zA),[M,A]=Vt("motocare_suppliers",FA),[_,j]=Vt("motocare_paymentSources",OA),[D,I]=Vt("motocare_cashTransactions",JA),[q,ee]=Vt("motocare_theme","system"),[se,F]=N.useState([]),[oe,$]=Vt("motocare_isAuthenticated",!1),[Z,Q]=Vt("motocare_currentUserId",null),[O,ue]=N.useState(!1),[me,Te]=Vt("motocare_currentBranchId","main"),E=g.find(ce=>ce.id===Z);N.useEffect(()=>{const ce=window.document.documentElement,T=q==="dark"||q==="system"&&window.matchMedia("(prefers-color-scheme: dark)").matches;ce.classList.toggle("dark",T);const U=window.matchMedia("(prefers-color-scheme: dark)"),J=()=>{q==="system"&&ce.classList.toggle("dark",U.matches)};return U.addEventListener("change",J),()=>U.removeEventListener("change",J)},[q]),N.useEffect(()=>{var ce;k.branches.some(T=>T.id===me)||Te(((ce=k.branches[0])==null?void 0:ce.id)||"main")},[me,k.branches,Te]);const X=(ce,T)=>{const U=g.find(J=>(J.loginPhone===ce||J.name===ce)&&J.password===T&&J.status==="active");return U?(Q(U.id),$(!0),!0):!1},re=()=>{$(!1),Q(null)},ie=ce=>{ce&&Q(ce.id)};return N.useEffect(()=>{oe&&!E&&re()},[oe,E]),!oe||!E?i.jsx(MA,{onLogin:X}):i.jsx(hb,{children:i.jsxs("div",{className:"flex h-screen bg-slate-50 dark:bg-slate-900 font-sans print:hidden",children:[i.jsx(zb,{currentUser:E,users:g,departments:v,setCurrentUser:ie,storeSettings:k,setStoreSettings:w,isOpen:O,setIsOpen:ue,onLogout:re,currentBranchId:me,setCurrentBranchId:Te,theme:q,setTheme:ee}),O&&i.jsx("div",{onClick:()=>ue(!1),className:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden","aria-hidden":"true"}),i.jsxs("div",{className:"flex flex-col flex-1 w-full min-w-0",children:[i.jsx(EA,{onMenuClick:()=>ue(!0)}),i.jsx("main",{className:"flex-1 overflow-y-auto p-6 lg:p-8",children:i.jsxs(Ov,{children:[i.jsx(Jt,{path:"/",element:i.jsx(zv,{to:"/dashboard",replace:!0})}),i.jsx(Jt,{path:"/dashboard",element:i.jsx(Fb,{workOrders:t,customers:c,parts:s,currentBranchId:me})}),i.jsx(Jt,{path:"/services",element:i.jsx(Kb,{currentUser:E,workOrders:t,setWorkOrders:e,parts:s,storeSettings:k,currentBranchId:me,customers:c,setCustomers:f})}),i.jsx(Jt,{path:"/sales",element:i.jsx(cA,{currentUser:E,workOrders:t,transactions:m,parts:s,setParts:a,setTransactions:x,cartItems:se,setCartItems:F,storeSettings:k,currentBranchId:me,customers:c,setCustomers:f})}),i.jsx(Jt,{path:"/inventory",element:i.jsx(ek,{currentUser:E,parts:s,setParts:a,transactions:m,setTransactions:x,currentBranchId:me,storeSettings:k})}),i.jsx(Jt,{path:"/inventory/goods-receipt/new",element:i.jsx(IA,{parts:s,setParts:a,transactions:m,setTransactions:x,suppliers:M,setSuppliers:A,storeSettings:k,currentBranchId:me})}),i.jsx(Jt,{path:"/customers",element:i.jsx(nk,{customers:c,setCustomers:f})}),i.jsx(Jt,{path:"/cashflow",element:i.jsx(LA,{cashTransactions:D,setCashTransactions:I,paymentSources:_,setPaymentSources:j,customers:c,setCustomers:f,suppliers:M,setSuppliers:A,currentBranchId:me})}),i.jsx(Jt,{path:"/ai-assistant",element:i.jsx(iA,{})}),i.jsx(Jt,{path:"/users",element:i.jsx(kA,{currentUser:E,users:g,setUsers:p,departments:v,setDepartments:b})}),i.jsx(Jt,{path:"/reports/revenue",element:i.jsx(NA,{workOrders:t,transactions:m,parts:s,currentBranchId:me})}),i.jsx(Jt,{path:"/reports/inventory",element:i.jsx(SA,{parts:s,transactions:m,currentBranchId:me,storeSettings:k})})]})})]})]})})},Rg=document.getElementById("root");if(!Rg)throw new Error("Could not find root element to mount to");const KA=ev.createRoot(Rg);KA.render(i.jsx(On.StrictMode,{children:i.jsx(YA,{})}));
